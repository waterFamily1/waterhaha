(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{1079:function(e,t,a){"use strict";var n=a(761);a.n(n).a},1080:function(e,t,a){(t=a(10)(!1)).push([e.i,".my-label-content[data-v-164c4fcb] {\n  display: flex;\n  padding: 5px 10px;\n}\n.my-label-content > div[data-v-164c4fcb] {\n  width: 50%;\n  padding: 10px;\n}\n.my-label-content > div[data-v-164c4fcb]:first-child {\n  border-right: 2px solid #ededed;\n}\n.my-label-content > div h3[data-v-164c4fcb] {\n  margin-bottom: 15px;\n}\n.my-label-content li[data-v-164c4fcb] {\n  position: relative;\n  z-index: 1;\n  float: left;\n  padding: 0 10px;\n  margin: 5px;\n  height: 26px;\n  line-height: 26px;\n  list-style: none;\n  color: #8190a5;\n  border-radius: 4px;\n  background-color: #eef1f7;\n  cursor: pointer;\n}\n.my-label-content li:hover .label-clear[data-v-164c4fcb] {\n  display: block;\n}\n.my-label-content .label-clear[data-v-164c4fcb] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  color: #8190a5;\n  font-size: 18px;\n  transform: translate(40%, -40%);\n  display: none;\n}\n.label-select-content[data-v-164c4fcb] {\n  position: relative;\n}\n.label-select-content .label-select[data-v-164c4fcb] {\n  position: absolute;\n  top: 66px;\n  right: 0;\n  left: 0px;\n  padding: 5px 10px;\n  z-index: 99;\n  background: #fff;\n  border: 1px solid #ededed;\n  border-radius: 4px;\n}\n",""]),e.exports=t},1131:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"personal-content c-main-border"},[a("Tabs",{attrs:{animated:!1},model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[a("TabPane",{attrs:{label:"我的下载",name:"download"}},[a("c-table",{ref:"downTable",attrs:{columns:e.downColumns,url:e.urls.durl}})],1),e._v(" "),a("TabPane",{attrs:{label:"我的上传",name:"upload"}},[a("c-table",{ref:"uploadTable",attrs:{columns:e.uploadColumns,url:e.urls.uurl}})],1),e._v(" "),a("TabPane",{attrs:{label:"我的收藏",name:"collection"}},[a("c-table",{ref:"collectTable",attrs:{columns:e.collectionColumns,url:e.urls.curl}})],1),e._v(" "),a("TabPane",{attrs:{label:e.recommendLabel,name:"recommend"}},[a("c-table",{ref:"recommendTable",attrs:{columns:e.recommendColumns,url:e.urls.rurl}})],1),e._v(" "),a("TabPane",{attrs:{label:"我的标签",name:"label"}},[a("div",{staticClass:"my-label-content"},[a("div",[a("h3",[e._v("已选标签")]),e._v(" "),a("ul",{staticClass:"clearfix"},e._l(e.myLabels,(function(t,n){return a("li",{key:n},[e._v("\n                            "+e._s(t)+"\n                            "),a("Icon",{staticClass:"label-clear",attrs:{type:"close-circled"},on:{click:function(a){return e.labelDel(t)}}})],1)})),0)]),e._v(" "),a("div",[a("h3",[e._v("更多标签")]),e._v(" "),a("label-select",{ref:"labelSelectMore",attrs:{selects:e.myLabels,limit:!1,min:3},on:{"on-complete":e.labelComplete}})],1)])])],1),e._v(" "),a("recommend",{attrs:{item:e.recommendItem},model:{value:e.recommendModel,callback:function(t){e.recommendModel=t},expression:"recommendModel"}}),e._v(" "),a("Modal",{attrs:{title:"文档编辑"},model:{value:e.editModel,callback:function(t){e.editModel=t},expression:"editModel"}},[a("Form",{ref:"editForm",attrs:{model:e.editParams,rules:e.editRules}},[a("FormItem",{attrs:{label:"文档名称",prop:"name"}},[a("Input",{model:{value:e.editParams.name,callback:function(t){e.$set(e.editParams,"name",t)},expression:"editParams.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"文档标签",prop:"labelName"}},[a("div",{staticClass:"label-select-content"},[a("Input",{staticStyle:{width:"488px"},attrs:{readonly:""},on:{"on-focus":function(t){e.editLabelShow=!0}},model:{value:e.editParams.labelName,callback:function(t){e.$set(e.editParams,"labelName",t)},expression:"editParams.labelName"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editLabelShow,expression:"editLabelShow"}],staticClass:"label-select"},[a("label-select",{ref:"editLabelSelect",on:{"on-complete":e.editLabelComplete}})],1)],1)]),e._v(" "),a("FormItem",{attrs:{label:"文档摘要",prop:"summary"}},[a("Input",{attrs:{type:"textarea",placeholder:""},model:{value:e.editParams.summary,callback:function(t){e.$set(e.editParams,"summary",t)},expression:"editParams.summary"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"default"},on:{click:e.editCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("确定")])],1)])],1)],1)};n._withStripped=!0;var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"c-left-border-blue"},[a("div",{staticClass:"c-search-main"},[a("div",{staticClass:"c-form-item"},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"文档名称或文档标签"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchParams.queryName,callback:function(t){e.$set(e.searchParams,"queryName",t)},expression:"searchParams.queryName"}}),e._v(" "),a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:e.search}},[e._v("搜索")])],1)])]),e._v(" "),a("div",{staticClass:"c-top-border-gray"},[a("Table",{attrs:{columns:e.columns,data:e.list,loading:e.loading,stripe:""}}),e._v(" "),a("Page",{staticClass:"table-page",attrs:{total:e.total,"page-size":e.searchParams.pageSize,current:e.searchParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}})],1)])};l._withStripped=!0;var o=a(11),r={name:"",props:{url:String,columns:Array},data:function(){return{total:0,loading:!1,searchParams:{pageSize:10,currentPage:1,queryName:""},list:[]}},methods:{search:function(){var e=this;this.$http.get(this.url,this.searchParams).then((function(t){e.total=t.total,e.list=t.items}))},pageChange:function(e){this.searchParams.currentPage=e,this.search()}},mounted:function(){this.search()},created:function(){o.a.initTableColumnTitle(this.columns)}},i=a(1),s=Object(i.a)(r,l,[],!1,null,"36202fa0",null);s.options.__file="src/views/knowledge/components/table.vue";var c=s.exports,d=a(606),m=a(145),u=a(107),p=a(605),h=a(554),b=a(38),f=a.n(b),g={name:"",components:{cTable:c,labelSelect:d.a,dropdownTree:m.a,recommend:p.a},data:function(){var e=this,t=[{title:"文档名称",key:"name",render:function(e,t){return e("span",{attrs:{title:t.row.name+"."+t.row.type}},t.row.name+"."+t.row.type)}},{title:"文档标签",key:"labelName"},{title:"文档大小",key:"size",width:110,render:function(e,t){return e("span",(t.row.size/1024/1024).toFixed(2)+"M")}}];return{orgTreeApi:u.a.getOrgTreeData,tabActive:this.$route.params.type||"download",urls:{durl:h.a.mydownload,uurl:h.a.myupload,curl:h.a.myColl,rurl:h.a.recommendme},recommendModel:!1,recommendItem:{},editModel:!1,editLabelShow:!1,editParams:{id:"",srcName:"",name:"",summary:"",labelName:""},editRules:{name:[{required:!0,message:"请填写名称",trigger:"change"},{max:30,message:"不能超过30个字符",trigger:"change"}],labelName:{required:!0,message:"请选择标签",trigger:"change"},summary:{max:100,message:"不能超过100字符",trigger:"change"}},myLabels:[],recommendLabel:"",downColumns:[].concat(t,[{title:"上传人员",key:"createUserName",width:120},{title:"下载时间",key:"createDate",width:120,render:function(e,t){return o.a.tableDatetime(e,t.row.createDate)}},{title:"操作",key:"action",width:150,render:function(t,a){return t("div",[o.a.tableBtnStyle(t,e.download.bind(e,a.row),"下载"),a.row.collect?o.a.tableBtnStyle(t,e.unCollect.bind(e,a.row),"取消收藏"):o.a.tableBtnStyle(t,e.collect.bind(e,a.row),"收藏"),o.a.tableBtnStyle(t,e.recommend.bind(e,a.row),"推荐")])}}]),uploadColumns:[].concat(t,[{title:"下载次数",key:"downloadCount",width:120},{title:"推荐次数",key:"recommendCount",width:120},{title:"上传时间",key:"createDate",width:120,render:function(e,t){return o.a.tableDatetime(e,t.row.createDate)}},{title:"操作",key:"action",width:150,render:function(t,a){return t("div",[o.a.tableBtnStyle(t,e.eidt.bind(e,a.row),"编辑"),o.a.tableBtnStyle(t,e.del.bind(e,a.row),"删除")])}}]),collectionColumns:[].concat(t,[{title:"上传人员",key:"createUserName",width:120},{title:"收藏时间",key:"createDate",width:120,render:function(e,t){return o.a.tableDatetime(e,t.row.createDate)}},{title:"操作",key:"action",width:150,render:function(t,a){return t("div",[o.a.tableBtnStyle(t,e.download.bind(e,a.row),"下载"),o.a.tableBtnStyle(t,e.unCollect.bind(e,a.row),"取消收藏"),o.a.tableBtnStyle(t,e.recommend.bind(e,a.row),"推荐")])}}]),recommendColumns:[].concat(t,[{title:"推荐人",key:"recommendUserName",width:120},{title:"推荐时间",key:"createDate",width:120,render:function(e,t){return o.a.tableDatetime(e,t.row.createDate)}},{title:"操作",key:"action",width:150,render:function(t,a){return t("div",[o.a.tableBtnStyle(t,e.download.bind(e,a.row),"下载"),a.row.collect?o.a.tableBtnStyle(t,e.unCollect.bind(e,a.row),"取消收藏"):o.a.tableBtnStyle(t,e.collect.bind(e,a.row),"收藏")])}}])}},watch:{tabActive:function(e){"recommend"===e&&(this.recommendLabel="推荐我的")}},methods:{search:function(){this.$refs[{download:"downTable",upload:"uploadTable",collection:"collectTable",recommend:"recommendTable"}[this.tabActive]].search()},download:function(e){o.a.download(h.a.download,{ids:e.id})},collect:function(e){var t=this;this.$http.get(h.a.collect,{id:e.id,type:1}).then((function(e){e.count&&(t.$Notice.success({title:"收藏成功"}),t.search())}))},unCollect:function(e){var t=this;this.$http.get(h.a.collect,{id:e.id,type:2}).then((function(e){e.count&&(t.$Notice.success({title:"取消收藏成功"}),t.search())}))},recommend:function(e){this.recommendModel=!0,this.recommendItem=e},eidt:function(e){this.$refs.editForm.resetFields(),this.$refs.editLabelSelect.resetSelect(e.labelName.split(",")),this.editParams=Object.assign({},e),this.editModel=!0},del:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"<p>是否确定删除？</p>",onOk:function(){t.$http.del(h.a.delDoc,{ids:e.id}).then((function(e){e.count&&(t.$Notice.success({title:"删除成功"}),t.search())}))},onCancel:function(){}})},editLabelComplete:function(e){this.editParams.labelName=e.names,this.editLabelShow=!1},editCancel:function(){this.editModel=!1},editSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$http.put(h.a.updateDoc,e.editParams).then((function(t){t.count&&(e.$Notice.success({title:"编辑成功"}),e.editModel=!1,e.search())}))}))},labelComplete:function(e){var t=this,a=e.names.split(","),n=a.filter((function(e){return!t.myLabels.includes(e)})),l=this.myLabels.filter((function(e){return!a.includes(e)})),o=[];n.length&&o.push(this.$http.post(h.a.mylabels,n)),l.length&&o.push(this.$http.del(h.a.mylabels,{userLabel:l.join(",")})),f.a.all(o).then(f.a.spread((function(e,n){(e&&0!==e.count||!e)&&(n&&0!==n.count||!n)&&(t.$Notice.success({title:"编辑成功"}),t.myLabels=a)})))},labelDel:function(e){var t=this;this.myLabels.length>3?this.$http.del(h.a.mylabels,{userLabel:e}).then((function(a){a.count&&(t.$Notice.success({title:"删除成功"}),t.myLabels.splice(t.myLabels.indexOf(e),1),t.$refs.labelSelectMore.resetSelect(t.myLabels))})):this.$Notice.warning({title:"标签不能小于3个"})},getLabels:function(){var e=this;this.$http.get(h.a.mylabels).then((function(t){var a=t.map((function(e){return e.labelName}));e.myLabels=a}))},getLabelRed:function(){var e=this;this.$http.get(h.a.getmine).then((function(t){e.recommendLabel=function(e){return e("div",[e("span","推荐我的"),e("Badge",{props:{dot:!0,count:+t.recommendMark},style:{transform:"translate(4px, -10px)"}})])}}))}},created:function(){this.getLabels(),this.getLabelRed()}},v=(a(1079),Object(i.a)(g,n,[],!1,null,"164c4fcb",null));v.options.__file="src/views/knowledge/personal.vue";t.default=v.exports},519:function(e,t,a){"use strict";function n(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function l(e,t){if(e){for(var a=e.className,l=(t||"").split(" "),o=0,r=l.length;o<r;o++){var i=l[o];i&&(e.classList?e.classList.add(i):n(e,i)||(a+=" "+i))}e.classList||(e.className=a)}}function o(e,t){if(e&&t){for(var a=t.split(" "),l=" "+e.className+" ",o=0,r=a.length;o<r;o++){var i=a[o];i&&(e.classList?e.classList.remove(i):n(e,i)&&(l=l.replace(" "+i+" "," ")))}e.classList||(e.className=trim(l))}}var r={beforeEnter:function(e){l(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},enter:function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},afterEnter:function(e){o(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},beforeLeave:function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},leave:function(e){0!==e.scrollHeight&&(l(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave:function(e){o(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}};t.a={name:"CollapseTransition",functional:!0,render:function(e,t){var a=t.children;return e("transition",{on:r},a)}}},554:function(e,t,a){"use strict";var n={getLabelTree:"/knowledge/api/labels/tree",getLabels:"/knowledge/api/labels",addLabel:"/knowledge/api/labels",updateLabel:"/knowledge/api/labels",delLabel:"/knowledge/api/labels/",getDirTree:"/knowledge/api/directorys/tree",getDirs:"/knowledge/api/directorys",addDir:"/knowledge/api/directorys",updateDir:"/knowledge/api/directorys",delDir:"/knowledge/api/directorys/",getDocs:"/knowledge/api/documents",uploadDoc:"/knowledge/api/documents",updateDoc:"/knowledge/api/documents",delDoc:"/knowledge/api/documents",collect:"/knowledge/api/documents/collect",download:a(22).a+"/knowledge/api/documents/download",move:"/knowledge/api/documents/move",recommend:"/knowledge/api/documents/recommend",myColl:"/knowledge/api/personal/collection",mydownload:"/knowledge/api/personal/download",recommendme:"/knowledge/api/personal/recommend",myupload:"/knowledge/api/personal/upload",mylabels:"/knowledge/api/user-labels",getDocList:"/knowledge/api/home/documents",getmine:"/knowledge/api/home/mine",statistics:"/knowledge/api/home/statistics"};t.a=n},567:function(e,t,a){var n=a(602);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("36c2fca5",n,!1,{})},601:function(e,t,a){"use strict";var n=a(567);a.n(n).a},602:function(e,t,a){var n=a(10),l=a(24),o=a(603),r=a(604);t=n(!1);var i=l(o),s=l(r);t.push([e.i,'.label-select-box[data-v-3cef2893] {\n  max-height: 500px;\n  overflow-y: auto;\n}\n.label-select-box .class-title[data-v-3cef2893] {\n  position: relative;\n}\n.label-select-box .class-title h4[data-v-3cef2893] {\n  color: #4b7efe;\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  font-weight: 300;\n}\n.label-select-box .class-title h4[data-v-3cef2893]:before {\n  content: "";\n  display: inline-block;\n  width: 3px;\n  height: 12px;\n  margin-right: 10px;\n  background-color: #4b7efe;\n  transform: translateY(1px);\n}\n.label-select-box .class-title i[data-v-3cef2893] {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  cursor: pointer;\n}\n.label-select-box .arrow[data-v-3cef2893] {\n  float: right;\n  width: 40px;\n  height: 40px;\n  background-size: 100% 100%;\n}\n.label-select-box .arrow-down[data-v-3cef2893] {\n  float: right;\n  width: 40px;\n  height: 40px;\n  background-size: 100% 100%;\n  background: url('+i+") center no-repeat;\n}\n.label-select-box .arrow-up[data-v-3cef2893] {\n  float: right;\n  width: 40px;\n  height: 40px;\n  background-size: 100% 100%;\n  background: url("+s+") center no-repeat;\n}\n.label-select-box li[data-v-3cef2893] {\n  position: relative;\n  z-index: 1;\n  float: left;\n  padding: 0 10px;\n  margin: 5px;\n  height: 26px;\n  line-height: 26px;\n  list-style: none;\n  color: #8190a5;\n  border-radius: 4px;\n  font-size: 10px;\n  background-color: #eef1f7;\n  cursor: pointer;\n}\n.label-select-box li.selected[data-v-3cef2893] {\n  color: #184fd8;\n  background-color: #e8effd;\n}\n.label-select-box .c-modal-footer-btns[data-v-3cef2893] {\n  margin-top: 20px;\n}\n",""]),e.exports=t},603:function(e,t,a){e.exports=a.p+"images/ada376e0fc40016463f7a3707cd5dd19.png"},604:function(e,t,a){e.exports=a.p+"images/c54c76bd66afa4f73253aba8298d97ab.png"},605:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{attrs:{title:"文档推荐","on-visible-change":"onVisibleChange"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"recommend-modal"},[a("Form",{ref:"recommendForm",attrs:{model:e.recommendParams,rules:e.recommendRules,"label-width":70}},[a("FormItem",{attrs:{label:"文档名称:"}},[e._v(e._s(e.item.name+"."+e.item.type))]),e._v(" "),a("FormItem",{attrs:{label:"推荐给:",prop:"orgId"}},[a("dropdown-tree",{staticStyle:{width:"200px"},attrs:{url:e.orgTreeApi},on:{"on-change":e.getUnderOrganizationUsers},model:{value:e.recommendOrg,callback:function(t){e.recommendOrg=t},expression:"recommendOrg"}})],1),e._v(" "),a("FormItem",[a("div",[a("Select",{attrs:{multiple:"",placeholder:"请选择角色"},model:{value:e.recommendParams.userId,callback:function(t){e.$set(e.recommendParams,"userId",t)},expression:"recommendParams.userId"}},e._l(e.recommendOperators,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)]),e._v(" "),a("FormItem",{attrs:{label:"附言:"}},[a("Input",{attrs:{type:"textarea",placeholder:""},model:{value:e.recommendParams.remark,callback:function(t){e.$set(e.recommendParams,"remark",t)},expression:"recommendParams.remark"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"default"},on:{click:e.recommendCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.recommendSubmit}},[e._v("确定")])],1)])])],1)};n._withStripped=!0;var l=a(107),o=a(16),r=a(554),i=a(145),s={name:"recommend",props:{value:Boolean,item:Object},components:{dropdownTree:i.a},data:function(){return{orgTreeApi:l.a.getOrgTreeData,recommendParams:{name:"",orgId:"",userId:"",remark:""},recommendRules:{orgId:{required:!0,message:"请选择组织",trigger:"change"}},recommendOrg:{id:"",title:"请选择组织"},recommendOperators:[]}},watch:{value:function(e){e?(this.recommendOrg={id:"",title:"请选择组织"},this.recommendParams.name="",this.recommendParams.userId="",this.recommendParams.remark="",this.$refs.recommendForm.resetFields()):this.recommendCancel()}},methods:{getUnderOrganizationUsers:function(e,t){var a=this;this.recommendParams.orgId=e.id,this.recommendParams.userId="",this.$http.get(o.a.getRecommendUsers,{visibleProcessFill:1===this.item.directoryType,orgIds:e.id,processId:this.item.processId,currentPage:1,pageSize:0}).then((function(e){e?(a.recommendOperators=e.items,t&&t()):a.recommendOperators=[]}))},recommendCancel:function(){this.$emit("input",!1)},recommendSubmit:function(){var e=this;this.$refs.recommendForm.validate((function(t){if(t){var a=e.recommendParams.userId;e.recommendParams.userId||(a=e.recommendOperators.map((function(e){return e.id}))),e.$http.put(r.a.recommend,{documentId:e.item.id,orgId:e.recommendParams.orgId,roleId:a.join(","),postscript:e.recommendParams.remark}).then((function(t){t.count&&(e.$Notice.success({title:"推荐成功",duration:2}),e.$emit("input",!1),e.$emit("complete",!0))}))}}))}}},c=a(1),d=Object(c.a)(s,n,[],!1,null,"1c1b308e",null);d.options.__file="src/views/knowledge/components/recommend.vue";t.a=d.exports},606:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label-select-box"},[e._l(e.labelTree,(function(t,n){return a("div",{key:n},[a("div",{staticClass:"class-title"},[a("h4",[e._v(e._s(t.name))]),e._v(" "),a("i",{class:[t.expand?"arrow-up":"arrow-down"],on:{click:function(a){return e.expand(t)}}})]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"item.expand"}],staticClass:"clearfix"},e._l(t.children,(function(t,n){return a("li",{key:n,class:{selected:t.selected},on:{click:function(a){return e.select(t)}}},[e._v(e._s(t.name))])})),0)])})),e._v(" "),a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("完成")])],1)],2)};n._withStripped=!0;var l=a(519),o=a(554),r=a(11),i={name:"label-select",components:{CollapseTransition:l.a},props:{selects:{type:Array,default:function(e){return[]}},limit:{type:Boolean,default:!0},min:Number},data:function(){return{sourceTree:[],labelTree:[],expandItem:{},selectNames:[]}},methods:{getLabelTree:function(){var e=this;this.$http.get(o.a.getLabelTree).then((function(t){e.sourceTree=t,e.dataHandle()}))},dataHandle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],a=e.length?e:this.selects;this.sourceTree.forEach((function(e){1===e.type&&(e.expand=!1),-1!==a.indexOf(e.name)?(e.selected=!0,t.push(e.name)):e.selected=!1})),this.labelTree=r.a.transDataToTree(this.sourceTree),this.selectNames=t,this.expand(this.labelTree[0])},expand:function(e){this.expandItem.expand=e.expand,e.expand=!e.expand,this.expandItem=e,this.labelTree.push()},select:function(e){e.selected=!e.selected,this.labelTree.push(),e.selected?this.selectNames.push(e.name):this.selectNames.splice(this.selectNames.indexOf(e.name),1),this.selectNames.length>5&&this.limit&&(this.$Notice.warning({title:"标签选择不能超过5个"}),e.selected=!1,this.selectNames.pop())},submit:function(){if(this.selectNames.length<this.min)return this.$Notice.warning({title:"标签不能小于"+this.min+"个"}),!1;this.$emit("on-complete",{names:this.selectNames.join()},this.selectNames.length)},resetSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.selectNames=e,this.dataHandle(e)}},created:function(){this.getLabelTree()}},s=(a(601),a(1)),c=Object(s.a)(i,n,[],!1,null,"3cef2893",null);c.options.__file="src/views/knowledge/components/label-select.vue";t.a=c.exports},761:function(e,t,a){var n=a(1080);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("521bfa9e",n,!1,{})}}]);