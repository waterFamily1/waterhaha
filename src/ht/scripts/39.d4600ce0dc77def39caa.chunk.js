(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{1203:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-tree data-curves"},[a("div",{staticClass:"c-tree-right curves-chart",staticStyle:{overflow:"hidden"},attrs:{id:"J_CURVES_CHART"}},[a("fullscreen",{ref:"fullscreen",attrs:{background:"#FFF"},on:{change:e.fullscreenChange}},[a("div",{staticClass:"curves-panel"},[a("div",{staticClass:"fl"},[a("mg-date-step",{on:{"on-change":e.dateStepChange}},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.singleSelectedData.length,expression:"singleSelectedData.length == 1"}],staticStyle:{display:"inline-block","margin-left":"20px"}},[a("Checkbox",{on:{"on-change":e.chainChange},model:{value:e.chain,callback:function(t){e.chain=t},expression:"chain"}},[e._v("环比")]),e._v(" "),a("Checkbox",{on:{"on-change":e.YOYChange},model:{value:e.YOY,callback:function(t){e.YOY=t},expression:"YOY"}},[e._v("年同比")])],1)])],1),e._v(" "),a("div",{staticClass:"curves-panel-right"},[a("a",{staticClass:"c-icon-export",attrs:{href:"javascript:;",title:"导出"},on:{click:e.exportChart}}),e._v(" "),a("a",{attrs:{href:"javascript:;",title:"刷新"},on:{click:e.refreshChart}},[a("Icon",{attrs:{type:"ios-loop-strong",size:"25",color:"#4b7efe"}})],1),e._v(" "),a("a",{staticClass:"c-icon-table",attrs:{href:"javascript:;",title:"表格数据"},on:{click:e.tableToggle}}),e._v(" "),a("Dropdown",{attrs:{trigger:"click",placement:"bottom-end"}},[a("a",{staticClass:"c-icon-dline",attrs:{href:"javascript:void(0)"}}),e._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",[a("Checkbox",{on:{"on-change":e.addLineAverage},model:{value:e.lineRef.avg,callback:function(t){e.$set(e.lineRef,"avg",t)},expression:"lineRef.avg"}},[e._v("显示平均线")])],1),e._v(" "),a("DropdownItem",[a("Checkbox",{on:{"on-change":e.addLineAlarm},model:{value:e.lineRef.alarm,callback:function(t){e.$set(e.lineRef,"alarm",t)},expression:"lineRef.alarm"}},[e._v("显示报警线")])],1),e._v(" "),a("DropdownItem",[a("Checkbox",{on:{"on-change":e.addLineMax},model:{value:e.lineRef.max,callback:function(t){e.$set(e.lineRef,"max",t)},expression:"lineRef.max"}},[e._v("显示最大值")])],1),e._v(" "),a("DropdownItem",[a("Checkbox",{on:{"on-change":e.addLineMin},model:{value:e.lineRef.min,callback:function(t){e.$set(e.lineRef,"min",t)},expression:"lineRef.min"}},[e._v("显示最小值")])],1)],1)],1),e._v(" "),e.isFullscreen?a("a",{attrs:{href:"javascript:;"},on:{click:e.fullscreenChart}},[a("Icon",{attrs:{type:"arrow-shrink",size:"25",color:"#9baeb3"}})],1):a("a",{attrs:{href:"javascript:;"},on:{click:e.fullscreenChart}},[a("Icon",{attrs:{type:"arrow-expand",size:"25",color:"#9baeb3"}})],1)],1)]),e._v(" "),a("div",{staticClass:"curves-chart-container"},[e.loading?a("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),a("div",{staticClass:"curves-chart-left",attrs:{id:"J_CHART"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTable,expression:"showTable"}],staticClass:"curves-table ivu-table ivu-table-stripe",attrs:{id:"J_TABLE"}},[a("div",{staticClass:"curves-table-header"},[a("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"0",width:"100%"}},[a("thead",[a("tr",[a("th",{attrs:{width:"150"}},[e._v("时间")]),e._v(" "),e._l(e.tablCols,(function(t){return a("th",{attrs:{width:"100",title:t}},[e._v(e._s(t))])}))],2)])])]),e._v(" "),a("div",{staticClass:"curves-table-body",attrs:{id:"J_TABLE_BODY"}},[a("table",{attrs:{cellspacing:"0",cellpadding:"0",border:"0",width:"100%"}},[a("colgroup",[a("col",{attrs:{width:"150"}}),e._v(" "),e._l(e.tablCols,(function(e){return a("col",{attrs:{width:"100"}})}))],2),e._v(" "),a("tbody",[e.tableLoading?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:e.tablCols.length+1}},[e._v("加载中...")])]):0==e.tablRows.length?a("tr",[a("td",{staticStyle:{"text-align":"center"},attrs:{colspan:e.tablCols.length+1}},[e._v("暂无数据")])]):e._l(e.tablRows,(function(t){return a("tr",e._l(t,(function(t){return a("td",[e._v(e._s(t))])})),0)}))],2)])])])],1)])],1)])};n._withStripped=!0;var i=a(7),r=a(556),o=a.n(r),s=a(599),l=a(788),c=a(572),d=a.n(c),u=a(11),h=a(517),p=a(595),m=a(520),f=a(774),g=a(579),v=a(538),y=a.n(v);function b(e){return""===e||null===e||Number.isNaN(Number(e))?null:Number(e)}d()(o.a),Object(l.a)(o.a),i.default.use(y.a);var w=Object(s.c)(),x=[],C=[];o.a.Pointer.prototype.reset=function(){},o.a.Point.prototype.highlight=function(e){this.onMouseOver(),this.series.chart.tooltip.refresh(this),this.series.chart.xAxis[0].drawCrosshair(e,this)},o.a.setOptions({global:{useUTC:!1},lang:{loading:"载入中...",resetZoom:"取消放大",resetZoomTitle:"取消放大",shortMonths:["01","02","03","04","05","06","07","08","09","10","11","12"],noData:"暂无数据",thousandsSep:","}});var _={components:{sidebarSingle:f.a,mgDateStep:g.a},data:function(){return{searchValue:"",searchData:[],searchLoading:!1,singleSelectedData:[],comboSelectedData:{},chartParams:{ids:"",beginDate:u.a.transDateFromLocale(h.a.midnight(new Date)),cycle:"day"},chain:!1,YOY:!1,isFullscreen:!1,chartConHeight:"",chartConWidth:"",quickSaveComboName:"",showComboQuickModal:!1,showTable:!1,tablCols:[],tablRows:[],loading:!1,activeType:"",comboId:"",comboPointsId:"",lineRef:{avg:!1,alarm:!1,min:!1,max:!1},tableParams:"",tableLoading:!1}},created:function(){document.querySelector(".lay").style.left=0,document.querySelector(".lay").style.top=0,document.querySelector(".lay").style.minWidth="auto",document.querySelector(".sidebar").style.display="none",document.querySelector(".header").style.display="none";var e=window.parent.document.querySelector("#pointChartIframe");e&&(e.style.display="block")},mounted:function(){var e,t=this,a=document.querySelector(".lay").offsetHeight,n=document.querySelector("#J_CURVES_CHART"),i=document.querySelector("#J_CHART"),r=i.offsetWidth;this.chartConHeight=a-50,this.chartConWidth=r,n.style.height=a+"px",i.style.height=this.chartConHeight+"px",i.addEventListener("mousemove",(function(e){var t,a;for(a=0;a<x.length;a++)(t=x[a].series[0].searchPoint(e,!0))&&t.highlight(e)})),(e=this.$route.params.id)&&(this.chartParams.ids=e,this.activeType,this.singleReq({ids:e},(function(e){e.forEach((function(e){t.singleSelectedData.push({id:e.mpointId,name:e.mpointName})}))})))},methods:{washParamsPoints:function(){var e=[];return this.singleSelectedData.forEach((function(t){t.id=t.id.toString().replace("chart_",""),e.push(t.id)})),e.join(",")},singleReq:function(e,t){var a=this;this.loading=!0;var n=this.singleSelectedData,i=this.washParamsPoints();i&&(this.chartParams.ids=i),1==n.length?(this.chartParams.ring=this.chain?1:0,this.chartParams.year=this.YOY?1:0):this.clearChartParams(),e&&(this.chartParams=Object.assign(this.chartParams,e)),this.clearChart(),this.$http.get(p.a.getChartData,this.chartParams).then((function(e){e.items&&Array.isArray(e.items)&&(a.renderChart(e.items),a.activeType="single",t&&t(e.items)),a.loading=!1})).catch((function(){a.loading=!1}))},clearChartParams:function(){this.chartParams.ring=0,this.chartParams.year=0,this.lineRef=Object.assign({},this.lineRef,{avg:!1,alarm:!1,min:!1,max:!1})},clearChart:function(){for(var e=document.querySelector("#J_CHART");e.firstChild;)e.removeChild(e.firstChild);x=[]},renderChart:function(e){this.showTable=!1;var t=this.chartParams,a=e.length,n=this.chartConHeight/a,i=document.querySelector("#J_CHART");this.lineRef={avg:!1,alarm:!1,min:!1,max:!1};var r=h.a.getPeriods(t);e.forEach((function(e,l){var c="C"+u.a.gusid(8),d=document.createElement("div"),p="",m="";e.gid=c,d.setAttribute("id",c),d.setAttribute("data-m-id",e.mpointId),d.style.height=n+"px",i.appendChild(d),w.chart.height=n,p=null==e.siteName?"":"-"+e.siteName,e.unit&&(m=" "+e.unit),w.yAxis.title.text=m;var f=t.beginDate,g=t.cycle;1==e.year&&(r=h.a.getPeriods({beginDate:h.a.yearOFyear(t.beginDate),cycle:g})),1==e.ring&&(r=h.a.getPeriods({beginDate:h.a.chain(f,g),cycle:g})),t.ring||t.year||l===a-1?w.xAxis.labels.enabled=!0:w.xAxis.labels.enabled=!1,w.xAxis.max=r.max,w.xAxis.min=r.min;var v=e.curveYaxisLowerRange,y=e.curveYaxisUpperRange;w.yAxis.min=b(v),w.yAxis.max=b(y);var C=Object(s.d)(e.data),_=Object.assign({},w,{series:[{type:"State"===e.datype?"line":"spline",name:e.mpointName+p,data:C,color:s.a[l],unit:m,lineWidth:1,ring:e.ring,year:e.year,cycle:g,turboThreshold:0}]}),S=o.a.chart(c,_);x.push(S)})),C=e},dateStepChange:function(e){var t={beginDate:u.a.transDateFromLocale(e.date),cycle:e.step};this.chartParams=Object.assign({},this.chartParams,t),this.chartParams.ids&&("combo"==this.activeType?this.comboReq(null,t):"single"==this.activeType&&this.singleReq(t))},chainChange:function(e){this.singleReq()},YOYChange:function(){this.singleReq()},exportChart:function(){var e,t=this.chartParams.ids;t?(e={ids:t,beginDate:this.chartParams.beginDate,cycle:this.chartParams.cycle,ring:this.chain?1:0,year:this.YOY?1:0},u.a.download(p.a.exportChart,e)):this.$Notice.info({title:"警告",desc:"当前没有测点，请先选择测点"})},refreshChart:function(){"combo"==this.activeType?this.comboReq():"single"==this.activeType&&this.singleReq()},fullscreenChart:function(){this.$refs.fullscreen.toggle()},fullscreenChange:function(e){var t=this;this.isFullscreen=e;document.querySelector("#J_CHART"),document.querySelector("#J_TABLE_BODY");var a=document.querySelector("#J_CURVES_CHART");this.chartConHeight=e?window.screen.height-50:parseInt(a.style.height)-50,setTimeout((function(){t.reflowChart(e)}),300)},reflowChart:function(e){var t=document.querySelector("#J_CHART"),a=x.length,n=t.offsetWidth,i=this.chartConHeight/a;n=e?window.screen.width:this.chartConWidth,t.style.height=this.chartConHeight+"px",x.forEach((function(e){e.renderTo.style.height=i+"px",e.setSize(n,i),e.reflow()}))},renderTable:function(){var e=this,t=document.querySelector("#J_TABLE");document.querySelector("#J_TABLE_BODY").style.height=this.chartConHeight-25+"px";var a={ids:this.chartParams.ids,beginDate:this.chartParams.beginDate,cycle:this.chartParams.cycle,ring:this.chain?1:0,year:this.YOY?1:0};this.tableParams!=JSON.stringify(a)&&(this.tableParams=JSON.stringify(a),this.tableLoading=!0,this.$http.get(p.a.getChartTable,a).then((function(a){e.tableLoading=!1;var n=a.col.length;t.style.width=100*(n+1)+55+"px",e.tablCols=a.col,e.tablRows=a.data})))},tableToggle:function(){this.showTable=!this.showTable,this.chartParams.ids&&this.renderTable()},getChartById:function(e){var t;return x.forEach((function(a){a.renderTo.id==e&&(t=a)})),t},addLineAverage:function(e){var t=this;C.forEach((function(a){var n,i=a.gid,r=a.data,o=r.length,s=0;r.forEach((function(e){s+=Number(e.dataValue)||0})),n=(s/o).toFixed(2);var l=t.getChartById(i);e?l.yAxis[0].addPlotLine({id:"line_avg_"+i,width:1,color:"#3385ff",value:n,label:{text:"平均值: "+n,style:{color:"#3385ff"}}}):l.yAxis[0].removePlotLine("line_avg_"+i)}))},addLineAlarm:function(e){this.chartParams.ids&&this.$http.get(m.a.alarmChart,{ids:this.chartParams.ids}).then((function(t){t&&t.items&&t.items.forEach((function(t){var a;x.forEach((function(e){e.renderTo.getAttribute("data-m-id")==t.mpointId&&(a=e)})),e?(a.yAxis[0].addPlotLine({id:"line_alarm_lower_"+t.mpointId,width:1,color:"#3385ff",value:t.lowerLimit,label:{text:"最低值: "+t.lowerLimit,style:{color:"#3385ff"}}}),a.yAxis[0].addPlotLine({id:"line_alarm_upper_"+t.mpointId,width:1,color:"#3385ff",value:t.upperLimit,label:{text:"最高值: "+t.upperLimit,style:{color:"#3385ff"}}})):(a.yAxis[0].removePlotLine("line_alarm_lower_"+t.mpointId),a.yAxis[0].removePlotLine("line_alarm_upper_"+t.mpointId))}))}))},addLineMax:function(e){var t=this;C.forEach((function(a){var n=a.gid,i=a.data,r=Number(i[0].dataValue);i.forEach((function(e){Number(e.dataValue)>r&&(r=e.dataValue)}));var o=t.getChartById(n);e?o.yAxis[0].addPlotLine({id:"line_max_"+n,width:1,color:"#3385ff",value:r,label:{text:"最大值: "+r,style:{color:"#3385ff"}}}):o.yAxis[0].removePlotLine("line_max_"+n)}))},addLineMin:function(e){var t=this;C.forEach((function(a){var n=a.gid,i=a.data,r=Number(i[0].dataValue);i.forEach((function(e){Number(e.dataValue)<r&&(r=e.dataValue)}));var o=t.getChartById(n);e?o.yAxis[0].addPlotLine({id:"line_min_"+n,width:1,color:"#3385ff",value:r,label:{text:"最小值: "+r,style:{color:"#3385ff"}}}):o.yAxis[0].removePlotLine("line_min_"+n)}))}}},S=(a(908),a(1)),T=Object(S.a)(_,n,[],!1,null,"45f9c4b7",null);T.options.__file="src/views/data-analysis/curves-dialog.vue";t.default=T.exports},517:function(e,t,a){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={F:function(e,t){if(!e)return"";"object"!=n(e)&&(e=new Date(e)),t=t||"yyyy-MM-dd";var a=e.getFullYear().toString(),i={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};for(var r in t=t.replace(/(y+)/gi,(function(e,t){return a.substr(4-Math.min(4,t.length))})),i)t=t.replace(new RegExp("("+r+"+)","g"),(function(e,t){return i[r]<10&&t.length>1?"0"+i[r]:i[r]}));return t},str2Date:function(e){if(e)return"object"!=n(e)?new Date(e):e},firstDayByWeek:function(e){var t=i.str2Date(e)||new Date,a=t.getDay(),n=(0==a?7:a)-1;return i.midnight(new Date(t.getTime()-24*n*60*60*1e3))},firstDayByMonth:function(e){var t=i.str2Date(e)||new Date;return i.midnight(new Date(t.getFullYear(),t.getMonth(),1))},firstDayByYear:function(e){var t=i.str2Date(e)||new Date;return i.midnight(new Date(t.getFullYear(),0,1))},countDateByStep:function(e,t,a,n){e=i.formatePolyfill(e);var r,o=i.str2Date(e)||new Date(e),s=o.getTime(),l=(new Date).getTime();switch(a){case"day":r=s+864e5*t;break;case"week":r=s+6048e5*t;break;case"month":r=new Date(o.getFullYear(),o.getMonth()+t,o.getDate()).getTime(),n&&(r=new Date(o.getFullYear(),o.getMonth()+t,o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()).getTime());break;case"year":r=new Date(o.getFullYear()+t,o.getMonth(),o.getDate()).getTime(),n&&(r=new Date(o.getFullYear()+t,o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()).getTime())}return r>l&&(r=l),n?r:i.midnight(r)},midnight:function(e){return e?i.F(e)+" 00:00:00":""},beforeMidnight:function(e){return e?i.F(e)+" 23:59:59":""},midnightMill:function(e){var t=i.str2Date(e)||new Date;return new Date(i.midnight(t)).getTime()},chain:function(e,t){return i.countDateByStep(e,-1,t)},yearOFyear:function(e){return i.countDateByStep(e,-1,"year")},getPeriods:function(e){var t,a=e.beginDate,n=new Date(i.formatePolyfill(a)),r=n.getTime();switch(e.cycle){case"day":t=r+864e5;break;case"week":t=r+6048e5;break;case"month":t=new Date(n.getFullYear(),n.getMonth()+1,n.getDate(),0,0,0).getTime();break;case"year":t=new Date(n.getFullYear()+1,n.getMonth(),n.getDate(),0,0,0).getTime()}return{min:r,max:new Date(t).getTime()}},formatePolyfill:function(e){return"string"!=typeof e?e:("string"==typeof e&&0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),e)},getTerminalsByMonth:function(e,t){var a,n;return 0==t?(a=new Date(e,0,1,0,0,0),n=new Date(e,11,31,23,59,59)):(a=new Date(e,t-1,1,0,0,0),n=new Date(e,t,0,23,59,59)),{start:a,end:n}},transDateFromServer:function(e,t){return e?("string"==typeof e&&0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),i.F(e,t||"yyyy-MM-dd hh:mm")):""},transDateFromLocale:function(e){return e?("string"==typeof e&&(0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),e=new Date(e)),e.toISOString()):""},strToData:function(e){var t=e.split(" ")[0].split("-"),a=[];return void 0!==e.split(" ")[1]&&(a=e.split(" ")[1].split(":")),new Date(t[0],t[1]-1,t[2],null!==a[0]?a[0]:0,null!==a[1]?a[1]:0,null!==a[2]?a[2]:0)}};t.a=i},518:function(e,t,a){var n=a(530);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("4411afe8",n,!1,{})},519:function(e,t,a){"use strict";function n(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function i(e,t){if(e){for(var a=e.className,i=(t||"").split(" "),r=0,o=i.length;r<o;r++){var s=i[r];s&&(e.classList?e.classList.add(s):n(e,s)||(a+=" "+s))}e.classList||(e.className=a)}}function r(e,t){if(e&&t){for(var a=t.split(" "),i=" "+e.className+" ",r=0,o=a.length;r<o;r++){var s=a[r];s&&(e.classList?e.classList.remove(s):n(e,s)&&(i=i.replace(" "+s+" "," ")))}e.classList||(e.className=trim(i))}}var o={beforeEnter:function(e){i(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},enter:function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},afterEnter:function(e){r(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},beforeLeave:function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},leave:function(e){0!==e.scrollHeight&&(i(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave:function(e){r(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}};t.a={name:"CollapseTransition",functional:!0,render:function(e,t){var a=t.children;return e("transition",{on:o},a)}}},520:function(e,t,a){"use strict";var n=a(22),i={modalMpoints:"/loong/api/mpoints/dialog",alarmChart:"/loong/api/mpoints/alarm-condition",downloadTemplate:n.a+"/loong/api/mpoints/excel-template-download",exportTemplate:n.a+"/loong/api/mpoints/export",importExcel:n.a+"/loong/api/mpoints/import",saveExcelData:"/loong/api/mpoints/import-save",cancelExcelData:"/loong/api/mpoints/import-cancel",getCategroyData:"/loong/api/mpoints-datacategory",getMpointsList:"/loong/api/mpoints",deleteMpoints:"/loong/api/mpoints",deleteAllMpoints:"/loong/api/mpoints/all",batchSave:"/loong/api/mpoints/batch",autoMpoints:"/loong/api/mpoints-auto",datainputMpoints:"/loong/api/mpoints-datainput",taskMpoints:"/loong/api/mpoints-task",getCalcMpointDetail:"/loong/api/mpoints-calc",getCycle:"/loong/api/mpoints-calc-cycle",getAnalysisMpointDetail:"/loong/api/mpoints-analysis",getMpointNumByType:"/loong/api/mpoints/batch/all",getMpointDataImportList:"/loong/api/mpoint-data-imports",deleteMpointDataImport:"/loong/api/mpoint-data-imports",stopMpointDataImport:"/loong/api/mpoint-data-imports",pointDataImportTempleDownload:n.a+"/loong/api/mpoint-data-imports/templeDownload",pointDataImportFileUpload:n.a+"/loong/api/mpoint-data-imports/fileUpload"};t.a=i},529:function(e,t,a){"use strict";var n=a(518);a.n(n).a},530:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.cmp-dropdown-tree {\r\n    display: inline-block;\r\n    position: relative;\r\n    vertical-align: middle;\r\n    line-height: normal;\n}\n.ivu-form-item-error .cmp-dropdown-tree-label {\r\n    border: 1px solid #ed3f14;\n}\n.ivu-form-item-error .cmp-dropdown-tree-arrow {\r\n    border-left: 1px solid #ed3f14;\n}\n.cmp-dropdown-tree-label {\r\n    height: 28px;\r\n    width: 100%;\r\n    border: 1px solid #eaeaea;\r\n    display: flex;\r\n    border-radius: 3px;\r\n    cursor: pointer;\n}\n.cmp-dropdown-tree-text {\r\n    line-height: 28px;\r\n    text-indent: 5px;\r\n    flex: 1;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\n}\n.cmp-dropdown-tree-arrow {\r\n    margin-top: -1px;\r\n    width: 28px;\r\n    height: 28px;\r\n    border-left: 1px solid #eaeaea;\r\n    text-align: center;\r\n    line-height: 28px;\n}\n.cmp-dropdown-tree .ivu-input-group-append {\r\n    width: 25px;\r\n    height: 28px;\r\n    overflow: hidden;\r\n    padding: 0;\n}\n.cmp-dropdown-tree .ivu-btn {\r\n    padding: 5px 10px;\n}\n.cmp-dropdown-tree-tree {\r\n    z-index: 901;\r\n    position: absolute;\r\n    top: 37px;\r\n    left: 0;\r\n    min-width: 300px;\r\n    max-height: 400px;\r\n    overflow: auto;\r\n    padding: 5px 10px;\r\n    background-color: #fff;\r\n    box-shadow: 1px 1px 5px #999;\r\n    border-radius: 3px;\n}\r\n",""]),e.exports=t},531:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hideTree,expression:"hideTree"}],staticClass:"cmp-dropdown-tree",style:{width:e.width+"px"}},[a("div",{staticClass:"cmp-dropdown-tree-label",on:{click:e.labelClick}},[a("div",{staticClass:"cmp-dropdown-tree-text"},[e._v(e._s(e.value.title))]),e._v(" "),a("div",{staticClass:"cmp-dropdown-tree-arrow"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:1!=e.isShowTree,expression:"isShowTree != true"}],attrs:{type:"ios-arrow-down"}}),e._v(" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:1==e.isShowTree,expression:"isShowTree == true"}],attrs:{type:"ios-arrow-up"}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTree,expression:"isShowTree"}],staticClass:"cmp-dropdown-tree-tree"},[a("Tree",{attrs:{data:e.datas,"show-checkbox":e.showCheckbox,multiple:e.multiple},on:{"on-select-change":e.selectTree}})],1)])};n._withStripped=!0;var i=a(11),r=a(146),o=a(147);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){!function e(t){t.forEach((function(t,a){t.childrenIds=function e(t,a){a=a||[];return t.forEach((function(t){t.children.length&&e(t.children,a),a.push(Math.abs(t.id))})),a}(t.children),t.children.length&&e(t.children)}))}(e)}var c={name:"myProcessTreeAuthority",mixins:[r.a],props:{field:String,value:Object,data:Array,url:String,query:Object,showCheckbox:Boolean,multiple:Boolean,width:{type:[Number,String],default:300},type:String},watch:{"value.id":function(e){e?this.flatDatas.length&&(i.a.setTrueTreeExpand(this.datas,e),i.a.setTrueTreeSelected(this.datas,e)):(!function e(t){for(var a,n=t.length,i=0;i<n;i++)1==(a=t[i]).selected&&(a.selected=!1),a.children.length&&e(a.children)}(this.datas),this.$emit("input",{id:"",title:"请选择"}))},data:function(e){this.datas=e}},data:function(){return{datas:this.data,flatDatas:[],isShowTree:!1}},methods:{selectTree:function(e){var t=this,a=[],n=[],i=[],r=this.field||"id",o=[];e.forEach((function(e){a.push(Math.abs(e[r])),n.push(e.key),i.push(e.title),o=o.concat(Math.abs(e[r]),e.childrenIds)})),o=s(new Set(o)),this.$emit("input",{id:a.join(),key:n.join(),title:i.join(),childrenIds:o}),this.$emit("on-change",{id:a.join(),key:n.join(),title:i.join(),childrenIds:o}),this.multiple||(this.isShowTree=!1),setTimeout((function(){t.dispatch("FormItem","on-form-change",{id:a.join(),key:n.join(),title:i.join(),childrenIds:o})}),100)},hideTree:function(){this.isShowTree=!1},labelClick:function(){this.isShowTree=!this.isShowTree}},directives:{clickoutside:o.a},mounted:function(){var e=this;this.url&&this.$http.get(this.url,this.query).then((function(t){t&&t.length&&(t.forEach((function(e){!1===e.authorized&&(e.render=function(e,t){t.root,t.node;return e("span",[t.data.name])})})),"EQUTYPE"==e.type&&t.forEach((function(e){var a=t.filter((function(t){return t.parentId==e.id}));("org"==e.type||a.length>0)&&(e.render=function(e,t){t.root,t.node;return e("span",[t.data.name])})})),"PROCESS"==e.type&&t.forEach((function(e){1==e.type&&(e.render=function(e,t){t.root,t.node;return e("span",[t.data.name])})})),e.flatDatas=t,e.value.id&&(i.a.setTreeExpand(e.flatDatas,e.value.id),i.a.setFlatTreeSelected(e.flatDatas,e.value.id)),e.datas=i.a.transDataToTree(e.flatDatas),l(e.datas))}))}},d=(a(529),a(1)),u=Object(d.a)(c,n,[],!1,null,null,null);u.options.__file="src/components/my-process-tree-authority.vue";t.a=u.exports},536:function(e,t,a){var n=a(551);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("f8fc3b20",n,!1,{})},538:function(e,t,a){e.exports=function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,a){"use strict";t.b=function(){var e=document.documentElement;return"requestFullscreen"in e||"mozRequestFullScreen"in e&&document.mozFullScreenEnabled||"msRequestFullscreen"in e&&document.msFullscreenEnabled||"webkitRequestFullScreen"in e},t.c=function(){return!!(document.fullscreen||document.mozFullScreen||document.fullscreenElement||document.msFullscreenElement||document.webkitIsFullScreen)},t.g=function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.log("Fullscreen API is not supported.")},t.d=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("Fullscreen API is not supported.")},t.f=function(e){document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),document.addEventListener("webkitfullscreenchange",e)},t.e=function(e){document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),document.removeEventListener("webkitfullscreenchange",e)},t.a=function e(){var t={},a=!1,n=0,i=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(a=arguments[0],n++);n<i;n++)!function(n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a&&"[object Object]"===Object.prototype.toString.call(n[i])?t[i]=e(!0,t[i],n[i]):t[i]=n[i])}(arguments[n]);return t}},function(e,t,a){"use strict";function n(){return a.i(o.c)()}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=arguments[1];if(l&&!n()){t=a.i(o.a)(!0,{},s,t);var i=e,r=void 0;t.wrap&&((r=document.createElement("div")).style["overflow-y"]="auto",r.style.background=t.background,r.style.width="100%",r.style.height="100%",i.parentNode.insertBefore(r,i),r.appendChild(i),r.addEventListener("click",(function(e){e.target===this&&a.i(o.d)()}))),i.classList.add(t.fullscreenClass),a.i(o.f)((function e(){var s=n();s||(a.i(o.e)(e),i.classList.remove(t.fullscreenClass),t.wrap&&(r.parentNode.insertBefore(i,r),r.parentNode.removeChild(r))),t.callback&&t.callback(s)})),a.i(o.g)(t.wrap?r:i)}}function r(){l&&n()&&a.i(o.d)()}var o=a(0),s={wrap:!0,background:"#333",callback:function(){},fullscreenClass:"fullscreen"},l=a.i(o.b)();t.a={getState:n,toggle:function(e,t,a){l&&(void 0===a?n()?r():i(e,t):a?i(e,t):r())},enter:i,exit:r}},function(e,t,a){var n=a(5)(a(4),a(6),null,null);e.exports=n.exports},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),i=a.n(n),r=a(1),o=a(0);t.default={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name||"fullscreen";e.component(n,a.i(o.a)(i.a,{name:n})),e.prototype["$"+n]=r.a}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0);t.default={props:{background:{type:String,default:"#333"},fullscreenClass:{type:String,default:"fullscreen"},fullscreen:{type:Boolean,default:!1}},data:function(){return{supportFullScreen:!1,isFullscreen:!1}},computed:{wrapperStyle:function(){return{background:this.background,"overflow-y":"auto",width:"100%",height:"100%"}}},methods:{toggle:function(e){void 0===e?a.i(n.c)()?this.exit():this.enter():e?this.enter():this.exit()},enter:function(){this.supportFullScreen&&(a.i(n.f)(this.fullScreenCallback),a.i(n.g)(this.$el))},exit:function(){this.supportFullScreen&&this.getState()&&a.i(n.d)()},getState:function(){return a.i(n.c)()},shadeClick:function(e){e.target===this.$el&&this.exit()},fullScreenCallback:function(){this.isFullscreen=a.i(n.c)(),this.isFullscreen||a.i(n.e)(this.fullScreenCallback),this.$emit("change",this.isFullscreen),this.$emit("update:fullscreen",this.isFullscreen)}},watch:{fullscreen:function(e){e!==a.i(n.c)()&&(e?this.enter():this.exit())}},created:function(){this.supportFullScreen=a.i(n.b)()}}},function(e,t){e.exports=function(e,t,a,n){var i,r=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(i=e,r=e.default);var s="function"==typeof r?r.options:r;if(t&&(s.render=t.render,s.staticRenderFns=t.staticRenderFns),a&&(s._scopeId=a),n){var l=Object.create(s.computed||null);Object.keys(n).forEach((function(e){var t=n[e];l[e]=function(){return t}})),s.computed=l}return{esModule:i,exports:r,options:s}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.isFullscreen?[e.fullscreenClass]:[],style:e.isFullscreen?[e.wrapperStyle]:[],on:{click:function(t){e.shadeClick(t)}}},[e._t("default")],2)},staticRenderFns:[]}}])},540:function(e,t,a){var n=a(571);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("4f138dda",n,!1,{})},550:function(e,t,a){"use strict";var n=a(536);a.n(n).a},551:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.mg-mp-table-header {\r\n\tdisplay: flex;\r\n\theight: 40px;\n}\n.mg-mp-table-search {\r\n\twidth: 250px;\n}\n.mg-mp-table-tip {\r\n\ttext-align: right;\r\n\tline-height: 30px;\r\n\tcolor: #999;\n}\n.mg-mp-table-tip strong {\r\n\tcolor: #777;\r\n\tmargin: 0 3px;\n}\n.mg-mp-table-search .ivu-icon {\r\n\tright: 35px;\n}\r\n",""]),e.exports=t},555:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mg-mp-table"},[a("div",[a("div",[a("div",{staticClass:"c-form-item"},[a("label",{staticStyle:{width:"auto"}},[e._v("关键字：")]),e._v(" "),a("Input",{staticStyle:{width:"160px"},attrs:{placeholder:e.searchPlaceholder,clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchParams.queryName,callback:function(t){e.$set(e.searchParams,"queryName",t)},expression:"searchParams.queryName"}})],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",{staticStyle:{width:"auto"}},[e._v("区域位置：")]),e._v(" "),a("my-process-tree-authority",{ref:"processTree",staticStyle:{width:"160px"},attrs:{url:e.treeApi.getProcessTreeData},on:{"on-change":e.processSelect},model:{value:e.relProcess,callback:function(t){e.relProcess=t},expression:"relProcess"}})],1),e._v(" "),a("div",{staticClass:"c-adv-search-btn"},[a("Button",{staticClass:"c-btn-modal-search",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{staticClass:"c-btn-modal-reset",attrs:{type:"primary"},on:{click:e.searchParamsClean}},[e._v("重置")])],1)]),e._v(" "),a("div",{staticClass:"mg-mp-table-tip"},[e._v("已选择"),a("strong",[e._v(e._s(e.selectedTemp.length))]),e._v("个 "),a("a",{staticClass:"c-btn-text",attrs:{href:"javascript:;"},on:{click:e.cleanup}},[e._v("[清空]")])])]),e._v(" "),a("div",{attrs:{id:e.TID}},[a("Table",{ref:e.tableRef,attrs:{columns:e.inColumns,data:e.listData,loading:e.loading,stripe:"",size:"small"},on:{"on-select":e.onSelect,"on-select-cancel":e.onSelectCancel,"on-select-all":e.onSelectAll}})],1),e._v(" "),a("Page",{staticClass:"table-page",attrs:{total:e.total,"page-size":e.searchParams.pageSize,current:e.searchParams.currentPage,"show-total":"","show-elevator":"",size:"small"},on:{"on-change":e.pageChange}}),e._v(" "),a("div",{staticClass:"c-modal-footer-btns",staticStyle:{margin:"30px auto 0"}},[a("Button",{attrs:{type:"default",shape:"circle"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:e.submit}},[e._v("确定")])],1)],1)};n._withStripped=!0;var i=a(11),r=a(107),o=a(520),s={name:"mgMpointTable",components:{myProcessTreeAuthority:a(531).a},props:{columns:Array,disabledRow:Boolean,selected:Array,max:Number,manual:Boolean,field:String,query:Object},watch:{selected:function(e){var t=JSON.stringify(e);this.selectedTemp=JSON.parse(t),this.selectedTruth=JSON.parse(t),this.checkSelection()}},data:function(){return{searchPlaceholder:"输入测点名称以检索",relProcess:{id:"",title:"请选择"},treeApi:r.a,url:o.a.modalMpoints,inColumns:[{type:"selection",width:50},{title:"测点编号",width:120,key:"mpointId"},{title:"区域位置",key:"siteName"},{title:"测点名称",key:"mpointName"}],TID:"",searchParams:{queryName:"",siteId:"",currentPage:1,pageSize:10},listData:[],selectedTemp:[],selectedTruth:[],loading:!1,total:0,tableRef:""}},methods:{searchParamsClean:function(){this.searchParams=Object.assign({},{queryName:"",siteId:"",currentPage:1,pageSize:10},this.query||{}),this.relProcess={id:"",title:"请选择"}},processSelect:function(e){this.searchParams.siteId=e.id},cleanup:function(){this.selectedTemp=[],this.selectedTruth=[],this.checkSelection()},getData:function(){var e=this;this.loading=!0,this.$http.get(this.url,this.searchParams).then((function(t){var a=t.items?t.items:[];e.disabledRow&&a.forEach((function(e){e.disabled&&(e._disabled=!0)})),e.field&&a.forEach((function(t){t.id||(t.id=t[e.field])})),e.listData=a,e.total=t.total,e.loading=!1,e.checkSelection()}))},pageChange:function(e){this.searchParams.currentPage=e,this.getData()},search:function(){this.searchParams.currentPage=1,this.getData()},onSelect:function(e,t){var a=this.selectedTemp;this.max&&a.length>=this.max?(this.$Notice.info({title:"最多选择"+this.max+"个"}),this.cancelChecked(t.id)):this.selectedTemp.push(t)},onSelectCancel:function(e,t){var a=this;this.selectedTemp.forEach((function(e,n){e.id==t.id&&a.selectedTemp.splice(n,1)}))},onSelectAll:function(e){0==e.length?this.removeTableFromTemp(this.listData):this.addTableToTemp(e)},addTableToTemp:function(e){var t=this.selectedTemp;e.forEach((function(e){var a=!1;t.forEach((function(t,n){t.id==e.id&&(a=!0)})),a||t.push(e)}))},removeTableFromTemp:function(e){for(var t=this.selectedTemp,a=t.length;a--;){var n=!1;e.forEach((function(e){e.id==t[a].id&&(n=!0)})),n&&t.splice(a,1)}},cancelChecked:function(e){var t=this;this.checkSelection();var a=this.selectedTemp,n=[];a.forEach((function(a){a.id==e&&t.$set(a,"_checked",!1),n.push(a)})),this.selectedTemp=n},checkSelection:function(){var e=this;this.$nextTick((function(){var t=e.listData,a=e.selectedTemp,n=e.$refs[e.tableRef];t.forEach((function(e,t){var i=n.$refs.tbody.objData[t];i._isChecked=!1,a.forEach((function(t){t.id==e.id&&(i._isChecked=!0)}))}))}))},submit:function(){this.selectedTruth=i.a.copyArray(this.selectedTemp),this.$emit("on-submit",this.selectedTruth)},cancel:function(){this.selectedTemp=i.a.copyArray(this.selectedTruth),this.checkSelection(),this.$emit("on-cancel")}},mounted:function(){this.max&&(document.querySelector("#"+this.TID).querySelector(".ivu-table-header").querySelector(".ivu-table-cell").style.display="none"),this.query&&(this.searchParams=Object.assign({},{queryName:"",siteId:"",currentPage:1,pageSize:10},this.query)),this.getData()},created:function(){var e=i.a.gusid(6);this.TID="J_TABLE_"+e,this.tableRef="mg-select-table-"+e,this.columns&&(this.inColumns=this.columns),i.a.initTableColumnTitle(this.inColumns)}},l=(a(550),a(1)),c=Object(l.a)(s,n,[],!1,null,null,null);c.options.__file="src/components/mg-mpoint-table.vue";t.a=c.exports},570:function(e,t,a){"use strict";var n=a(540);a.n(n).a},571:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.cmp-date-step-icon {\r\n    display: inline-block;\r\n    vertical-align: bottom;\r\n    /* margin-left: ; */\n}\n.cmp-date-step-icon a {\r\n    display: inline-block;\r\n    margin: 0 5px;\n}\r\n",""]),e.exports=t},579:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cmp-date-step"},[a("label",{attrs:{for:""}},[e._v("起始时间：")]),e._v(" "),a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd HH:mm:ss",placeholder:"选择时间",size:"small",editable:e.editable,clearable:e.clearable},on:{"on-change":e.dateChange},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v(" "),a("div",{staticClass:"cmp-date-step-icon"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.dateRelaChange(-1)}}},[a("Icon",{attrs:{type:"arrow-left-b",size:"22",color:"#4B7EFE"}})],1),e._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.dateRelaChange(1)}}},[a("Icon",{attrs:{type:"arrow-right-b",size:"22",color:"#4B7EFE"}})],1),e._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:e.dateRelaLastest}},[a("Icon",{attrs:{type:"ios-skipforward",size:"22",color:"#4B7EFE"}})],1)]),e._v(" "),a("label",{attrs:{for:""}},[e._v("时间跨度：")]),e._v(" "),a("Select",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{"on-change":e.dateStepChange},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("Option",{attrs:{value:"day"}},[e._v("天")]),e._v(" "),a("Option",{attrs:{value:"week"}},[e._v("周")]),e._v(" "),a("Option",{attrs:{value:"month"}},[e._v("月")]),e._v(" "),a("Option",{attrs:{value:"year"}},[e._v("年")])],1),e._v(" "),e._t("default")],2)};n._withStripped=!0;var i=a(517),r={name:"mgDateStep",props:{editable:!1,clearable:!1,value:{type:String,default:""}},data:function(){return{startDate:this.value.split("#")[0]||i.a.midnight(new Date),step:this.value.split("#")[1]||"day"}},methods:{dateChange:function(){this.$emit("on-change",{date:i.a.midnight(this.startDate),step:this.step})},dateStepChange:function(){switch(this.step){case"day":this.startDate=i.a.midnight(new Date);break;case"week":this.startDate=i.a.firstDayByWeek();break;case"month":this.startDate=i.a.firstDayByMonth();break;case"year":this.startDate=i.a.firstDayByYear()}this.$emit("on-timeRangeChange",{date:this.startDate,step:this.step}),this.$emit("on-change",{date:this.startDate,step:this.step})},dateRelaChange:function(e){var t=this.startDate,a=this.step;this.startDate=i.a.countDateByStep(t,e,a),this.$emit("on-change",{date:this.startDate,step:this.step})},dateRelaLastest:function(){this.dateStepChange()},resetDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.value;this.startDate=e.split("#")[0]||i.a.midnight(new Date),this.step=e.split("#")[1]||"day"}},mounted:function(){}},o=(a(570),a(1)),s=Object(o.a)(r,n,[],!1,null,null,null);s.options.__file="src/components/mg-date-step.vue";t.a=s.exports},593:function(e,t,a){var n=a(680);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("52e1f28c",n,!1,{})},595:function(e,t,a){"use strict";t.a={getChartSearch:"/loong/api/curves-and-combine",saveChart:"/loong/api/curves",deleteChart:"/loong/api/curves",getCombine:"/loong/api/curve-combines",getMpointByCombine:"/loong/api/curve-combines/",saveCombine:"/loong/api/curve-combines",deleteCombine:"/loong/api/curve-combines",getChartData:"/loong/api/curves/data",exportChart:"/loong/api/curves/export",getChartTable:"/loong/api/curves/table",templates:"/loong/api/curve-modules",selectTemplates:"/loong/api/curve-modules/copy",mark:"/loong/api/curve-remarks",comboOrder:"/loong/api/curve-combines/order"}},599:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return s}));var n=a(517),i=["#2D73C5","#285C5C","#F5967D","#41E741","#B8860B","#12B4AB","#FAE919","#00BFFF"];function r(){return{noData:{style:{fontWeight:"normal",fontSize:"13px",color:"#A1A1A1"}},credits:{enabled:!1},title:{text:null},legend:{margin:0,symbolHeight:10},chart:{marginLeft:50,type:"spline",spacingBottom:0,zoomType:"x",selectionMarkerFill:"rgba(0,0,0, 0.2)",resetZoomButton:{position:{align:"right",verticalAlign:"top",x:0,y:0},theme:{fill:"white",stroke:"silver",r:0,states:{hover:{fill:"#41739D",style:{color:"white"}}}}}},plotOptions:{series:{animation:!1,cursor:"pointer",point:{events:{}}},spline:{marker:{enabled:!1}},line:{step:!0,marker:{enabled:!1}}},tooltip:{style:{width:"200px"},formatter:function(){return"<div>"+n.a.F(this.x,"yyyy-MM-dd hh:mm:ss")+"</div><br/><div>"+this.series.name+":<b>"+this.y+this.series.userOptions.unit+"</b></div>"},pointFormat:"{point.y}",xDateFormat:"%Y-%m-%d %H:%M:%S"},xAxis:{type:"datetime",dateTimeLabelFormats:{millisecond:"%H:%M:%S",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%m-%e",week:"%m-%e",month:"%Y-%m",year:"%Y"},crosshair:!0,events:{},labels:{},tickLength:3},yAxis:{title:{align:"high",offset:0,text:"",rotation:0,y:0,x:50,style:{color:"#000000"}},maxPadding:0,minPadding:0,gridLineWidth:1,lineWidth:1,labels:{x:-5}},series:[]}}var o={colors:i,noData:{style:{fontWeight:"normal",fontSize:"13px",color:"#A1A1A1"}},credits:{enabled:!1},title:{text:null},legend:{margin:0,symbolHeight:10},chart:{type:"spline",spacingBottom:0,zoomType:"x",selectionMarkerFill:"rgba(0,0,0, 0.2)",resetZoomButton:{position:{align:"right",verticalAlign:"top",x:0,y:0},theme:{fill:"white",stroke:"silver",r:0,states:{hover:{fill:"#41739D",style:{color:"white"}}}}}},plotOptions:{series:{animation:!1},spline:{marker:{enabled:!1}},line:{step:!0,marker:{enabled:!1}}},tooltip:{shared:!0,formatter:function(){var e=this.points,t="<div>"+n.a.F(this.x,"yyyy-MM-dd hh:mm:ss")+"</div><br />";return e.forEach((function(e){t+='<div style="color:'+e.color+'">'+e.series.name+":<b>"+e.y+(e.series.userOptions.unit||"")+"</b></div><br />"})),t},pointFormat:"{point.y}",xDateFormat:"%Y-%m-%d %H:%M:%S"},xAxis:{type:"datetime",dateTimeLabelFormats:{millisecond:"%H:%M:%S",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%m-%e",week:"%m-%e",month:"%Y-%m",year:"%Y"},labels:{},tickLength:3},yAxis:{title:{align:"high",offset:0,text:"",rotation:0,y:0,x:50,style:{color:"#000000"}},maxPadding:0,minPadding:0,gridLineWidth:1,lineWidth:1,labels:{x:-5}},series:[]};function s(e){var t=[];return e?(e.forEach((function(e){t.push({x:e.dataDate,y:Number(e.dataValue),mark:e.remark,marked:!!e.remark,mkid:e.id})})),t):t}},679:function(e,t,a){"use strict";var n=a(593);a.n(n).a},680:function(e,t,a){var n=a(10),i=a(24),r=a(681),o=a(682),s=a(683),l=a(684);t=n(!1);var c=i(r),d=i(o),u=i(s),h=i(l);t.push([e.i,"\n.cmp-tree-leap .curevs-tree-row {\r\n    position: relative;\r\n    overflow: hidden;\n}\n.curevs-tree-row:hover {\r\n    background-color: #EEE;\n}\n.curevs-tree-row.active {\r\n    background-color: #eae9e9;\r\n    color: #000;\r\n    font-weight: 700;\n}\n.curevs-tree-point {\r\n    display: block;\r\n    margin-left: 5px;\r\n    padding-left: 15px;\n}\n.curevs-tree-calc {\r\n    background: url("+c+") no-repeat 0 3px;\n}\n.curevs-tree-input {\r\n    background: url("+d+") no-repeat 0 3px;\n}\n.curevs-tree-auto {\r\n    background: url("+u+") no-repeat 0 3px;\n}\n.curevs-tree-analysis {\r\n    background: url("+h+") no-repeat 0 3px;\n}\n.curves-single-legend {\r\n    list-style: none;\r\n    padding: 0;\r\n    margin: 10px 0 0 0;\r\n    display: flex;\r\n    height: 30px;\r\n    justify-content: center;\r\n    align-items: center;\r\n    line-height: 30px;\r\n    width: 100%;\n}\n.curves-single-legend li {\r\n    flex: 1;\r\n    text-align: center;\r\n    color: #aaa;\n}\n.curves-single-legend li img {\r\n    display: inline-block;\r\n    margin-right: 2px;\n}\r\n",""]),e.exports=t},681:function(e,t,a){e.exports=a.p+"images/68c6024b0c32c0a29c14118ea411c8aa.png"},682:function(e,t,a){e.exports=a.p+"images/aea81edc558b5039f3a2c2ca04538843.png"},683:function(e,t,a){e.exports=a.p+"images/e45f2252b5c9e88839376569045d9504.png"},684:function(e,t,a){e.exports=a.p+"images/615ed3e07170297313154d888eb9f29d.png"},686:function(e,t,a){var n=a(909);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("33a9fab7",n,!1,{})},774:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"curves-sidebar-title"},[a("a",{staticClass:"curves-sidebar-title-name",attrs:{href:"javascript:;"},on:{click:function(t){e.shown=!e.shown}}},[e._v("\n                单数据\n                "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:e.shown,expression:"shown"}],attrs:{type:"ios-arrow-up"}}),e._v(" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.shown,expression:"!shown"}],attrs:{type:"ios-arrow-down"}})],1),e._v(" "),a("a",{staticClass:"curves-sidebar-title-add",attrs:{href:"javascript:;",title:"添加单数据"},on:{click:e.addClick}},[a("Icon",{attrs:{type:"plus-circled",size:"20",color:"#A2A2A2"}})],1)]),e._v(" "),a("collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.shown,expression:"shown"}],staticClass:"padding-l-10"},[a("Tree",{attrs:{data:e.singleData,render:e.renderTree,"load-data":e.loadTreeData}})],1)])],1),e._v(" "),a("Modal",{attrs:{title:"添加单数据",width:"600"},model:{value:e.showModal,callback:function(t){e.showModal=t},expression:"showModal"}},[a("mg-mpoint-table",{ref:"modalTable",attrs:{query:{isCurve:!0}},on:{"on-submit":e.onModalSelect,"on-cancel":e.onModalSelectCancel}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)};n._withStripped=!0;var i=a(519),r=a(11),o=a(107),s=a(595),l=(a(520),a(555));var c={name:"sidebarCombo",components:{CollapseTransition:i.a,mgMpointTable:l.a},data:function(){return{singleData:[],shown:!0,showModal:!1,addLoading:!1,selectedPoints:[]}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get(o.a.getChartTree).then((function(t){if(t.items){var a=t.items;a.forEach((function(e){9!==e.type&&(e.loading=!1),0==e.parentId&&(e.expand=!0)})),e.singleData=0==t.items.length?[]:r.a.transDataToTree(a)}}))},loadTreeData:function(e,t){this.$http.get(o.a.getChartTreeChildren,{siteId:e.id}).then((function(e){var a=e.items;a.forEach((function(e){9!==e.type&&(e.loading=!1)}));var n=0==a.length?[]:r.a.transDataToTree(a);t(n)}))},checkPointSelected:function(e){var t=!1;return this.selectedPoints.forEach((function(a){a.id==e.id&&(t=!0)})),t},delPointFromSelected:function(e){var t=this.selectedPoints;t.forEach((function(a,n){a.id==e.id&&t.splice(n,1)}))},renderTree:function(e,t){var a=this,n=(t.root,t.node,t.data),i=[n.name],o=["curevs-tree-row","c-tree-row"];if(9==n.type){var s=this.checkPointSelected(n);i=[e("a",{class:["curevs-tree-point","curevs-tree-"+n.datasource.toLowerCase()],on:{click:function(){s?a.delPointFromSelected(n):a.selectedPoints.length>=8?a.$Notice.info({title:"最多添加8条曲线"}):a.selectedPoints.push(n),a.$emit("on-change",a.selectedPoints)}}},[n.name]),e("span",{class:{"c-tree-btns":!0}},[r.a.treeBtnDelStyle(e,(function(){a.del(n.id)}))])]}return s&&o.push("active"),e("div",{class:o},i)},addClick:function(){this.showModal=!0},onModalSelect:function(e){var t=this,a=[];e.forEach((function(e){a.push(e.id)})),this.addLoading=!0,this.$http.post(s.a.saveChart,{mpointIds:a.join()}).then((function(e){e.ids&&t.$Notice.success({title:"添加成功"}),t.showModal=!1,t.addLoading=!1,t.getData(),t.$refs.modalTable.cleanup(),t.$refs.modalTable.getData()}))},onModalSelectCancel:function(e,t){this.showModal=!1},del:function(e){var t=this;e=e.toString().replace("chart_","");this.$http.del(s.a.deleteChart,{mpointIds:e}).then((function(e){e.count&&(t.$Notice.success({title:"删除成功"}),t.getData(),t.$refs.modalTable.cleanup(),t.$refs.modalTable.getData())}))}}},d=(a(679),a(1)),u=Object(d.a)(c,n,[],!1,null,null,null);u.options.__file="src/views/data-analysis/sidebar-single.vue";t.a=u.exports},789:function(e,t,a){e.exports=a.p+"images/8989a256247d60edbe04b9f0b3033517.png"},908:function(e,t,a){"use strict";var n=a(686);a.n(n).a},909:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.curves_chart .fullscreen[data-v-45f9c4b7] {\r\n  background: #fff;\r\n  position: relative;\n}\n.curves_sidebar[data-v-45f9c4b7] {\r\n  width: 300px;\r\n  overflow-y: auto;\n}\n.curves-panel[data-v-45f9c4b7] {\r\n  height: 30px;\r\n  margin: 10px;\n}\n.curves-sidebar-title[data-v-45f9c4b7] {\r\n  width: 100%;\r\n  background: #f4f4f4;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  clear: both;\n}\n.curves-sidebar-title-name[data-v-45f9c4b7] {\r\n  margin-left: 10px;\n}\n.curves-sidebar-title-add[data-v-45f9c4b7] {\r\n  float: right;\r\n  margin: 3px 10px 0 0;\n}\n.curves-panel-right[data-v-45f9c4b7] {\r\n  float: right;\n}\n.curves-panel-right > a[data-v-45f9c4b7] {\r\n  display: inline-block;\r\n  width: 25px;\r\n  vertical-align: top;\n}\n.curves-chart-container[data-v-45f9c4b7] {\r\n  position: relative;\n}\n.curves-table[data-v-45f9c4b7] {\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  width: 200px;\r\n  height: 100%;\r\n  background: #fff;\r\n  opacity: 0.85;\r\n  border-left: 2px solid #eee;\r\n  border-top: 2px solid #eee;\r\n  overflow: hidden;\n}\n.curves-table-body[data-v-45f9c4b7] {\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\n}\n.curves-table td[data-v-45f9c4b7],\r\n.curves-table th[data-v-45f9c4b7] {\r\n  padding-left: 10px;\r\n  height: 25px;\n}\n.curves-table td[data-v-45f9c4b7] {\r\n  background-color: transparent;\n}\r\n",""]),e.exports=t}}]);