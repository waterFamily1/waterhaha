(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{1035:function(t,e,a){"use strict";var i=a(742);a.n(i).a},1036:function(t,e,a){(e=a(10)(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* .c-form-customer label {\n    width: 120px;\n} */\n.c-top-border-gray-sim[data-v-08362548] {\n    border-top: 0px solid;\n    padding-left: 30px;\n    padding-right: 30px;\n    padding-bottom: 0px;\n}\n",""]),t.exports=e},1226:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"100%"}},[a("div",{staticClass:" c-main-border"},[a("Form",{ref:"searchParams",attrs:{model:t.searchParams},nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"c-left-border-blue"},[a("div",{staticClass:"c-search-main"},[a("div",{staticClass:"c-form-item"},[a("label",{staticStyle:{width:"100px"}},[t._v("关键字：")]),a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"租户名称/ICCID"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.searchParams.queryName,callback:function(e){t.$set(t.searchParams,"queryName",e)},expression:"searchParams.queryName"}})],1),t._v(" "),a("div",{staticClass:"c-adv-search-btn"},[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.advSearch=!t.advSearch}}},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.advSearch,expression:"!advSearch"}],attrs:{type:"ios-arrow-down"}}),a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.advSearch,expression:"advSearch"}],attrs:{type:"ios-arrow-up"}}),t._v("高级搜索")],1),t._v(" "),a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),a("Button",{staticClass:"c-btn-reset",attrs:{type:"primary",shape:"circle"},on:{click:t.searchParamsClean}},[t._v("重置")])],1)]),t._v(" "),a("collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.advSearch,expression:"advSearch"}],staticClass:"c-adv-search"},[a("div",{staticClass:"c-adv-search-row"},[a("div",{staticClass:"c-form-item"},[a("label",[t._v("ICCID号段：")]),t._v(" "),a("Input",{staticStyle:{width:"180px"},model:{value:t.searchParams.iccidStart,callback:function(e){t.$set(t.searchParams,"iccidStart",e)},expression:"searchParams.iccidStart"}}),t._v(" "),a("span",[t._v("-")]),t._v(" "),a("Input",{staticStyle:{width:"180px"},model:{value:t.searchParams.iccidEnd,callback:function(e){t.$set(t.searchParams,"iccidEnd",e)},expression:"searchParams.iccidEnd"}})],1)]),t._v(" "),a("div",{staticClass:"c-adv-search-row"},[a("div",{staticClass:"c-form-item c-form-item-tab"},[a("label",[t._v("运营商：")]),t._v(" "),a("mg-tab",{attrs:{groups:t.recieverMap,multiple:!0,entire:!0},on:{"on-click":t.search},model:{value:t.operator,callback:function(e){t.operator=e},expression:"operator"}})],1)]),t._v(" "),a("div",{staticClass:"c-adv-search-row"},[a("div",{staticClass:"c-form-item c-form-item-tab"},[a("label",[t._v("SIM卡状态：")]),t._v(" "),a("mg-tab",{attrs:{groups:t.pushMap,multiple:!0,entire:!0},on:{"on-click":t.search},model:{value:t.cardStatus,callback:function(e){t.cardStatus=e},expression:"cardStatus"}})],1)]),t._v(" "),a("div",{staticClass:"c-adv-search-row"},[a("div",{staticClass:"c-form-item c-form-item-tab"},[a("label",[t._v("剩余百分比：")]),t._v(" "),a("mg-tab",{attrs:{groups:t.delayMap,multiple:!1,entire:!0},on:{"on-click":t.search},model:{value:t.percentage,callback:function(e){t.percentage=e},expression:"percentage"}})],1)])])])],1)]),t._v(" "),a("div",{staticClass:"c-top-border-gray"},[a("div",{staticClass:"c-table-top-btns"},[a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:t.add}},[t._v("添加SIM卡")]),t._v(" "),a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:t.batchadd}},[t._v("批量导入SIM卡")]),t._v(" "),a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:t.deleteConfirm}},[t._v("删除")]),t._v(" "),a("div",{staticStyle:{float:"right","margin-top":"4px"}},[a("a",{attrs:{title:"同步数据"},on:{click:t.updateData}},[a("Icon",{attrs:{type:"loop",color:"#4b7efe",size:"24"}})],1)])],1),t._v(" "),a("Table",{attrs:{columns:t.columns,data:t.listData,loading:t.loading,stripe:""},on:{"on-select-all":t.onSelect,"on-select":t.onSelect,"on-selection-change":t.onSelect}}),t._v(" "),a("Page",{staticClass:"table-page",attrs:{total:t.total,"page-size":t.searchParams.pageSize,current:t.searchParams.currentPage,"show-total":"","show-elevator":"",loading:t.loading},on:{"on-change":t.pageChange}})],1),t._v(" "),a("Modal",{ref:"modal1",staticClass:"mpoint-all",attrs:{title:"添加SIM卡",width:"392"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"c-top-border-gray c-top-border-gray-sim"},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":80}},[a("Row",{staticClass:"div-mt"},[a("Col",[a("FormItem",{attrs:{label:"租户名称:"}},[a("Select",{model:{value:t.formValidate.userid,callback:function(e){t.$set(t.formValidate,"userid",e)},expression:"formValidate.userid"}},t._l(t.users,(function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])})),1)],1),t._v(" "),a("FormItem",{attrs:{label:"ICCID:",prop:"iccids"}},[a("Input",{attrs:{placeholder:"请输入ICCID"},model:{value:t.formValidate.iccids,callback:function(e){t.$set(t.formValidate,"iccids",e)},expression:"formValidate.iccids"}}),t._v(" "),a("Tooltip",{style:{position:"absolute",top:"3px",right:"-20px"},attrs:{placement:"top"}},[a("Icon",{attrs:{type:"help-circled",size:"18",color:"#0097cf"}}),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("p",[t._v("多个ICCID请用分号(;)隔开")])])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"备注:",prop:"remark"}},[a("Input",{attrs:{type:"textarea",placeholder:"请填写备注"},model:{value:t.formValidate.remark,callback:function(e){t.$set(t.formValidate,"remark",e)},expression:"formValidate.remark"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"default",shape:"circle",size:"large"},on:{click:t.cancle}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",shape:"circle",size:"large"},on:{click:function(e){return t.submitAdd("formValidate")}}},[t._v("确定")])],1)])])],1)])};i._withStripped=!0;var s=a(23),n=a(519),r=a(524),l=a(11),c=a(569),o=a(107),d=a(39),u={name:"sim-manager",data:function(){var t=this;return{treeApi:o.a,showModal:!1,site:{id:"",title:"请选择"},advSearch:!1,recieverMap:[{label:"电信",value:"telcom"},{label:"移动",value:"cmcc"},{label:"联通",value:"unicom"}],pushMap:[{label:"在用",value:"0"},{label:"停机",value:"1"},{label:"待激活",value:"2"},{label:"销户",value:"3"},{label:"未知",value:"4"}],delayMap:[{label:"≤100%",value:"100"},{label:"≤80%",value:"80"},{label:"≤60%",value:"60"},{label:"≤40%",value:"40"},{label:"≤20%",value:"20"}],operator:[],cardStatus:[],percentage:[],users:[],searchParams:{queryName:"",pageSize:10,currentPage:1,iccidStart:"",iccidEnd:""},columns:[{type:"selection",width:50},{title:"租户名称",key:"userName"},{title:"ICCID",key:"iccid",render:function(t,e){return t("span",{attrs:{title:e.row.iccid}},e.row.iccid)}},{title:"SIM卡状态",key:"cardStatus",render:function(e,a){var i="";return t.pushMap.forEach((function(t){t.value===a.row.cardStatus&&(i=t.label)})),e("span",i)}},{title:"总流量(MB)",key:"totalFlow",width:100},{title:"已用流量(MB)",key:"usedFlow",width:120},{title:"剩余流量",key:"percentage",width:120,render:function(t,e){return t("span",e.row.percentage+"%")}},{title:"运营商",key:"operator",width:100,render:function(e,a){var i="";return t.recieverMap.forEach((function(t){t.value===a.row.operator&&(i=t.label)})),e("span",i)}},{title:"数据更新时间",key:"updateTime",width:120,render:function(t,e){return l.a.tableDatetime(t,e.row.updateTime)}},{title:"备注",key:"remark",render:function(t,e){return t("span",{attrs:{title:e.row.remark}},e.row.remark)}},{title:"操作",key:"action",width:90,render:function(e,a){return e("div",[l.a.tableBtnStyle(e,(function(){t.$router.push({name:"sim-manager-detail",params:{iccid:a.row.iccid}})}),"查看")])}}],listData:[],total:0,selected:[],loading:!1,formValidate:{userName:"",userid:"",iccids:"",remark:""},ruleValidate:{userid:[{required:!0,message:"请选择用户",trigger:"blur"}],iccids:[{required:!0,message:"请输入ICCID",trigger:"blur"},{validator:function(t,e,a){if(e){/^((.{20})(;?))+$/.test(e)?a():a(new Error("ICCID格式不正确"))}else a(new Error("请输入ICCID"))}}],remark:[{max:50,message:"备注不能超过50个字符",trigger:"change"}]}}},methods:{getData:function(){var t=this;this.loading=!0,this.$http.get(c.a.sims,this.searchParams).then((function(e){t.loading=!1,e&&e.total>=0&&(t.total=e.total,t.listData=e.items?e.items:[])}))},search:function(){this.searchParams.currentPage=1,this.searchParams.cardStatus=this.cardStatus.join(),this.searchParams.operator=this.operator.join(),this.searchParams.percentage=this.percentage.join(),this.getData()},searchParamsClean:function(t){this.site.id="",this.site.title="",this.searchParams={siteId:"",queryName:"",pageSize:10,currentPage:1},this.search()},pageChange:function(t){this.searchParams.currentPage=t,this.getData()},add:function(){this.formValidate.userid="",this.formValidate.iccids="",this.showModal=!0,this.$refs.formValidate.resetFields()},cancle:function(){this.showModal=!1,this.formValidate.userid="",this.formValidate.iccids=""},submitAdd:function(t){var e=this,a=this;this.$refs[t].validate((function(t){if(t){var i=a.formValidate,s=i.iccids,n=i.userid,r=i.remark;e.$http.post(c.a.addCard+"?iccids="+s+"&userid="+n+"&remark="+r).then((function(t){t&&(e.$Notice.success({title:"成功",desc:"添加成功！",duration:3}),e.showModal=!1,e.formValidate.iccids="",e.search())}))}else e.$Notice.warning({title:"警告",desc:"验证失败 ! 请正确填写相关信息",duration:3})}))},batchadd:function(){this.$router.push({name:"sim-manager-batchadd"})},onSelect:function(t,e){this.selected=t},deleteConfirm:function(){if(0!=this.selected.length){for(var t=[],e=0;e<this.selected.length;e++)t.push(this.selected[e].iccid);this.deleteByIds(t.join(","))}else this.$Notice.warning({title:"警告",desc:"请选中后删除",duration:3})},deleteByIds:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>确定要删除？</p>",onOk:function(){e.$http.del(c.a.deleteCards+"?iccids="+t).then((function(t){t&&(e.$Notice.success({title:"成功",desc:"删除成功！",duration:3}),e.selected=[],e.search())}))},onCancel:function(){}})},updateData:function(){var t=this;if(0!=this.selected.length){for(var e=[],a=0;a<this.selected.length;a++)e.push(this.selected[a].iccid);this.$http.put(c.a.updateData+"?iccids="+e).then((function(e){null!=e&&(t.$Notice.success({title:"成功",desc:"同步数据成功！",duration:3}),t.selected=[],t.search())}))}else this.$Notice.warning({title:"警告",desc:"请选中后同步",duration:3})}},components:{CollapseTransition:n.a,mgTab:r.a},computed:Object(s.b)({account:function(t){return t.user.account}}),watch:{"searchParams.more":{handler:function(){this.search()},deep:!0}},created:function(){var t=this;this.search(),l.a.initTableColumnTitle(this.columns),this.$http.get(d.a.getAllTenantAdmins).then((function(e){t.users=e}))}},m=(a(1035),a(1)),p=Object(m.a)(u,i,[],!1,null,"08362548",null);p.options.__file="src/views/sim/sim-manager/list.vue";e.default=p.exports},516:function(t,e,a){var i=a(526);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(17).default)("5a7c571a",i,!1,{})},519:function(t,e,a){"use strict";function i(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function s(t,e){if(t){for(var a=t.className,s=(e||"").split(" "),n=0,r=s.length;n<r;n++){var l=s[n];l&&(t.classList?t.classList.add(l):i(t,l)||(a+=" "+l))}t.classList||(t.className=a)}}function n(t,e){if(t&&e){for(var a=e.split(" "),s=" "+t.className+" ",n=0,r=a.length;n<r;n++){var l=a[n];l&&(t.classList?t.classList.remove(l):i(t,l)&&(s=s.replace(" "+l+" "," ")))}t.classList||(t.className=trim(s))}}var r={beforeEnter:function(t){s(t,"collapse-transition"),t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.height="0",t.style.paddingTop=0,t.style.paddingBottom=0},enter:function(t){t.dataset.oldOverflow=t.style.overflow,0!==t.scrollHeight?(t.style.height=t.scrollHeight+"px",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.height="",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},afterEnter:function(t){n(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow},beforeLeave:function(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.height=t.scrollHeight+"px",t.style.overflow="hidden"},leave:function(t){0!==t.scrollHeight&&(s(t,"collapse-transition"),t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0)},afterLeave:function(t){n(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom}};e.a={name:"CollapseTransition",functional:!0,render:function(t,e){var a=e.children;return t("transition",{on:r},a)}}},524:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-tab",class:{"cmp-tab-underline":t.underline}},t._l(t.items,(function(e){return a("a",{key:e.value,class:{active:t.activeIds.indexOf(e.value)>-1},attrs:{href:"javascript:;"},on:{click:function(a){return t.selectTab(e)}}},[t._v(t._s(e.label))])})),0)};function s(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}i._withStripped=!0;var n=null,r={name:"mgTab",props:{groups:Array,value:Array,multiple:{type:Boolean,default:!1},entire:{type:Boolean,default:!1},underline:Boolean},data:function(){return{activeIds:this.value,items:s(this.groups)}},watch:{groups:function(t){this.entire?this.items=[{label:"全部",value:n}].concat(s(t)):this.items=t},value:function(t){this.activeIds=t}},mounted:function(){this.entire&&this.items.unshift({label:"全部",value:n})},methods:{isSelected:function(t){return this.activeIds.indexOf(t)>-1},removeFromSelected:function(t){var e=this;this.activeIds.forEach((function(a,i){a==t&&e.activeIds.splice(i,1)}))},selectTab:function(t){this.entire&&t.value===n?this.activeIds=[n]:this.multiple?this.isSelected(t.value)?this.removeFromSelected(t.value):(this.activeIds.push(t.value),this.entire&&this.removeFromSelected(n)):(this.activeIds=[],this.activeIds.push(t.value)),this.$emit("input",this.activeIds),this.$emit("on-click",this.activeIds)},setValue:function(t){this.activeIds=t,this.$emit("input",this.activeIds)}}},l=(a(525),a(1)),c=Object(l.a)(r,i,[],!1,null,null,null);c.options.__file="src/components/mg-tab.vue";e.a=c.exports},525:function(t,e,a){"use strict";var i=a(516);a.n(i).a},526:function(t,e,a){(e=a(10)(!1)).push([t.i,"\n.cmp-tab {\r\n\tdisplay: inline-block;\n}\n.cmp-tab a {\r\n\tmargin-right: 20px;\t\r\n\tcolor: #576374;\n}\n.cmp-tab .active{\r\n\tcolor: #4B7EFE;\n}\n.cmp-tab-underline a {\r\n\tpadding: 2px 1px;\r\n\ttext-align: center;\n}\n.cmp-tab-underline .active  {\r\n\tborder-bottom: 2px solid #4B7EFE;\n}\r\n",""]),t.exports=e},569:function(t,e,a){"use strict";var i=a(22),s={sims:"/box/api/sim-manager/cards",updateData:"/box/api/sim-manager/cards/update",addCard:"/box/api/sim-manager/cards",getDetail:"/box/api/sim-manager/cards/detail",getChartData:"/box/api/sim-manager/card/flow",deleteCards:"/box/api/sim-manager/cards",getExcel:i.a+"/box/api/sim-manager/excel-temlate-down",importExcel:i.a+"/box/api/sim-manager/excel-import",saveExcelData:"/box/api/sim-manager/excel-data-save",cancelExcelData:"/box/api/sim-manager/excel-data-cancel",alarms:"/box/api/sim-alarm/alarms",addAlarm:"/box/api/sim-alarm/alarms",getAlarm:"/box/api/sim-alarm/alarm",updateAlarm:"/box/api/sim-alarm/alarm",deleteAlarms:"/box/api/sim-alarm/alarms"};e.a=s},742:function(t,e,a){var i=a(1036);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,a(17).default)("2f3cd799",i,!1,{})}}]);