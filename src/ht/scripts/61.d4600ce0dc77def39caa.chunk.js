(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1224:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fault-add c-main-border"},[a("div",{staticClass:"c-left-border-blue"},[a("h3",[e._v("缺陷申报")]),e._v(" "),a("div",{staticClass:"c-btns-right"},[a("Button",{attrs:{type:"primary",shape:"circle",loading:e.submitLoading},on:{click:e.submit}},[e._v("保存")]),e._v(" "),a("Button",{staticClass:"c-btn-back",attrs:{type:"primary",shape:"circle"},on:{click:e.back}},[e._v("取消")])],1)]),e._v(" "),a("div",{staticClass:"c-top-border-gray padding20-0"},[a("Form",{ref:"faultAddForm",attrs:{model:e.params,rules:e.faultFormRules}},[a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[e._v(" 组织：")]),e._v(" "),a("FormItem",[a("span",[e._v(e._s(e.orgName))])])],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[e._v("申报人：")]),e._v(" "),a("FormItem",[a("span",[e._v(e._s(e.userName))])])],1)]),e._v(" "),a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[a("span",{staticClass:"required"},[e._v("*")]),e._v("缺陷类型：")]),e._v(" "),a("FormItem",{attrs:{prop:"faultTypeId"}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.params.faultTypeId,callback:function(t){e.$set(e.params,"faultTypeId",t)},expression:"params.faultTypeId"}},e._l(e.faultType,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[a("span",{staticClass:"required"},[e._v("*")]),e._v("严重程度：")]),e._v(" "),a("FormItem",{attrs:{prop:"severityType"}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.params.severityType,callback:function(t){e.$set(e.params,"severityType",t)},expression:"params.severityType"}},e._l(e.faultLevel,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)]),e._v(" "),a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[a("span",{staticClass:"required"},[e._v("*")]),e._v("区域位置：")]),e._v(" "),a("FormItem",{attrs:{prop:"processId"}},[a("my-process-tree-authority",{attrs:{url:e.processTreeApi,type:"PROCESS"},on:{"on-change":e.processSelect},model:{value:e.relProcess,callback:function(t){e.relProcess=t},expression:"relProcess"}})],1)],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[e._v("相关设备：")]),e._v(" "),a("FormItem",[e._v("\n            "+e._s(e.params.equName)+"\n            "),a("Input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.params.equId,callback:function(t){e.$set(e.params,"equId",t)},expression:"params.equId"}}),e._v(" "),a("a",{staticClass:"c-btn-text",attrs:{href:"javascript:;"},on:{click:function(t){e.equModalShown=!0}}},[e._v("[选择设备]")]),e._v(" "),a("a",{staticClass:"c-btn-text",attrs:{href:"javascript:;"},on:{click:e.clearEquBind}},[e._v("[清除]")])],1)],1)]),e._v(" "),a("div",{staticClass:"c-form-row-1col"},[a("div",{staticClass:"c-form-item"},[a("label",[e._v("处理人：")]),e._v(" "),a("FormItem",{attrs:{prop:"orgId"}},[a("dropdown-tree",{staticStyle:{width:"150px"},attrs:{url:e.orgTreeApi},on:{"on-change":e.getUnderOrganizationUsers},model:{value:e.org,callback:function(t){e.org=t},expression:"org"}})],1),e._v(" "),a("FormItem",{attrs:{prop:"processingPersonId"}},[a("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择人员"},model:{value:e.params.processingPersonId,callback:function(t){e.$set(e.params,"processingPersonId",t)},expression:"params.processingPersonId"}},e._l(e.operators,(function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1),e._v(" "),a("a",{staticClass:"c-btn-text",attrs:{href:"javascript:;"},on:{click:function(t){e.modalShown=!0}}},[e._v("[在勤人员]")])],1)]),e._v(" "),a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[e._v("备注：")]),e._v(" "),a("Input",{staticStyle:{width:"75%"},attrs:{type:"textarea",maxlength:200},model:{value:e.params.remark,callback:function(t){e.$set(e.params,"remark",t)},expression:"params.remark"}})],1)]),e._v(" "),"alarm"==e.pageType?a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[e._v("报警名称：")]),e._v("\n            "+e._s(e.alarmData.alarmName)+"\n          ")]),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[e._v("报警发生时间：")]),e._v("\n            "+e._s(e.alarmData.localAlarmTriggerTime)+"\n          ")])])]):e._e(),e._v(" "),a("div",{staticClass:"c-form-row-1col"},[a("div",{staticClass:"c-form-item"},[a("label",[e._v("附件上传：")]),e._v(" "),a("Upload",{ref:"upload",staticClass:"img-video-upload-btn",attrs:{action:e.uploadUrl,accept:"image/*, .mp4","on-success":e.successUpload,"on-error":e.errorUpload,"before-upload":e.beforeUpload,"on-exceeded-size":e.handleMaxSize,"show-upload-list":!1,"max-size":5120}},[a("Button",{staticClass:"c-btn-back",attrs:{type:"default",shape:"circle"}},[e._v("点击上传")])],1),e._v(" "),a("Tooltip",{attrs:{placement:"right"}},[a("Icon",{staticStyle:{"vertical-align":"middle"},attrs:{type:"help-circled",size:"18",color:"#adadad"}}),e._v(" "),a("ul",{staticStyle:{"white-space":"normal","padding-left":"15px"},attrs:{slot:"content"},slot:"content"},[a("li",[e._v("可上传图片，格式如：png，jpg，jpeg；")]),e._v(" "),a("li",[e._v("小视频，格式如： mp4，单个视频不超过5M")])])],1)],1)]),e._v(" "),a("div",{staticClass:"c-form-row-1col"},[a("div",{staticClass:"fault-live"},e._l(e.fileList,(function(t,i){return a("div",{staticClass:"fault-live-img",on:{click:function(a){return e.playVideo(t)}}},[1==t.type?a("div",[a("Icon",{attrs:{type:"social-youtube-outline"}}),e._v(" "),a("img",{attrs:{src:t.thumbnailUrl,alt:""}})],1):a("img",{directives:[{name:"img",rawName:"v-img:handleImg(item)",arg:"handleImg(item)"}],attrs:{src:t.imgUrl,alt:""}}),e._v(" "),a("Icon",{attrs:{type:"android-close"},nativeOn:{click:function(t){return e.deleteFile(i)}}})],1)})),0)])])],1),e._v(" "),a("Modal",{attrs:{width:"600",title:"在勤人员列表"},model:{value:e.modalShown,callback:function(t){e.modalShown=t},expression:"modalShown"}},[a("mg-single-select-table",{attrs:{columns:e.modalColumns,url:e.modalUrl,searchPlaceholder:"输入姓名以检索"},on:{"on-select":e.selectStaff}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),e._v(" "),a("Modal",{attrs:{width:"600",title:"选择相关设备"},model:{value:e.equModalShown,callback:function(t){e.equModalShown=t},expression:"equModalShown"}},[a("mg-single-select-table",{ref:"equTable",attrs:{columns:e.equModalColumns,url:e.equModalUrl,searchPlaceholder:"输入设备名称以检索",manual:!0},on:{"on-select":e.onEquModalSelect}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),e._v(" "),a("Modal",{class:"play-dialog",attrs:{width:"600",closable:!0},model:{value:e.isShowPlayDialog,callback:function(t){e.isShowPlayDialog=t},expression:"isShowPlayDialog"}},[a("div",{attrs:{slot:"header"},slot:"header"}),e._v(" "),a("div",{staticStyle:{height:"400px"},attrs:{id:"player"}},[a("video",{attrs:{id:"fault_video",width:"100%",height:"400",controls:"controls"}})]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)};i._withStripped=!0;var r=a(23),n=a(7),s=a(542),o=a(145),l=a(531),c=a(149),u=a(11),d=a(573),p=a(107),m=a(532),h=a(668),v=a(543),g=a(39);n.default.use(s.a);var f={data:function(){return{orgName:"",userName:"",params:{equId:"",equName:"",faultTypeId:"",orgId:"",processId:"",processingPersonId:"",remark:"",severityType:""},submitLoading:!1,faultFormRules:{processId:[{validator:function(e,t,a){t?a():a(new Error)},message:"请选择",trigger:"change"}],faultTypeId:[{required:!0,message:"请选择",trigger:"change"}],severityType:[{required:!0,message:"请选择",trigger:"change"}]},org:{id:"",title:"请选择组织"},relProcess:{id:"",title:"请选择"},orgTreeApi:p.a.getOrgTreeData,processTreeApi:p.a.getProcessTreeData,operators:[],equs:[],equLoading:!1,pageType:"",alarmParams:{alarmId:"",alarmName:"",alarmNumber:"",alarmTime:""},alarmData:{localAlarmTriggerTime:"",alarmTriggerTime:"",alarmName:""},modalShown:!1,modalColumns:[{title:"所属组织",key:"orgName"},{title:"姓名",key:"userName",width:100},{title:"手机号",key:"phone",width:120},{title:"签到时间",key:"createTime",width:110,render:function(e,t){return u.a.tableDatetime(e,t.row.createTime)}}],modalUrl:h.a.getModalStaffs,equModalShown:!1,equModalColumns:[{title:"设备名称",key:"name"},{title:"设备编号",key:"code"},{title:"设备类型",key:"typeName"},{title:"型号",key:"model"}],equModalUrl:m.a.getAllEqu,isShowPlayDialog:!1,uploadUrl:g.a.uploadEx,fileList:[]}},computed:Object(r.b)({faultState:function(e){return e.map.fault.state},faultType:function(e){return e.map.fault.type},faultLevel:function(e){return e.map.fault.level},faultStateText:function(e){return e.map.fault.stateText},faultTypeText:function(e){return e.map.fault.typeText},faultLevelText:function(e){return e.map.fault.levelText},account:function(e){return e.user.account}}),methods:{submit:function(){var e=this,t=d.a.faultReport;"alarm"==this.pageType&&(t=h.a.alarmFaultReport,this.params=Object.assign({},this.params,this.alarmParams)),this.params.processId=this.relProcess.id,this.params.orgId=this.org.id,this.fileList.forEach((function(e){})),this.params.imgUrl=this.fileList.map((function(e){return 0==e.type?e.imgUrl:e.videoUrl})).join(","),this.params.imgThumbnailUrl=this.fileList.map((function(e){return e.thumbnailUrl})).join(","),this.$refs.faultAddForm.validate((function(a){a&&(e.submitLoading=!0,e.$http.post(t,e.params).then((function(t){e.$Notice.success({title:"保存成功！"}),e.$router.push({name:"fault"}),e.submitLoading=!1})))}))},back:function(){this.$router.back()},getUnderOrganizationUsers:function(e,t){var a=this;this.$http.get(p.a.underOrganizationUsers,{orgId:e.id}).then((function(e){e&&e.length&&(a.operators=e,t&&t())}))},getEqus:function(e){var t=this;""!=e&&(this.equLoading=!0,this.$http.get(m.a.getAllEqu,{queryName:e,pageSize:0}).then((function(e){e.items&&(t.equs=e.items),t.equLoading=!1})))},processSelect:function(e){this.params.processId=e.id,this.$refs.equTable.getData({processIds:e.id}),this.params.equId="",this.params.equName=""},selectStaff:function(e){var t=this;this.org.id=e.orgId,this.org.title=e.orgName,this.getUnderOrganizationUsers({id:e.orgId},(function(){t.params.processingPersonId=e.userId,t.modalShown=!1}))},onEquModalSelect:function(e){this.params.equId=e.id.toString(),this.params.equName=e.name,this.equModalShown=!1},clearEquBind:function(){this.params.equId="",this.params.equName=""},successUpload:function(e){-1!=e.name.indexOf("mp4")?this.fileList.push({imgUrl:"",thumbnailUrl:e.thumbFullPath,type:1,videoUrl:e.fullPath}):this.fileList.push({imgUrl:e.fullPath,thumbnailUrl:e.thumbFullPath,type:0,videoUrl:""})},errorUpload:function(e,t,a){this.$Message.error("上传失败")},beforeUpload:function(e){if(6==this.fileList.length)return this.$Notice.warning({title:"上传数量不能超过6张."}),!1},handleMaxSize:function(e){this.$Notice.warning({title:"文件大小超过限制",desc:"文件大小不能超过5M."})},deleteFile:function(e){this.fileList.splice(e,1),event.stopPropagation()},playVideo:function(e){1==e.type&&(this.isShowPlayDialog=!0,document.querySelector("#fault_video").src=e.videoUrl)},handleImg:function(e){return 0===e.type?"handleImg":"handleVideo"}},components:{dropdownTree:o.a,myProcessTreeAuthority:l.a,mgSingleSelectTable:c.a},mounted:function(){var e=this;this.org.id=this.account.orgId||"",this.org.title=this.account.orgName||"请选择",this.getUnderOrganizationUsers({id:this.org.id}),this.orgName=this.$store.state.user.account.orgName,this.userName=this.$store.state.user.account.name,"alarm"==this.$route.query.type&&this.$route.query.id&&(this.pageType="alarm",this.$http.get(v.a.getAlarmData+"/"+this.$route.query.id).then((function(t){e.alarmData=t,e.alarmData.localAlarmTriggerTime=u.a.transDateFromServer(t.alarmTriggerTime,"yyyy-MM-dd hh:mm:ss"),e.alarmParams={alarmId:t.id,alarmName:t.alarmName,alarmNumber:"",alarmTime:t.alarmTriggerTime}})))}},x=(a(886),a(1)),w=Object(x.a)(f,i,[],!1,null,null,null);w.options.__file="src/views/fault/add.vue";t.default=w.exports},509:function(e,t,a){e.exports=a.p+"images/460cff9c7ab20b8d843f779bd487d50f.png"},518:function(e,t,a){var i=a(530);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(17).default)("4411afe8",i,!1,{})},529:function(e,t,a){"use strict";var i=a(518);a.n(i).a},530:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.cmp-dropdown-tree {\r\n    display: inline-block;\r\n    position: relative;\r\n    vertical-align: middle;\r\n    line-height: normal;\n}\n.ivu-form-item-error .cmp-dropdown-tree-label {\r\n    border: 1px solid #ed3f14;\n}\n.ivu-form-item-error .cmp-dropdown-tree-arrow {\r\n    border-left: 1px solid #ed3f14;\n}\n.cmp-dropdown-tree-label {\r\n    height: 28px;\r\n    width: 100%;\r\n    border: 1px solid #eaeaea;\r\n    display: flex;\r\n    border-radius: 3px;\r\n    cursor: pointer;\n}\n.cmp-dropdown-tree-text {\r\n    line-height: 28px;\r\n    text-indent: 5px;\r\n    flex: 1;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    overflow: hidden;\n}\n.cmp-dropdown-tree-arrow {\r\n    margin-top: -1px;\r\n    width: 28px;\r\n    height: 28px;\r\n    border-left: 1px solid #eaeaea;\r\n    text-align: center;\r\n    line-height: 28px;\n}\n.cmp-dropdown-tree .ivu-input-group-append {\r\n    width: 25px;\r\n    height: 28px;\r\n    overflow: hidden;\r\n    padding: 0;\n}\n.cmp-dropdown-tree .ivu-btn {\r\n    padding: 5px 10px;\n}\n.cmp-dropdown-tree-tree {\r\n    z-index: 901;\r\n    position: absolute;\r\n    top: 37px;\r\n    left: 0;\r\n    min-width: 300px;\r\n    max-height: 400px;\r\n    overflow: auto;\r\n    padding: 5px 10px;\r\n    background-color: #fff;\r\n    box-shadow: 1px 1px 5px #999;\r\n    border-radius: 3px;\n}\r\n",""]),e.exports=t},531:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.hideTree,expression:"hideTree"}],staticClass:"cmp-dropdown-tree",style:{width:e.width+"px"}},[a("div",{staticClass:"cmp-dropdown-tree-label",on:{click:e.labelClick}},[a("div",{staticClass:"cmp-dropdown-tree-text"},[e._v(e._s(e.value.title))]),e._v(" "),a("div",{staticClass:"cmp-dropdown-tree-arrow"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:1!=e.isShowTree,expression:"isShowTree != true"}],attrs:{type:"ios-arrow-down"}}),e._v(" "),a("Icon",{directives:[{name:"show",rawName:"v-show",value:1==e.isShowTree,expression:"isShowTree == true"}],attrs:{type:"ios-arrow-up"}})],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTree,expression:"isShowTree"}],staticClass:"cmp-dropdown-tree-tree"},[a("Tree",{attrs:{data:e.datas,"show-checkbox":e.showCheckbox,multiple:e.multiple},on:{"on-select-change":e.selectTree}})],1)])};i._withStripped=!0;var r=a(11),n=a(146),s=a(147);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){!function e(t){t.forEach((function(t,a){t.childrenIds=function e(t,a){a=a||[];return t.forEach((function(t){t.children.length&&e(t.children,a),a.push(Math.abs(t.id))})),a}(t.children),t.children.length&&e(t.children)}))}(e)}var c={name:"myProcessTreeAuthority",mixins:[n.a],props:{field:String,value:Object,data:Array,url:String,query:Object,showCheckbox:Boolean,multiple:Boolean,width:{type:[Number,String],default:300},type:String},watch:{"value.id":function(e){e?this.flatDatas.length&&(r.a.setTrueTreeExpand(this.datas,e),r.a.setTrueTreeSelected(this.datas,e)):(!function e(t){for(var a,i=t.length,r=0;r<i;r++)1==(a=t[r]).selected&&(a.selected=!1),a.children.length&&e(a.children)}(this.datas),this.$emit("input",{id:"",title:"请选择"}))},data:function(e){this.datas=e}},data:function(){return{datas:this.data,flatDatas:[],isShowTree:!1}},methods:{selectTree:function(e){var t=this,a=[],i=[],r=[],n=this.field||"id",s=[];e.forEach((function(e){a.push(Math.abs(e[n])),i.push(e.key),r.push(e.title),s=s.concat(Math.abs(e[n]),e.childrenIds)})),s=o(new Set(s)),this.$emit("input",{id:a.join(),key:i.join(),title:r.join(),childrenIds:s}),this.$emit("on-change",{id:a.join(),key:i.join(),title:r.join(),childrenIds:s}),this.multiple||(this.isShowTree=!1),setTimeout((function(){t.dispatch("FormItem","on-form-change",{id:a.join(),key:i.join(),title:r.join(),childrenIds:s})}),100)},hideTree:function(){this.isShowTree=!1},labelClick:function(){this.isShowTree=!this.isShowTree}},directives:{clickoutside:s.a},mounted:function(){var e=this;this.url&&this.$http.get(this.url,this.query).then((function(t){t&&t.length&&(t.forEach((function(e){!1===e.authorized&&(e.render=function(e,t){t.root,t.node;return e("span",[t.data.name])})})),"EQUTYPE"==e.type&&t.forEach((function(e){var a=t.filter((function(t){return t.parentId==e.id}));("org"==e.type||a.length>0)&&(e.render=function(e,t){t.root,t.node;return e("span",[t.data.name])})})),"PROCESS"==e.type&&t.forEach((function(e){1==e.type&&(e.render=function(e,t){t.root,t.node;return e("span",[t.data.name])})})),e.flatDatas=t,e.value.id&&(r.a.setTreeExpand(e.flatDatas,e.value.id),r.a.setFlatTreeSelected(e.flatDatas,e.value.id)),e.datas=r.a.transDataToTree(e.flatDatas),l(e.datas))}))}},u=(a(529),a(1)),d=Object(u.a)(c,i,[],!1,null,null,null);d.options.__file="src/components/my-process-tree-authority.vue";t.a=d.exports},532:function(e,t,a){"use strict";var i=a(22),r={getAllEqu:"/equipment/api/equipments",deleteEqu:"/equipment/api/equipments",getEquDetail:"/equipment/api/equipments/detail/",saveEqu:"/equipment/api/equipments/detail",delAttachment:"/equipment/api/equ-attachs",getSingleEqu:"/equipment/api/equipments/",getParentEqu:"/equipment/api/equipments/parent/",getEquState:"/equipment/api/equipments/state/",getRemarkByEqu:"/equipment/api/equ-comments",addRemarkByEqu:"/equipment/api/equ-comments",pointsByEqu:"/equipment/api/equipments/mpoint",alarmByEqu:"/equipment/api/alarm-records",equRelPoints:"/equipment/api/mpoints/dropdown-box",getQrcode:i.a+"/equipment/api/equipments/qrcode-export",import:"/equipment/api/excel-import",saveExcelData:"/equipment/api/excel-data-save",cancelExcelData:"/equipment/api/excel-data-cancel",getExcel:i.a+"/equipment/api/excel-temlate-down",importExcel:i.a+"/equipment/api/excel-import",qrcodeExportStart:"/equipment/api/equipments/qrcode-export",qrcodeExportProgress:"/equipment/api/equipments/qrcode-export/progress",qrcodeExportDownload:i.a+"/equipment/api/equipments/qrcode-export/download",equTypeTree:"/equipment/api/equ-types/tree",equTypes:"/equipment/api/equ-types",equType:"/equipment/api/equ-types",gatewayParseMethod:"/box/api/terminals/parse-method",getTerminalList:"/box/api/terminals",terminalDetail:"/box/api/terminals/",addTerminal:"/box/api/terminals",delTerminal:"/box/api/terminals",simSelect:"/box/api/sim-manager/cards/select"};t.a=r},542:function(e,t,a){"use strict";!function(){if("undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style"),a=" *[data-v-5928e1c7] { -webkit-box-sizing: border-box; box-sizing: border-box; } .fullscreen-v-img[data-v-5928e1c7] { z-index: 9999; height: 100%; width: 100%; position: fixed; top: 0; left: 0; overflow: hidden; background-color: rgba(0, 0, 0, 0.7); -ms-touch-action: none; touch-action: none; } .content-v-img img[data-v-5928e1c7] { width: auto; height: auto; max-width: 100%; max-height: 100%; position: absolute; top: 0; left: 0; right: 0; bottom: 0; margin: auto; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .header-v-img[data-v-5928e1c7], .footer-v-img[data-v-5928e1c7] { position: absolute; width: 100%; background-color: rgba(0, 0, 0, 0.3); height: 50px; z-index: 9999; display: flex; align-items: center; } .header-v-img[data-v-5928e1c7] { justify-content: space-between; } .footer-v-img[data-v-5928e1c7] { bottom: 0; justify-content: center; height: 70px; /* scrolling thumbnails on mobile */ overflow-x: auto; } .footer-v-img img[data-v-5928e1c7] { width: 60px; height: 60px; cursor: pointer; -webkit-transition: transform 0.2s ease-out; transition: transform 0.2s ease-out; object-fit: cover; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; } .footer-v-img img.is-selected[data-v-5928e1c7] { transform: scale(1.1); } .footer-v-img img[data-v-5928e1c7]:not(:last-child) { margin-right: 7px; } .title-v-img[data-v-5928e1c7] { font-family: 'Avenir', Helvetica, Arial, sans-serif; font-size: 18px; font-weight: 400; color: white; text-align: center; max-height: 100%; overflow: auto; } .count-v-img[data-v-5928e1c7], .buttons-v-img[data-v-5928e1c7] { width: 80px; font-family: 'Avenir', Helvetica, Arial, sans-serif; } .count-v-img[data-v-5928e1c7] { font-size: 15px; color: white; margin-left: 10px; } .buttons-v-img[data-v-5928e1c7] { margin-right: 10px; text-align: right; } .buttons-v-img span path[data-v-5928e1c7] { fill: #e5e6eb; -webkit-transition: fill 0.4s ease-in-out; transition: fill 0.4s ease-in-out; } .buttons-v-img span[data-v-5928e1c7] { cursor: pointer; color: #e5e6eb; font-size: 30px; -webkit-transition: color 0.4s ease-in-out; transition: color 0.4s ease-in-out; text-decoration: none; text-align: center; } .buttons-v-img span[data-v-5928e1c7]:not(:last-child) { margin-right: 8px; } .buttons-v-img span svg[data-v-5928e1c7] { height: 20px; width: 15px; } .buttons-v-img span:hover svg path[data-v-5928e1c7] { fill: white; } .buttons-v-img span[data-v-5928e1c7]:hover { color: white; } .prev-v-img svg[data-v-5928e1c7], .next-v-img svg[data-v-5928e1c7] { margin: 5px auto; } .prev-v-img[data-v-5928e1c7], .next-v-img[data-v-5928e1c7] { color: white; width: 35px; height: 35px; position: absolute; top: 50%; margin-top: -12.5px; font-size: 15px; font-family: 'Avenir', Helvetica, Arial, sans-serif; text-align: center; background-color: rgba(0, 0, 0, 0.3); z-index: 1000; opacity: 0.3; -webkit-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; cursor: pointer; } .prev-v-img[data-v-5928e1c7]:hover, .next-v-img[data-v-5928e1c7]:hover { opacity: 1; } .prev-v-img[data-v-5928e1c7] { left: 10px; } .next-v-img[data-v-5928e1c7] { right: 10px; } .v-img-fade-enter[data-v-5928e1c7], .v-img-fade-leave-to[data-v-5928e1c7] { opacity: 0; } .v-img-fade-enter-active[data-v-5928e1c7], .v-img-fade-leave-active[data-v-5928e1c7] { -webkit-transition: opacity 0.3s ease-in-out; transition: opacity 0.3s ease-in-out; } ";t.type="text/css",t.styleSheet?t.styleSheet.cssText=a:t.appendChild(document.createTextNode(a)),e.appendChild(t)}}();var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{appear:"",name:"v-img-fade"}},[e.closed?e._e():a("div",{staticClass:"fullscreen-v-img",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.close(t)}}},[a("div",{staticClass:"header-v-img"},[a("span",{staticClass:"count-v-img"},[e.images.length>1?a("span",[e._v(e._s(e.currentImageIndex+1)+"/"+e._s(e.images.length)+" ")]):e._e()]),a("span",{staticClass:"title-v-img"},[e._v(e._s(e.titles[e.currentImageIndex]))]),a("div",{staticClass:"buttons-v-img"},[e.sourceButtons[e.currentImageIndex]?a("span",[a("a",{attrs:{href:e.images[e.currentImageIndex],target:"_blank"}},[a("svg",{staticStyle:{"enable-background":"new 0 0 475.078 475.077"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"512px",height:"512px",viewBox:"0 0 475.078 475.077","xml:space":"preserve"}},[a("path",{attrs:{d:"M467.083,318.627c-5.324-5.328-11.8-7.994-19.41-7.994H315.195l-38.828,38.827c-11.04,10.657-23.982,15.988-38.828,15.988    c-14.843,0-27.789-5.324-38.828-15.988l-38.543-38.827H27.408c-7.612,0-14.083,2.669-19.414,7.994    C2.664,323.955,0,330.427,0,338.044v91.358c0,7.614,2.664,14.085,7.994,19.414c5.33,5.328,11.801,7.99,19.414,7.99h420.266    c7.61,0,14.086-2.662,19.41-7.99c5.332-5.329,7.994-11.8,7.994-19.414v-91.358C475.078,330.427,472.416,323.955,467.083,318.627z     M360.025,414.841c-3.621,3.617-7.905,5.424-12.854,5.424s-9.227-1.807-12.847-5.424c-3.614-3.617-5.421-7.898-5.421-12.844    c0-4.948,1.807-9.236,5.421-12.847c3.62-3.62,7.898-5.431,12.847-5.431s9.232,1.811,12.854,5.431    c3.613,3.61,5.421,7.898,5.421,12.847C365.446,406.942,363.638,411.224,360.025,414.841z M433.109,414.841    c-3.614,3.617-7.898,5.424-12.848,5.424c-4.948,0-9.229-1.807-12.847-5.424c-3.613-3.617-5.42-7.898-5.42-12.844    c0-4.948,1.807-9.236,5.42-12.847c3.617-3.62,7.898-5.431,12.847-5.431c4.949,0,9.233,1.811,12.848,5.431    c3.617,3.61,5.427,7.898,5.427,12.847C438.536,406.942,436.729,411.224,433.109,414.841z",fill:"#FFFFFF"}}),a("path",{attrs:{d:"M224.692,323.479c3.428,3.613,7.71,5.421,12.847,5.421c5.141,0,9.418-1.808,12.847-5.421l127.907-127.908    c5.899-5.519,7.234-12.182,3.997-19.986c-3.23-7.421-8.847-11.132-16.844-11.136h-73.091V36.543c0-4.948-1.811-9.231-5.421-12.847    c-3.62-3.617-7.901-5.426-12.847-5.426h-73.096c-4.946,0-9.229,1.809-12.847,5.426c-3.615,3.616-5.424,7.898-5.424,12.847V164.45    h-73.089c-7.998,0-13.61,3.715-16.846,11.136c-3.234,7.801-1.903,14.467,3.999,19.986L224.692,323.479z",fill:"#FFFFFF"}})])])]):e._e(),a("span",{on:{click:e.close}},[e._v("×")])])]),a("transition",{attrs:{appear:"",name:"v-img-fade"}},[e.visibleUI&&1!==e.images.length?a("span",{staticClass:"prev-v-img",on:{click:e.prev}},[a("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 1792 1915",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1664 896v128q0 53-32.5 90.5t-84.5 37.5h-704l293 294q38 36 38 90t-38 90l-75 76q-37 37-90 37-52 0-91-37l-651-652q-37-37-37-90 0-52 37-91l651-650q38-38 91-38 52 0 90 38l75 74q38 38 38 91t-38 91l-293 293h704q52 0 84.5 37.5t32.5 90.5z",fill:"#fff"}})])]):e._e()]),a("transition",{attrs:{appear:"",name:"v-img-fade"}},[e.visibleUI&&1!==e.images.length?a("span",{staticClass:"next-v-img",on:{click:e.next}},[a("svg",{attrs:{width:"25",height:"25",viewBox:"0 0 1792 1915",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M1600 960q0 54-37 91l-651 651q-39 37-91 37-51 0-90-37l-75-75q-38-38-38-91t38-91l293-293h-704q-52 0-84.5-37.5t-32.5-90.5v-128q0-53 32.5-90.5t84.5-37.5h704l-293-294q-38-36-38-90t38-90l75-75q38-38 90-38 53 0 91 38l651 651q37 35 37 90z",fill:"#fff"}})])]):e._e()]),e.thumbnails&&e.images.length>1?a("div",{staticClass:"footer-v-img"},e._l(e.images,(function(t,i){return a("img",{key:i,class:{"is-selected":e.currentImageIndex==i},attrs:{src:t},on:{click:function(t){e.select(i)}}})}))):e._e(),a("div",{staticClass:"content-v-img"},[a("img",{attrs:{src:e.images[e.currentImageIndex]},on:{click:e.next}})])],1)])},staticRenderFns:[],_scopeId:"data-v-5928e1c7",data:function(){return{images:[],titles:[],sourceButtons:[],visibleUI:!0,currentImageIndex:0,closed:!0,uiTimeout:null,handlers:{},thumbnails:!1}},watch:{closed:function(e){e&&this.handlers.closed&&this.handlers.closed(),!e&&this.handlers.opened&&this.handlers.opened()}},methods:{fireChangeEvent:function(){this.handlers.changed&&this.handlers.changed(this.currentImageIndex)},close:function(){this.closed||(document.querySelector("body").classList.remove("body-fs-v-img"),this.images=[],this.currentImageIndex=0,this.closed=!0)},next:function(){!this.closed&&this.images.length>1&&(this.currentImageIndex+1<this.images.length?this.currentImageIndex++:this.currentImageIndex=0,this.fireChangeEvent())},select:function(e){this.currentImageIndex=e},prev:function(){!this.closed&&this.images.length>1&&(this.currentImageIndex>0?this.currentImageIndex--:this.currentImageIndex=this.images.length-1,this.fireChangeEvent())},showUI:function(){var e=this;this.closed||(clearTimeout(this.uiTimeout),this.visibleUI=!0,this.uiTimeout=setTimeout((function(){e.visibleUI=!1}),3500))}},created:function(){var e=this;window.addEventListener("keyup",(function(t){27!==t.keyCode&&81!==t.keyCode||e.close(),39!==t.keyCode&&76!==t.keyCode||e.next(),37!==t.keyCode&&72!==t.keyCode||e.prev()})),window.addEventListener("scroll",(function(){e.close()})),window.addEventListener("mousemove",(function(){e.showUI()}))}},r=(function(){function e(e){this.value=e}function t(t){function a(r,n){try{var s=t[r](n),o=s.value;o instanceof e?Promise.resolve(o.value).then((function(e){a("next",e)}),(function(e){a("throw",e)})):i(s.done?"return":"normal",s.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?a(r.key,r.arg):n=null}var r,n;this._invoke=function(e,t){return new Promise((function(i,s){var o={key:e,arg:t,resolve:i,reject:s,next:null};n?n=n.next=o:(r=n=o,a(e,t))}))},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}),n=function(e,t,a){var i="pointer",r=t.arg||null,n=void 0,s=void 0,o=e.src,l=void 0,c=void 0,u={};return a.altAsTitle&&(l=e.alt),n=a.openOn,s=a.sourceButton,c=a.thumbnails,void 0!==t.value&&(i=t.value.cursor||i,r=t.value.group||r,n=t.value.openOn||n,o=t.value.src||o,l=t.value.title||l,u.opened=t.value.opened,u.closed=t.value.closed,u.changed=t.value.changed,void 0!==t.value.sourceButton&&(s=t.value.sourceButton),void 0!==t.value.thumbnails&&(c=t.value.thumbnails)),e.setAttribute("data-vue-img-src",o),r&&e.setAttribute("data-vue-img-group",r),l&&e.setAttribute("data-vue-img-title",l),s&&e.setAttribute("data-vue-img-source-button",s),c&&e.setAttribute("data-vue-img-thumbnails",c),o||console.error("v-img element missing src parameter."),e.style.cursor=i,{cursor:i,src:o,group:r,title:l,events:u,sourceButton:s,openOn:n,thumbnails:c}},s=function(e,t){var a=e.extend(i);t=r({altAsTitle:!1,sourceButton:!1,thumbnails:!1,openOn:"click"},t),e.directive("img",{update:function(e,a,i,r){var s=void 0,o=void 0;r.data.attrs&&i.data.attrs&&(o=r.data.attrs.src!==i.data.attrs.src,t.altAsTitle&&(s=r.data.attrs.alt!==i.data.attrs.alt));var l=a.oldValue!==a.value;(o||s||l)&&n(e,a,t)},bind:function(i,r){var s=n(i,r,t),o=window.vueImg;if(!o){var l=document.createElement("div");l.setAttribute("id","imageScreen"),document.querySelector("body").appendChild(l),o=window.vueImg=(new a).$mount("#imageScreen")}i.addEventListener(s.openOn,(function(){var t=void 0;t=i.dataset.vueImgGroup?[].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(document.querySelectorAll('img[data-vue-img-group="'+i.dataset.vueImgGroup+'"]'))):[i],e.set(o,"images",t.map((function(e){return e.dataset.vueImgSrc}))),e.set(o,"titles",t.map((function(e){return e.dataset.vueImgTitle}))),e.set(o,"sourceButtons",t.map((function(e){return"true"===e.dataset.vueImgSourceButton}))),e.set(o,"thumbnails","true"===i.dataset.vueImgThumbnails),e.set(o,"currentImageIndex",t.indexOf(i)),e.set(o,"handlers",s.events),e.set(o,"closed",!1)}))}})};"undefined"!=typeof window&&window.Vue&&window.Vue.use(s),t.a=s},543:function(e,t,a){"use strict";a(22);t.a={updateDefineStatus:"/loong/api/alarm-definitions/status",defines:"/loong/api/alarm-definitions",modalDefines:"/loong/api/alarm-definitions",history:"/loong/api/alarm-records",history_detail:"/loong/api/alarm-records/detail",release:"/loong/api/alarm-records/confirm",getAlarmData:"/loong/api/alarm-records",subscribe:"/loong/api/alarm-subscriptions"}},573:function(e,t,a){"use strict";var i={faultReport:"/equipment/api/faults",getFaults:"/equipment/api/faults",getFaultDetail:"/equipment/api/faults",taskAssign:"/equipment/api/faults/assign",taskHandle:"/equipment/api/faults/process",getFaultStatistics:"/equipment/api/faults/statistics",export:a(22).a+"/equipment/api/faults/statistics-export",getFaultsEqu:"/equipment/api/faults/equ",getSpare:"/inventory/api/outbounds/web"};t.a=i},668:function(e,t,a){"use strict";t.a={processTree:"/portal/api/dispatch-processes/tree",processDetail:"/portal/api/dispatch-processes",alarmsData:"/portal/api/dispatch-alarms",staffsData:"/portal/api/dispatch-users",staffDetail:"/portal/api/dispatch-users",getFavView:"/portal/api/dispatch-collections",favView:"/portal/api/dispatch-collections",summaryData:"/portal/api/dispatch-statistics",alarmFaultReport:"/portal/api/dispatch-faults",getModalStaffs:"/portal/api/dispatch-users"}},669:function(e,t,a){var i=a(887);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(17).default)("a5ff9e22",i,!1,{})},886:function(e,t,a){"use strict";var i=a(669);a.n(i).a},887:function(e,t,a){var i=a(10),r=a(510);(t=i(!1)).i(r),t.push([e.i,"\n.fault-add .required{\r\n    color: #ff0000;\r\n    display: inline-block;\r\n    width: 10px;\r\n    height: 30px;\r\n    vertical-align: middle;\r\n    text-align: center;\n}\n.fault-add .img-video-upload-btn {\r\n  display: inline-block;\n}\n.fault-add .fault-live {\r\n  padding: 10px 0;\r\n  margin-left: 120px;\n}\n.fault-add .fault-live-img {\r\n  overflow: visible;\r\n  margin-right: 15px;\n}\n.fault-add .fault-live-img img {\r\n  font-size: 0;\r\n  width: 130px;\r\n  height: 130px;\n}\n.fault-add .ivu-icon-android-close {\r\n  left: 100%;\r\n  top: 0;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  border: 1px solid #aaa;\r\n  width: 20px;\r\n  height: 20px;\r\n  line-height: 18px;\r\n  color: #aaa;\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  transform: translate(-50%, -50%);\n}\n.fault-add .ivu-icon-android-close:hover {\r\n  background-color: #2e457a;\r\n  color: #fff;\n}\r\n",""]),e.exports=t}}]);