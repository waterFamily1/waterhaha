(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{1143:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"concern-wrap c-sub-lay"},[e("div",{staticClass:"c-sub-menu"},[e("ul",t._l(t.taskStatusMap,(function(a,s){return e("li",{key:s,class:{active:t.taskStatusActive==t.taskStatus[s]},on:{click:function(a){return t.typeClick(s)}}},[e("a",{attrs:{href:"javascript:void(null)"}},[t._v(t._s(a))])])})),0)]),t._v(" "),e("div",{staticClass:"c-sub-main c-scrollbar"},[e("div",{staticClass:"c-plain-bg-h"},[e("h3",[t._v(t._s(t.taskCodes[t.taskStatusActive]))])]),t._v(" "),t.loadding?e("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),e("div",{staticClass:"padding10"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"equipment"==t.taskStatusActive,expression:"taskStatusActive == 'equipment'"}]},[e("Row",{staticClass:"itme-title",attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"3"}},[t._v("设备图片")]),t._v(" "),e("Col",{attrs:{span:"5"}},[t._v("设备名称")]),t._v(" "),e("Col",{attrs:{span:"4"}},[t._v("设备编号")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("运行状态")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("资产状态")]),t._v(" "),e("Col",{attrs:{span:"4"}},[t._v("区域位置")]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[t._v("操作")])],1),t._v(" "),t._l(t.listData,(function(a,n){return e("Row",{staticClass:"my-concern-list-item",attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"3"}},[e("div",{staticClass:"pic",on:{click:function(s){return t.detailClick(a)}}},[e("img",{directives:[{name:"show",rawName:"v-show",value:a.imgUrl,expression:"item.imgUrl"}],attrs:{src:a.imgUrl,width:"100%"}}),t._v(" "),e("img",{directives:[{name:"show",rawName:"v-show",value:!a.imgUrl,expression:"!item.imgUrl"}],attrs:{src:s(557)}})])]),t._v(" "),e("Col",{attrs:{span:"5"}},[e("span",{staticClass:"name",attrs:{title:a.name},on:{click:function(s){return t.detailClick(a)}}},[t._v(t._s(a.name))])]),t._v(" "),e("Col",{attrs:{span:"4",title:a.no}},[t._v(t._s(a.no))]),t._v(" "),e("Col",{attrs:{span:"3",title:a.maintain}},[t._v(t._s(a.maintain))]),t._v(" "),e("Col",{attrs:{span:"3",title:a.status}},[t._v(t._s(a.status))]),t._v(" "),e("Col",{attrs:{span:"4",title:a.process}},[t._v(t._s(a.process))]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[e("a",{staticClass:"cancen-btn",attrs:{href:"javascript:void(null)"},on:{click:function(s){return t.cancelConcern(a)}}},[t._v("取消关注")])])],1)}))],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"patrol"==t.taskStatusActive,expression:"taskStatusActive == 'patrol'"}]},[e("Row",{staticClass:"itme-title",attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"7"}},[t._v("巡检任务名称")]),t._v(" "),e("Col",{attrs:{span:"6"}},[t._v("状态")]),t._v(" "),e("Col",{attrs:{span:"6"}},[t._v("执行人")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("执行时间")]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[t._v("操作")])],1),t._v(" "),t._l(t.listData,(function(a,s){return e("Row",{staticClass:"my-concern-list-item",attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"7"}},[e("span",{staticClass:"name padding-l-20",attrs:{title:a.name},on:{click:function(s){return t.detailClick(a)}}},[t._v(t._s(a.name))])]),t._v(" "),e("Col",{attrs:{span:"6",title:a.status}},[t._v(t._s(a.status))]),t._v(" "),e("Col",{attrs:{span:"6",title:a.executorName}},[t._v(t._s(a.executorName))]),t._v(" "),e("Col",{staticClass:"color999",attrs:{span:"3"}},[t._v(t._s(t._f("transDateFromServer")(a.dateTime)))]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[e("a",{staticClass:"cancen-btn",attrs:{href:"javascript:void(null)"},on:{click:function(s){return t.cancelConcern(a)}}},[t._v("取消关注")])])],1)}))],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"fault"==t.taskStatusActive,expression:"taskStatusActive == 'fault'"}]},[e("Row",{staticClass:"itme-title",attrs:{type:"flex"}},[e("Col",{attrs:{span:"3"}},[t._v("缺陷类型")]),t._v(" "),e("Col",{attrs:{span:"4"}},[t._v("编号")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("状态")]),t._v(" "),e("Col",{attrs:{span:"2"}},[t._v("等级")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("申报人")]),t._v(" "),e("Col",{attrs:{span:"4"}},[t._v("所属组织")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("创建时间")]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[t._v("操作")])],1),t._v(" "),t._l(t.listData,(function(a,s){return e("Row",{staticClass:"my-concern-list-item",attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"3"}},[e("span",{staticClass:"name padding-l-20",attrs:{title:a.name},on:{click:function(s){return t.detailClick(a)}}},[t._v(t._s(a.name))])]),t._v(" "),e("Col",{attrs:{span:"4",title:a.no}},[t._v(t._s(a.no))]),t._v(" "),e("Col",{attrs:{span:"3",title:a.status}},[t._v(t._s(a.status))]),t._v(" "),e("Col",{attrs:{span:"2",title:a.severity}},[t._v(t._s(a.severity))]),t._v(" "),e("Col",{attrs:{span:"3",title:a.createrName}},[t._v(t._s(a.createrName))]),t._v(" "),e("Col",{attrs:{span:"4",title:a.orgName}},[t._v(t._s(a.orgName))]),t._v(" "),e("Col",{staticClass:"color999",attrs:{span:"3"}},[t._v(t._s(t._f("transDateFromServer")(a.dateTime)))]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[e("a",{staticClass:"cancen-btn",attrs:{href:"javascript:void(null)"},on:{click:function(s){return t.cancelConcern(a)}}},[t._v("取消关注")])])],1)}))],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"repair"==t.taskStatusActive,expression:"taskStatusActive == 'repair'"}]},[e("Row",{staticClass:"itme-title",attrs:{type:"flex"}},[e("Col",{attrs:{span:"4"}},[t._v("故障设备名称")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("设备编号")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("区域位置")]),t._v(" "),e("Col",{attrs:{span:"2"}},[t._v("维修类型")]),t._v(" "),e("Col",{attrs:{span:"2"}},[t._v("维修编号")]),t._v(" "),e("Col",{attrs:{span:"2"}},[t._v("状态")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("处理人")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("创建时间")]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[t._v("操作")])],1),t._v(" "),t._l(t.listData,(function(a,s){return e("Row",{staticClass:"my-concern-list-item",attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"4"}},[e("span",{staticClass:"name padding-l-20",attrs:{title:a.name},on:{click:function(s){return t.detailClick(a)}}},[t._v(t._s(a.name))])]),t._v(" "),e("Col",{attrs:{span:"3",title:a.equNo}},[t._v(t._s(a.equNo))]),t._v(" "),e("Col",{attrs:{span:"3",title:a.process}},[t._v(t._s(a.process))]),t._v(" "),e("Col",{attrs:{span:"2",title:a.repairType}},[t._v(t._s(a.repairType))]),t._v(" "),e("Col",{attrs:{span:"2",title:a.no}},[t._v(t._s(a.no))]),t._v(" "),e("Col",{attrs:{span:"2",title:a.status}},[t._v(t._s(a.status))]),t._v(" "),e("Col",{attrs:{span:"3",title:a.executorName}},[t._v(t._s(a.executorName))]),t._v(" "),e("Col",{staticClass:"color999",attrs:{span:"3"}},[t._v(t._s(t._f("transDateFromServer")(a.dateTime)))]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[e("a",{staticClass:"cancen-btn",attrs:{href:"javascript:void(null)"},on:{click:function(s){return t.cancelConcern(a)}}},[t._v("取消关注")])])],1)}))],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"maintain"==t.taskStatusActive,expression:"taskStatusActive == 'maintain'"}]},[e("Row",{staticClass:"itme-title",attrs:{type:"flex"}},[e("Col",{attrs:{span:"6"}},[t._v("任务名称")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("开始日期")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("结束日期")]),t._v(" "),e("Col",{attrs:{span:"2"}},[t._v("状态")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("执行人")]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v("保养内容项")]),t._v(" "),e("Col",{attrs:{span:"2"}},[t._v("缺陷数量")]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[t._v("操作")])],1),t._v(" "),t._l(t.listData,(function(a,s){return e("Row",{staticClass:"my-concern-list-item",attrs:{type:"flex",align:"middle"}},[e("Col",{attrs:{span:"6"}},[e("span",{staticClass:"name padding-l-20",attrs:{title:a.name},on:{click:function(s){return t.detailClick(a)}}},[t._v(t._s(a.name))])]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v(t._s(t._f("transDateFromServerTime")(a.startDate)))]),t._v(" "),e("Col",{attrs:{span:"3"}},[t._v(t._s(t._f("transDateFromServerTime")(a.endDate)))]),t._v(" "),e("Col",{attrs:{span:"2",title:a.stateName}},[t._v(t._s(a.stateName))]),t._v(" "),e("Col",{attrs:{span:"3",title:a.executeUserName}},[t._v(t._s(a.executeUserName))]),t._v(" "),e("Col",{attrs:{span:"3",title:a.contentsItems}},[t._v(t._s(a.contentsItems))]),t._v(" "),e("Col",{attrs:{span:"2",title:a.faults}},[t._v(t._s(a.faults))]),t._v(" "),e("Col",{attrs:{span:"2",align:"center"}},[e("a",{staticClass:"cancen-btn",attrs:{href:"javascript:void(null)"},on:{click:function(s){return t.cancelConcern(a)}}},[t._v("取消关注")])])],1)}))],2),t._v(" "),e("Row",{directives:[{name:"show",rawName:"v-show",value:!t.listData.length,expression:"!listData.length"}],staticClass:"c-nodata-tip"},[e("col"),t._v("暂无数据")]),t._v(" "),e("Page",{staticClass:"table-page",attrs:{total:t.total,"page-size":t.params.pageSize,currnet:t.params.currentPage,"show-total":"","show-elevator":""},on:{"on-change":t.pageChange}})],1)],1)])};e._withStripped=!0;var n=s(23),i=s(608),r=s(148),l=s(11),o={data:function(){return{params:{type:this.$route.params.type,pageSize:10,currentPage:1},taskStatusActive:this.$route.params.type,listData:[],loadding:!1,total:0}},computed:Object(n.b)({stateText:function(t){return t.map.equ.statesText},taskStatusMap:function(t){return t.map.concern.taskStatusMap.filter((function(a,s){var e=t.map.concern.role[s];return-1!==sessionStorage.getItem("__MENUS_ROLE__").indexOf(e)}))},taskStatus:function(t){return t.map.concern.taskStatus.filter((function(a,s){var e=t.map.concern.role[s];return-1!==sessionStorage.getItem("__MENUS_ROLE__").indexOf(e)}))},taskCodes:function(t){return t.map.concern.taskCodes},detailPage:function(t){return t.map.concern.detailPage}}),watch:{"$route.params.type":function(t){this.params.type=t,this.taskStatusActive=t,this.getList()}},filters:{transDateFromServer:l.a.transDateFromServer,transDateFromServerTime:function(t){return l.a.transDateFromServer(t,"yyyy-MM-dd")}},methods:{getList:function(){var t=this;this.loadding=!0,this.$http.get(i.a.getConcern,this.params).then((function(a){a&&(t.listData=a.items||[],t.total=a.total,a.deleteItemCount&&a.deleteItemCount>0&&t.$Notice.info({title:"提示信息",desc:a.deleteItemCount+"个关注的测点已被删除，已自动取消关注"})),t.loadding=!1})).catch((function(){t.listData=[],t.total=0,t.loadding=!1}))},typeClick:function(t){this.params.currentPage=1,this.$router.replace({name:"concern",params:{type:this.taskStatus[t]}})},pageChange:function(t){this.params.currentPage=t,this.getList()},detailClick:function(t){var a=this.detailPage[this.taskStatusActive];"patrol-task-detail"==a&&"Outside"==t.type?this.$router.push({name:a,params:{id:t.itemId},query:{type:"map"}}):this.$router.push({name:a,params:{id:t.itemId}})},cancelConcern:function(t){var a=this;this.$Modal.confirm({title:"提示",content:"<p>是否要取消关注此条数据？</p>",onOk:function(){a.$http.del(r.a.cancelConcern,{concernIds:t.itemId,type:a.params.type}).then((function(t){t&&(a.$Notice.success({title:"成功",desc:"取消关注成功！",duration:3}),a.getList())}))},onCancel:function(){}})}},created:function(){this.params.type||(this.params.type=this.taskStatus[0],this.taskStatusActive=this.taskStatus[0])},mounted:function(){this.getList()}},c=(s(792),s(1)),v=Object(c.a)(o,e,[],!1,null,null,null);v.options.__file="src/views/concern/list.vue";a.default=v.exports},557:function(t,a,s){t.exports=s.p+"images/a6133ca5be7d6307c4ae35d9e4493f54.png"},608:function(t,a,s){"use strict";a.a={getTasks:"/portal/api/tasks",getConcern:"/portal/api/concerns"}},609:function(t,a,s){var e=s(793);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);(0,s(17).default)("43b2678e",e,!1,{})},792:function(t,a,s){"use strict";var e=s(609);s.n(e).a},793:function(t,a,s){(a=s(10)(!1)).push([t.i,".concern-wrap .c-sub-main .itme-title {\n  height: 40px;\n  line-height: 40px;\n  font-size: 12px;\n  background-color: #E5E8E9;\n}\n.concern-wrap .c-sub-main .itme-title > div:first-child {\n  padding-left: 20px;\n}\n.concern-wrap .c-sub-main .pic {\n  width: 100px;\n  height: 100px;\n  cursor: pointer;\n}\n.concern-wrap .c-sub-main .pic img {\n  margin: 10px;\n}\n.concern-wrap .c-sub-main .name {\n  cursor: pointer;\n}\n.concern-wrap .c-sub-main .cancen-btn {\n  font-size: 12px;\n  color: #4b7efe;\n}\n.concern-wrap .c-sub-main .my-concern-list-item {\n  padding: 15px 0;\n  border-bottom: 1px solid #eee;\n  font-size: 12px;\n  line-height: 30px;\n}\n.concern-wrap .c-sub-main .my-concern-list-item > div {\n  padding-right: 5px;\n}\n.concern-wrap .c-sub-main.c-top-border-gray {\n  border-top: 10px solid #f0f0f0;\n}\n.concern-wrap .c-sub-main .ivu-col {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.concern-wrap .padding-l-20 {\n  padding-left: 20px;\n}\n.concern-wrap .color999 {\n  color: #999;\n}\n",""]),t.exports=a}}]);