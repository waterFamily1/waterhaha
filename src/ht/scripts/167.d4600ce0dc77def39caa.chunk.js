(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{1195:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"c-main-border"},[i("div",{staticClass:"c-left-border-blue"},[i("div",{staticClass:"c-search-main"},[i("div",{staticClass:"c-form-item"},[i("label",[e._v("关键字：")]),i("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"物料名称或物料编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchParams.queryName,callback:function(t){e.$set(e.searchParams,"queryName",t)},expression:"searchParams.queryName"}})],1),e._v(" "),i("div",{staticClass:"c-form-item"},[i("label",[e._v("组织信息：")]),e._v(" "),i("dropdown-tree",{attrs:{url:e.orgTreeApi,multiple:!1,width:200},on:{input:e.chooseOrg},model:{value:e.org,callback:function(t){e.org=t},expression:"org"}})],1),e._v(" "),i("div",{staticClass:"c-form-item"},[i("label",[e._v("物料类别：")]),e._v(" "),i("dropdown-tree",{attrs:{data:e.materielCategoryArr,multiple:!1,width:180},model:{value:e.materielCategory,callback:function(t){e.materielCategory=t},expression:"materielCategory"}})],1),e._v(" "),i("div",{staticClass:"c-adv-search-btn"},[i("Button",{attrs:{type:"primary",shape:"circle"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),i("Button",{staticClass:"c-btn-reset",attrs:{type:"primary",shape:"circle"},on:{click:e.searchParamsClean}},[e._v("重置")])],1)])]),e._v(" "),i("div",{staticClass:"c-top-border-gray"},[i("div",{directives:[{name:"role",rawName:"v-role:multiple",value:"material-add,material-import,material-export",expression:"'material-add,material-import,material-export'",arg:"multiple"}],staticClass:"c-table-top-btns"},[i("Button",{directives:[{name:"role",rawName:"v-role",value:"material-add",expression:"'material-add'"}],staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.toAddMaterial}},[e._v("物料新增")]),e._v(" "),i("Button",{directives:[{name:"role",rawName:"v-role",value:"material-import",expression:"'material-import'"}],staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.infoExport}},[e._v("信息导出")]),e._v(" "),i("Button",{directives:[{name:"role",rawName:"v-role",value:"material-export",expression:"'material-export'"}],staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.toInfoImport}},[e._v("信息导入")])],1),e._v(" "),i("Table",{attrs:{columns:e.columns,data:e.listData,loading:e.loading,stripe:""}}),e._v(" "),i("Page",{staticClass:"table-page",attrs:{total:e.total,"page-size":e.searchParams.pageSize,current:e.searchParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}})],1)])};a._withStripped=!0;var r=i(145),o=i(11),n=i(527),s=i(107),l={name:"storage-material",data:function(){var e=this;return{org:{id:"",title:"请选择"},materielCategory:{id:"",title:"请选择"},materielCategoryArr:[],searchParams:{queryName:"",orgIds:"",materielCategoryId:"",pageSize:10,currentPage:1},columns:[{title:"物料编号",key:"materielNumber",width:200},{title:"所属组织",key:"orgName",width:200},{title:"物料名称",key:"materielName"},{title:"物料类别",key:"categoryName"},{title:"ABC分类",key:"abc"},{title:"品牌",key:"brand"},{title:"型号",key:"model"},{title:"规格",key:"standard"},{title:"计量单位",key:"measurementUnit",width:90},{title:"操作",key:"act",width:120,render:function(t,i){return t("div",[o.a.tableBtnStyle(t,(function(){e.$router.push({name:"storage-material-detail",params:{id:i.row.id}})}),"查看"),o.a.tableBtnStyle(t,(function(){e.del(i.row.id)}),"删除","material-del")])}}],listData:[],loading:!1,total:0,orgTreeApi:s.a.getOrgTreeData}},methods:{chooseOrg:function(e){var t=this;this.materielCategoryArr=[],this.materielCategory.id="",e.id&&this.$http.get(n.a.material.getMaterielCategoryTree,{orgId:e.id}).then((function(e){e.forEach((function(e){e.name=e.categoryName})),t.materielCategoryArr=o.a.transDataToTree(e)}))},getList:function(){var e=this;this.loading=!0,this.$http.get(n.a.material.getMateriel,this.searchParams).then((function(t){e.listData=t.items,e.total=t.total,e.loading=!1}))},search:function(){this.searchParams.orgIds=this.org.id,this.searchParams.materielCategoryId=this.materielCategory.id,this.searchParams.currentPage=1,this.getList()},searchParamsClean:function(){this.org={id:"",title:"请选择"},this.materielCategory={id:"",title:"请选择"};this.searchParams=Object.assign({},this.searchParams,{queryName:"",orgIds:"",materielCategoryId:"",pageSize:10,currentPage:1})},pageChange:function(e){this.searchParams.currentPage=e,this.getList()},toAddMaterial:function(){this.$router.push({name:"storage-material-add"})},infoExport:function(){o.a.download(n.a.material.exportMateriel,this.searchParams)},toInfoImport:function(){this.$router.push({name:"storage-material-import"})},del:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"是否确认删除物料信息",onOk:function(){t.$http.del(n.a.material.delMateriel,{ids:e}).then((function(e){t.$Notice.success({title:"成功",desc:"删除物料信息成功！"}),t.getList()}))}})}},components:{dropdownTree:r.a},created:function(){o.a.initTableColumnTitle(this.columns),this.getList()}},c=i(1),p=Object(c.a)(l,a,[],!1,null,null,null);p.options.__file="src/views/storage/material/list.vue";t.default=p.exports},527:function(e,t,i){"use strict";var a=i(22),r={getWarehouseComboList:"/inventory/api/warehouse/comboList",getManaginguser:"/inventory/api/users/managinguser",category:{getTree:"/inventory/api/materiel-category/tree",getInfo:"/inventory/api/materiel-category/materiel",add:"/inventory/api/materiel-category/materiel",edit:"/inventory/api/materiel-category/materiel",del:"/inventory/api/materiel-category/materiel",search:"/inventory/api/materiel-category/list"},inventory:{audit:"/inventory/api/store-adjustment/audited",export:a.a+"/inventory/api/store-adjustment/export",url:"/inventory/api/store-adjustment/adjusment",list:"/inventory/api/store-adjustment/list",detailList:"/inventory/api/store-adjustment/detail/list",itemList:"/inventory/api/store-adjustment/materiel/list",move:"/inventory/api/store-adjustment/move",materielSearch:"/inventory/api/stock/materiel",materielPosition:"/inventory/api/stock/position",materielDepot:"/inventory/api/stock/warehous"},takeStock:{audit:"/inventory/api/materiel-inventory/audited",export:a.a+"/inventory/api/materiel-inventory/export",import:a.a+"/inventory/api/materiel-inventory/import",url:"/inventory/api/materiel-inventory/inventory",detailList:"/inventory/api/materiel-inventory/detail/list",list:"/inventory/api/materiel-inventory/list"},storage:{comboList:"/inventory/api/warehouse/comboList"},material:{getMaterielCategoryTree:"/inventory/api/materiel-category/tree/external",getMateriel:"/inventory/api/materiels",delMateriel:"/inventory/api/materiels",exportMateriel:a.a+"/inventory/api/materiels/excel-export",addMateriel:"/inventory/api/materiel",changeMateriel:"/inventory/api/materiel",getMaterielDetail:"/inventory/api/materiel",getDistribution:"/inventory/api/materielStocks/distribution",getMaterielStockLimits:"/inventory/api/materielStockLimits",bacthAddMaterielStockLimit:"/inventory/api/materielStockLimit/batch-save",updateMaterielStockLimit:"/inventory/api/materielStockLimit",delMaterielStockLimit:"/inventory/api/materielStockLimits",getUnitList:"/inventory/api/materiel/unit",modalMateriel:"/inventory/api/materiel/external",getExcel:a.a+"/inventory/api/excel-temlate-down",importExcel:a.a+"/inventory/api/excel-import",cancelExcelData:"/inventory/api/excel-data-cancel",saveExcelData:"/inventory/api/excel-data-save"},repertory:{getWarehouses:"/inventory/api/warehouses",exportWarehouse:a.a+"/inventory/api/warehouse/excel-export",delWarehouses:"/inventory/api/warehouses",changeWarehouses:"/inventory/api/warehouse",addWarehouse:"/inventory/api/warehouse",getWarehouseDetail:"/inventory/api/warehouse",getWarehouseInfo:"/inventory/api/warehouse/getWarehouseInfo",getPositionOfWarehouse:"/inventory/api/warehousePosition/positionList",bacthAddWarehouseposition:"/inventory/api/warehouseposition/batch-save",updateWarehousePosition:"/inventory/api/warehousePosition",delWarehousePosition:"/inventory/api/warehousePositions",positionByWarehouse:"/inventory/api/warehousePosition/move",checkWarehousenameIsExist:"/inventory/api/warehouse/check-warehousename-isexist",getExcel:a.a+"/inventory/api/warehousePosition/excel-temlate-down",importExcel:a.a+"/inventory/api/warehousePosition/excel-import",cancelExcelData:"/inventory/api/warehousePosition/excel-data-cancel",saveExcelData:"/inventory/api/warehousePosition/excel-data-save"},checkin:{getInbond:"/inventory/api/inbounds",delInbond:"/inventory/api/inbounds",addInbond:"/inventory/api/inbound",getInbondDetail:"/inventory/api/inbound",getInbondRecordList:"/inventory/api/inbound/inboundDetails",getPositionComboxList:"/inventory/api/warehousePosition/positionComboxList",auditeInbound:"/inventory/api/inbound/audite",getMaterielsByWareHouseNo:"/inventory/api/materiel/getMaterielsByWareHouseNo",getMateriels:"/inventory/api/materiel/getMateriels",updateInboundDetail:"/inventory/api/inboundDetail"},checkout:{getApplicantMember:"/uaa/api/users/select",getOutbond:"/inventory/api/outbounds",delOutbond:"/inventory/api/outbounds",addOutbond:"/inventory/api/outbound",getOutbondDetail:"/inventory/api/outbound",getOutbondRecordList:"/inventory/api/outboundDetail",auditeOutbound:"/inventory/api/outbound/audite",updateOutboundDetail:"/inventory/api/outboundDetail",getstock:"/inventory/api/stock/getstock",getMaterielsOutBound:"/inventory/api/materiel/getMaterielsOutBound"},allot:{getTransfer:"/inventory/api/transfer/list",delTransfer:"/inventory/api/transfer/transfer",addTransfer:"/inventory/api/transfer/transfer",getTransferDetail:"/inventory/api/transfer/transfer",getTransferDetailList:"/inventory/api/transfer/detail/list",auditTransfer:"/inventory/api/transfer/audited",updateTransfer:"/inventory/api/transfer/transfer",getMaterielList:"/inventory/api/transfer/materiel/list",getStockPosiComboList:"/inventory/api/stock/position",getWarehousePosition:"/inventory/api/warehousePosition/move"},reporting:{getStockInfo:"/inventory/api/stock/getstock-info",exportStockInfo:a.a+"/inventory/api/stock/getstock-info-excel-export",getStockInoutbound:"/inventory/api/stock/getstock-info-inoutbound",exportStockInoutbound:a.a+"/inventory/api/stock/getstock-info-inoutbound-excel-export",getStockMove:"/inventory/api/stock/get-inventory-mobility-report",exportStockMove:a.a+"/inventory/api/stock/get-inventory-mobility-report-excel-export",getInventoryProfitLossList:"/inventory/api/materiel-inventory/inventory-report",exportInventoryProfitLoss:a.a+"/inventory/api/materiel-inventory/inventory-report-export",getInventoryNumberList:"/inventory/api/materiel-inventory/inventory-report-inventory-number"}};t.a=r}}]);