(window.webpackJsonp=window.webpackJsonp||[]).push([[137],{1042:function(t,e,a){"use strict";var r=a(744);a.n(r).a},1043:function(t,e,a){(e=a(10)(!1)).push([t.i,"\n.row-padding[data-v-829f020a] {\n    padding-top: 20px;\n    padding-bottom: 20px;\n    padding-left: 0px;\n}\n.container-div[data-v-829f020a] { position: relative;\n}\n",""]),t.exports=e},1138:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"simForm",attrs:{model:t.sim,"label-width":150}},[a("div",{staticClass:"c-main-border",staticStyle:{"border-bottom":"0px solid"}},[a("div",{staticClass:"c-left-border-blue"},[a("h3",[t._v("SIM卡详情")]),t._v(" "),a("div",{staticClass:"c-btns-right"},[a("Button",{staticClass:"c-btn-back",attrs:{type:"primary",shape:"circle"},on:{click:t.back}},[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"c-top-border-gray padding20-0"},[a("Row",{staticStyle:{"padding-left":"20px"}},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{prop:"userid",label:"租户名称："}},[a("span",[t._v(t._s(t.sim.userName))])]),t._v(" "),a("FormItem",{attrs:{prop:"iccid",label:"ICCID："}},[a("span",[t._v(t._s(t.sim.iccid))])]),t._v(" "),a("FormItem",{attrs:{prop:"msisdn",label:"MSISDN："}},[a("span",[t._v(t._s(t.sim.msisdn))])]),t._v(" "),a("FormItem",{attrs:{prop:"cardStatus",label:"SIM卡状态："}},[a("span",[t._v(t._s(t.cardStatusMap[t.sim.cardStatus]))])]),t._v(" "),a("FormItem",{attrs:{prop:"pkgname",label:"流量套餐："}},[a("span",[t._v(t._s(t.sim.pkgname))])])],1),t._v(" "),a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{prop:"totalFlow",label:"总流量（MB）："}},[a("span",[t._v(t._s(t.sim.totalFlow))])]),t._v(" "),a("FormItem",{attrs:{prop:"usedFlow",label:"已用流量（MB）："}},[a("span",[t._v(t._s(t.sim.usedFlow))])]),t._v(" "),a("FormItem",{attrs:{prop:"leftFlow",label:"剩余流量（MB）："}},[a("span",[t._v(t._s(t.sim.leftFlow))])]),t._v(" "),a("FormItem",{attrs:{prop:"operator",label:"运营商："}},[a("span",[t._v(t._s(t.operatorMap[t.sim.operator]))])]),t._v(" "),a("FormItem",{attrs:{prop:"updateTime",label:"数据更新时间："}},[a("span",[t._v(t._s(t.sim.updateTime))])])],1)],1),t._v(" "),a("Row",{staticStyle:{"padding-left":"20px"}},[a("Col",{attrs:{span:"18"}},[a("FormItem",{attrs:{label:"备注："}},[a("span",[t._v(t._s(t.sim.remark))])])],1)],1)],1),t._v(" "),a("div",{staticClass:"c-gray-bg-h"},[t._v("\r\n        时效选择\r\n        "),a("RadioGroup",{staticStyle:{"margin-left":"23px"},on:{"on-change":t.handleChange},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("Radio",{attrs:{label:"DAY"}},[t._v("日统计")]),t._v(" "),a("Radio",{attrs:{label:"MONTH"}},[t._v("月统计")])],1)],1),t._v(" "),a("div",[a("div",[a("Row",{staticClass:"row-padding"},[a("Col",{attrs:{span:"12"}},[a("FormItem",{attrs:{label:"选择月份："}},[a("DatePicker",{ref:"date1",staticStyle:{width:"200px"},attrs:{type:t.dateType,options:t.options1,placeholder:"Select date"},on:{"on-change":t.showFlowData},model:{value:t.nowDate,callback:function(e){t.nowDate=e},expression:"nowDate"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{staticClass:"container-div",staticStyle:{padding:"20px"},attrs:{span:"24"}},[a("div",{ref:"container",attrs:{id:"container"}})])],1)],1)])])])};r._withStripped=!0;var n=a(11),i=a(569);a(107),a(39);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o={F:function(t,e){if(!t)return"";"object"!=s(t)&&(t=new Date(t)),e=e||"yyyy-MM-dd";var a=t.getFullYear().toString(),r={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var n in e=e.replace(/(y+)/gi,(function(t,e){return a.substr(4-Math.min(4,e.length))})),r)e=e.replace(new RegExp("("+n+"+)","g"),(function(t,e){return r[n]<10&&e.length>1?"0"+r[n]:r[n]}));return e},str2Date:function(t){if(t)return"object"!=s(t)?new Date(t):t},firstDayByWeek:function(t){var e=o.str2Date(t)||new Date,a=e.getDay(),r=(0==a?7:a)-1;return o.midnight(new Date(e.getTime()-24*r*60*60*1e3))},firstDayByMonth:function(t){var e=o.str2Date(t)||new Date;return o.midnight(new Date(e.getFullYear(),e.getMonth(),1))},firstDayByYear:function(t){var e=o.str2Date(t)||new Date;return o.midnight(new Date(e.getFullYear(),0,1))},countDateByStep:function(t,e,a,r){t=o.formatePolyfill(t);var n,i=o.str2Date(t)||new Date(t),s=i.getTime(),l=(new Date).getTime();switch(a){case"day":n=s+864e5*e;break;case"week":n=s+6048e5*e;break;case"month":n=new Date(i.getFullYear(),i.getMonth()+e,i.getDate()).getTime(),r&&(n=new Date(i.getFullYear(),i.getMonth()+e,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()).getTime());break;case"year":n=new Date(i.getFullYear()+e,i.getMonth(),i.getDate()).getTime(),r&&(n=new Date(i.getFullYear()+e,i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()).getTime())}return n>l&&(n=l),r?n:o.midnight(n)},midnight:function(t){return t?o.F(t)+" 00:00:00":""},beforeMidnight:function(t){return t?o.F(t)+" 23:59:59":""},midnightMill:function(t){var e=o.str2Date(t)||new Date;return new Date(o.midnight(e)).getTime()},chain:function(t,e){return o.countDateByStep(t,-1,e)},yearOFyear:function(t){return o.countDateByStep(t,-1,"year")},getPeriods:function(t){var e,a=t.beginDate,r=new Date(o.formatePolyfill(a)),n=r.getTime();switch(t.cycle){case"day":e=n+864e5;break;case"week":e=n+6048e5;break;case"month":e=new Date(r.getFullYear(),r.getMonth()+1,r.getDate(),0,0,0).getTime();break;case"year":e=new Date(r.getFullYear()+1,r.getMonth(),r.getDate(),0,0,0).getTime()}return{min:n,max:new Date(e).getTime()}},formatePolyfill:function(t){return"string"!=typeof t?t:("string"==typeof t&&0==/[TZ]/.test(t)&&(t=t.replace(/-/g,"/")),t)},getTerminalsByMonth:function(t,e){var a,r;return 0==e?(a=new Date(t,0,1,0,0,0),r=new Date(t,11,31,23,59,59)):(a=new Date(t,e-1,1,0,0,0),r=new Date(t,e,0,23,59,59)),{start:a,end:r}},transDateFromServer:function(t,e){return t?("string"==typeof t&&0==/[TZ]/.test(t)&&(t=t.replace(/-/g,"/")),o.F(t,e||"yyyy-MM-dd hh:mm")):""},transDateFromLocale:function(t){return t?("string"==typeof t&&(0==/[TZ]/.test(t)&&(t=t.replace(/-/g,"/")),t=new Date(t)),t.toISOString()):""},strToData:function(t){var e=t.split(" ")[0].split("-"),a=[];return void 0!==t.split(" ")[1]&&(a=t.split(" ")[1].split(":")),new Date(e[0],e[1]-1,e[2],null!==a[0]?a[0]:0,null!==a[1]?a[1]:0,null!==a[2]?a[2]:0)}},l=o,m=a(1039),c=a.n(m),p=a(1040),d=a.n(p),u=a(572),g=a.n(u);a(1041);function h(t){var e=function(t){var e;e=t.indexOf("T")>=0?"T":" ";var a=t.split(e)[0].split("-")[0],r=t.split(e)[0].split("-")[1]-1,n=t.split(e)[0].split("-")[2],i=t.split(e)[1].split(":")[0],s=t.split(e)[1].split(":")[1],o=t.split(e)[1].split(":")[2];return new Date(a,r,n,i,s,o)}(t);return Date.parse(e)}function y(t,e){var a={truth:!1},r=t.split("-"),n=parseInt(r[0]),i=parseInt(r[1]);if(1===parseInt(r[2])&&"2592000"===parseInt(e)){++i>12&&(i=1,n++),i<10&&(i="0"+i);var s=n+"-"+i+"-01"+t.substring(t.indexOf(" "));a.truth=!0,a.str=s}return a}function f(t,e,a,r,n){var i,s,o,m,c,p=y(i=t,e);if(p.truth)s=p.str;else{var d=l.strToData(i),u=d.getTime();d=new Date(u+=1e3*e),s=l.F(d,"yyyy-MM-dd HH:mm:ss")}if(n){var g=(new Date).getTime();o=g<l.strToData(s).getTime()?g-1e3:l.strToData(s).getTime()-1e3}else o=l.strToData(s).getTime()-1e3;if(null!==a&&(604800===e?a(o,l.strToData(i).getTime(),!0):a(o,l.strToData(i).getTime())),r){var h=i.split(" ")[0],f=i.split(" ")[1],D=parseInt(h.split("-")[0]),v=parseInt(h.split("-")[1]),w=parseInt(h.split("-")[2]);if(function(t){if((t%4!=0||t%100==0)&&t%400!=0)return!1}(D)&&2===v&&29===w&&w--,v<10&&(v="0"+v),w<10&&(w="0"+w),(p=y(m=D-1+"-"+v+"-"+w+" "+f,e)).truth)p.str;else{var b=l.strToData(m),x=b.getTime();b=new Date(x+=1e3*e),l.F(b,"yyyy-MM-dd hh:mm:ss")}if(l.strToData(i).getTime()-l.strToData(m).getTime(),(p=function(t,e){var a={truth:!1},r=t.split("-"),n=parseInt(r[0]),i=parseInt(r[1]);if(1===parseInt(r[2])&&"2592000"===parseInt(e)){--i<1&&(i=12,n--),i<10&&(i="0"+i);var s=n+"-"+i+"-01"+t.substring(t.indexOf(" "));a.truth=!0,a.str=s}return a}(i,e)).truth)if((p=y(c=p.str,e)).truth)p.str;else{var M=l.strToData(c),T=M.getTime();M=new Date(T+=1e3*e),l.F(M,"yyyy-MM-dd HH:mm:ss")}else{var F=l.strToData(i),_=F.getTime();F=new Date(_-=1e3*e),c=l.F(F,"yyyy-MM-dd HH:mm:ss"),i}l.strToData(i).getTime()-l.strToData(c).getTime()}}d()(c.a),g()(c.a);var D={data:function(){return{options1:{disabledDate:function(t){return t&&t.valueOf()>1*new Date(l.beforeMidnight(new Date))}},sim:{iccid:"",msisdn:"",operator:"",cardStatus:"",gprsStatus:"",leftFlow:"",percentage:"",pkgname:"",smsStatus:"",totalFlow:"",updateTime:"",usedFlow:"",userName:"",userid:null,voiceStatus:"",remark:""},operatorMap:{telcom:"电信",cmcc:"移动",unicom:"联通"},cardStatusMap:{0:"在用",1:"停机",2:"待激活",3:"销户",4:"未知"},charts:null,type:"DAY",dateType:"month",nowDate:n.a.F(new Date,"yyyy-MM-dd hh:mm:ss")}},mounted:function(){var t=this;this.$http.get(i.a.getDetail+"/"+this.$route.params.iccid).then((function(e){e&&(t.sim=e,t.sim.updateTime=n.a.F(t.sim.updateTime,"yyyy-MM-dd hh:mm:ss"))})),document.getElementById("container").style.height=document.getElementsByClassName("lay")[0].clientHeight-100+"px",this.initChart(),this.setMax(),this.refresh()},computed:{},methods:{initChart:function(){c.a.setOptions({global:{useUTC:!1},loading:{style:{position:"absolute",opacity:.5,textAlign:"center",backgroundImage:'url("../images/mpoint/chart.png")',backgroundSize:"100% 100%"}},chart:{type:"spline",zoomType:"x",resetZoomButton:{position:{x:-35,y:5},relativeTo:"chart"},alignTicks:!1,panning:!0,panKey:"ctrl",events:{selection:function(t){},redraw:function(){}}},lang:{contextButtonTitle:"导出图片",downloadJPEG:"保存JPEG图片",downloadPDF:"保存PDF文档",downloadPNG:"保存PNG图片",downloadSVG:"保存SVG矢量图",loading:"载入中...",printChart:"打印曲线",resetZoom:"取消放大",resetZoomTitle:"取消放大",shortMonths:["01","02","03","04","05","06","07","08","09","10","11","12"],noData:"暂无数据"},noData:{position:{verticalAlign:"middle"},attr:{stroke:"#cccccc"},style:{color:"#202030",fontSize:"15px"}}});this.charts=c.a.chart("container",{yAxis:{title:{text:"(MB)",align:"high",offset:0,rotation:0,y:-25,x:-4}},title:{text:"流量统计",align:"left",x:50,style:{fontSize:"13px",color:"#545454"}},xAxis:{type:"datetime",maxPadding:0,minPadding:0,labels:{},dateTimeLabelFormats:{millisecond:"%H:%M:%S",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%b-%e",week:"%b-%e",month:"%Y-%b",year:"%Y"}},tooltip:{xDateFormat:"%Y-%m-%d",useHTML:!0,hideDelay:0,crosshairs:!0,shared:!0,nearShared:!0,valueSuffix:"MB"},legend:{enabled:!1,text:null,align:"center",verticalAlign:"bottom"},credits:{enabled:!1},plotOptions:{series:{marker:{radius:3,symbol:"circle"}},spline:{lineWidth:3,states:{hover:{lineWidth:4}},marker:{enabled:!1}}},series:[]}),this.charts},back:function(){this.$router.back()},handleChange:function(){var t=this.type;this.dateType="DAY"===t?"month":"year",this.nowDate=n.a.F(new Date,"yyyy-MM-dd hh:mm:ss"),this.setMax(),this.refresh()},showFlowData:function(){this.setMax(),this.refresh()},setMax:function(){f("DAY"===this.type?n.a.F(this.nowDate,"yyyy-MM-01 00:00:00"):n.a.F(this.nowDate,"yyyy-01-01 00:00:00"),"DAY"===this.type?"2592000":"31536000",this.setAxisMax,!0)},refresh:function(){var t=this;this.charts.series.forEach((function(t){t.update({data:[]})}));var e=this,a="DAY"===this.type?n.a.F(this.nowDate,"yyyy-MM"):n.a.F(this.nowDate,"yyyy");this.$http.get(i.a.getChartData,{iccid:this.$route.params.iccid,queryTime:a,flowType:this.type}).then((function(a){if(a){var r=[],n=[];a.forEach((function(e){n.push(h("DAY"===t.type?e.datePoint+" 00:00:00":e.datePoint+"-01 00:00:00")),r.push({x:h("DAY"===t.type?e.datePoint+" 00:00:00":e.datePoint+"-01 00:00:00"),y:Number(e.usedFlow)})}));for(var i=r.length,s=0;s<i;s++)for(var o=0;o<i-1-s;o++)if(r[o].x>r[o+1].x){var l=r[o+1];r[o+1]=r[o],r[o]=l}e.charts.addSeries({name:"流量",data:r,color:"#4b7efe"}),e.charts.redraw()}}))},setAxisMax:function(t,e,a){this.charts.xAxis[0].update({max:t,min:e},!1)}}},v=(a(1042),a(1)),w=Object(v.a)(D,r,[],!1,null,"829f020a",null);w.options.__file="src/views/sim/sim-manager/detail.vue";e.default=w.exports},569:function(t,e,a){"use strict";var r=a(22),n={sims:"/box/api/sim-manager/cards",updateData:"/box/api/sim-manager/cards/update",addCard:"/box/api/sim-manager/cards",getDetail:"/box/api/sim-manager/cards/detail",getChartData:"/box/api/sim-manager/card/flow",deleteCards:"/box/api/sim-manager/cards",getExcel:r.a+"/box/api/sim-manager/excel-temlate-down",importExcel:r.a+"/box/api/sim-manager/excel-import",saveExcelData:"/box/api/sim-manager/excel-data-save",cancelExcelData:"/box/api/sim-manager/excel-data-cancel",alarms:"/box/api/sim-alarm/alarms",addAlarm:"/box/api/sim-alarm/alarms",getAlarm:"/box/api/sim-alarm/alarm",updateAlarm:"/box/api/sim-alarm/alarm",deleteAlarms:"/box/api/sim-alarm/alarms"};e.a=n},744:function(t,e,a){var r=a(1043);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);(0,a(17).default)("1f9b3592",r,!1,{})}}]);