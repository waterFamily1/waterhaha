(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{1074:function(e,t,a){"use strict";var n=a(759);a.n(n).a},1075:function(e,t,a){var n=a(10),i=a(24),r=a(1076);t=n(!1);var o=i(r);t.push([e.i,".knowledge-doc .tree_separated {\n  height: 100%;\n  overflow-y: auto;\n  border-top: 1px solid #e6e6e6;\n  padding: 0 0 0 10px;\n}\n.knowledge-doc .edit-title-btns {\n  border-bottom: 1px solid #f0f0f0;\n  height: 40px;\n  padding: 5px 0 5px 5px;\n}\n.knowledge-doc .edit-title-btns h3 {\n  height: 30px;\n  line-height: 30px;\n  text-indent: 10px;\n  border-bottom: 0;\n}\n.knowledge-doc .edit-box {\n  padding: 10px;\n}\n.knowledge-doc .edit-box h5 {\n  margin: 10px 0;\n}\n.knowledge-doc .doc-crumbs {\n  padding-left: 20px;\n  height: 35px;\n  line-height: 35px;\n  border-bottom: 1px solid #ededed;\n}\n.label-select-content {\n  position: relative;\n}\n.label-select-content .label-select {\n  position: absolute;\n  top: 66px;\n  right: 0;\n  left: 0px;\n  padding: 5px 10px;\n  z-index: 99;\n  background: #fff;\n  border: 1px solid #ededed;\n  border-radius: 4px;\n}\n.move-left {\n  width: 350px;\n  height: 400px;\n  overflow: auto;\n  flex-shrink: 0;\n}\n.move-right {\n  flex-grow: 2;\n  margin-left: 20px;\n  font-size: 14px;\n}\n.move-right i.ivu-icon-information-circled {\n  vertical-align: middle;\n}\n.move-right > div {\n  line-height: 30px;\n}\n.recommend-modal label {\n  width: 80px;\n  text-align: right;\n}\n.label-row {\n  position: relative;\n  padding-left: 100px;\n  min-height: 30px;\n  margin-bottom: 15px;\n  line-height: 30px;\n}\n.label-row label {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.icon-pub-dir {\n  display: inline-block;\n  width: 15px;\n  height: 14px;\n  background: url("+o+") center no-repeat;\n  background-size: 100% 100%;\n}\n::-webkit-scrollbar {\n  width: 5px;\n  background-color: #ddd;\n}\n::-webkit-scrollbar-thumb {\n  background: #bbb;\n  border-radius: 4px;\n}\n",""]),e.exports=t},1076:function(e,t,a){e.exports=a.p+"images/a3526d056573ab69c8044839587cf211.png"},1156:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-tree knowledge-doc"},[a("div",{staticClass:"c-tree-left",attrs:{id:"J_TREE_LEFT"}},[e._m(0),e._v(" "),a("div",{staticStyle:{padding:"2px"}},[a("Select",{staticStyle:{width:"100%"},attrs:{placeholder:"输入文档目录以检索",clearable:"",filterable:"",remote:"","remote-method":e.onSearch,loading:e.searchLoading},on:{"on-change":e.onSearchItemClick}},e._l(e.searchItems,(function(t){return a("Option",{key:t.id,attrs:{value:JSON.stringify(t)}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),a("div",{attrs:{id:"J_TREE_separated"}},[a("div",{staticClass:"c-scrollbar tree_separated"},[a("Tree",{attrs:{data:e.treeData,render:e.treeRender}})],1)])]),e._v(" "),a("div",{staticClass:"c-tree-right"},[a("div",{staticClass:"c-main-border"},[a("div",{staticClass:"doc-crumbs"},[e._v(e._s(e.currentDirPathName))]),e._v(" "),a("div",{staticClass:"c-left-border-blue"},[a("div",{staticClass:"c-search-main"},[a("div",{staticClass:"c-form-item"},[a("label",[e._v("关键字：")]),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"文档名称/文档标签"},on:{"on-enter":e.search},model:{value:e.searchParams.queryName,callback:function(t){e.$set(e.searchParams,"queryName",t)},expression:"searchParams.queryName"}})],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[e._v("上传时间：")]),e._v(" "),a("datepicker-ranger",{attrs:{width:"120px"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("div",{staticClass:"c-adv-search-btn"},[a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{staticClass:"c-btn-reset",attrs:{type:"primary",shape:"circle"},on:{click:e.searchParamsClean}},[e._v("重置")])],1)])]),e._v(" "),a("div",{staticClass:"c-top-border-gray"},[a("div",{staticClass:"c-table-top-btns"},[a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.download}},[e._v("下载")]),e._v(" "),a("Button",{directives:[{name:"role",rawName:"v-role",value:"doc-upload",expression:"'doc-upload'"}],staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.upload}},[e._v("上传")]),e._v(" "),a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.move}},[e._v("移动")]),e._v(" "),a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.delDoc}},[e._v("删除")])],1),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.list,loading:e.loading,stripe:""},on:{"on-selection-change":e.getSelect}}),e._v(" "),a("Page",{staticClass:"table-page",attrs:{total:e.total,"page-size":e.searchParams.pageSize,current:e.searchParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}})],1)])]),e._v(" "),a("Modal",{attrs:{title:"文档上传"},model:{value:e.uploadModel,callback:function(t){e.uploadModel=t},expression:"uploadModel"}},[a("Form",{ref:"uploadForm",attrs:{model:e.uploadParams,rules:e.uploadRules}},[a("FormItem",{attrs:{label:"文档上传",prop:"url"}},[a("div",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(e.uploadParams.srcName))]),e._v(" "),a("mg-uploader",{attrs:{pid:"doc",max:200,params:{markDeleted:!0},btnText:"点击上传,文件小于200M",accept:"audio/*,video/*,image/*,.doc,.docx,.wps,.xls,.xlsx,.et,.ppt,.pptx,.pps,.pot,.txt,.pdf,.zip,.rar,.dwg"},on:{"on-success":e.successUpload}})],1),e._v(" "),a("FormItem",{attrs:{label:"文档名称",prop:"name"}},[a("Input",{model:{value:e.uploadParams.name,callback:function(t){e.$set(e.uploadParams,"name",t)},expression:"uploadParams.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"文档标签",prop:"labelName"}},[a("div",{staticClass:"label-select-content"},[a("Input",{staticStyle:{width:"488px"},attrs:{readonly:""},on:{"on-focus":function(t){e.uploadLabelShow=!0}},model:{value:e.uploadParams.labelName,callback:function(t){e.$set(e.uploadParams,"labelName",t)},expression:"uploadParams.labelName"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.uploadLabelShow,expression:"uploadLabelShow"}],staticClass:"label-select"},[a("label-select",{ref:"uploadLabelSelect",on:{"on-complete":e.uploadLabelComplete}})],1)],1)]),e._v(" "),a("FormItem",{attrs:{label:"文档摘要",prop:"summary"}},[a("Input",{attrs:{type:"textarea",placeholder:""},model:{value:e.uploadParams.summary,callback:function(t){e.$set(e.uploadParams,"summary",t)},expression:"uploadParams.summary"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"default"},on:{click:e.uploadCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.uploadSubmit}},[e._v("确定")])],1)])],1),e._v(" "),a("Modal",{attrs:{title:"文档移动",width:"850"},model:{value:e.moveModel,callback:function(t){e.moveModel=t},expression:"moveModel"}},[a("div",{staticClass:"c-tree"},[a("div",{staticClass:"move-left"},[a("Tree",{attrs:{data:e.moveTree,render:e.moveTreeRender}})],1),e._v(" "),a("div",{staticClass:"move-right"},[a("div",[a("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"information-circled",size:"20"}}),e._v("在左侧树点击需要移动的目标路径\n                ")],1),e._v(" "),a("div",{staticClass:"label-row",staticStyle:{"margin-top":"10px"}},[a("label",[e._v("目标文档路径：")]),e._v("\n                    "+e._s(e.movePath)+"\n                ")])])]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"default"},on:{click:e.moveCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.moveSubmit}},[e._v("确定")])],1)])]),e._v(" "),a("Modal",{attrs:{title:"文档编辑"},model:{value:e.editModel,callback:function(t){e.editModel=t},expression:"editModel"}},[a("Form",{ref:"editForm",attrs:{model:e.editParams,rules:e.editRules}},[a("FormItem",{attrs:{label:"文档名称",prop:"name"}},[a("Input",{model:{value:e.editParams.name,callback:function(t){e.$set(e.editParams,"name",t)},expression:"editParams.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"文档标签",prop:"labelName"}},[a("div",{staticClass:"label-select-content"},[a("Input",{staticStyle:{width:"488px"},attrs:{readonly:""},on:{"on-focus":function(t){e.editLabelShow=!0}},model:{value:e.editParams.labelName,callback:function(t){e.$set(e.editParams,"labelName",t)},expression:"editParams.labelName"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.editLabelShow,expression:"editLabelShow"}],staticClass:"label-select"},[a("label-select",{ref:"editLabelSelect",on:{"on-complete":e.editLabelComplete}})],1)],1)]),e._v(" "),a("FormItem",{attrs:{label:"文档摘要",prop:"summary"}},[a("Input",{attrs:{type:"textarea",placeholder:""},model:{value:e.editParams.summary,callback:function(t){e.$set(e.editParams,"summary",t)},expression:"editParams.summary"}})],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"default"},on:{click:e.editCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v("确定")])],1)])],1),e._v(" "),a("recommend",{attrs:{item:e.recommendItem},model:{value:e.recommendModel,callback:function(t){e.recommendModel=t},expression:"recommendModel"}})],1)};n._withStripped=!0;var i=a(23),r=a(107),o=a(554),s=(a(39),a(11)),l=a(523),c=a(544),d=a(549),m=a(145),u=a(606),p=a(605);function h(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parentId",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name",r={},o=[];for(a=0;a<e.length;a+=1)r[e[a].id]=a,e[a].children=[];for(a=0;a<e.length;a+=1){(t=e[a]).title=t[i],t.isRole=t.checked;var s=n?t[n]:t.pid;e[r[s]]?1===t.type?e[r[s]].children.unshift(t):2===t.type?e[r[s]].children[0]&&1===e[r[s]].children[0].type?e[r[s]].children.splice(1,0,t):e[r[s]].children.unshift(t):e[r[s]].children.push(t):o.push(t)}return o}var g={name:"document",components:{datepickerRanger:l.a,dropdownTree:m.a,mgUploader:d.a,recommend:p.a,labelSelect:u.a},data:function(){var e=this;return{status:"",height:0,orgTreeApi:r.a.getOrgTreeData,searchLoading:!1,searchItems:[],activeDir:{id:"",name:""},sourceTree:[],treeData:[],processIds:[],params:{dirName:""},currentDirPathName:"",total:0,loading:!1,searchParams:{pageSize:10,currentPage:1,queryName:"",processId:"",directoryId:""},dateRange:{start:"",end:""},columns:[{type:"selection",width:55},{title:"文档名称",key:"name",render:function(e,t){return e("span",{attrs:{title:t.row.name+"."+t.row.type}},t.row.name+"."+t.row.type)}},{title:"文档路径",key:"idPathName"},{title:"文档标签",key:"labelName"},{title:"文档大小",key:"size",width:110,render:function(e,t){return e("span",(t.row.size/1024/1024).toFixed(2)+"M")}},{title:"上传人员",width:110,key:"createUserName"},{title:"上传时间",key:"createDate",width:110,render:function(e,t){return s.a.tableDatetime(e,t.row.createDate)}},{title:"操作",key:"action",width:150,render:function(t,a){var n=[];(a.row.permission||c.a.authority("doc-edit"))&&n.push(s.a.tableBtnStyle(t,e.edit.bind(e,a.row),"编辑"));var i=a.row.collect?"取消收藏":"收藏";return n.push(s.a.tableBtnStyle(t,e.collect.bind(e,a.row,{type:a.row.collect?2:1,name:i}),i)),t("div",[].concat(n,[s.a.tableBtnStyle(t,e.recommend.bind(e,a.row),"推荐")]))}}],list:[],tableSelects:[],uploadModel:!1,uploadLabelShow:!1,uploadParams:{url:"",size:"",type:"",srcName:"",name:"",summary:"",labelName:""},uploadRules:{url:{required:!0,message:"请上传文档",trigger:"change"},name:[{required:!0,message:"请填写名称",trigger:"change"},{max:30,message:"不能超过30个字符",trigger:"change"}],labelName:{required:!0,message:"请选择标签",trigger:"change"},summary:{max:100,message:"不能超过100字符",trigger:"change"}},editModel:!1,editLabelShow:!1,editParams:{id:"",srcName:"",name:"",summary:"",labelName:""},editRules:{name:[{required:!0,message:"请填写名称",trigger:"change"},{max:30,message:"不能超过30个字符",trigger:"change"}],labelName:{required:!0,message:"请选择标签",trigger:"change"},summary:{max:100,message:"不能超过100字符",trigger:"change"}},moveModel:!1,moveTree:[],movePath:"",moveTarget:"",moveTreeSelect:"",recommendModel:!1,recommendItem:{}}},computed:Object(i.b)({account:function(e){return e.user.account}}),methods:{onSearch:function(e){var t=this;this.$http.get(o.a.getDirs,{queryName:e,currentPage:1,pageSize:0}).then((function(e){t.searchItems=e||[]}))},onSearchItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"{}",t=JSON.parse(e);t.id&&(t.id=-t.id,s.a.setTrueTreeExpand(this.treeData,t.id),this.showList(t))},getDocTree:function(e){var t=this;this.$http.get(o.a.getDirTree).then((function(a){t.sourceTree=a,void 0!==e&&(s.a.setTreeExpand(a,e),t.showList(a.filter((function(t){return t.id===e}))[0])),t.treeData=h(a),t.moveTree=h(JSON.parse(JSON.stringify(a))),t.processIds=a.map((function(e){if(!e.type)return e.id}))}))},search:function(){var e=this;this.loading=!0,this.tableSelects=[];var t=Object.assign({},this.searchParams,{startDate:s.a.transDateFromLocale(this.dateRange.start),endDate:s.a.transDateFromLocale(this.dateRange.end)});0===this.activeDir.type?t.directoryId="":t.processId="",this.$http.get(o.a.getDocs,t).then((function(t){e.list=t.items,e.total=t.total,e.loading=!1}))},searchParamsClean:function(){this.searchParams.queryName="",this.dateRange={start:"",end:""},this.searchParams.currentPage=1,this.search()},pageChange:function(e){this.searchParams.currentPage=e,this.search()},getSelect:function(e){this.tableSelects=e},download:function(e){return this.tableSelects.length?this.tableSelects.reduce((function(e,t){return e+Number(t.size)}),0)>209715200?(this.$Notice.warning({title:"批量下载最大限制200M"}),!1):void s.a.download(o.a.download,{ids:this.tableSelects.map((function(e){return e.id})).join(",")}):(this.$Notice.warning({title:"请选择下载的文档"}),!1)},upload:function(){if(!this.activeDir.id)return this.$Notice.warning({title:"请选择区域或目录"}),!1;this.uploadParams.srcName="",this.$refs.uploadForm.resetFields(),this.$refs.uploadLabelSelect.resetSelect(),this.uploadModel=!0},successUpload:function(e,t){var a=/^(.+)\.(.+)$/g.exec(e.name),n=a[1],i=a[2];this.uploadParams.srcName=e.name,this.uploadParams.name=n,this.uploadParams.type=i,this.uploadParams.size=e.size,this.uploadParams.url=e.path},uploadLabelComplete:function(e){this.uploadParams.labelName=e.names,this.uploadLabelShow=!1},uploadCancel:function(){this.uploadModel=!1},uploadSubmit:function(){var e=this;this.$refs.uploadForm.validate((function(t){if(t){var a=Object.assign({},e.uploadParams,{directoryId:Math.abs(e.activeDir.id)});0===e.activeDir.type&&(a.processId=Math.abs(e.activeDir.id),a.directoryId=-1),e.$http.post(o.a.uploadDoc,a).then((function(t){t.id&&(e.$Notice.success({title:"上传成功"}),e.uploadModel=!1,e.getDocTree(e.activeDir.id))}))}}))},edit:function(e){this.$refs.editForm.resetFields(),this.$refs.editLabelSelect.resetSelect(e.labelName.split(",")),this.editParams=Object.assign({},e),this.editModel=!0},editLabelComplete:function(e){this.editParams.labelName=e.names,this.editLabelShow=!1},editCancel:function(){this.editModel=!1},editSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&e.$http.put(o.a.updateDoc,e.editParams).then((function(t){t.count&&(e.$Notice.success({title:"编辑成功"}),e.editModel=!1,e.search())}))}))},move:function(){return this.tableSelects.length?c.a.authority("doc-move")||this.tableSelects.some((function(e){return e.permission}))?(this.moveModel=!0,this.moveTreeSelect="",this.moveTarget="",void(this.movePath="")):(this.$Notice.warning({title:"仅可移动自己的文档"}),!1):(this.$Notice.warning({title:"请选择移动的文档"}),!1)},moveDataSelect:function(e){var t=this.getPath(e.id);this.moveTreeSelect=e,this.movePath=t.name.join(" > "),0===e.type?this.moveTarget={processId:e.processId,directoryId:-1}:this.moveTarget={processId:"",directoryId:Math.abs(e.id)}},moveCancel:function(){this.moveModel=!1},moveSubmit:function(){var e=this;if(!this.moveTarget.processId&&!this.moveTarget.directoryId)return this.$Notice.warning({title:"请选择目标路径"}),!1;this.$http.put(o.a.move,Object.assign({},this.moveTarget,{ids:this.tableSelects.map((function(e){return e.id})).join(",")})).then((function(t){t.count&&(e.$Notice.success({title:"移动成功"}),e.moveModel=!1,e.getDocTree(-1===e.moveTarget.directoryId?e.moveTarget.processId:-e.moveTarget.directoryId))}))},delDoc:function(){var e=this;return this.tableSelects.length?c.a.authority("doc-del")||this.tableSelects.some((function(e){return e.permission}))?void this.$Modal.confirm({title:"提示",content:"<p>是否确定删除？</p>",onOk:function(){e.$http.del(o.a.delDoc,{ids:e.tableSelects.map((function(e){return e.id})).join(",")}).then((function(t){t.count&&(e.$Notice.success({title:"删除成功"}),e.getDocTree(e.activeDir.id))}))},onCancel:function(){}}):(this.$Notice.warning({title:"仅可删除自己的文档"}),!1):(this.$Notice.warning({title:"请选择删除的文档"}),!1)},collect:function(e,t){var a=this,n=t.type,i=t.name;this.$http.get(o.a.collect,{id:e.id,type:n}).then((function(e){e.count&&(a.$Notice.success({title:i+"成功"}),a.search())}))},recommend:function(e){this.recommendModel=!0,this.recommendItem=e},submit:function(){var e=this;if(!this.params.dirName)return this.$Notice.warning({title:"目录名称不能为空"}),!1;var t={name:this.params.dirName,processId:this.activeDir.processId,tenantId:this.account.tenantId};"add"===this.status&&(t.parentId=this.activeDir.type?Math.abs(this.activeDir.id):0,t.type=1===this.activeDir.type?1:2,this.$http.post(o.a.addDir,t).then((function(t){t.id&&(document.body.click(),e.$Notice.success({title:"新建成功"}),e.getDocTree(-t.id))}))),"edit"===this.status&&(t.id=Math.abs(this.activeDir.id),this.$http.put(o.a.updateDir,t).then((function(t){t.count&&(document.body.click(),e.$Notice.success({title:"编辑成功"}),e.getDocTree(e.activeDir.id))})))},showList:function(e){var t=this.getPath(e.id);this.currentDirPathName=t.name.join(" > "),this.searchParams.processId=e.processId,this.searchParams.directoryId=Math.abs(e.id)||0,this.activeDir=e,this.search()},addDir:function(e){this.status="add",this.params.dirName=e.newDirName,this.activeDir=e,this.submit()},editDir:function(e){this.status="edit",this.params.dirName=e.newDirName||e.name,this.activeDir=e,this.submit()},delDir:function(e){var t=this;this.$http.del(o.a.delDir+Math.abs(e.id)).then((function(a){a.count&&(t.$Notice.success({title:"删除成功"}),t.getDocTree(e.parentId))}))},treeRender:function(e,t){var a=this,n=(t.root,t.node,t.data),i=e("Poptip",{props:{width:300,transfer:!0}},[e("a",{attrs:{href:"javascript:;"},class:{"c-tree-btn-add":!0}},["新建"]),e("div",{slot:"content"},[e("div",{style:{lineHeight:"30px"}},["新目录名称："]),e("input",{attrs:{width:100,height:26,type:"text"},domProps:{value:n.newDirName||""},style:{border:"1px solid #eaeaea",marginRight:"10px",verticalAlign:"bottom"},on:{input:function(e){n.newDirName=e.target.value}}}),e("Button",{on:{click:function(){a.addDir(n)}},style:{"margin-right":"8px"},props:{type:"primary",size:"small"}},["保存"]),e("Button",{on:{click:function(){document.body.click()}},class:{"c-btn-back":!0},props:{type:"primary",size:"small"}},["取消"])])]),r=e("Poptip",{props:{width:300,transfer:!0}},[e("a",{attrs:{href:"javascript:;"},class:{"c-tree-btn-edit":!0}},["编辑"]),e("div",{slot:"content"},[e("div",{style:{lineHeight:"30px"}},["目录名称："]),e("input",{attrs:{width:100,height:26,type:"text"},domProps:{value:n.name||""},style:{border:"1px solid #eaeaea",marginRight:"10px",verticalAlign:"bottom"},on:{input:function(e){n.newDirName=e.target.value}}}),e("Button",{on:{click:function(){a.editDir(n)}},style:{"margin-right":"8px"},props:{type:"primary",size:"small"}},["保存"]),e("Button",{on:{click:function(){document.body.click()}},class:{"c-btn-back":!0},props:{type:"primary",size:"small"}},["取消"])])]),o=s.a.treeBtnDelStyle(e,(function(){a.delDir(n)})),l=e("span",{class:{"ivu-tree-title":!0,"ivu-tree-title-selected":n.id===this.activeDir.id},on:{click:function(){a.showList(n)}}},[n.name,e("em",{style:{marginLeft:"5px",color:"#4b7efe",fontSize:"12px",fontStyle:"normal"}},n.count?"("+n.count+")":"")]),d=[],m=null;return 0===n.type&&c.a.authority("doc-dir-set")&&(d=[i]),1===n.type&&c.a.authority("doc-dir-set")&&(d=this.processIds.includes(n.parentId)?[i]:[i,r,o]),2===n.type&&c.a.authority("doc-dir-set")&&(d=[i,r,o]),1===n.type&&(m=e("i",{style:{color:"#4b7efe",margin:"0 2px",verticalAlign:"text-bottom"},class:["icon-pub-dir"]},[])),2===n.type&&(m=e("Icon",{style:{color:"#4b7efe",margin:"0 2px",fontSize:"15px",verticalAlign:"text-bottom"},props:{type:"ios-folder"}},[])),e("div",{class:{"c-tree-row":!0}},[m,l,e("span",{class:{"c-tree-btns":!0}},d)])},moveTreeRender:function(e,t){var a=this,n=(t.root,t.node,t.data),i=null;return 1===n.type&&(i=e("i",{style:{color:"#4b7efe",margin:"0 2px",verticalAlign:"text-bottom"},class:["icon-pub-dir"]},[])),2===n.type&&(i=e("Icon",{style:{color:"#4b7efe",margin:"0 2px",fontSize:"15px",verticalAlign:"text-bottom"},props:{type:"ios-folder"}},[])),e("div",{class:{"c-tree-row":!0}},[i,e("span",{class:{"ivu-tree-title":!0,"ivu-tree-title-selected":n.id===this.moveTreeSelect.id},on:{click:function(){a.moveDataSelect(n)}}},[n.name])])},getPath:function(e){var t=this;return function e(a){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:[],ids:[]},i=t.sourceTree.length,r=0;r<i;r++)if(t.sourceTree[r].id===a){n.name.unshift(t.sourceTree[r].name),n.ids.unshift(t.sourceTree[r].id),t.sourceTree[r].parentId&&e(t.sourceTree[r].parentId,n);break}return n}(e)}},mounted:function(){this.getDocTree();var e=(e=s.a.setTreeLeftHeight())-100;document.querySelector("#J_TREE_separated").style.height=e+"px",this.height=(e-160)/e*100+"%"},created:function(){s.a.initTableColumnTitle(this.columns)}},f=(a(1074),a(1)),v=Object(f.a)(g,n,[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"c-plain-bg-h"},[t("h3",{staticStyle:{"line-height":"2"}},[this._v("文档中心")])])}],!1,null,null,null);v.options.__file="src/views/knowledge/document.vue";t.default=v.exports},515:function(e,t,a){var n=a(522);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("43cd0b0e",n,!1,{})},517:function(e,t,a){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={F:function(e,t){if(!e)return"";"object"!=n(e)&&(e=new Date(e)),t=t||"yyyy-MM-dd";var a=e.getFullYear().toString(),i={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};for(var r in t=t.replace(/(y+)/gi,(function(e,t){return a.substr(4-Math.min(4,t.length))})),i)t=t.replace(new RegExp("("+r+"+)","g"),(function(e,t){return i[r]<10&&t.length>1?"0"+i[r]:i[r]}));return t},str2Date:function(e){if(e)return"object"!=n(e)?new Date(e):e},firstDayByWeek:function(e){var t=i.str2Date(e)||new Date,a=t.getDay(),n=(0==a?7:a)-1;return i.midnight(new Date(t.getTime()-24*n*60*60*1e3))},firstDayByMonth:function(e){var t=i.str2Date(e)||new Date;return i.midnight(new Date(t.getFullYear(),t.getMonth(),1))},firstDayByYear:function(e){var t=i.str2Date(e)||new Date;return i.midnight(new Date(t.getFullYear(),0,1))},countDateByStep:function(e,t,a,n){e=i.formatePolyfill(e);var r,o=i.str2Date(e)||new Date(e),s=o.getTime(),l=(new Date).getTime();switch(a){case"day":r=s+864e5*t;break;case"week":r=s+6048e5*t;break;case"month":r=new Date(o.getFullYear(),o.getMonth()+t,o.getDate()).getTime(),n&&(r=new Date(o.getFullYear(),o.getMonth()+t,o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()).getTime());break;case"year":r=new Date(o.getFullYear()+t,o.getMonth(),o.getDate()).getTime(),n&&(r=new Date(o.getFullYear()+t,o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()).getTime())}return r>l&&(r=l),n?r:i.midnight(r)},midnight:function(e){return e?i.F(e)+" 00:00:00":""},beforeMidnight:function(e){return e?i.F(e)+" 23:59:59":""},midnightMill:function(e){var t=i.str2Date(e)||new Date;return new Date(i.midnight(t)).getTime()},chain:function(e,t){return i.countDateByStep(e,-1,t)},yearOFyear:function(e){return i.countDateByStep(e,-1,"year")},getPeriods:function(e){var t,a=e.beginDate,n=new Date(i.formatePolyfill(a)),r=n.getTime();switch(e.cycle){case"day":t=r+864e5;break;case"week":t=r+6048e5;break;case"month":t=new Date(n.getFullYear(),n.getMonth()+1,n.getDate(),0,0,0).getTime();break;case"year":t=new Date(n.getFullYear()+1,n.getMonth(),n.getDate(),0,0,0).getTime()}return{min:r,max:new Date(t).getTime()}},formatePolyfill:function(e){return"string"!=typeof e?e:("string"==typeof e&&0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),e)},getTerminalsByMonth:function(e,t){var a,n;return 0==t?(a=new Date(e,0,1,0,0,0),n=new Date(e,11,31,23,59,59)):(a=new Date(e,t-1,1,0,0,0),n=new Date(e,t,0,23,59,59)),{start:a,end:n}},transDateFromServer:function(e,t){return e?("string"==typeof e&&0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),i.F(e,t||"yyyy-MM-dd hh:mm")):""},transDateFromLocale:function(e){return e?("string"==typeof e&&(0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),e=new Date(e)),e.toISOString()):""},strToData:function(e){var t=e.split(" ")[0].split("-"),a=[];return void 0!==e.split(" ")[1]&&(a=e.split(" ")[1].split(":")),new Date(t[0],t[1]-1,t[2],null!==a[0]?a[0]:0,null!==a[1]?a[1]:0,null!==a[2]?a[2]:0)}};t.a=i},519:function(e,t,a){"use strict";function n(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function i(e,t){if(e){for(var a=e.className,i=(t||"").split(" "),r=0,o=i.length;r<o;r++){var s=i[r];s&&(e.classList?e.classList.add(s):n(e,s)||(a+=" "+s))}e.classList||(e.className=a)}}function r(e,t){if(e&&t){for(var a=t.split(" "),i=" "+e.className+" ",r=0,o=a.length;r<o;r++){var s=a[r];s&&(e.classList?e.classList.remove(s):n(e,s)&&(i=i.replace(" "+s+" "," ")))}e.classList||(e.className=trim(i))}}var o={beforeEnter:function(e){i(e,"collapse-transition"),e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height="0",e.style.paddingTop=0,e.style.paddingBottom=0},enter:function(e){e.dataset.oldOverflow=e.style.overflow,0!==e.scrollHeight?(e.style.height=e.scrollHeight+"px",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom):(e.style.height="",e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom),e.style.overflow="hidden"},afterEnter:function(e){r(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow},beforeLeave:function(e){e.dataset||(e.dataset={}),e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.height=e.scrollHeight+"px",e.style.overflow="hidden"},leave:function(e){0!==e.scrollHeight&&(i(e,"collapse-transition"),e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave:function(e){r(e,"collapse-transition"),e.style.height="",e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom}};t.a={name:"CollapseTransition",functional:!0,render:function(e,t){var a=t.children;return e("transition",{on:o},a)}}},521:function(e,t,a){"use strict";var n=a(515);a.n(n).a},522:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.cmp-datepicker {\r\n\tdisplay: inline-block;\n}\r\n",""]),e.exports=t},523:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cmp-datepicker"},[a("DatePicker",{style:{width:e.width},attrs:{type:"date",placeholder:"开始日期",value:e.dateRange.start,disabled:e.disabled,options:e.startDateOptions},on:{"on-change":e.startDateChange}}),e._v(" "),a("span",[e._v(" - ")]),e._v(" "),a("DatePicker",{style:{width:e.width},attrs:{type:"date",placeholder:"结束日期",value:e.dateRange.end,disabled:e.disabled,options:e.endDateOptions},on:{"on-change":e.endDateChange}})],1)};n._withStripped=!0;var i=a(11),r=a(517),o={name:"datepickerRanger",props:{value:Object,width:String,disabled:{type:Boolean,default:!1},enabled:String},watch:{"value.start":function(e){this.dateRange.start=i.a.transDateFromServer(e,"yyyy-MM-dd")},"value.end":function(e){this.dateRange.end=i.a.transDateFromServer(e,"yyyy-MM-dd")}},data:function(){var e=this,t=r.a.midnightMill();return{dateRange:{start:i.a.transDateFromServer(this.value.start,"yyyy-MM-dd"),end:i.a.transDateFromServer(this.value.end,"yyyy-MM-dd")},startDateOptions:{disabledDate:function(a){return"coming"==e.enabled?a&&a.valueOf()<t:"halfYear"===e.enabled?a&&a.valueOf()<t-15552e6:e.dateRange.end&&a&&a.valueOf()>1*new Date(e.dateRange.end+" 23:59:59")}},endDateOptions:{disabledDate:function(a){var n=1*new Date(e.dateRange.start+" 00:00:00"),i=a&&a.valueOf();return"past"==e.enabled?a&&i>t:e.dateRange.start&&a&&i<n}}}},methods:{startDateChange:function(e){this.dateRange.start=e;var t=this.dateRange.start?i.a.transDateFromLocale(this.dateRange.start+" 00:00:00"):"",a=this.dateRange.end?i.a.transDateFromLocale(this.dateRange.end+" 23:59:59"):"";this.$emit("input",{start:t,end:a}),this.$emit("on-change",{start:t,end:a})},endDateChange:function(e){this.dateRange.end=e;var t=this.dateRange.start?i.a.transDateFromLocale(this.dateRange.start+" 00:00:00"):"",a=this.dateRange.end?i.a.transDateFromLocale(this.dateRange.end+" 23:59:59"):"";this.$emit("input",{start:t,end:a}),this.$emit("on-change",{start:t,end:a})}}},s=(a(521),a(1)),l=Object(s.a)(o,n,[],!1,null,null,null);l.options.__file="src/components/datepicker-ranger.vue";t.a=l.exports},544:function(e,t,a){"use strict";var n=a(49),i={authorityAdmin:function(e){if(-1!=e.indexOf("ROLE_TENANT_ADMIN")||-1!=e.indexOf("UAA_ROLE_EDIT"))return!0},authorityEquAdmin:function(e){if(-1!=e.indexOf("ROLE_TENANT_ADMIN")||-1!=e.indexOf("EQU_EQUTYPE_EDIT"))return!0},authorityProcAdmin:function(e){if(-1!=e.indexOf("UAA_PROC_EDIT"))return!0},author0:function(e){if(-1!=e.indexOf("ROLE_TENANT_ADMIN"))return!0},authority:function(e){var t=JSON.parse(sessionStorage.getItem("__MANGO_U_")||"{}").webOpers;return!!t&&(-1!==t.indexOf(n.a[e])||-1!=t.indexOf(n.a.all))},author2:function(e){if(-1!=e.indexOf("UAA_ORG_EDIT"))return!0}};t.a=i},549:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"inline-block"}},[a("Upload",{ref:e.ref,attrs:{accept:e.accept,"max-size":e.maxSize,action:e.uploadUrl,"show-upload-list":!1,"before-upload":e.onBeforeUpload,"on-success":e.onSuccessUpload,"on-error":e.onErrorUpload,"on-progress":e.onProgressUpload,"on-exceeded-size":e.onExceededUpload,data:e.params}},[a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",size:e.btnSize}},[e._v(e._s(e.btnText))])],1)],1)};n._withStripped=!0;var i=a(39),r=(a(23),a(11)),o={name:"mgUploader",props:{uploadUrl:{type:String,default:i.a.upload},pid:String,accept:String,max:{type:Number,default:2},btnText:{type:String,default:"点击上传"},before:Function,btnSize:{type:String,default:"default"},params:Object},data:function(){return{ref:"uploader-ref-"+r.a.gusid(8)}},computed:{maxSize:function(){return 1024*this.max}},methods:{onUpload:function(e){return e.size/1024/1024<this.max?(this.$store.commit("uploader/add",{id:e.uid,name:e.name,ref:this.$refs[this.ref],percent:0,page:this.$route.path,error:!1}),!0):(this.$Notice.warning({title:"上传文件大小不能超过"+this.max+"Mb"}),!1)},onBeforeUpload:function(e){var t=this;if(!this.before)return this.onUpload(e);var a=this.before();return a&&a.then?a.then((function(){t.onUpload(e)})):!1!==a&&this.onUpload(e)},onSuccessUpload:function(e,t){this.$store.commit("uploader/update",{id:t.uid,percent:100}),this.$emit("on-success",e,t)},onErrorUpload:function(e,t,a){this.$Notice.error({title:"上传失败",desc:"文件名："+a.name}),this.$store.commit("uploader/failed",a.uid)},onProgressUpload:function(e,t,a){this.$store.commit("uploader/update",{id:t.uid,percent:parseInt(t.percentage,10)})},onExceededUpload:function(e,t){}}},s=a(1),l=Object(s.a)(o,n,[],!1,null,null,null);l.options.__file="src/components/mg-uploader.vue";t.a=l.exports},554:function(e,t,a){"use strict";var n={getLabelTree:"/knowledge/api/labels/tree",getLabels:"/knowledge/api/labels",addLabel:"/knowledge/api/labels",updateLabel:"/knowledge/api/labels",delLabel:"/knowledge/api/labels/",getDirTree:"/knowledge/api/directorys/tree",getDirs:"/knowledge/api/directorys",addDir:"/knowledge/api/directorys",updateDir:"/knowledge/api/directorys",delDir:"/knowledge/api/directorys/",getDocs:"/knowledge/api/documents",uploadDoc:"/knowledge/api/documents",updateDoc:"/knowledge/api/documents",delDoc:"/knowledge/api/documents",collect:"/knowledge/api/documents/collect",download:a(22).a+"/knowledge/api/documents/download",move:"/knowledge/api/documents/move",recommend:"/knowledge/api/documents/recommend",myColl:"/knowledge/api/personal/collection",mydownload:"/knowledge/api/personal/download",recommendme:"/knowledge/api/personal/recommend",myupload:"/knowledge/api/personal/upload",mylabels:"/knowledge/api/user-labels",getDocList:"/knowledge/api/home/documents",getmine:"/knowledge/api/home/mine",statistics:"/knowledge/api/home/statistics"};t.a=n},567:function(e,t,a){var n=a(602);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("36c2fca5",n,!1,{})},601:function(e,t,a){"use strict";var n=a(567);a.n(n).a},602:function(e,t,a){var n=a(10),i=a(24),r=a(603),o=a(604);t=n(!1);var s=i(r),l=i(o);t.push([e.i,'.label-select-box[data-v-3cef2893] {\n  max-height: 500px;\n  overflow-y: auto;\n}\n.label-select-box .class-title[data-v-3cef2893] {\n  position: relative;\n}\n.label-select-box .class-title h4[data-v-3cef2893] {\n  color: #4b7efe;\n  height: 30px;\n  line-height: 30px;\n  font-size: 14px;\n  font-weight: 300;\n}\n.label-select-box .class-title h4[data-v-3cef2893]:before {\n  content: "";\n  display: inline-block;\n  width: 3px;\n  height: 12px;\n  margin-right: 10px;\n  background-color: #4b7efe;\n  transform: translateY(1px);\n}\n.label-select-box .class-title i[data-v-3cef2893] {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  cursor: pointer;\n}\n.label-select-box .arrow[data-v-3cef2893] {\n  float: right;\n  width: 40px;\n  height: 40px;\n  background-size: 100% 100%;\n}\n.label-select-box .arrow-down[data-v-3cef2893] {\n  float: right;\n  width: 40px;\n  height: 40px;\n  background-size: 100% 100%;\n  background: url('+s+") center no-repeat;\n}\n.label-select-box .arrow-up[data-v-3cef2893] {\n  float: right;\n  width: 40px;\n  height: 40px;\n  background-size: 100% 100%;\n  background: url("+l+") center no-repeat;\n}\n.label-select-box li[data-v-3cef2893] {\n  position: relative;\n  z-index: 1;\n  float: left;\n  padding: 0 10px;\n  margin: 5px;\n  height: 26px;\n  line-height: 26px;\n  list-style: none;\n  color: #8190a5;\n  border-radius: 4px;\n  font-size: 10px;\n  background-color: #eef1f7;\n  cursor: pointer;\n}\n.label-select-box li.selected[data-v-3cef2893] {\n  color: #184fd8;\n  background-color: #e8effd;\n}\n.label-select-box .c-modal-footer-btns[data-v-3cef2893] {\n  margin-top: 20px;\n}\n",""]),e.exports=t},603:function(e,t,a){e.exports=a.p+"images/ada376e0fc40016463f7a3707cd5dd19.png"},604:function(e,t,a){e.exports=a.p+"images/c54c76bd66afa4f73253aba8298d97ab.png"},605:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{attrs:{title:"文档推荐","on-visible-change":"onVisibleChange"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("div",{staticClass:"recommend-modal"},[a("Form",{ref:"recommendForm",attrs:{model:e.recommendParams,rules:e.recommendRules,"label-width":70}},[a("FormItem",{attrs:{label:"文档名称:"}},[e._v(e._s(e.item.name+"."+e.item.type))]),e._v(" "),a("FormItem",{attrs:{label:"推荐给:",prop:"orgId"}},[a("dropdown-tree",{staticStyle:{width:"200px"},attrs:{url:e.orgTreeApi},on:{"on-change":e.getUnderOrganizationUsers},model:{value:e.recommendOrg,callback:function(t){e.recommendOrg=t},expression:"recommendOrg"}})],1),e._v(" "),a("FormItem",[a("div",[a("Select",{attrs:{multiple:"",placeholder:"请选择角色"},model:{value:e.recommendParams.userId,callback:function(t){e.$set(e.recommendParams,"userId",t)},expression:"recommendParams.userId"}},e._l(e.recommendOperators,(function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1)]),e._v(" "),a("FormItem",{attrs:{label:"附言:"}},[a("Input",{attrs:{type:"textarea",placeholder:""},model:{value:e.recommendParams.remark,callback:function(t){e.$set(e.recommendParams,"remark",t)},expression:"recommendParams.remark"}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"default"},on:{click:e.recommendCancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.recommendSubmit}},[e._v("确定")])],1)])])],1)};n._withStripped=!0;var i=a(107),r=a(16),o=a(554),s=a(145),l={name:"recommend",props:{value:Boolean,item:Object},components:{dropdownTree:s.a},data:function(){return{orgTreeApi:i.a.getOrgTreeData,recommendParams:{name:"",orgId:"",userId:"",remark:""},recommendRules:{orgId:{required:!0,message:"请选择组织",trigger:"change"}},recommendOrg:{id:"",title:"请选择组织"},recommendOperators:[]}},watch:{value:function(e){e?(this.recommendOrg={id:"",title:"请选择组织"},this.recommendParams.name="",this.recommendParams.userId="",this.recommendParams.remark="",this.$refs.recommendForm.resetFields()):this.recommendCancel()}},methods:{getUnderOrganizationUsers:function(e,t){var a=this;this.recommendParams.orgId=e.id,this.recommendParams.userId="",this.$http.get(r.a.getRecommendUsers,{visibleProcessFill:1===this.item.directoryType,orgIds:e.id,processId:this.item.processId,currentPage:1,pageSize:0}).then((function(e){e?(a.recommendOperators=e.items,t&&t()):a.recommendOperators=[]}))},recommendCancel:function(){this.$emit("input",!1)},recommendSubmit:function(){var e=this;this.$refs.recommendForm.validate((function(t){if(t){var a=e.recommendParams.userId;e.recommendParams.userId||(a=e.recommendOperators.map((function(e){return e.id}))),e.$http.put(o.a.recommend,{documentId:e.item.id,orgId:e.recommendParams.orgId,roleId:a.join(","),postscript:e.recommendParams.remark}).then((function(t){t.count&&(e.$Notice.success({title:"推荐成功",duration:2}),e.$emit("input",!1),e.$emit("complete",!0))}))}}))}}},c=a(1),d=Object(c.a)(l,n,[],!1,null,"1c1b308e",null);d.options.__file="src/views/knowledge/components/recommend.vue";t.a=d.exports},606:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"label-select-box"},[e._l(e.labelTree,(function(t,n){return a("div",{key:n},[a("div",{staticClass:"class-title"},[a("h4",[e._v(e._s(t.name))]),e._v(" "),a("i",{class:[t.expand?"arrow-up":"arrow-down"],on:{click:function(a){return e.expand(t)}}})]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.expand,expression:"item.expand"}],staticClass:"clearfix"},e._l(t.children,(function(t,n){return a("li",{key:n,class:{selected:t.selected},on:{click:function(a){return e.select(t)}}},[e._v(e._s(t.name))])})),0)])})),e._v(" "),a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("完成")])],1)],2)};n._withStripped=!0;var i=a(519),r=a(554),o=a(11),s={name:"label-select",components:{CollapseTransition:i.a},props:{selects:{type:Array,default:function(e){return[]}},limit:{type:Boolean,default:!0},min:Number},data:function(){return{sourceTree:[],labelTree:[],expandItem:{},selectNames:[]}},methods:{getLabelTree:function(){var e=this;this.$http.get(r.a.getLabelTree).then((function(t){e.sourceTree=t,e.dataHandle()}))},dataHandle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],a=e.length?e:this.selects;this.sourceTree.forEach((function(e){1===e.type&&(e.expand=!1),-1!==a.indexOf(e.name)?(e.selected=!0,t.push(e.name)):e.selected=!1})),this.labelTree=o.a.transDataToTree(this.sourceTree),this.selectNames=t,this.expand(this.labelTree[0])},expand:function(e){this.expandItem.expand=e.expand,e.expand=!e.expand,this.expandItem=e,this.labelTree.push()},select:function(e){e.selected=!e.selected,this.labelTree.push(),e.selected?this.selectNames.push(e.name):this.selectNames.splice(this.selectNames.indexOf(e.name),1),this.selectNames.length>5&&this.limit&&(this.$Notice.warning({title:"标签选择不能超过5个"}),e.selected=!1,this.selectNames.pop())},submit:function(){if(this.selectNames.length<this.min)return this.$Notice.warning({title:"标签不能小于"+this.min+"个"}),!1;this.$emit("on-complete",{names:this.selectNames.join()},this.selectNames.length)},resetSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.selectNames=e,this.dataHandle(e)}},created:function(){this.getLabelTree()}},l=(a(601),a(1)),c=Object(l.a)(s,n,[],!1,null,"3cef2893",null);c.options.__file="src/views/knowledge/components/label-select.vue";t.a=c.exports},759:function(e,t,a){var n=a(1075);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("24d0bb3b",n,!1,{})}}]);