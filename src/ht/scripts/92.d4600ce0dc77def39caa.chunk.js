(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1025:function(e,t,a){"use strict";var n=a(737);a.n(n).a},1026:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.inventory-profit-loss-list .c-form-item {\r\n    margin-left: 0;\n}\n.inventory-profit-loss-list .c-form-item label{\r\n    width:90px;\n}\r\n",""]),e.exports=t},1244:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-main-border"},[a("div",{staticClass:"c-left-border-blue inventory-profit-loss-list"},[a("div",{staticClass:"c-search-main"},[a("div",{staticClass:"c-form-item"},[a("label",[e._v("所属组织：")]),e._v(" "),a("dropdown-tree",{attrs:{url:e.orgTreeApi,multiple:!1,width:120},on:{input:e.chooseOrg},model:{value:e.org,callback:function(t){e.org=t},expression:"org"}})],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[e._v("仓库名称：")]),e._v(" "),a("Select",{staticStyle:{width:"100px"},model:{value:e.searchParams.warehouseId,callback:function(t){e.$set(e.searchParams,"warehouseId",t)},expression:"searchParams.warehouseId"}},e._l(e.warehouseCombo,(function(t){return a("Option",{key:t.id,attrs:{value:t.id},nativeOn:{click:function(a){return e.warehouseChange(t)}}},[e._v(e._s(t.warehouseName))])})),1)],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[e._v("盘点单号：")]),e._v(" "),a("Select",{staticStyle:{width:"100px"},model:{value:e.searchParams.materielInventoryNumber,callback:function(t){e.$set(e.searchParams,"materielInventoryNumber",t)},expression:"searchParams.materielInventoryNumber"}},e._l(e.inventoryNoData,(function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[e._v("查询时间：")]),e._v(" "),a("datepicker-ranger",{attrs:{width:"110px"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),e._v(" "),a("div",{staticClass:"c-adv-search-btn"},[a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("Button",{staticClass:"c-btn-reset",attrs:{type:"primary",shape:"circle"},on:{click:e.searchParamsClean}},[e._v("重置")])],1)])]),e._v(" "),a("div",{staticClass:"c-top-border-gray"},[a("div",{staticClass:"c-table-top-btns"},[a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.infoExport}},[e._v("信息导出")])],1),e._v(" "),a("Table",{attrs:{columns:e.columns,data:e.listData,loading:e.loading,stripe:""}}),e._v(" "),a("Page",{staticClass:"table-page",attrs:{total:e.total,"page-size":e.searchParams.pageSize,current:e.searchParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}})],1)])};n._withStripped=!0;var i=a(145),r=a(523),o=a(11),s=a(527),l=a(107),u={data:function(){return{org:{id:"",title:"请选择"},dateRange:{start:"",end:""},searchParams:{orgId:"",warehouseId:"",materielInventoryNumber:"",startTime:"",endTime:"",pageSize:10,currentPage:1},columns:[{title:"盘点单号",key:"materielInventoryNumber"},{title:"物料编号",key:"materielNumber"},{title:"物料名称",key:"materielName"},{title:"型号",key:"model"},{title:"规格",key:"standard"},{title:"计量单位",key:"measurementUnit"},{title:"账面数量",key:"storageAmount"},{title:"盘点数量",key:"amount"},{title:"盈亏数量",key:"profitLossAmount",render:function(e,t){var a=Number(t.row.amount)-Number(t.row.storageAmount),n="#333";return a>0?n="red":a<0&&(n="green"),e("span",{style:{color:n}},a)}},{title:"描述",key:"remark"}],warehouseCombo:[],inventoryNoData:[],listData:[],loading:!1,total:0,orgTreeApi:l.a.getOrgTreeData}},methods:{chooseOrg:function(){var e=this;this.searchParams.orgId=this.org.id,this.searchParams.warehouseId="",this.searchParams.materielInventoryNumber="",this.warehouseCombo=[],this.inventoryNoData=[],this.org.id&&(this.getWarehouseComboList({orgIds:this.org.id}),this.$http.get(s.a.reporting.getInventoryNumberList,{orgId:this.org.id,warehouseId:""}).then((function(t){e.inventoryNoData=t})))},getWarehouseComboList:function(e){var t=this;this.$http.get(s.a.getWarehouseComboList,e).then((function(e){t.warehouseCombo=e}))},warehouseChange:function(e){var t=this,a={orgId:this.org.id,warehouseId:e.id};this.searchParams.materielInventoryNumber="",this.inventoryNoData=[],this.$http.get(s.a.reporting.getInventoryNumberList,a).then((function(e){t.inventoryNoData=e}))},getList:function(){var e=this;this.loading=!0,this.$http.get(s.a.reporting.getInventoryProfitLossList,this.searchParams).then((function(t){e.listData=t.items,e.total=t.total,e.loading=!1}))},search:function(){this.searchParams.orgId=this.org.id,this.searchParams.startTime=this.dateRange.start,this.searchParams.endTime=this.dateRange.end,this.searchParams.currentPage=1,this.getList()},searchParamsClean:function(){this.org={id:"",title:"请选择"},this.dateRange={start:"",end:""};this.searchParams=Object.assign({},this.searchParams,{orgId:"",warehouseId:"",materielInventoryNumber:"",startTime:"",endTime:"",pageSize:10,currentPage:1})},pageChange:function(e){this.searchParams.currentPage=e,this.getList()},infoExport:function(){o.a.download(s.a.reporting.exportInventoryProfitLoss,this.searchParams)}},components:{dropdownTree:i.a,datepickerRanger:r.a},created:function(){o.a.initTableColumnTitle(this.columns),this.getList()}},c=(a(1025),a(1)),d=Object(c.a)(u,n,[],!1,null,null,null);d.options.__file="src/views/storage/reporting/inventory-profit-loss-list.vue";t.default=d.exports},515:function(e,t,a){var n=a(522);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("43cd0b0e",n,!1,{})},517:function(e,t,a){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i={F:function(e,t){if(!e)return"";"object"!=n(e)&&(e=new Date(e)),t=t||"yyyy-MM-dd";var a=e.getFullYear().toString(),i={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};for(var r in t=t.replace(/(y+)/gi,(function(e,t){return a.substr(4-Math.min(4,t.length))})),i)t=t.replace(new RegExp("("+r+"+)","g"),(function(e,t){return i[r]<10&&t.length>1?"0"+i[r]:i[r]}));return t},str2Date:function(e){if(e)return"object"!=n(e)?new Date(e):e},firstDayByWeek:function(e){var t=i.str2Date(e)||new Date,a=t.getDay(),n=(0==a?7:a)-1;return i.midnight(new Date(t.getTime()-24*n*60*60*1e3))},firstDayByMonth:function(e){var t=i.str2Date(e)||new Date;return i.midnight(new Date(t.getFullYear(),t.getMonth(),1))},firstDayByYear:function(e){var t=i.str2Date(e)||new Date;return i.midnight(new Date(t.getFullYear(),0,1))},countDateByStep:function(e,t,a,n){e=i.formatePolyfill(e);var r,o=i.str2Date(e)||new Date(e),s=o.getTime(),l=(new Date).getTime();switch(a){case"day":r=s+864e5*t;break;case"week":r=s+6048e5*t;break;case"month":r=new Date(o.getFullYear(),o.getMonth()+t,o.getDate()).getTime(),n&&(r=new Date(o.getFullYear(),o.getMonth()+t,o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()).getTime());break;case"year":r=new Date(o.getFullYear()+t,o.getMonth(),o.getDate()).getTime(),n&&(r=new Date(o.getFullYear()+t,o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds()).getTime())}return r>l&&(r=l),n?r:i.midnight(r)},midnight:function(e){return e?i.F(e)+" 00:00:00":""},beforeMidnight:function(e){return e?i.F(e)+" 23:59:59":""},midnightMill:function(e){var t=i.str2Date(e)||new Date;return new Date(i.midnight(t)).getTime()},chain:function(e,t){return i.countDateByStep(e,-1,t)},yearOFyear:function(e){return i.countDateByStep(e,-1,"year")},getPeriods:function(e){var t,a=e.beginDate,n=new Date(i.formatePolyfill(a)),r=n.getTime();switch(e.cycle){case"day":t=r+864e5;break;case"week":t=r+6048e5;break;case"month":t=new Date(n.getFullYear(),n.getMonth()+1,n.getDate(),0,0,0).getTime();break;case"year":t=new Date(n.getFullYear()+1,n.getMonth(),n.getDate(),0,0,0).getTime()}return{min:r,max:new Date(t).getTime()}},formatePolyfill:function(e){return"string"!=typeof e?e:("string"==typeof e&&0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),e)},getTerminalsByMonth:function(e,t){var a,n;return 0==t?(a=new Date(e,0,1,0,0,0),n=new Date(e,11,31,23,59,59)):(a=new Date(e,t-1,1,0,0,0),n=new Date(e,t,0,23,59,59)),{start:a,end:n}},transDateFromServer:function(e,t){return e?("string"==typeof e&&0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),i.F(e,t||"yyyy-MM-dd hh:mm")):""},transDateFromLocale:function(e){return e?("string"==typeof e&&(0==/[TZ]/.test(e)&&(e=e.replace(/-/g,"/")),e=new Date(e)),e.toISOString()):""},strToData:function(e){var t=e.split(" ")[0].split("-"),a=[];return void 0!==e.split(" ")[1]&&(a=e.split(" ")[1].split(":")),new Date(t[0],t[1]-1,t[2],null!==a[0]?a[0]:0,null!==a[1]?a[1]:0,null!==a[2]?a[2]:0)}};t.a=i},521:function(e,t,a){"use strict";var n=a(515);a.n(n).a},522:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.cmp-datepicker {\r\n\tdisplay: inline-block;\n}\r\n",""]),e.exports=t},523:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cmp-datepicker"},[a("DatePicker",{style:{width:e.width},attrs:{type:"date",placeholder:"开始日期",value:e.dateRange.start,disabled:e.disabled,options:e.startDateOptions},on:{"on-change":e.startDateChange}}),e._v(" "),a("span",[e._v(" - ")]),e._v(" "),a("DatePicker",{style:{width:e.width},attrs:{type:"date",placeholder:"结束日期",value:e.dateRange.end,disabled:e.disabled,options:e.endDateOptions},on:{"on-change":e.endDateChange}})],1)};n._withStripped=!0;var i=a(11),r=a(517),o={name:"datepickerRanger",props:{value:Object,width:String,disabled:{type:Boolean,default:!1},enabled:String},watch:{"value.start":function(e){this.dateRange.start=i.a.transDateFromServer(e,"yyyy-MM-dd")},"value.end":function(e){this.dateRange.end=i.a.transDateFromServer(e,"yyyy-MM-dd")}},data:function(){var e=this,t=r.a.midnightMill();return{dateRange:{start:i.a.transDateFromServer(this.value.start,"yyyy-MM-dd"),end:i.a.transDateFromServer(this.value.end,"yyyy-MM-dd")},startDateOptions:{disabledDate:function(a){return"coming"==e.enabled?a&&a.valueOf()<t:"halfYear"===e.enabled?a&&a.valueOf()<t-15552e6:e.dateRange.end&&a&&a.valueOf()>1*new Date(e.dateRange.end+" 23:59:59")}},endDateOptions:{disabledDate:function(a){var n=1*new Date(e.dateRange.start+" 00:00:00"),i=a&&a.valueOf();return"past"==e.enabled?a&&i>t:e.dateRange.start&&a&&i<n}}}},methods:{startDateChange:function(e){this.dateRange.start=e;var t=this.dateRange.start?i.a.transDateFromLocale(this.dateRange.start+" 00:00:00"):"",a=this.dateRange.end?i.a.transDateFromLocale(this.dateRange.end+" 23:59:59"):"";this.$emit("input",{start:t,end:a}),this.$emit("on-change",{start:t,end:a})},endDateChange:function(e){this.dateRange.end=e;var t=this.dateRange.start?i.a.transDateFromLocale(this.dateRange.start+" 00:00:00"):"",a=this.dateRange.end?i.a.transDateFromLocale(this.dateRange.end+" 23:59:59"):"";this.$emit("input",{start:t,end:a}),this.$emit("on-change",{start:t,end:a})}}},s=(a(521),a(1)),l=Object(s.a)(o,n,[],!1,null,null,null);l.options.__file="src/components/datepicker-ranger.vue";t.a=l.exports},527:function(e,t,a){"use strict";var n=a(22),i={getWarehouseComboList:"/inventory/api/warehouse/comboList",getManaginguser:"/inventory/api/users/managinguser",category:{getTree:"/inventory/api/materiel-category/tree",getInfo:"/inventory/api/materiel-category/materiel",add:"/inventory/api/materiel-category/materiel",edit:"/inventory/api/materiel-category/materiel",del:"/inventory/api/materiel-category/materiel",search:"/inventory/api/materiel-category/list"},inventory:{audit:"/inventory/api/store-adjustment/audited",export:n.a+"/inventory/api/store-adjustment/export",url:"/inventory/api/store-adjustment/adjusment",list:"/inventory/api/store-adjustment/list",detailList:"/inventory/api/store-adjustment/detail/list",itemList:"/inventory/api/store-adjustment/materiel/list",move:"/inventory/api/store-adjustment/move",materielSearch:"/inventory/api/stock/materiel",materielPosition:"/inventory/api/stock/position",materielDepot:"/inventory/api/stock/warehous"},takeStock:{audit:"/inventory/api/materiel-inventory/audited",export:n.a+"/inventory/api/materiel-inventory/export",import:n.a+"/inventory/api/materiel-inventory/import",url:"/inventory/api/materiel-inventory/inventory",detailList:"/inventory/api/materiel-inventory/detail/list",list:"/inventory/api/materiel-inventory/list"},storage:{comboList:"/inventory/api/warehouse/comboList"},material:{getMaterielCategoryTree:"/inventory/api/materiel-category/tree/external",getMateriel:"/inventory/api/materiels",delMateriel:"/inventory/api/materiels",exportMateriel:n.a+"/inventory/api/materiels/excel-export",addMateriel:"/inventory/api/materiel",changeMateriel:"/inventory/api/materiel",getMaterielDetail:"/inventory/api/materiel",getDistribution:"/inventory/api/materielStocks/distribution",getMaterielStockLimits:"/inventory/api/materielStockLimits",bacthAddMaterielStockLimit:"/inventory/api/materielStockLimit/batch-save",updateMaterielStockLimit:"/inventory/api/materielStockLimit",delMaterielStockLimit:"/inventory/api/materielStockLimits",getUnitList:"/inventory/api/materiel/unit",modalMateriel:"/inventory/api/materiel/external",getExcel:n.a+"/inventory/api/excel-temlate-down",importExcel:n.a+"/inventory/api/excel-import",cancelExcelData:"/inventory/api/excel-data-cancel",saveExcelData:"/inventory/api/excel-data-save"},repertory:{getWarehouses:"/inventory/api/warehouses",exportWarehouse:n.a+"/inventory/api/warehouse/excel-export",delWarehouses:"/inventory/api/warehouses",changeWarehouses:"/inventory/api/warehouse",addWarehouse:"/inventory/api/warehouse",getWarehouseDetail:"/inventory/api/warehouse",getWarehouseInfo:"/inventory/api/warehouse/getWarehouseInfo",getPositionOfWarehouse:"/inventory/api/warehousePosition/positionList",bacthAddWarehouseposition:"/inventory/api/warehouseposition/batch-save",updateWarehousePosition:"/inventory/api/warehousePosition",delWarehousePosition:"/inventory/api/warehousePositions",positionByWarehouse:"/inventory/api/warehousePosition/move",checkWarehousenameIsExist:"/inventory/api/warehouse/check-warehousename-isexist",getExcel:n.a+"/inventory/api/warehousePosition/excel-temlate-down",importExcel:n.a+"/inventory/api/warehousePosition/excel-import",cancelExcelData:"/inventory/api/warehousePosition/excel-data-cancel",saveExcelData:"/inventory/api/warehousePosition/excel-data-save"},checkin:{getInbond:"/inventory/api/inbounds",delInbond:"/inventory/api/inbounds",addInbond:"/inventory/api/inbound",getInbondDetail:"/inventory/api/inbound",getInbondRecordList:"/inventory/api/inbound/inboundDetails",getPositionComboxList:"/inventory/api/warehousePosition/positionComboxList",auditeInbound:"/inventory/api/inbound/audite",getMaterielsByWareHouseNo:"/inventory/api/materiel/getMaterielsByWareHouseNo",getMateriels:"/inventory/api/materiel/getMateriels",updateInboundDetail:"/inventory/api/inboundDetail"},checkout:{getApplicantMember:"/uaa/api/users/select",getOutbond:"/inventory/api/outbounds",delOutbond:"/inventory/api/outbounds",addOutbond:"/inventory/api/outbound",getOutbondDetail:"/inventory/api/outbound",getOutbondRecordList:"/inventory/api/outboundDetail",auditeOutbound:"/inventory/api/outbound/audite",updateOutboundDetail:"/inventory/api/outboundDetail",getstock:"/inventory/api/stock/getstock",getMaterielsOutBound:"/inventory/api/materiel/getMaterielsOutBound"},allot:{getTransfer:"/inventory/api/transfer/list",delTransfer:"/inventory/api/transfer/transfer",addTransfer:"/inventory/api/transfer/transfer",getTransferDetail:"/inventory/api/transfer/transfer",getTransferDetailList:"/inventory/api/transfer/detail/list",auditTransfer:"/inventory/api/transfer/audited",updateTransfer:"/inventory/api/transfer/transfer",getMaterielList:"/inventory/api/transfer/materiel/list",getStockPosiComboList:"/inventory/api/stock/position",getWarehousePosition:"/inventory/api/warehousePosition/move"},reporting:{getStockInfo:"/inventory/api/stock/getstock-info",exportStockInfo:n.a+"/inventory/api/stock/getstock-info-excel-export",getStockInoutbound:"/inventory/api/stock/getstock-info-inoutbound",exportStockInoutbound:n.a+"/inventory/api/stock/getstock-info-inoutbound-excel-export",getStockMove:"/inventory/api/stock/get-inventory-mobility-report",exportStockMove:n.a+"/inventory/api/stock/get-inventory-mobility-report-excel-export",getInventoryProfitLossList:"/inventory/api/materiel-inventory/inventory-report",exportInventoryProfitLoss:n.a+"/inventory/api/materiel-inventory/inventory-report-export",getInventoryNumberList:"/inventory/api/materiel-inventory/inventory-report-inventory-number"}};t.a=i},737:function(e,t,a){var n=a(1026);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(17).default)("cf254176",n,!1,{})}}]);