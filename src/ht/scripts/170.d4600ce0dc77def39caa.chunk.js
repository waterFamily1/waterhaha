(window.webpackJsonp=window.webpackJsonp||[]).push([[170],{1199:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-main-border"},[a("div",{staticClass:"c-left-border-blue"},[a("div",{staticClass:"c-search-main"},[a("div",{staticClass:"c-form-item"},[a("label",[e._v("关键字：")]),a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"视频名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.refresh(t)}},model:{value:e.searchParams.queryName,callback:function(t){e.$set(e.searchParams,"queryName",t)},expression:"searchParams.queryName"}})],1),e._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[e._v("区域位置：")]),a("dropdown-tree",{attrs:{url:e.treeApi.getProcessTreeData,width:200,multiple:!0,query:{exType:2}},model:{value:e.site,callback:function(t){e.site=t},expression:"site"}})],1),e._v(" "),a("div",{staticClass:"c-adv-search-btn"},[a("Button",{attrs:{type:"primary",shape:"circle"},on:{click:e.refresh}},[e._v("搜索")]),e._v(" "),a("Button",{staticClass:"c-btn-reset",attrs:{type:"primary",shape:"circle"},on:{click:e.searchParamsClean}},[e._v("重置")])],1)])]),e._v(" "),a("div",{staticClass:"c-top-border-gray"},[a("div",{staticClass:"c-table-top-btns"},[a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.addVideo}},[e._v("新增")]),e._v(" "),a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:e.deleteVideo}},[e._v("删除")])],1),e._v(" "),a("Table",{attrs:{columns:e.columnsVideo,data:e.videoList,loading:e.videoLoading,stripe:""},on:{"on-selection-change":e.handleSelect}}),e._v(" "),a("Page",{staticClass:"table-page",attrs:{total:e.total,"page-size":e.searchParams.pageSize,current:e.searchParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":e.pageChange}})],1)])};i._withStripped=!0;var s=a(145),n=a(107),o=a(576),r=a(11),c={components:{dropdownTree:s.a},name:"video-list",data:function(){var e=this;return{treeApi:n.a,site:{id:"",title:"请选择"},searchParams:{siteId:null,queryName:"",pageSize:10,currentPage:1},videoLoading:!1,columnsVideo:[{type:"selection",width:50},{title:"区域位置",key:"processName"},{title:"视频名称",key:"name"},{title:"URL地址",key:"url"},{title:"定时抓拍",key:"takeThumb",render:function(e,t){return e("span","Y"==t.row.takeThumb?"是":"否")}},{title:"定时抓拍周期/分",key:"takeThumbCycle"},{title:"触发报警名称",key:"alarmName"},{title:"操作",key:"action",align:"left",width:100,render:function(t,a){return t("div",[r.a.tableBtnStyle(t,(function(){e.$router.push({name:"video-detail",params:{id:a.row.id}})}),"查看"),r.a.tableBtnStyle(t,(function(){e.$router.push({name:"video-edit",params:{id:a.row.id}})}),"编辑")])}}],videoList:[],total:0,selectData:[]}},created:function(){r.a.initTableColumnTitle(this.columnsVideo)},mounted:function(){this.search()},methods:{refresh:function(){this.searchParams.currentPage=1,this.search()},search:function(){var e=this;this.videoLoading=!0,this.searchParams.siteId=this.site.id,this.$http.get(o.a.getVideoList,this.searchParams).then((function(t){t.items&&(e.videoLoading=!1,e.videoList=t.items,e.total=t.total)}))},searchParamsClean:function(){this.searchParams.queryName="",this.site={id:"",title:"请选择"}},handleSelect:function(e){this.selectData=e},pageChange:function(e){this.searchParams.currentPage=e,this.search()},addVideo:function(){this.$router.push({name:"video-add"})},deleteVideo:function(){var e=this;if(this.selectData&&this.selectData.length>0){var t=this.selectData.map((function(e){return e.id})).join();this.$Modal.confirm({title:"提示",content:"确定要删除？",onOk:function(){e.$http.del(o.a.delVideo,{ids:t}).then((function(t){t.count&&(e.$Notice.success({title:"成功",desc:"删除成功！",duration:3}),e.selectData=[],e.refresh())}))},onCancel:function(){}})}else this.$Notice.warning({title:"警告",desc:"请选中后删除",duration:3})}}},l=a(1),d=Object(l.a)(c,i,[],!1,null,null,null);d.options.__file="src/views/monitor-screen/video/list.vue";t.default=d.exports},576:function(e,t,a){"use strict";a(22);t.a={getVideoList:"/loong/api/videos",getVideo:"/loong/api/videos/",saveVideo:"/loong/api/videos",delVideo:"/loong/api/videos",getVideoTree:"/loong/api/videos/tree",getVideoThumbByType:"/loong/api/thumbs",getAlarmThumbIsread:"/loong/api/thumbs/count",setIsRead:"/loong/api/thumbs",getAlarmDataMonth:"/loong/api/thumbs/count"}}}]);