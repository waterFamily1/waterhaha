(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1282:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-item home-alarm-statistics"},[a("h3",[t._v("报警统计 "),t.isEdit?a("a",{staticClass:"home-del-btn",attrs:{href:"javascript:;"},on:{click:t.del}},[t._v("删除")]):t._e()]),t._v(" "),a("div",{staticStyle:{height:"30px"}},[a("mg-month-select",{attrs:{loading:t.loading},on:{"on-change":t.monthChange},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),t._v(" "),a("div",{staticClass:"home-alarm-sta-cards"},[a("div",{staticClass:"home-alarm-sta-general"},[t.items.alamAllName?a("h4",[t._v(t._s(t.items.alamAllName))]):t._e(),t._v(" "),a("div",{staticClass:"home-alarm-sta-general-v"},[t.items.alamAllNameCount?a("strong",[t._v(t._s(t.items.alamAllNameCount))]):a("span",[t._v("——")])])]),t._v(" "),a("div",{staticClass:"home-alarm-sta-max"},[t._v("最多")]),t._v(" "),a("div",{staticClass:"home-alarm-sta-mods"},[a("div",{staticClass:"home-alarm-sta-mod"},[a("h5",[t._v(t._s(t.items.maxLevelName))]),t.items.maxLevelNameCount?a("strong",[t._v(t._s(t.items.maxLevelNameCount))]):a("span",[t._v("——")])]),t._v(" "),a("div",{staticClass:"home-alarm-sta-mod"},[a("h5",[t._v(t._s(t.items.maxMpointName))]),t.items.maxMpointNameCount?a("strong",[t._v(t._s(t.items.maxMpointNameCount))]):a("span",[t._v("——")])]),t._v(" "),a("div",{staticClass:"home-alarm-sta-mod"},[a("h5",[t._v(t._s(t.items.maxSiteName))]),t.items.maxSiteNameCount?a("strong",[t._v(t._s(t.items.maxSiteNameCount))]):a("span",[t._v("——")])])])]),t._v(" "),a("div",{staticClass:"home-alarm-sta-tabs"},[a("mg-tab",{attrs:{groups:t.tabs,multiple:!1,entire:!1,underline:""},on:{"on-click":t.tabChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}})],1),t._v(" "),a("div",{staticClass:"home-alarm-sta-chart"},[a("ul",{staticClass:"alarm-relieved-list"},[a("li",[a("Icon",{attrs:{type:"stop",color:"#BFC6D0"}}),t._v("自动解除")],1),t._v(" "),a("li",[a("Icon",{attrs:{type:"stop",color:"#838A95"}}),t._v("确认报警")],1),t._v(" "),a("li",[a("Icon",{attrs:{type:"stop",color:"#576374"}}),t._v("误报")],1),t._v(" "),a("li",[a("Icon",{attrs:{type:"stop",color:"#2A384B"}}),t._v("测试")],1)]),t._v(" "),a("highcharts",{ref:"columnChart",attrs:{options:t.columnOptions}})],1)])};n._withStripped=!0;var i=a(11),s=a(31),r=a(782),o=a(524),l=a(607),m=a(556),c=a.n(m),h=a(572);function u(t){var e=[],a=[],n=[],i=[],s=[],r=[],o=[];return t||(t=[]),t.forEach((function(t){e.push({name:t.dataX,y:t.dataY}),a.push({name:t.dataX,y:t.unremoveY}),n.push({name:t.dataX,y:t.removeAuto}),i.push({name:t.dataX,y:t.removeAlarm}),s.push({name:t.dataX,y:t.removeError}),r.push({name:t.dataX,y:t.removeTest}),o.push({name:t.dataX,y:t.removeY})})),{total:e,unremove:a,removeAuto:n,removeAlarm:i,removeError:s,removeTest:r}}var p=[{maxPointWidth:10,color:"#739AFB",name:"总计",id:"total",stack:"total",pointPlacement:.08,data:[]},{maxPointWidth:10,pointWidth:0,color:"#BFC6D0",name:"已解除",id:"remove",stack:"remove"},{maxPointWidth:10,color:"#2A384B",name:"测试",id:"removeTest",stack:"relieved",pointPlacement:-.08,showInLegend:!1,data:[]},{maxPointWidth:10,color:"#576374",name:"误报",id:"removeError",stack:"relieved",pointPlacement:-.08,showInLegend:!1,data:[]},{maxPointWidth:10,color:"#838A95",name:"确认报警",id:"removeAlarm",stack:"relieved",pointPlacement:-.08,showInLegend:!1,data:[]},{maxPointWidth:10,color:"#BFC6D0",name:"自动解除",id:"removeAuto",stack:"relieved",pointPlacement:-.08,showInLegend:!1,data:[]},{maxPointWidth:10,color:"#F9A10F",name:"未解除",id:"unremove",stack:"unremove",pointPlacement:-.08,data:[]}];a.n(h)()(c.a),c.a.setOptions({global:{useUTC:!1}});var d=i.a.F(new Date,"yyyy-MM"),v={name:"alarmStatistics",props:{isEdit:Boolean,itemData:Object,siteId:{type:[String,Number],default:-1}},components:{highcharts:l.Chart,mgMonthSelect:r.a,mgTab:o.a},watch:{siteId:function(){this.getData()}},data:function(){return{items:{alamAllName:"",alamAllNameCount:"",maxLevelName:"",maxLevelNameCount:"",maxMpointName:"",maxMpointNameCount:"",maxSiteName:"",maxSiteNameCount:"",levelList:[],mpointList:[],siteList:[],timeList:[]},loading:!1,month:d,tabs:[{label:"时间",value:"timeList"},{label:"区域",value:"siteList"},{label:"测点",value:"mpointList"},{label:"等级",value:"levelList"}],activeTab:["timeList"],columnOptions:{lang:{noData:"运行状态良好"},credits:{enabled:!1},title:{floating:!0,text:null},legend:{itemStyle:{color:"#576374"}},chart:{type:"column",height:280},plotOptions:{column:{borderWidth:0,tooltip:{xDateFormat:"%Y-%m-%d %H:%M:%S"},marker:{enabled:!1},stacking:"normal"},series:{events:{legendItemClick:function(t){if(1==this.index){this.chart.series[0].setState("select");var e=!this.chart.series[2].visible;this.chart.series[2].setVisible(e,!0),this.chart.series[3].setVisible(e,!0),this.chart.series[4].setVisible(e,!0),this.chart.series[5].setVisible(e,!0)}}}}},xAxis:{type:"category"},yAxis:{title:{enabled:!1}},series:p}}},methods:{del:function(){this.$emit("on-delete",this.itemData)},getData:function(){var t=this,e=this.siteId;this.$http.get(s.a.daxAlarmStatistics,{date:this.month,siteId:e}).then((function(e){t.items=e.items,t.renderChart(u(t.items.timeList))}))},renderChart:function(t){var e=this.$refs.columnChart.chart;e.series.forEach((function(e,a){e.setData(t[e.options.id])})),e.reflow()},monthChange:function(){this.activeTab=["timeList"],this.getData()},tabChange:function(t){this.renderChart(u(this.items[t]))}},mounted:function(){this.getData()}},g=(a(840),a(1)),f=Object(g.a)(v,n,[],!1,null,null,null);f.options.__file="src/views/home/components/6/alarm-statistics.vue";e.default=f.exports},516:function(t,e,a){var n=a(526);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(17).default)("5a7c571a",n,!1,{})},524:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-tab",class:{"cmp-tab-underline":t.underline}},t._l(t.items,(function(e){return a("a",{key:e.value,class:{active:t.activeIds.indexOf(e.value)>-1},attrs:{href:"javascript:;"},on:{click:function(a){return t.selectTab(e)}}},[t._v(t._s(e.label))])})),0)};function i(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n._withStripped=!0;var s=null,r={name:"mgTab",props:{groups:Array,value:Array,multiple:{type:Boolean,default:!1},entire:{type:Boolean,default:!1},underline:Boolean},data:function(){return{activeIds:this.value,items:i(this.groups)}},watch:{groups:function(t){this.entire?this.items=[{label:"全部",value:s}].concat(i(t)):this.items=t},value:function(t){this.activeIds=t}},mounted:function(){this.entire&&this.items.unshift({label:"全部",value:s})},methods:{isSelected:function(t){return this.activeIds.indexOf(t)>-1},removeFromSelected:function(t){var e=this;this.activeIds.forEach((function(a,n){a==t&&e.activeIds.splice(n,1)}))},selectTab:function(t){this.entire&&t.value===s?this.activeIds=[s]:this.multiple?this.isSelected(t.value)?this.removeFromSelected(t.value):(this.activeIds.push(t.value),this.entire&&this.removeFromSelected(s)):(this.activeIds=[],this.activeIds.push(t.value)),this.$emit("input",this.activeIds),this.$emit("on-click",this.activeIds)},setValue:function(t){this.activeIds=t,this.$emit("input",this.activeIds)}}},o=(a(525),a(1)),l=Object(o.a)(r,n,[],!1,null,null,null);l.options.__file="src/components/mg-tab.vue";e.a=l.exports},525:function(t,e,a){"use strict";var n=a(516);a.n(n).a},526:function(t,e,a){(e=a(10)(!1)).push([t.i,"\n.cmp-tab {\r\n\tdisplay: inline-block;\n}\n.cmp-tab a {\r\n\tmargin-right: 20px;\t\r\n\tcolor: #576374;\n}\n.cmp-tab .active{\r\n\tcolor: #4B7EFE;\n}\n.cmp-tab-underline a {\r\n\tpadding: 2px 1px;\r\n\ttext-align: center;\n}\n.cmp-tab-underline .active  {\r\n\tborder-bottom: 2px solid #4B7EFE;\n}\r\n",""]),t.exports=e},582:function(t,e,a){var n=a(621);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(17).default)("21418f7a",n,!1,{})},620:function(t,e,a){"use strict";var n=a(582);a.n(n).a},621:function(t,e,a){(e=a(10)(!1)).push([t.i,"\n.cmp-month-select {text-align: center;}\n.cmp-month-select .ivu-btn {background-color:#FFF;color:#999;border: 1px solid #999;width: 20px;\r\n    height: 20px;line-height: 20px;}\n.cmp-month-select-current {margin: 2px 20px;display: inline-block;vertical-align: top;color: #576374;font-weight: 700;}\r\n",""]),t.exports=e},633:function(t,e,a){var n=a(841);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(17).default)("00278e38",n,!1,{})},782:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-month-select"},[a("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-arrow-left"},on:{click:t.prev}}),t._v(" "),a("span",{staticClass:"cmp-month-select-current"},[t._v(t._s(t.value))]),t._v(" "),a("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-arrow-right",disabled:t.disabled},on:{click:t.next}})],1)};n._withStripped=!0;var i=a(11);function s(t){var e=t.split("-"),a=1*e[0],n=1*e[1],s=new Date(a,n-2,1),r=new Date(a,n,1);return{prev:i.a.F(s,"yyyy-MM"),next:i.a.F(r,"yyyy-MM")}}var r=i.a.F(new Date,"yyyy-MM"),o={name:"mgMonthSelect",props:{loading:!1,value:String},data:function(){return{disabled:!0}},mounted:function(){},methods:{prev:function(){if(!this.loading){var t=s(this.value).prev;this.$emit("input",t),this.$emit("on-change",t)}this.disabled=t==r},next:function(){if(!this.loading){var t=s(this.value).next;this.$emit("input",t),this.$emit("on-change",t)}this.disabled=t==r}}},l=(a(620),a(1)),m=Object(l.a)(o,n,[],!1,null,null,null);m.options.__file="src/components/mg-month-select.vue";e.a=m.exports},840:function(t,e,a){"use strict";var n=a(633);a.n(n).a},841:function(t,e,a){(e=a(10)(!1)).push([t.i,"\n.home-alarm-sta-cards {\r\n\theight: 70px;\r\n\tmargin:0 10px 15px;\r\n\tdisplay: flex;\n}\n.home-alarm-sta-general {\r\n\twidth: 133px;\r\n\theight: 70px;\r\n\tbackground-color: #F8F9FB;\r\n\tcolor: #838A95;\n}\n.home-alarm-sta-general h4 {\r\n\tline-height: 40px;\r\n\ttext-indent: 10px;\r\n\tfont-weight: 100;\n}\n.home-alarm-sta-general-v {\r\n\ttext-indent: 10px;\n}\n.home-alarm-sta-general-v strong {\r\n\tcolor: #4B7EFE;\r\n\tfont-size: 20px;\r\n\tfont-weight: 100;\n}\n.home-alarm-sta-max{\r\n\tmargin-left: 10px;\r\n\twidth: 32px;\r\n\theight: 70px;\r\n\tpadding: 15px 5px;\r\n\tline-height: 21px;\r\n\ttext-align: center;\r\n\tbackground-color: #EDF0F6;\r\n\tcolor: #576374;\n}\n.home-alarm-sta-mods {\r\n\tflex: auto;\r\n\tdisplay: flex;\n}\n.home-alarm-sta-mod {\r\n\tflex: 1;\r\n\theight: 70px;\r\n\tbackground-color: #F8F9FB;\r\n\ttext-align: center;\r\n\tborder-right: 1px solid #F1F3F7;\n}\n.home-alarm-sta-mod h5 {\r\n\tfont-size: 13px;\r\n\tfont-weight: 100;\r\n\tcolor: #576374;\r\n\theight: 21px;\r\n\tmargin: 10px auto 7px;\n}\n.home-alarm-sta-mod strong {\r\n\tcolor: #394553;\r\n\tfont-size: 16px;\n}\n.home-alarm-sta-mod span {\r\n\tfont-size: 13px;\r\n\tcolor: #838A95;\n}\n.home-alarm-sta-tabs {\r\n\tmargin-left: 13px;\r\n\tfont-size: 14px;\r\n\theight: 30px;\r\n\tborder-bottom: 1px solid #F8F9FB;\n}\r\n\r\n/* 报警统计图表 */\n.home-alarm-sta-chart{\r\n\tposition:relative;\n}\r\n/* 已解除的构成 */\n.home-alarm-sta-chart .alarm-relieved-list{\r\n\tposition: absolute;\r\n\tright:0;\r\n\ttop: -27px;\r\n    width: 300px;\n}\n.home-alarm-sta-chart .alarm-relieved-list li{\r\n\tlist-style-type: none;\r\n\tdisplay:inline-block;\r\n\tmargin:0 5px;\n}\n.home-alarm-sta-chart .alarm-relieved-list .ivu-icon{\r\n\tmargin-right:5px;\n}\r\n",""]),t.exports=e}}]);