(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{1228:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"status-detail c-main-border"},[a("div",{staticClass:"c-left-border-blue"},[a("h3",[t._v("设备状态详情")]),t._v(" "),a("div",{staticClass:"c-btns-right"},[a("Button",{staticClass:"c-btn-back fr",attrs:{type:"primary",shape:"circle"},on:{click:t.backEvent}},[t._v("返回")])],1)]),t._v(" "),a("div",{staticClass:"c-top-border-gray c-form-data-show",staticStyle:{padding:"20px 0"}},[a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[t._v("设备名称：")]),t._v(t._s(t.baseInfo.name)+"\r\n            ")]),t._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[t._v("设备编号：")]),t._v(t._s(t.baseInfo.code)+"\r\n            ")])]),t._v(" "),a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[t._v("运行状态：")]),t._v(t._s(t.runStatesText[t.baseInfo.maintainState])+"\r\n            ")]),t._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[t._v("资产状态：")]),t._v(t._s(t.stateText)+"\r\n            ")])]),t._v(" "),a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[t._v("设备类型： ")]),t._v(t._s(t.baseInfo.typeName)+"\r\n            ")]),t._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[t._v("ABC类：")]),t._v(t._s(t.abcText)+"\r\n            ")])]),t._v(" "),a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[t._v("所属组织： ")]),t._v(t._s(t.baseInfo.orgName)+"\r\n            ")]),t._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[t._v("区域位置：")]),t._v(t._s(t.baseInfo.processName)+"\r\n            ")])])]),t._v(" "),a("div",{staticClass:"c-top-border-gray"},[a("Tabs",{attrs:{animated:!1}},[a("TabPane",{attrs:{label:"相关测点"}},[a("Table",{attrs:{size:"small",columns:t.mpointColumns,data:t.mpointListData,loading:t.mpointLoading,stripe:""}}),t._v(" "),a("Page",{staticClass:"table-page",attrs:{total:t.mpointTotal,"page-size":t.mpointParams.pageSize,size:"small",current:t.mpointParams.currentPage,"show-total":""},on:{"on-change":t.mpointPageChange}})],1),t._v(" "),a("TabPane",{attrs:{label:"相关报警"}},[a("Table",{attrs:{size:"small",columns:t.alarmColumns,data:t.alarmListData,loading:t.alarmLoading,stripe:""}}),t._v(" "),a("Page",{staticClass:"table-page",attrs:{total:t.alarmTotal,"page-size":t.alarmParams.pageSize,size:"small",current:t.alarmParams.currentPage,"show-total":""},on:{"on-change":t.alarmPageChange}})],1),t._v(" "),a("TabPane",{attrs:{label:"设备状态"}},[a("div",{staticClass:"c-form-data-show"},[a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[t._v("使用时间：")]),t._v(t._s(t.baseInfo.usageTime)+"\r\n                        ")]),t._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[t._v("保修年限：")]),t._v(t._s(t.baseInfo.warrantyTime)+"\r\n                        ")])]),t._v(" "),a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[t._v("缺陷总数：")]),t._v(t._s(t.baseInfo.faultTotal)+"次\r\n                        ")]),t._v(" "),a("div",{staticClass:"c-form-item"},[a("label",[t._v("维修总数：")]),t._v(t._s(t.baseInfo.repairTotal)+"次\r\n                        ")])]),t._v(" "),a("div",{staticClass:"c-form-row-2col"},[a("div",{staticClass:"c-form-item"},[a("label",[t._v("养护总数：")]),t._v(t._s(t.baseInfo.maintainTotal)+"次\r\n                        ")])])])]),t._v(" "),a("TabPane",{attrs:{label:"缺陷历史"}},[a("div",{staticClass:"equ-status-tab-select"},[a("Select",{attrs:{placement:"bottom",transfer:!0,size:"small"},on:{"on-change":t.faultDateChange},model:{value:t.faultDateRange.y,callback:function(e){t.$set(t.faultDateRange,"y",e)},expression:"faultDateRange.y"}},t._l(t.year,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),t._v(" "),a("Select",{attrs:{placement:"bottom",transfer:!0,size:"small"},on:{"on-change":t.faultDateChange},model:{value:t.faultDateRange.m,callback:function(e){t.$set(t.faultDateRange,"m",e)},expression:"faultDateRange.m"}},t._l(t.month,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),a("Table",{attrs:{columns:t.faultColumns,data:t.faultListData,loading:t.faultLoading,stripe:""}}),t._v(" "),a("Page",{staticClass:"table-page",attrs:{total:t.faultTotal,"page-size":t.faultParams.pageSize,current:t.faultParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":t.faultPageChange}})],1),t._v(" "),a("TabPane",{attrs:{label:"维修历史"}},[a("div",{staticClass:"equ-status-tab-select"},[a("Select",{attrs:{transfer:!0,size:"small"},on:{"on-change":t.repairDateChange},model:{value:t.repairDateRange.y,callback:function(e){t.$set(t.repairDateRange,"y",e)},expression:"repairDateRange.y"}},t._l(t.year,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),t._v(" "),a("Select",{attrs:{placement:"bottom",transfer:!0,size:"small"},on:{"on-change":t.repairDateChange},model:{value:t.repairDateRange.m,callback:function(e){t.$set(t.repairDateRange,"m",e)},expression:"repairDateRange.m"}},t._l(t.month,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),a("Table",{attrs:{columns:t.repairColumns,data:t.repairListData,loading:t.repairLoading,stripe:""}}),t._v(" "),a("Page",{staticClass:"table-page",attrs:{total:t.repairTotal,"page-size":t.repairParams.pageSize,current:t.repairParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":t.repairPageChange}})],1),t._v(" "),a("TabPane",{attrs:{label:"保养历史"}},[a("div",{staticClass:"equ-status-tab-select"},[a("Select",{attrs:{transfer:!0,size:"small"},on:{"on-change":t.maintainDateChange},model:{value:t.maintainDateRange.y,callback:function(e){t.$set(t.maintainDateRange,"y",e)},expression:"maintainDateRange.y"}},t._l(t.year,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1),t._v(" "),a("Select",{attrs:{placement:"bottom",transfer:!0,size:"small"},on:{"on-change":t.maintainDateChange},model:{value:t.maintainDateRange.m,callback:function(e){t.$set(t.maintainDateRange,"m",e)},expression:"maintainDateRange.m"}},t._l(t.month,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t._v(" "),a("Table",{attrs:{columns:t.maintainColumns,data:t.maintainListData,loading:t.maintainLoading,stripe:""}}),t._v(" "),a("Page",{staticClass:"table-page",attrs:{total:t.maintainTotal,"page-size":t.maintainParams.pageSize,current:t.maintainParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":t.maintainPageChange}})],1),t._v(" "),a("TabPane",{attrs:{label:"备注历史"}},[a("Button",{staticClass:"c-btn-add",attrs:{type:"primary",shape:"circle"},on:{click:t.addRemark}},[t._v("新增")]),t._v(" "),a("Table",{attrs:{columns:t.remarkColumns,data:t.remarkListData,loading:t.remarkLoading,stripe:""}}),t._v(" "),a("Page",{staticClass:"table-page",attrs:{total:t.remarkTotal,"page-size":t.remarkParams.pageSize,current:t.remarkParams.currentPage,"show-total":"","show-elevator":""},on:{"on-change":t.remarkPageChange}})],1)],1)],1),t._v(" "),a("Modal",{attrs:{closable:!0,title:"新增备注历史",width:"500"},model:{value:t.addRemarkModal,callback:function(e){t.addRemarkModal=e},expression:"addRemarkModal"}},[a("Form",{ref:"remarkForm",attrs:{rules:t.remarkFormValidate,model:t.remarkHistory,"label-width":90}},[a("FormItem",{attrs:{label:"备注人：",prop:"commentUserName"}},[a("span",[t._v(t._s(t.remarkHistory.commentUserName))])]),t._v(" "),a("FormItem",{attrs:{label:"备注内容：",prop:"comment"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:3,maxRows:5}},model:{value:t.remarkHistory.comment,callback:function(e){t.$set(t.remarkHistory,"comment",e)},expression:"remarkHistory.comment"}})],1),t._v(" "),a("FormItem",{attrs:{label:"相关人：",prop:"relevantUserId"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.remarkHistory.relevantUserId,callback:function(e){t.$set(t.remarkHistory,"relevantUserId",e)},expression:"remarkHistory.relevantUserId"}},t._l(t.relevantUserList,(function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"c-modal-footer-btns"},[a("Button",{attrs:{type:"default"},on:{click:t.remarkCancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary",loading:t.btnLoaddingByRemark},on:{click:t.remarkSubmit}},[t._v("确定")])],1)])],1)],1)};n._withStripped=!0;var i=a(23),r=a(523),s=a(11),o=a(517),l=a(532),m=a(573),u=a(592),p=a(547),c=(a(520),a(39)),d=function(){for(var t=(new Date).getFullYear(),e=[],a=0;a<t-2015+1;a++)e.push({label:t-a+"年",value:t-a});return e}(),g=[{label:"全年",value:"0"},{label:"12月",value:"12"},{label:"11月",value:"11"},{label:"10月",value:"10"},{label:"9月",value:"09"},{label:"8月",value:"08"},{label:"7月",value:"07"},{label:"6月",value:"06"},{label:"5月",value:"05"},{label:"4月",value:"04"},{label:"3月",value:"03"},{label:"2月",value:"02"},{label:"1月",value:"01"}],h={components:{datepickerRanger:r.a},computed:Object(i.b)({taskStatusText:function(t){return t.map.maintain.statusText},stateText:function(t){return t.map.equ.statesText[this.baseInfo.state]},abcText:function(t){return t.map.equ.abcText[this.baseInfo.abc]},faultLevelText:function(t){return t.map.fault.levelText},mpointType:function(t){return t.map.mpoint.type},mpointTypeTxt:function(t){return t.map.mpoint.datypeText},mpointSource:function(t){return t.map.mpoint.source},mpointSourceTxt:function(t){return t.map.mpoint.sourceText},alarmStatesText:function(t){return t.map.alarm.history.statesText},runStatesText:function(t){return t.map.equ.runStatesText}}),data:function(){var t=this,e=this;return{year:d,month:g,baseInfo:{},faultDateRange:{y:(new Date).getFullYear(),m:"0"},faultParams:{equId:this.$route.params.id,startDate:"",endDate:"",pageSize:10,currentPage:1},faultColumns:[{title:"缺陷类型",key:"faultTypeName"},{title:"严重程度",key:"severityType",width:100,render:function(t,a){return t("span",e.faultLevelText[a.row.severityType])}},{title:"申报人",key:"createUser"},{title:"申报时间",key:"createDate",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.createDate)}},{title:"状态",key:"stateName",width:100},{title:"缺陷编号",key:"faultNumber",render:function(t,a){return t("a",{style:{color:"#4b7efe",textDecoration:"underline"},on:{click:function(){e.$router.push({name:"fault-detail",params:{id:a.row.id}})}}},a.row.faultNumber)}},{title:"当前处理人",key:"processingPersonName"},{title:"处理时间",key:"processingDate",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.processingDate)}}],faultListData:[],faultLoading:!1,faultTotal:0,repairDateRange:{y:(new Date).getFullYear(),m:"0"},repairParams:{equId:this.$route.params.id,startDate:"",endDate:"",pageSize:10,currentPage:1},repairColumns:[{title:"维修措施",key:"repairTypeName"},{title:"维修编号",key:"repairNumber",render:function(t,a){return t("a",{style:{color:"#4b7efe",textDecoration:"underline"},on:{click:function(){e.$router.push({name:"repair-detail",params:{id:a.row.id}})}}},a.row.repairNumber)}},{title:"报修时间",key:"createDate",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.createDate)}},{title:"报修人",key:"createUserName"},{title:"状态",key:"stateName"},{title:"缺陷编号",key:"faultNumber"},{title:"当前维修人",key:"processingPersonName"},{title:"处理时间",key:"processingDate",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.processingDate)}}],repairListData:[],repairLoading:!1,repairTotal:0,maintainDateRange:{y:(new Date).getFullYear(),m:"0"},maintainParams:{equId:this.$route.params.id,startDate:"",endDate:"",pageSize:10,currentPage:1},maintainColumns:[{title:"保养任务名称",key:"taskName"},{title:"任务编号",key:"taskCode",width:200,render:function(t,a){return t("a",{style:{color:"#4b7efe",textDecoration:"underline"},on:{click:function(){e.$router.push({name:"maintain-task-detail",params:{id:a.row.id}})}}},a.row.taskCode)}},{title:"开始时间",key:"startDate",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.startDate)}},{title:"结束时间",key:"endDate",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.endDate)}},{title:"执行人",key:"executeUserName"},{title:"状态",key:"state",width:100,render:function(t,a){return t("span",e.taskStatusText[a.row.state])}},{title:"保养持续时间",key:"planDuration"},{title:"保养完成",key:"contentsItems"},{title:"缺陷数量",key:"faults"}],maintainListData:[],maintainLoading:!1,maintainTotal:0,mpointColumns:[{title:"测点编号",key:"mpointId",width:120},{title:"测点名称",key:"mpointName"},{title:"数据分类",key:"categoryName"},{title:"当前值",key:"value"},{title:"单位",key:"unit",width:120},{title:"业务时间",key:"datadt",width:120,render:function(t,e){return s.a.tableDatetime(t,e.row.datadt)}},{title:"信号类型",key:"datype",width:120,render:function(t,a){return t("span",{class:["State"==a.row.datype?"mpoint-signal-state":"mpoint-signal-digital"],attrs:{title:e.mpointTypeTxt[a.row.datype]}},"State"==a.row.datype?"D":"A")}},{title:"数据来源",key:"datasource",width:100,render:function(t,a){return t("span",e.mpointSourceTxt[a.row.datasource])}}],mpointListData:[],mpointLoading:!1,mpointTotal:0,mpointParams:{equId:this.$route.params.id,currentPage:1,pageSize:10},alarmColumns:[{title:"报警名称",key:"alarmName"},{title:"报警状态",key:"alarmStatus",width:90,render:function(e,a){return e("span",{class:"alarm-status-"+a.row.alarmStatus.toLowerCase()},t.alarmStatesText[a.row.alarmStatus])}},{title:"等级",key:"alarmLevel",width:60,render:function(t,e){return t("span",{class:["alarm-lev-"+e.row.alarmLevel]},e.row.alarmLevel+"级")}},{title:"发生时间",key:"alarmTriggerTime",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.alarmTriggerTime)}},{title:"解除时间",key:"alarmReleaseTime",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.alarmReleaseTime)}},{title:"持续时间",key:"duration"},{title:"确认人员",key:"releaseUserName"},{title:"订阅状态",key:"subscribeAlarm",render:function(t,e){return t("span",0==e.row.subscribeAlarm?"否":"是")}}],alarmListData:[],alarmLoading:!1,alarmTotal:0,alarmParams:{equId:this.$route.params.id,currentPage:1,pageSize:10},remarkParams:{equId:this.$route.params.id,pageSize:10,currentPage:1},remarkColumns:[{title:"日期",key:"createTime",width:110,render:function(t,e){return s.a.tableDatetime(t,e.row.createTime)}},{title:"备注人",width:120,key:"commentUserName"},{title:"备注内容",key:"comment"},{title:"相关人",width:110,key:"relevantUserName"}],remarkListData:[],remarkLoading:!1,remarkTotal:0,addRemarkModal:!1,btnLoaddingByRemark:!1,remarkHistory:{equId:this.$route.params.id,commentUserName:this.$store.state.user.account.name,commentUserId:this.$store.state.user.account.id,comment:"",relevantUserId:null,relevantUserNam:""},relevantUserList:[],remarkFormValidate:{comment:{required:!0,message:"请输入备注内容",trigger:"blur"}}}},methods:{getRelevantUserList:function(){var t=this;this.$http.get(c.a.underOrganizationUsers).then((function(e){e&&(t.relevantUserList=e)}))},backEvent:function(){this.$router.back()},getBaseInfo:function(){var t=this;this.$http.get(l.a.getEquState+this.$route.params.id).then((function(e){e&&(t.baseInfo=e)}))},faultDateChange:function(t){this.dateHandel("faultDateRange","faultParams"),this.getFaults()},getFaults:function(){var t=this;this.faultLoading=!0,this.faultParams.startDate=s.a.transDateFromLocale(this.faultParams.startDate),this.faultParams.endDate=s.a.transDateFromLocale(this.faultParams.endDate),this.$http.get(m.a.getFaultsEqu,this.faultParams).then((function(e){t.faultListData=e.items||[],t.faultTotal=e.total,t.faultLoading=!1}))},faultPageChange:function(t){this.faultParams.currentPage=t,this.getFaults()},repairDateChange:function(t){this.dateHandel("repairDateRange","repairParams"),this.getRepairs()},getRepairs:function(){var t=this;this.repairLoading=!0,this.repairParams.startDate=s.a.transDateFromLocale(this.repairParams.startDate),this.repairParams.endDate=s.a.transDateFromLocale(this.repairParams.endDate),this.$http.get(u.a.getDataEqu,this.repairParams).then((function(e){t.repairListData=e.items||[],t.repairTotal=e.total,t.repairLoading=!1}))},repairPageChange:function(t){this.repairParams.currentPage=t,this.getRepairs()},maintainDateChange:function(t){this.dateHandel("maintainDateRange","maintainParams"),this.getMaintains()},getMaintains:function(){var t=this;this.maintainLoading=!0,this.maintainParams.startDate=s.a.transDateFromLocale(this.maintainParams.startDate),this.maintainParams.endDate=s.a.transDateFromLocale(this.maintainParams.endDate),this.$http.get(p.a.getTaskByEqu,this.maintainParams).then((function(e){t.maintainListData=e.items||[],t.maintainTotal=e.total,t.maintainLoading=!1}))},maintainPageChange:function(t){this.maintainParams.currentPage=t,this.getMaintains()},dateHandel:function(t,e){var a=o.a.getTerminalsByMonth(this[t].y,this[t].m);this[e].startDate=a.start,this[e].endDate=a.end,this[e].currentPage=1},getMpoints:function(){var t=this;this.mpointLoading=!0,this.$http.get(l.a.pointsByEqu,this.mpointParams).then((function(e){t.mpointListData=e.items||[],t.mpointTotal=e.total,t.mpointLoading=!1}))},mpointPageChange:function(t){this.mpointParams.currentPage=t,this.getMpoints()},getAlarms:function(){var t=this;this.alarmLoading=!0,this.$http.get(l.a.alarmByEqu,this.alarmParams).then((function(e){t.alarmListData=e.items||[],t.alarmTotal=e.total,t.alarmLoading=!1}))},alarmPageChange:function(t){this.alarmParams.currentPage=t,this.getAlarms()},getRemarks:function(){var t=this;this.remarkLoading=!0,this.$http.get(l.a.getRemarkByEqu,this.remarkParams).then((function(e){t.remarkListData=e.items||[],t.remarkTotal=e.total,t.remarkLoading=!1}))},remarkPageChange:function(t){this.remarkParams.currentPage=t,this.getRemarks()},addRemark:function(){this.remarkHistory={equId:this.$route.params.id,commentUserName:this.$store.state.user.account.name,commentUserId:this.$store.state.user.account.id,comment:"",relevantUserId:null,relevantUserNam:""},this.addRemarkModal=!0},remarkCancel:function(){this.addRemarkModal=!1},remarkSubmit:function(){var t=this;this.$refs.remarkForm.validate((function(e){e&&(t.btnLoaddingByRemark=!0,t.$http.post(l.a.addRemarkByEqu,t.remarkHistory).then((function(e){t.addRemarkModal=!1,t.getRemarks(),t.btnLoaddingByRemark=!1})).catch((function(e){t.btnLoaddingByRemark=!1})))}))}},created:function(){s.a.initTableColumnTitle(this.faultColumns),s.a.initTableColumnTitle(this.repairColumns),s.a.initTableColumnTitle(this.maintainColumns),s.a.initTableColumnTitle(this.mpointColumns),s.a.initTableColumnTitle(this.alarmColumns),s.a.initTableColumnTitle(this.remarkColumns),this.getBaseInfo(),this.faultDateChange(),this.repairDateChange(),this.maintainDateChange(),this.getMpoints(),this.getAlarms(),this.getRemarks(),this.getRelevantUserList()}},f=(a(884),a(1)),v=Object(f.a)(h,n,[],!1,null,null,null);v.options.__file="src/views/equ/status/detail.vue";e.default=v.exports},507:function(t,e,a){t.exports=a.p+"images/3a23524e9c2a6dd02c2c02fb7847102e.png"},515:function(t,e,a){var n=a(522);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(17).default)("43cd0b0e",n,!1,{})},517:function(t,e,a){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i={F:function(t,e){if(!t)return"";"object"!=n(t)&&(t=new Date(t)),e=e||"yyyy-MM-dd";var a=t.getFullYear().toString(),i={M:t.getMonth()+1,d:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};for(var r in e=e.replace(/(y+)/gi,(function(t,e){return a.substr(4-Math.min(4,e.length))})),i)e=e.replace(new RegExp("("+r+"+)","g"),(function(t,e){return i[r]<10&&e.length>1?"0"+i[r]:i[r]}));return e},str2Date:function(t){if(t)return"object"!=n(t)?new Date(t):t},firstDayByWeek:function(t){var e=i.str2Date(t)||new Date,a=e.getDay(),n=(0==a?7:a)-1;return i.midnight(new Date(e.getTime()-24*n*60*60*1e3))},firstDayByMonth:function(t){var e=i.str2Date(t)||new Date;return i.midnight(new Date(e.getFullYear(),e.getMonth(),1))},firstDayByYear:function(t){var e=i.str2Date(t)||new Date;return i.midnight(new Date(e.getFullYear(),0,1))},countDateByStep:function(t,e,a,n){t=i.formatePolyfill(t);var r,s=i.str2Date(t)||new Date(t),o=s.getTime(),l=(new Date).getTime();switch(a){case"day":r=o+864e5*e;break;case"week":r=o+6048e5*e;break;case"month":r=new Date(s.getFullYear(),s.getMonth()+e,s.getDate()).getTime(),n&&(r=new Date(s.getFullYear(),s.getMonth()+e,s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()).getTime());break;case"year":r=new Date(s.getFullYear()+e,s.getMonth(),s.getDate()).getTime(),n&&(r=new Date(s.getFullYear()+e,s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()).getTime())}return r>l&&(r=l),n?r:i.midnight(r)},midnight:function(t){return t?i.F(t)+" 00:00:00":""},beforeMidnight:function(t){return t?i.F(t)+" 23:59:59":""},midnightMill:function(t){var e=i.str2Date(t)||new Date;return new Date(i.midnight(e)).getTime()},chain:function(t,e){return i.countDateByStep(t,-1,e)},yearOFyear:function(t){return i.countDateByStep(t,-1,"year")},getPeriods:function(t){var e,a=t.beginDate,n=new Date(i.formatePolyfill(a)),r=n.getTime();switch(t.cycle){case"day":e=r+864e5;break;case"week":e=r+6048e5;break;case"month":e=new Date(n.getFullYear(),n.getMonth()+1,n.getDate(),0,0,0).getTime();break;case"year":e=new Date(n.getFullYear()+1,n.getMonth(),n.getDate(),0,0,0).getTime()}return{min:r,max:new Date(e).getTime()}},formatePolyfill:function(t){return"string"!=typeof t?t:("string"==typeof t&&0==/[TZ]/.test(t)&&(t=t.replace(/-/g,"/")),t)},getTerminalsByMonth:function(t,e){var a,n;return 0==e?(a=new Date(t,0,1,0,0,0),n=new Date(t,11,31,23,59,59)):(a=new Date(t,e-1,1,0,0,0),n=new Date(t,e,0,23,59,59)),{start:a,end:n}},transDateFromServer:function(t,e){return t?("string"==typeof t&&0==/[TZ]/.test(t)&&(t=t.replace(/-/g,"/")),i.F(t,e||"yyyy-MM-dd hh:mm")):""},transDateFromLocale:function(t){return t?("string"==typeof t&&(0==/[TZ]/.test(t)&&(t=t.replace(/-/g,"/")),t=new Date(t)),t.toISOString()):""},strToData:function(t){var e=t.split(" ")[0].split("-"),a=[];return void 0!==t.split(" ")[1]&&(a=t.split(" ")[1].split(":")),new Date(e[0],e[1]-1,e[2],null!==a[0]?a[0]:0,null!==a[1]?a[1]:0,null!==a[2]?a[2]:0)}};e.a=i},520:function(t,e,a){"use strict";var n=a(22),i={modalMpoints:"/loong/api/mpoints/dialog",alarmChart:"/loong/api/mpoints/alarm-condition",downloadTemplate:n.a+"/loong/api/mpoints/excel-template-download",exportTemplate:n.a+"/loong/api/mpoints/export",importExcel:n.a+"/loong/api/mpoints/import",saveExcelData:"/loong/api/mpoints/import-save",cancelExcelData:"/loong/api/mpoints/import-cancel",getCategroyData:"/loong/api/mpoints-datacategory",getMpointsList:"/loong/api/mpoints",deleteMpoints:"/loong/api/mpoints",deleteAllMpoints:"/loong/api/mpoints/all",batchSave:"/loong/api/mpoints/batch",autoMpoints:"/loong/api/mpoints-auto",datainputMpoints:"/loong/api/mpoints-datainput",taskMpoints:"/loong/api/mpoints-task",getCalcMpointDetail:"/loong/api/mpoints-calc",getCycle:"/loong/api/mpoints-calc-cycle",getAnalysisMpointDetail:"/loong/api/mpoints-analysis",getMpointNumByType:"/loong/api/mpoints/batch/all",getMpointDataImportList:"/loong/api/mpoint-data-imports",deleteMpointDataImport:"/loong/api/mpoint-data-imports",stopMpointDataImport:"/loong/api/mpoint-data-imports",pointDataImportTempleDownload:n.a+"/loong/api/mpoint-data-imports/templeDownload",pointDataImportFileUpload:n.a+"/loong/api/mpoint-data-imports/fileUpload"};e.a=i},521:function(t,e,a){"use strict";var n=a(515);a.n(n).a},522:function(t,e,a){(e=a(10)(!1)).push([t.i,"\n.cmp-datepicker {\r\n\tdisplay: inline-block;\n}\r\n",""]),t.exports=e},523:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmp-datepicker"},[a("DatePicker",{style:{width:t.width},attrs:{type:"date",placeholder:"开始日期",value:t.dateRange.start,disabled:t.disabled,options:t.startDateOptions},on:{"on-change":t.startDateChange}}),t._v(" "),a("span",[t._v(" - ")]),t._v(" "),a("DatePicker",{style:{width:t.width},attrs:{type:"date",placeholder:"结束日期",value:t.dateRange.end,disabled:t.disabled,options:t.endDateOptions},on:{"on-change":t.endDateChange}})],1)};n._withStripped=!0;var i=a(11),r=a(517),s={name:"datepickerRanger",props:{value:Object,width:String,disabled:{type:Boolean,default:!1},enabled:String},watch:{"value.start":function(t){this.dateRange.start=i.a.transDateFromServer(t,"yyyy-MM-dd")},"value.end":function(t){this.dateRange.end=i.a.transDateFromServer(t,"yyyy-MM-dd")}},data:function(){var t=this,e=r.a.midnightMill();return{dateRange:{start:i.a.transDateFromServer(this.value.start,"yyyy-MM-dd"),end:i.a.transDateFromServer(this.value.end,"yyyy-MM-dd")},startDateOptions:{disabledDate:function(a){return"coming"==t.enabled?a&&a.valueOf()<e:"halfYear"===t.enabled?a&&a.valueOf()<e-15552e6:t.dateRange.end&&a&&a.valueOf()>1*new Date(t.dateRange.end+" 23:59:59")}},endDateOptions:{disabledDate:function(a){var n=1*new Date(t.dateRange.start+" 00:00:00"),i=a&&a.valueOf();return"past"==t.enabled?a&&i>e:t.dateRange.start&&a&&i<n}}}},methods:{startDateChange:function(t){this.dateRange.start=t;var e=this.dateRange.start?i.a.transDateFromLocale(this.dateRange.start+" 00:00:00"):"",a=this.dateRange.end?i.a.transDateFromLocale(this.dateRange.end+" 23:59:59"):"";this.$emit("input",{start:e,end:a}),this.$emit("on-change",{start:e,end:a})},endDateChange:function(t){this.dateRange.end=t;var e=this.dateRange.start?i.a.transDateFromLocale(this.dateRange.start+" 00:00:00"):"",a=this.dateRange.end?i.a.transDateFromLocale(this.dateRange.end+" 23:59:59"):"";this.$emit("input",{start:e,end:a}),this.$emit("on-change",{start:e,end:a})}}},o=(a(521),a(1)),l=Object(o.a)(s,n,[],!1,null,null,null);l.options.__file="src/components/datepicker-ranger.vue";e.a=l.exports},532:function(t,e,a){"use strict";var n=a(22),i={getAllEqu:"/equipment/api/equipments",deleteEqu:"/equipment/api/equipments",getEquDetail:"/equipment/api/equipments/detail/",saveEqu:"/equipment/api/equipments/detail",delAttachment:"/equipment/api/equ-attachs",getSingleEqu:"/equipment/api/equipments/",getParentEqu:"/equipment/api/equipments/parent/",getEquState:"/equipment/api/equipments/state/",getRemarkByEqu:"/equipment/api/equ-comments",addRemarkByEqu:"/equipment/api/equ-comments",pointsByEqu:"/equipment/api/equipments/mpoint",alarmByEqu:"/equipment/api/alarm-records",equRelPoints:"/equipment/api/mpoints/dropdown-box",getQrcode:n.a+"/equipment/api/equipments/qrcode-export",import:"/equipment/api/excel-import",saveExcelData:"/equipment/api/excel-data-save",cancelExcelData:"/equipment/api/excel-data-cancel",getExcel:n.a+"/equipment/api/excel-temlate-down",importExcel:n.a+"/equipment/api/excel-import",qrcodeExportStart:"/equipment/api/equipments/qrcode-export",qrcodeExportProgress:"/equipment/api/equipments/qrcode-export/progress",qrcodeExportDownload:n.a+"/equipment/api/equipments/qrcode-export/download",equTypeTree:"/equipment/api/equ-types/tree",equTypes:"/equipment/api/equ-types",equType:"/equipment/api/equ-types",gatewayParseMethod:"/box/api/terminals/parse-method",getTerminalList:"/box/api/terminals",terminalDetail:"/box/api/terminals/",addTerminal:"/box/api/terminals",delTerminal:"/box/api/terminals",simSelect:"/box/api/sim-manager/cards/select"};e.a=i},547:function(t,e,a){"use strict";var n={getPlans:"/equipment/api/maintains/plans",getPlanDetail:"/equipment/api/maintain/plan/",getPlanDetailList:"/equipment/api/maintain/plan/detail",initPlanDetailList:"/equipment/api/maintains/initGenerate",delPlans:"/equipment/api/maintains/plan",addPlan:"/equipment/api/maintains/plan",assignPlan:"/equipment/api/maintains/plan/assign",getTasks:"/equipment/api/maintains/tasks",delTask:"/equipment/api/maintains/task",stopTask:"/equipment/api/maintains/task/stop",getTaskDetail:"/equipment/api/maintain/task/",getTaskDetailList:"/equipment/api/maintain/task/detail/",taskTransfer:"/equipment/api/maintains/task/transfer",gatStatistics:"/equipment/api/maintains/statistics",export:a(22).a+"/equipment/api/maintains/statistics-excel-export",getContents:"/equipment/api/maintain/plan/contents/",planIssued:"/equipment/api/maintains/plan/distributeTask",getTaskByEqu:"/equipment/api/maintains/tasks/equ"};e.a=n},573:function(t,e,a){"use strict";var n={faultReport:"/equipment/api/faults",getFaults:"/equipment/api/faults",getFaultDetail:"/equipment/api/faults",taskAssign:"/equipment/api/faults/assign",taskHandle:"/equipment/api/faults/process",getFaultStatistics:"/equipment/api/faults/statistics",export:a(22).a+"/equipment/api/faults/statistics-export",getFaultsEqu:"/equipment/api/faults/equ",getSpare:"/inventory/api/outbounds/web"};e.a=n},592:function(t,e,a){"use strict";var n={getData:"/equipment/api/repairs",getMaintainDetail:"/equipment/api/repairs",taskAssign:"/equipment/api/repairs/assign",taskHandle:"/equipment/api/repairs/process",getRepairStatistics:"/equipment/api/repairs/statistics",export:a(22).a+"/equipment/api/repairs/statistics-export",getDataEqu:"/equipment/api/repairs/equ",getSpare:"/inventory/api/outbounds/web"};e.a=n},667:function(t,e,a){var n=a(885);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(17).default)("7286bcf7",n,!1,{})},884:function(t,e,a){"use strict";var n=a(667);a.n(n).a},885:function(t,e,a){var n=a(10),i=a(508),r=a(506);(e=n(!1)).i(i),e.i(r),e.push([t.i,"\n.equ-status-tab-select {\r\n    height: 40px;\n}\n.equ-status-tab-select .ivu-select {\r\n    width: 100px;\n}\r\n",""]),t.exports=e}}]);