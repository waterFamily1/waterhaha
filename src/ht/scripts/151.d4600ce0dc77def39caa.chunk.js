(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{1271:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home-item"},[n("h3",[e._v("\n        "+e._s(e.screenName)+"\n        "),n("a",{staticClass:"home-fullscreen-trigger",attrs:{href:"javascript:;"},on:{click:e.toggle}},[e._v("全屏")]),e._v(" "),e.isEdit?n("a",{staticClass:"home-edit-btn",attrs:{href:"javascript:;"},on:{click:e.edit}},[e._v("编辑")]):e._e(),e._v(" "),e.isEdit?n("a",{staticClass:"home-del-btn",attrs:{href:"javascript:;"},on:{click:e.del}},[e._v("删除")]):e._e(),e._v(" "),n("a",{staticClass:"home-ht-disabled",attrs:{href:"javascript:;",title:"启用/禁用鼠标操作画面"},on:{click:e.changeEnabled}},[e._v(e._s(e.enableZoom?"禁用操作":"使能操作"))])]),e._v(" "),n("fullscreen",{ref:e.fullscreenRef,staticStyle:{margin:"0 10px"},on:{change:e.fullscreenChange}},[e.url?n("div",{staticClass:"home-ht-small"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.enableZoom,expression:"!enableZoom"}],staticClass:"home-ht-mask"}),e._v(" "),n("iframe",{attrs:{name:e.iframeNameRef,src:e.url,frameborder:"0",width:"100%",height:"100%","data-isFullScreen":e.isFullScreen}}),e._v(" "),"true"==e.isFullScreen?n("Button",{staticClass:"btn-monitor-fullscreen",attrs:{type:"ghost",icon:"arrow-shrink"},on:{click:e.toggle}}):e._e()],1):n("div",{staticClass:"home-mod-empty"},[e._v("请点击编辑进行配置")])]),e._v(" "),n("Modal",{attrs:{width:600,title:"选择监视画面"},model:{value:e.modalShown,callback:function(t){e.modalShown=t},expression:"modalShown"}},[n("mg-single-select-table",{ref:"modalTable",attrs:{columns:e.modalColumns,url:e.modalUrl,manual:!0},on:{"on-select":e.selectHT}},[n("div",{},[n("label",[e._v("关键字：")]),e._v(" "),n("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"画面名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchParams.queryName,callback:function(t){e.$set(e.searchParams,"queryName",t)},expression:"searchParams.queryName"}}),e._v(" "),n("label",[e._v("区域位置：")]),e._v(" "),n("dropdown-tree",{attrs:{url:e.processTreeApi,width:180},model:{value:e.relProcess,callback:function(t){e.relProcess=t},expression:"relProcess"}}),e._v(" "),n("Button",{staticClass:"c-btn-modal-search",attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),n("Button",{staticClass:"c-btn-modal-reset",attrs:{type:"primary"},on:{click:e.searchParamsClean}},[e._v("重置")])],1)]),e._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)};r._withStripped=!0;var l=n(538),s=n.n(l),a=n(7),i=(n(23),n(11)),o=n(31),c=n(107),u=n(149),d=n(145);a.default.use(s.a);var m={components:{mgSingleSelectTable:u.a,dropdownTree:d.a},props:{isEdit:Boolean,itemData:Object,orgId:{type:[String,Number],default:-1}},data:function(){return{url:"",screenName:"",modalShown:!1,modalColumns:[{title:"区域位置",key:"siteName",width:250},{title:"区域画面",key:"screenName"}],modalUrl:o.a.processViewList,searchParams:{queryName:"",siteId:"",pageSize:10,currentPage:1},relProcess:{id:"",title:"请选择"},processTreeApi:c.a.getProcessTreeData,enableZoom:!1,enableZoomCache:!1,isFullScreen:"false",iframeNameRef:"iframeName_"+i.a.gusid(8),fullscreenRef:"fullscreen_"+i.a.gusid(8)}},methods:{del:function(){this.$emit("on-delete",this.itemData)},edit:function(){this.modalShown=!0},selectHT:function(e){var t=this;this.modalShown=!1,this.$http.post(o.a.modSave,{i:this.itemData.i,data:JSON.stringify({url:e.uploadPath,name:e.screenName})}).then((function(n){t.url=window.location.origin+"/"+e.uploadPath,t.screenName=e.screenName}))},search:function(){this.searchParams.currentPage=1,this.searchParams.siteId=this.relProcess.id,this.$refs.modalTable.getData(this.searchParams)},searchParamsClean:function(){this.searchParams={queryName:"",siteId:"",pageSize:10,currentPage:1},this.relProcess={id:"",title:"请选择"}},toggle:function(e){this.$refs[this.fullscreenRef].toggle()},changeEnabled:function(){this.enableZoom=!this.enableZoom,this.enableZoomCache=!!this.enableZoom},fullscreenChange:function(e){this.isFullScreen=e?"true":"false";var t=this.enableZoomCache;this.enableZoom=!!e||t}},mounted:function(){this.search(),this.itemData&&this.itemData.data&&this.itemData.data.url&&(this.url=window.location.origin+"/"+this.itemData.data.url,this.screenName=this.itemData.data.name)}},h=(n(823),n(1)),f=Object(h.a)(m,r,[],!1,null,null,null);f.options.__file="src/views/home/components/3/ht-small.vue";t.default=f.exports},538:function(e,t,n){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var l=n[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";t.b=function(){var e=document.documentElement;return"requestFullscreen"in e||"mozRequestFullScreen"in e&&document.mozFullScreenEnabled||"msRequestFullscreen"in e&&document.msFullscreenEnabled||"webkitRequestFullScreen"in e},t.c=function(){return!!(document.fullscreen||document.mozFullScreen||document.fullscreenElement||document.msFullscreenElement||document.webkitIsFullScreen)},t.g=function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.log("Fullscreen API is not supported.")},t.d=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("Fullscreen API is not supported.")},t.f=function(e){document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),document.addEventListener("webkitfullscreenchange",e)},t.e=function(e){document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),document.removeEventListener("webkitfullscreenchange",e)},t.a=function e(){var t={},n=!1,r=0,l=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(n=arguments[0],r++);r<l;r++)!function(r){for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(n&&"[object Object]"===Object.prototype.toString.call(r[l])?t[l]=e(!0,t[l],r[l]):t[l]=r[l])}(arguments[r]);return t}},function(e,t,n){"use strict";function r(){return n.i(a.c)()}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,t=arguments[1];if(o&&!r()){t=n.i(a.a)(!0,{},i,t);var l=e,s=void 0;t.wrap&&((s=document.createElement("div")).style["overflow-y"]="auto",s.style.background=t.background,s.style.width="100%",s.style.height="100%",l.parentNode.insertBefore(s,l),s.appendChild(l),s.addEventListener("click",(function(e){e.target===this&&n.i(a.d)()}))),l.classList.add(t.fullscreenClass),n.i(a.f)((function e(){var i=r();i||(n.i(a.e)(e),l.classList.remove(t.fullscreenClass),t.wrap&&(s.parentNode.insertBefore(l,s),s.parentNode.removeChild(s))),t.callback&&t.callback(i)})),n.i(a.g)(t.wrap?s:l)}}function s(){o&&r()&&n.i(a.d)()}var a=n(0),i={wrap:!0,background:"#333",callback:function(){},fullscreenClass:"fullscreen"},o=n.i(a.b)();t.a={getState:r,toggle:function(e,t,n){o&&(void 0===n?r()?s():l(e,t):n?l(e,t):s())},enter:l,exit:s}},function(e,t,n){var r=n(5)(n(4),n(6),null,null);e.exports=r.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),l=n.n(r),s=n(1),a=n(0);t.default={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.name||"fullscreen";e.component(r,n.i(a.a)(l.a,{name:r})),e.prototype["$"+r]=s.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={props:{background:{type:String,default:"#333"},fullscreenClass:{type:String,default:"fullscreen"},fullscreen:{type:Boolean,default:!1}},data:function(){return{supportFullScreen:!1,isFullscreen:!1}},computed:{wrapperStyle:function(){return{background:this.background,"overflow-y":"auto",width:"100%",height:"100%"}}},methods:{toggle:function(e){void 0===e?n.i(r.c)()?this.exit():this.enter():e?this.enter():this.exit()},enter:function(){this.supportFullScreen&&(n.i(r.f)(this.fullScreenCallback),n.i(r.g)(this.$el))},exit:function(){this.supportFullScreen&&this.getState()&&n.i(r.d)()},getState:function(){return n.i(r.c)()},shadeClick:function(e){e.target===this.$el&&this.exit()},fullScreenCallback:function(){this.isFullscreen=n.i(r.c)(),this.isFullscreen||n.i(r.e)(this.fullScreenCallback),this.$emit("change",this.isFullscreen),this.$emit("update:fullscreen",this.isFullscreen)}},watch:{fullscreen:function(e){e!==n.i(r.c)()&&(e?this.enter():this.exit())}},created:function(){this.supportFullScreen=n.i(r.b)()}}},function(e,t){e.exports=function(e,t,n,r){var l,s=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(l=e,s=e.default);var i="function"==typeof s?s.options:s;if(t&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns),n&&(i._scopeId=n),r){var o=Object.create(i.computed||null);Object.keys(r).forEach((function(e){var t=r[e];o[e]=function(){return t}})),i.computed=o}return{esModule:l,exports:s,options:i}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.isFullscreen?[e.fullscreenClass]:[],style:e.isFullscreen?[e.wrapperStyle]:[],on:{click:function(t){e.shadeClick(t)}}},[e._t("default")],2)},staticRenderFns:[]}}])},624:function(e,t,n){var r=n(824);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(17).default)("5e9ba529",r,!1,{})},823:function(e,t,n){"use strict";var r=n(624);n.n(r).a},824:function(e,t,n){(t=n(10)(!1)).push([e.i,"\n.home-ht-disabled {\r\n    float: right;\r\n    font-weight: 100;\r\n    font-size: 12px;\r\n    margin-right: 10px;\n}\n.home-ht-small {\r\n    width: 100%;\r\n    height: 190px;\r\n    position: relative;\n}\n.home-ht-small .home-ht-mask {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 190px;\n}\n.fullscreen .home-ht-small {\r\n    height: 100%;\r\n    overflow: hidden;\n}\n.btn-monitor-fullscreen {\r\n    position: absolute;\r\n    right: 10px;\r\n    top: 10px;\r\n    width: 36px;\r\n    height: 36px;\r\n    padding: 0;\r\n    font-size: 36px;\r\n    line-height: 36px;\r\n    text-align: center;\r\n    outline: none;\n}\r\n",""]),e.exports=t}}]);