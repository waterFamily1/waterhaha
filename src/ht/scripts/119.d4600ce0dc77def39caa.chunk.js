(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{1017:function(e,t,a){"use strict";var i=a(733);a.n(i).a},1018:function(e,t,a){(t=a(10)(!1)).push([e.i,"\n.c-tree-right-item {\r\n\tmargin-top: 20px;\r\n\tpadding-bottom: 10px;\r\n\tborder-bottom: 1px dashed #f0f0f0;\n}\n.c-tree-right-item h4 {\r\n\tline-height: 30px;\n}\r\n",""]),e.exports=t},1256:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"c-tree"},[a("div",{staticClass:"c-tree-left",attrs:{id:"J_TREE_LEFT"}},[a("h3",[e._v("物料类别管理")]),e._v(" "),a("div",{staticStyle:{padding:"12px 14px","border-bottom":"1px solid #e6e6e6"}},[a("Select",{staticStyle:{width:"100%"},attrs:{placeholder:"输入物料类别以检索",clearable:"",filterable:"",remote:"","remote-method":e.onSearch,loading:e.searchLoading},on:{"on-change":e.onSearchItemClick}},e._l(e.searchItems,(function(t){return a("Option",{key:t.id,attrs:{value:JSON.stringify(t)}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),a("div",{staticStyle:{padding:"10px 0 10px 20px"}},[a("Tree",{attrs:{data:e.treeData,render:e.renderContent}})],1)]),e._v(" "),a("div",{staticClass:"c-main-border c-tree-right"},[a("div",{staticClass:"c-plain-bg-h"},[a("h3",[e._v("物料类别信息")]),e._v(" "),a("div",{staticClass:"c-btns-right"},[a("Button",{directives:[{name:"show",rawName:"v-show",value:"info"!=e.status,expression:"status != 'info'"}],attrs:{type:"primary",shape:"circle",loading:e.loading},on:{click:e.submit}},[e._v("保存")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:"info"!=e.status,expression:"status != 'info'"}],staticClass:"v-btn-back",attrs:{type:"default",shape:"circle"},on:{click:e.cancel}},[e._v("取消")])],1)]),e._v(" "),a("div",{staticClass:"padding20"},[a("Form",{ref:"materialForm",attrs:{model:e.params,rules:e.rules}},[a("div",{staticClass:"c-tree-right-item"},[a("h4",[e._v("所属组织：")]),e._v(" "),a("span",[e._v(e._s(e.params.orgName))])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"add"!=e.status,expression:"status != 'add'"}],staticClass:"c-tree-right-item"},[a("h4",[e._v("类别编码：")]),e._v(" "),a("span",[e._v(e._s(e.params.categoryNumber))])]),e._v(" "),a("div",{staticClass:"c-tree-right-item"},[a("h4",[e._v("类别名称：")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"info"==e.status,expression:"status == 'info'"}]},[e._v(e._s(e.params.categoryName))]),e._v(" "),"info"!=e.status?a("FormItem",{attrs:{prop:"categoryName"}},[a("Input",{staticStyle:{width:"400px"},model:{value:e.params.categoryName,callback:function(t){e.$set(e.params,"categoryName",t)},expression:"params.categoryName"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"c-tree-right-item"},[a("h4",[e._v("上级类别：")]),e._v(" "),a("span",[e._v(e._s(e.params.parentName))])]),e._v(" "),a("div",{staticClass:"c-tree-right-item"},[a("h4",[e._v("备注：")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"info"==e.status,expression:"status == 'info'"}]},[e._v(e._s(e.params.remark))]),e._v(" "),"info"!=e.status?a("FormItem",[a("Input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:e.params.remark,callback:function(t){e.$set(e.params,"remark",t)},expression:"params.remark"}})],1):e._e()],1)])],1)])])};i._withStripped=!0;var r=a(23),n=a(527),o=(a(107),a(11)),s=a(544),c=function(){},p={data:function(){return{treeDataRes:[],treeData:[],searchItems:[],params:{categoryName:"",categoryNumber:"",id:0,orgId:0,orgName:"",parentId:0,parentName:"",remark:""},rules:{categoryName:[{required:!0,message:"请输入类别名称",trigger:"blur"}]},status:"info",activeTreeId:"",loading:!1,searchLoading:!1}},computed:Object(r.b)({opers:function(e){return e.user.account.webOpers}}),methods:{getData:function(e){var t=this;this.$http.get(n.a.category.getTree).then((function(a){if(t.treeDataRes=a,e){t.activeTreeId=e,t.$refs.materialForm.resetFields(),t.status="info",t.syncParams(t.getItemData(e));var i=o.a.copyArray(t.treeDataRes,!0);o.a.setTreeExpand(i,e),t.treeData=o.a.transDataToTree(i)}else t.treeData=o.a.transDataToTree(a)}))},getItemData:function(e){var t;return this.treeDataRes.forEach((function(a){a.id==e&&(t=a)})),t},syncParams:function(e){this.params.categoryName=e.name,this.params.categoryNumber=e.no,this.params.id=Math.abs(e.id),this.params.orgId=e.orgId,this.params.orgName=e.orgName,this.params.parentId=e.categoryParentId,this.params.parentName=e.categoryParentName,this.params.remark=e.remark,"add"==this.status&&(this.params.id="",this.params.categoryName="",this.params.categoryNumber="",this.params.remark="",20==e.type?(this.params.parentName=e.name,this.params.parentId=Math.abs(e.id)):(this.params.orgId=e.id,this.params.orgName=e.name,this.params.parentName="无",this.params.parentId="")),"edit"==this.status&&(e.categoryParentName||(this.params.parentName="无")),this.activeTreeId=e.id},renderContent:function(e,t){var a,i=this,r=(t.root,t.node,t.data),n=this,p=e("a",{attrs:{href:"javascript:;"},class:{"c-tree-btn-add":!0},on:{click:function(){n.status="add",n.syncParams(r)}}},["新建"]),u=e("a",{attrs:{href:"javascript:;"},class:{"c-tree-btn-edit":!0},on:{click:function(){n.status="edit",n.syncParams(r)}}},["编辑"]);r.children.length&&(a="当前类别下有其他数据，确定要删除吗？");var l=o.a.treeBtnDelStyle(e,(function(){i.del(r.id,r.parentId)}),c,c,a),d=[];return s.a.authority("material-category")&&d.push(p),s.a.authority("material-category")&&20==r.type&&(d.push(u),d.push(l)),e("div",{class:{"c-tree-row":!0}},[e("span",{class:{"ivu-tree-title":!(20!=r.type),"ivu-tree-title-selected":r.id==this.activeTreeId},attrs:{title:r.name},on:{click:function(){20==r.type&&(i.$refs.materialForm.resetFields(),i.activeTreeId=r.id,i.status="info",i.syncParams(r))}}},[r.name]),e("span",{class:{"c-tree-btns":!0}},d)])},onSearch:function(e){var t=this;e&&(this.searchLoading=!0,this.$http.get(n.a.category.search,{queryName:e}).then((function(e){t.searchLoading=!1,t.searchItems=e})))},onSearchItemClick:function(e){if(e){e=JSON.parse(e),this.status="info",this.syncParams(e);var t=o.a.copyArray(this.treeDataRes,!0);o.a.setTreeExpand(t,e.id),this.treeData=o.a.transDataToTree(t),this.$refs.materialForm.resetFields(),this.activeTreeId=e.id}},submit:function(){var e=this;this.loading=!0,this.$refs.materialForm.validate((function(t){if(t){var a="post";"edit"==e.status&&(a="put"),e.$http[a](n.a.category.add,e.params).then((function(t){e.$Notice.success({title:"操作成功！"}),e.loading=!1,e.getData(-1*t.id)})).catch((function(t){e.loading=!1}))}}))},del:function(e,t){var a=this;this.$http.del(n.a.category.add,{id:Math.abs(e)}).then((function(e){a.$Notice.success({title:"删除成功！"}),a.getData(t)}))},cancel:function(){this.status="info",this.syncParams(this.getItemData(this.activeTreeId))}},mounted:function(){o.a.setTreeLeftHeight(),this.getData()}},u=(a(1017),a(1)),l=Object(u.a)(p,i,[],!1,null,null,null);l.options.__file="src/views/storage/material-category/main.vue";t.default=l.exports},527:function(e,t,a){"use strict";var i=a(22),r={getWarehouseComboList:"/inventory/api/warehouse/comboList",getManaginguser:"/inventory/api/users/managinguser",category:{getTree:"/inventory/api/materiel-category/tree",getInfo:"/inventory/api/materiel-category/materiel",add:"/inventory/api/materiel-category/materiel",edit:"/inventory/api/materiel-category/materiel",del:"/inventory/api/materiel-category/materiel",search:"/inventory/api/materiel-category/list"},inventory:{audit:"/inventory/api/store-adjustment/audited",export:i.a+"/inventory/api/store-adjustment/export",url:"/inventory/api/store-adjustment/adjusment",list:"/inventory/api/store-adjustment/list",detailList:"/inventory/api/store-adjustment/detail/list",itemList:"/inventory/api/store-adjustment/materiel/list",move:"/inventory/api/store-adjustment/move",materielSearch:"/inventory/api/stock/materiel",materielPosition:"/inventory/api/stock/position",materielDepot:"/inventory/api/stock/warehous"},takeStock:{audit:"/inventory/api/materiel-inventory/audited",export:i.a+"/inventory/api/materiel-inventory/export",import:i.a+"/inventory/api/materiel-inventory/import",url:"/inventory/api/materiel-inventory/inventory",detailList:"/inventory/api/materiel-inventory/detail/list",list:"/inventory/api/materiel-inventory/list"},storage:{comboList:"/inventory/api/warehouse/comboList"},material:{getMaterielCategoryTree:"/inventory/api/materiel-category/tree/external",getMateriel:"/inventory/api/materiels",delMateriel:"/inventory/api/materiels",exportMateriel:i.a+"/inventory/api/materiels/excel-export",addMateriel:"/inventory/api/materiel",changeMateriel:"/inventory/api/materiel",getMaterielDetail:"/inventory/api/materiel",getDistribution:"/inventory/api/materielStocks/distribution",getMaterielStockLimits:"/inventory/api/materielStockLimits",bacthAddMaterielStockLimit:"/inventory/api/materielStockLimit/batch-save",updateMaterielStockLimit:"/inventory/api/materielStockLimit",delMaterielStockLimit:"/inventory/api/materielStockLimits",getUnitList:"/inventory/api/materiel/unit",modalMateriel:"/inventory/api/materiel/external",getExcel:i.a+"/inventory/api/excel-temlate-down",importExcel:i.a+"/inventory/api/excel-import",cancelExcelData:"/inventory/api/excel-data-cancel",saveExcelData:"/inventory/api/excel-data-save"},repertory:{getWarehouses:"/inventory/api/warehouses",exportWarehouse:i.a+"/inventory/api/warehouse/excel-export",delWarehouses:"/inventory/api/warehouses",changeWarehouses:"/inventory/api/warehouse",addWarehouse:"/inventory/api/warehouse",getWarehouseDetail:"/inventory/api/warehouse",getWarehouseInfo:"/inventory/api/warehouse/getWarehouseInfo",getPositionOfWarehouse:"/inventory/api/warehousePosition/positionList",bacthAddWarehouseposition:"/inventory/api/warehouseposition/batch-save",updateWarehousePosition:"/inventory/api/warehousePosition",delWarehousePosition:"/inventory/api/warehousePositions",positionByWarehouse:"/inventory/api/warehousePosition/move",checkWarehousenameIsExist:"/inventory/api/warehouse/check-warehousename-isexist",getExcel:i.a+"/inventory/api/warehousePosition/excel-temlate-down",importExcel:i.a+"/inventory/api/warehousePosition/excel-import",cancelExcelData:"/inventory/api/warehousePosition/excel-data-cancel",saveExcelData:"/inventory/api/warehousePosition/excel-data-save"},checkin:{getInbond:"/inventory/api/inbounds",delInbond:"/inventory/api/inbounds",addInbond:"/inventory/api/inbound",getInbondDetail:"/inventory/api/inbound",getInbondRecordList:"/inventory/api/inbound/inboundDetails",getPositionComboxList:"/inventory/api/warehousePosition/positionComboxList",auditeInbound:"/inventory/api/inbound/audite",getMaterielsByWareHouseNo:"/inventory/api/materiel/getMaterielsByWareHouseNo",getMateriels:"/inventory/api/materiel/getMateriels",updateInboundDetail:"/inventory/api/inboundDetail"},checkout:{getApplicantMember:"/uaa/api/users/select",getOutbond:"/inventory/api/outbounds",delOutbond:"/inventory/api/outbounds",addOutbond:"/inventory/api/outbound",getOutbondDetail:"/inventory/api/outbound",getOutbondRecordList:"/inventory/api/outboundDetail",auditeOutbound:"/inventory/api/outbound/audite",updateOutboundDetail:"/inventory/api/outboundDetail",getstock:"/inventory/api/stock/getstock",getMaterielsOutBound:"/inventory/api/materiel/getMaterielsOutBound"},allot:{getTransfer:"/inventory/api/transfer/list",delTransfer:"/inventory/api/transfer/transfer",addTransfer:"/inventory/api/transfer/transfer",getTransferDetail:"/inventory/api/transfer/transfer",getTransferDetailList:"/inventory/api/transfer/detail/list",auditTransfer:"/inventory/api/transfer/audited",updateTransfer:"/inventory/api/transfer/transfer",getMaterielList:"/inventory/api/transfer/materiel/list",getStockPosiComboList:"/inventory/api/stock/position",getWarehousePosition:"/inventory/api/warehousePosition/move"},reporting:{getStockInfo:"/inventory/api/stock/getstock-info",exportStockInfo:i.a+"/inventory/api/stock/getstock-info-excel-export",getStockInoutbound:"/inventory/api/stock/getstock-info-inoutbound",exportStockInoutbound:i.a+"/inventory/api/stock/getstock-info-inoutbound-excel-export",getStockMove:"/inventory/api/stock/get-inventory-mobility-report",exportStockMove:i.a+"/inventory/api/stock/get-inventory-mobility-report-excel-export",getInventoryProfitLossList:"/inventory/api/materiel-inventory/inventory-report",exportInventoryProfitLoss:i.a+"/inventory/api/materiel-inventory/inventory-report-export",getInventoryNumberList:"/inventory/api/materiel-inventory/inventory-report-inventory-number"}};t.a=r},544:function(e,t,a){"use strict";var i=a(49),r={authorityAdmin:function(e){if(-1!=e.indexOf("ROLE_TENANT_ADMIN")||-1!=e.indexOf("UAA_ROLE_EDIT"))return!0},authorityEquAdmin:function(e){if(-1!=e.indexOf("ROLE_TENANT_ADMIN")||-1!=e.indexOf("EQU_EQUTYPE_EDIT"))return!0},authorityProcAdmin:function(e){if(-1!=e.indexOf("UAA_PROC_EDIT"))return!0},author0:function(e){if(-1!=e.indexOf("ROLE_TENANT_ADMIN"))return!0},authority:function(e){var t=JSON.parse(sessionStorage.getItem("__MANGO_U_")||"{}").webOpers;return!!t&&(-1!==t.indexOf(i.a[e])||-1!=t.indexOf(i.a.all))},author2:function(e){if(-1!=e.indexOf("UAA_ORG_EDIT"))return!0}};t.a=r},733:function(e,t,a){var i=a(1018);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(17).default)("2bc65f3e",i,!1,{})}}]);