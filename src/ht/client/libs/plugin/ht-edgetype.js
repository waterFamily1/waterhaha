!function(N){"use strict";var T="ht",H=N[T],g=Math,$=g.max,w=g.min,k=g.abs,L=g.atan2,C=(g.cos,g.sin,g.ceil),V=H.Default,F=V.getInternal(),M=H.List,a=F.Mat,j=F.getNodeRect,R=F.intersectionLineRect,h=V.getDistance,U=V.setEdgeType,S="left",d="right",r="top",p="bottom",I="edge.type",X="edge.gap",_="edge.center",u="edge.extend",Y=function(C,c){return j(C,c).width},v=function(S,i){return j(S,i).height},J=function(m,N){return F.getEdgeAgentPosition(m,N._40I,N.s("edge.source.position"),N.s("edge.source.offset.x"),N.s("edge.source.offset.y"),N.s("edge.source.anchor.x"),N.s("edge.source.anchor.y"))},e=function(r,V){return F.getEdgeAgentPosition(r,V._41I,V.s("edge.target.position"),V.s("edge.target.offset.x"),V.s("edge.target.offset.y"),V.s("edge.target.anchor.x"),V.s("edge.target.anchor.y"))},o=function(Z,p){var x=Z.s(I),Q=Z.getEdgeGroup();if(Q){var $=0;if(Q.eachSiblingEdge(function(K){p.isVisible(K)&&K.s(I)==x&&$++}),$>1)return Z.s(X)*($-1)/2}return 0},O=function(v,U){var $=v.s(I),T=v.isLooped();if(!v.getEdgeGroup())return T?v.s(X):0;var p,K=0,n=0,f=0;return v.getEdgeGroup().getSiblings().each(function(M){M.each(function(b){if(b._40I===v._40I&&b.s(I)==$&&U.isVisible(b)){var x=b.s(X);p?(n+=f/2+x/2,f=x):(p=b,f=x),b===v&&(K=n)}})}),T?n-K+f:K-n/2},s=function(n,W){var h=W.s("edge.corner.radius");return V.toRoundedCorner(n,h)};F.addMethod(H.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),U("boundary",function(K,z,p,X){X||(z=-z);var n,o=J(p,K),s=e(p,K),i=j(p,K._40I),Y=j(p,K._41I),C=new a(L(s.y-o.y,s.x-o.x)),T=h(o,s),w=o.x,k=o.y;return n=C.tf(0,z),o={x:n.x+w,y:n.y+k},n=C.tf(T,z),s={x:n.x+w,y:n.y+k},n=R(o,s,i),n&&(o={x:n[0],y:n[1]}),n=R(o,s,Y),n&&(s={x:n[0],y:n[1]}),{points:new M([o,s])}}),U("ripple",function(T,S,V,F){F||(S=-S);var f=J(V,T),z=e(V,T),g=h(f,z),c=w(T.s("edge.offset"),g/2),X=T.s("edge.ripple.size"),d=T.s("edge.ripple.length"),l=T.s("edge.ripple.both"),W=T.s(_),K=T.s("edge.ripple.elevation"),s=new M,u=T.s("edge.ripple.straight")?null:new M,$=new a(L(z.y-f.y,z.x-f.x));F||(K=-K),g-=2*c,d>0&&(X=C(g/d));var B=g/X;u&&u.add(1);for(var P=0;X>P;P++)u&&u.add(3),0===P?s.add({x:c+B*P,y:W?0:S}):s.add({x:c+B*P,y:S}),s.add({x:c+B*P+B/2,y:K+S}),l&&(K=-K);for(s.add({x:c+g,y:W?0:S}),P=0;P<s.size();P++){var b=$.tf(s.get(P));b.x+=f.x,b.y+=f.y,s.set(P,b)}return{points:s,segments:u}}),U("h.v",function(D,N,K){N=O(D,K);var P=new M,I=D.s(_),Q=J(K,D),A=Q.x,S=Q.y,V=e(K,D),R=V.x,Z=V.y,H=0,d=0,u=R-A,i=Z-S;return I||(H=Y(K,D._40I)/2,d=v(K,D._41I)/2),u>=0&&0>=i?(P.add({x:A+H,y:S+N}),P.add({x:R+N,y:S+N}),P.add({x:R+N,y:Z+d})):0>=u&&i>=0?(P.add({x:A-H,y:S+N}),P.add({x:R+N,y:S+N}),P.add({x:R+N,y:Z-d})):u>=0&&i>=0?(P.add({x:A+H,y:S+N}),P.add({x:R-N,y:S+N}),P.add({x:R-N,y:Z-d})):(P.add({x:A-H,y:S+N}),P.add({x:R-N,y:S+N}),P.add({x:R-N,y:Z+d})),s(P,D)}),U("v.h",function(d,m,W){m=O(d,W);var L=new M,h=d.s(_),A=J(W,d),g=A.x,c=A.y,l=e(W,d),p=l.x,I=l.y,D=0,t=0,N=p-g,k=I-c;return h||(D=Y(W,d._41I)/2,t=v(W,d._40I)/2),N>=0&&0>=k?(L.add({x:g+m,y:c-t}),L.add({x:g+m,y:I+m}),L.add({x:p-D,y:I+m})):0>=N&&k>=0?(L.add({x:g+m,y:c+t}),L.add({x:g+m,y:I+m}),L.add({x:p+D,y:I+m})):N>=0&&k>=0?(L.add({x:g-m,y:c+t}),L.add({x:g-m,y:I+m}),L.add({x:p-D,y:I+m})):(L.add({x:g-m,y:c-t}),L.add({x:g-m,y:I+m}),L.add({x:p+D,y:I+m})),s(L,d)}),U("ortho",function(G,K,Q){var t=new M,b=G.s(_),W=G.s("edge.ortho"),T=G._40I,r=G._41I,w=J(Q,G),I=w.x,$=w.y,g=e(Q,G),l=g.x,C=g.y,u=l-I,P=C-$,d=b?0:Y(Q,T)/2,D=b?0:v(Q,T)/2,f=b?0:Y(Q,r)/2,O=b?0:v(Q,r)/2,N=(u-(d+f)*(u>0?1:-1))*W,m=(P-(D+O)*(P>0?1:-1))*W;return k(u)<k(P)?u>=0&&0>=P?(t.add({x:I+K,y:$-D}),t.add({x:I+K,y:$+m+K-D}),t.add({x:l+K,y:$+m+K-D}),t.add({x:l+K,y:C+O})):0>=u&&P>=0?(t.add({x:I+K,y:$+D}),t.add({x:I+K,y:$+m+K+D}),t.add({x:l+K,y:$+m+K+D}),t.add({x:l+K,y:C-O})):u>=0&&P>=0?(t.add({x:I+K,y:$+D}),t.add({x:I+K,y:$+m-K+D}),t.add({x:l+K,y:$+m-K+D}),t.add({x:l+K,y:C-O})):(t.add({x:I+K,y:$-D}),t.add({x:I+K,y:$+m-K-D}),t.add({x:l+K,y:$+m-K-D}),t.add({x:l+K,y:C+O})):u>=0&&0>=P?(t.add({x:I+d,y:$+K}),t.add({x:I+N+K+d,y:$+K}),t.add({x:I+N+K+d,y:C+K}),t.add({x:l-f,y:C+K})):0>=u&&P>=0?(t.add({x:I-d,y:$+K}),t.add({x:I+N+K-d,y:$+K}),t.add({x:I+N+K-d,y:C+K}),t.add({x:l+f,y:C+K})):u>=0&&P>=0?(t.add({x:I+d,y:$+K}),t.add({x:I+N-K+d,y:$+K}),t.add({x:I+N-K+d,y:C+K}),t.add({x:l-f,y:C+K})):(t.add({x:I-d,y:$+K}),t.add({x:I+N-K-d,y:$+K}),t.add({x:I+N-K-d,y:C+K}),t.add({x:l+f,y:C+K})),s(t,G)}),U("flex",function(R,L,m){var V=new M,P=R.s("edge.flex")+o(R,m),X=R.s(_),p=R._40I,N=R._41I,f=J(m,R),h=f.x,n=f.y,C=e(m,R),i=C.x,Q=C.y,q=i-h,B=Q-n,F=X?0:Y(m,p)/2,r=X?0:v(m,p)/2,x=X?0:Y(m,N)/2,Z=X?0:v(m,N)/2,t=q>0?P:-P,I=B>0?P:-P;return k(q)<k(B)?q>=0&&0>=B?(V.add({x:h+L,y:n-r}),V.add({x:h+L,y:n+I+L-r}),V.add({x:i+L,y:Q-I+L+Z}),V.add({x:i+L,y:Q+Z})):0>=q&&B>=0?(V.add({x:h+L,y:n+r}),V.add({x:h+L,y:n+I+L+r}),V.add({x:i+L,y:Q-I+L-Z}),V.add({x:i+L,y:Q-Z})):q>=0&&B>=0?(V.add({x:h+L,y:n+r}),V.add({x:h+L,y:n+I-L+r}),V.add({x:i+L,y:Q-I-L-Z}),V.add({x:i+L,y:Q-Z})):(V.add({x:h+L,y:n-r}),V.add({x:h+L,y:n+I-L-r}),V.add({x:i+L,y:Q-I-L+Z}),V.add({x:i+L,y:Q+Z})):q>=0&&0>=B?(V.add({x:h+F,y:n+L}),V.add({x:h+t+L+F,y:n+L}),V.add({x:i-t+L-x,y:Q+L}),V.add({x:i-x,y:Q+L})):0>=q&&B>=0?(V.add({x:h-F,y:n+L}),V.add({x:h+t+L-F,y:n+L}),V.add({x:i-t+L+x,y:Q+L}),V.add({x:i+x,y:Q+L})):q>=0&&B>=0?(V.add({x:h+F,y:n+L}),V.add({x:h+t-L+F,y:n+L}),V.add({x:i-t-L-x,y:Q+L}),V.add({x:i-x,y:Q+L})):(V.add({x:h-F,y:n+L}),V.add({x:h+t-L-F,y:n+L}),V.add({x:i-t-L+x,y:Q+L}),V.add({x:i+x,y:Q+L})),s(V,R)}),U("extend.east",function(q,Z,K){var G=new M,B=q.s(u)+o(q,K),I=q.s(_),S=J(K,q),k=S.x+(I?0:Y(K,q._40I)/2),y=S.y,f=e(K,q),z=f.x+(I?0:Y(K,q._41I)/2),H=f.y,b=$(k,z)+B;return y>H?(G.add({x:k,y:y+Z}),G.add({x:b+Z,y:y+Z}),G.add({x:b+Z,y:H-Z}),G.add({x:z,y:H-Z})):(G.add({x:k,y:y-Z}),G.add({x:b+Z,y:y-Z}),G.add({x:b+Z,y:H+Z}),G.add({x:z,y:H+Z})),s(G,q)}),U("extend.west",function(H,X,x){var B=new M,c=H.s(u)+o(H,x),v=H.s(_),V=J(x,H),N=V.x-(v?0:Y(x,H._40I)/2),S=V.y,L=e(x,H),i=L.x-(v?0:Y(x,H._41I)/2),q=L.y,t=w(N,i)-c;return S>q?(B.add({x:N,y:S+X}),B.add({x:t-X,y:S+X}),B.add({x:t-X,y:q-X}),B.add({x:i,y:q-X})):(B.add({x:N,y:S-X}),B.add({x:t-X,y:S-X}),B.add({x:t-X,y:q+X}),B.add({x:i,y:q+X})),s(B,H)}),U("extend.north",function(F,f,j){var X=new M,q=F.s(u)+o(F,j),z=F.s(_),V=J(j,F),T=V.x,c=V.y-(z?0:v(j,F._40I)/2),P=e(j,F),N=P.x,U=P.y-(z?0:v(j,F._41I)/2),B=w(c,U)-q;return T>N?(X.add({y:c,x:T+f}),X.add({y:B-f,x:T+f}),X.add({y:B-f,x:N-f}),X.add({y:U,x:N-f})):(X.add({y:c,x:T-f}),X.add({y:B-f,x:T-f}),X.add({y:B-f,x:N+f}),X.add({y:U,x:N+f})),s(X,F)}),U("extend.south",function(D,K,f){var G=new M,E=D.s(u)+o(D,f),W=D.s(_),t=J(f,D),r=t.x,n=t.y+(W?0:v(f,D._40I)/2),c=e(f,D),T=c.x,Y=c.y+(W?0:v(f,D._41I)/2),p=$(n,Y)+E;return r>T?(G.add({y:n,x:r+K}),G.add({y:p+K,x:r+K}),G.add({y:p+K,x:T-K}),G.add({y:Y,x:T-K})):(G.add({y:n,x:r-K}),G.add({y:p+K,x:r-K}),G.add({y:p+K,x:T+K}),G.add({y:Y,x:T+K})),s(G,D)});var i=function(h,J,P,O,t){if(O.sort(function(U,C){var o=U.getSourceAgent()===J?U.getTargetAgent():U.getSourceAgent(),j=C.getSourceAgent()===J?C.getTargetAgent():C.getSourceAgent(),w=o.p(),p=j.p();if(P===S||P===d){if(w.y>p.y)return 1;if(w.y<p.y)return-1}else{if(w.x>p.x)return 1;if(w.x<p.x)return-1}return V.sortFunc(U.getId(),C.getId())}),t){for(var G,j,s,N=h.getSourceAgent(),F=h.getTargetAgent(),x=0;x<O.size();x++){var m=O.get(x);m.getSourceAgent()===N&&m.getTargetAgent()===F||m.getTargetAgent()===N&&m.getSourceAgent()===F?(j||(j=new M),j.add(m,0)):j?(s||(s=new M),s.add(m)):(G||(G=new M),G.add(m))}O.clear(),G&&O.addAll(G),j&&O.addAll(j),s&&O.addAll(s)}var I=O.indexOf(h),T=O.size(),L=h.s(X);return{side:P,index:I,size:T,offset:-L*(T-1)/2+L*I}},B=function(o,C,B,n,L){var G=C.s(I);return i(C,B,n,B.getAgentEdges().toList(function(X){return o.isVisible(X)&&X.s(I)===G}),L)},l=function(C,U){var c=C.getSourceAgent()===U?C.getTargetAgent():C.getSourceAgent(),F=U.p(),J=c.p(),o=J.x-F.x,b=J.y-F.y;return o>0&&k(b)<=o?d:0>o&&k(b)<=-o?S:b>0&&k(o)<=b?p:r},W=function(a,t,M){var C=t.s(I),b=l(t,M);return i(t,M,b,M.getAgentEdges().toList(function(F){return a.isVisible(F)&&F.s(I)===C&&l(F,M)===b}))},A=function(R,e){var V=R.getSourceAgent()===e,T=V?R.getTargetAgent():R.getSourceAgent(),D=e.p(),k=T.p();return V?D.y>k.y?r:p:D.x<k.x?d:S},P=function(e,x,v){var N=x.s(I),j=A(x,v);return i(x,v,j,v.getAgentEdges().toList(function(l){return e.isVisible(l)&&l.s(I)===N&&A(l,v)===j}),j===d||j===p)},t=function(g,c){var V=g.getSourceAgent()===c,w=V?g.getTargetAgent():g.getSourceAgent(),E=c.p(),e=w.p();return V?E.x<e.x?d:S:E.y>e.y?r:p},c=function(k,T,w){var h=T.s(I),S=t(T,w);return i(T,w,S,w.getAgentEdges().toList(function(Z){return k.isVisible(Z)&&Z.s(I)===h&&t(Z,w)===S}),S===d||S===p)},q=function(c,k,a){var e=c.getSourceAgent(),E=c.getTargetAgent(),Z=e.getId()>E.getId(),q=Z?E:e,O=Z?e:E,j=q.p(),H=O.p(),D=a(k,c,q),L=a(k,c,O),x=c.s(_),U=x?0:Y(k,q)/2,g=x?0:Y(k,O)/2,t=x?0:v(k,q)/2,m=x?0:v(k,O)/2,W=D.offset,f=L.offset,n=D.side,T=L.side,N=new M;return n===r?(N.add({x:j.x+W,y:j.y-t}),N.add({x:j.x+W,y:H.y+f}),T===S?N.add({x:H.x-g,y:H.y+f}):N.add({x:H.x+g,y:H.y+f})):n===p?(N.add({x:j.x+W,y:j.y+t}),N.add({x:j.x+W,y:H.y+f}),T===S?N.add({x:H.x-g,y:H.y+f}):N.add({x:H.x+g,y:H.y+f})):n===S?(N.add({x:j.x-U,y:j.y+W}),N.add({x:H.x+f,y:j.y+W}),T===p?N.add({x:H.x+f,y:H.y+m}):N.add({x:H.x+f,y:H.y-m})):n===d&&(N.add({x:j.x+U,y:j.y+W}),N.add({x:H.x+f,y:j.y+W}),T===p?N.add({x:H.x+f,y:H.y+m}):N.add({x:H.x+f,y:H.y-m})),Z&&N.reverse(),s(N,c)};U("ortho2",function(P,I,b){var i,R,A=P.s(_),G=P.s("edge.ortho"),k=P.getSourceAgent(),L=P.getTargetAgent(),Q=k.getId()>L.getId(),m=Q?L:k,e=Q?k:L,J=m.p(),n=e.p(),D=W(b,P,m),f=W(b,P,e),j=A?0:Y(b,m)/2,T=A?0:v(b,m)/2,V=A?0:Y(b,e)/2,H=A?0:v(b,e)/2,X=new M,l=D.offset,o=f.offset,O=D.side;return O===d?(i=n.y>J.y?-l:l,R=J.x+j+(n.x-V-J.x-j)*G,X.add({x:J.x+j,y:J.y+l}),X.add({x:R+i,y:J.y+l}),X.add({x:R+i,y:n.y+o}),X.add({x:n.x-V,y:n.y+o})):O===S?(i=n.y>J.y?-l:l,R=J.x-j-(J.x-j-n.x-V)*G,X.add({x:J.x-j,y:J.y+l}),X.add({x:R-i,y:J.y+l}),X.add({x:R-i,y:n.y+o}),X.add({x:n.x+V,y:n.y+o})):O===p?(i=n.x>J.x?-l:l,R=J.y+T+(n.y-H-J.y-T)*G,X.add({x:J.x+l,y:J.y+T}),X.add({x:J.x+l,y:R+i}),X.add({x:n.x+o,y:R+i}),X.add({x:n.x+o,y:n.y-H})):O===r&&(i=n.x>J.x?-l:l,R=J.y-T-(J.y-T-n.y-H)*G,X.add({x:J.x+l,y:J.y-T}),X.add({x:J.x+l,y:R-i}),X.add({x:n.x+o,y:R-i}),X.add({x:n.x+o,y:n.y+H})),Q&&X.reverse(),s(X,P)},!0),U("flex2",function(L,P,j){var N,O=L.getSourceAgent(),u=L.getTargetAgent(),e=O.getId()>u.getId(),G=e?u:O,V=e?O:u,o=G.p(),l=V.p(),h=W(j,L,G),Z=W(j,L,V),B=L.s(_),w=L.s("edge.flex")+(h.size-1)/2*L.s(X),i=B?0:Y(j,G)/2,b=B?0:v(j,G)/2,A=B?0:Y(j,V)/2,R=B?0:v(j,V)/2,m=new M,a=h.offset,E=Z.offset,K=h.side;return K===d?(N=l.y>o.y?-a:a,m.add({x:o.x+i,y:o.y+a}),m.add({x:o.x+i+w+N,y:o.y+a}),m.add({x:l.x-A-w+N,y:l.y+E}),m.add({x:l.x-A,y:l.y+E})):K===S?(N=l.y>o.y?-a:a,m.add({x:o.x-i,y:o.y+a}),m.add({x:o.x-i-w-N,y:o.y+a}),m.add({x:l.x+A+w-N,y:l.y+E}),m.add({x:l.x+A,y:l.y+E})):K===p?(N=l.x>o.x?-a:a,m.add({x:o.x+a,y:o.y+b}),m.add({x:o.x+a,y:o.y+b+w+N}),m.add({x:l.x+E,y:l.y-R-w+N}),m.add({x:l.x+E,y:l.y-R})):K===r&&(N=l.x>o.x?-a:a,m.add({x:o.x+a,y:o.y-b}),m.add({x:o.x+a,y:o.y-b-w-N}),m.add({x:l.x+E,y:l.y+R+w-N}),m.add({x:l.x+E,y:l.y+R})),e&&m.reverse(),s(m,L)},!0),U("extend.north2",function(C,h,l){var U=C.getSourceAgent(),e=C.getTargetAgent(),I=U.getId()>e.getId(),F=I?e:U,o=I?U:e,R=F.p(),W=o.p(),K=B(l,C,F,r),A=B(l,C,o,r,!0),D=C.s(_),Q=D?0:v(l,F)/2,k=D?0:v(l,o)/2,q=K.offset,c=A.offset,d=C.s(u)+(K.size-1)/2*C.s(X),$=w(R.y-Q,W.y-k)-d+(R.x<W.x?q:-q),t=new M;return t.add({x:R.x+q,y:R.y-Q}),t.add({x:R.x+q,y:$}),t.add({x:W.x+c,y:$}),t.add({x:W.x+c,y:W.y-k}),I&&t.reverse(),s(t,C)},!0),U("extend.south2",function(F,T,D){var R=F.getSourceAgent(),t=F.getTargetAgent(),V=R.getId()>t.getId(),h=V?t:R,z=V?R:t,o=h.p(),Y=z.p(),k=B(D,F,h,p),r=B(D,F,z,p,!0),P=F.s(_),a=P?0:v(D,h)/2,Q=P?0:v(D,z)/2,O=k.offset,j=r.offset,l=F.s(u)+(k.size-1)/2*F.s(X),K=$(o.y+a,Y.y+Q)+l+(o.x>Y.x?O:-O),d=new M;return d.add({x:o.x+O,y:o.y+a}),d.add({x:o.x+O,y:K}),d.add({x:Y.x+j,y:K}),d.add({x:Y.x+j,y:Y.y+Q}),V&&d.reverse(),s(d,F)},!0),U("extend.west2",function(O,N,F){var f=O.getSourceAgent(),m=O.getTargetAgent(),E=f.getId()>m.getId(),l=E?m:f,U=E?f:m,q=l.p(),A=U.p(),z=B(F,O,l,r),Q=B(F,O,U,r,!0),h=O.s(_),L=h?0:Y(F,l)/2,P=h?0:Y(F,U)/2,y=z.offset,C=Q.offset,t=O.s(u)+(z.size-1)/2*O.s(X),k=w(q.x-L,A.x-P)-t+(q.y<A.y?y:-y),o=new M;return o.add({x:q.x-L,y:q.y+y}),o.add({x:k,y:q.y+y}),o.add({x:k,y:A.y+C}),o.add({x:A.x-P,y:A.y+C}),E&&o.reverse(),s(o,O)},!0),U("extend.east2",function(L,l,H){var V=L.getSourceAgent(),E=L.getTargetAgent(),K=V.getId()>E.getId(),k=K?E:V,h=K?V:E,C=k.p(),W=h.p(),x=B(H,L,k,r),O=B(H,L,h,r,!0),I=L.s(_),g=I?0:Y(H,k)/2,b=I?0:Y(H,h)/2,d=x.offset,m=O.offset,t=L.s(u)+(x.size-1)/2*L.s(X),J=$(C.x+g,W.x+b)+t+(C.y>W.y?d:-d),j=new M;return j.add({x:C.x+g,y:C.y+d}),j.add({x:J,y:C.y+d}),j.add({x:J,y:W.y+m}),j.add({x:W.x+b,y:W.y+m}),K&&j.reverse(),s(j,L)},!0),U("v.h2",function(L,Q,J){return q(L,J,P)},!0),U("h.v2",function(S,B,j){return q(S,j,c)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);