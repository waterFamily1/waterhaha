!function(N,H){"use strict";var z="ht",f=z+".graph.",T=N[z],s=T.graph,S=T.Default,D=T.Color,X=null,F="px",U=S.getInternal(),A=U.getPinchDist,Y=S.preventDefault,j=S.getTouchCount,k=S.startDragging;U.addMethod(S,{overviewBackground:D.widgetBackground,overviewMaskBackground:D.transparent,overviewContentBorderColor:D.widgetBorder,overviewContentBackground:D.background},!0),s.Overview=function(V){var J=this,x=J._view=U.createView(1,J);J._canvas=U.createCanvas(x),x.style.background=S.overviewBackground,x.appendChild(J._mask=U.createDiv()),J.setGraphView(V),J.addListeners()},S.def(f+"Overview",H,{ms_v:1,ms_fire:1,ms_listener:1,ms_ac:["maskBackground","contentBorderColor","contentBackground","autoUpdate","fixToRect"],_autoUpdate:!0,_fixToRect:!1,_rate:1,_scrollRect:{x:0,y:0,width:0,height:0},_maskBackground:S.overviewMaskBackground,_contentBorderColor:S.overviewContentBorderColor,_contentBackground:S.overviewContentBackground,getGraphView:function(){return this.gv},setGraphView:function(d){var m=this;if(m.gv!==d){var b=m.gv;m.gv=d,b&&(b.removeViewListener(m.handleGraphViewChanged,m),b.ump(m.handleGraphViewPropertyChanged,m)),d&&(d.addViewListener(m.handleGraphViewChanged,m),d.mp(m.handleGraphViewPropertyChanged,m)),m.fp("graphView",b,d),m.redraw()}},getCanvas:function(){return this._canvas},getMask:function(){return this._mask},dispose:function(){this.setGraphView(null)},onPropertyChanged:function(){this.redraw()},handleGraphViewChanged:function(Y){this._autoUpdate&&"validate"===Y.kind&&this.redraw()},handleGraphViewPropertyChanged:function(i){("canvasBackground"===i.property||this.getFixToRect()&&("zoom"===i.property||"translateX"===i.property||"translateY"===i.property))&&this.redraw()},redraw:function(){var Z=this;Z._redraw||(Z._redraw=1,Z.iv(50))},validateImpl:function(){var x=this,s=x.gv,n=x._canvas,c=x.getWidth(),q=x.getHeight(),f=x._redraw;if(s){var k=x._mask,L=k.style,z=s.getViewRect(),I=this.getFixToRect(),j=I?"boolean"==typeof I?s.getContentRect():I:s.getScrollRect(),a=j.x,Y=j.y,N=j.width,D=j.height,M=x._rate=Math.max(N/c,D/q),i=x._x=(c-N/M)/2,K=x._y=(q-D/M)/2;if(0!==z.width&&0!==z.height||x.hasRetry||(S.callLater(x.iv,x,X),x.hasRetry=!0),(c!==n.clientWidth||q!==n.clientHeight)&&(U.setCanvas(n,c,q),f=1),U.isSameRect(j,x._scrollRect)||(x._scrollRect=j,f=1),f){var V=U.initContext(n),R=s.getDataModel().getBackground()||x._contentBackground,J=x._contentBorderColor,g=S.devicePixelRatio;V.clearRect(0,0,c*g,q*g),R&&U.fillRect(V,i*g,K*g,N/M*g,D/M*g,R),U.translateAndScale(V,-a/M+i,-Y/M+K,1/M),s._42(V),V.restore(),J&&U.drawBorder(V,J,i*g,K*g,N/M*g,D/M*g)}L.background=x._maskBackground,L.left=i+(z.x-a)/M+F,L.top=K+(z.y-Y)/M+F,L.width=z.width/M+F,L.height=z.height/M+F,x._redraw=null}else if(f){var V=U.initContext(n);V.clearRect(0,0,c,q),V.restore(),x._redraw=null}},center:function(P){var R=this,Q=R.gv;if(Q){var N=Q._zoom,s=Q._29I,j=R._rate,L=R._scrollRect,k=S.getLogicalPoint(P,R._canvas),O=L.x+(k.x-R._x)*j,e=L.y+(k.y-R._y)*j;Q.setTranslate((s.width/2-O)*N,(s.height/2-e)*N)}},handle_mousedown:function(X){this.handle_touchstart(X)},handleWindowMouseUp:function(I){this.handleWindowTouchEnd(I)},handleWindowMouseMove:function(u){this.handleWindowTouchMove(u)},handle_mousewheel:function(_){this.handleScroll(_,_.wheelDelta)},handle_DOMMouseScroll:function(T){2===T.axis&&this.handleScroll(T,-T.detail)},handleScroll:function(l,P){if(Y(l),this.gv){var A=this.gv;P>0?A.scrollZoomIn():0>P&&A.scrollZoomOut()}},handle_touchstart:function(p){if(Y(p),this.gv&&S.isLeftButton(p)){var L=this,i=L.gv,_=j(p);1===_?S.isDoubleClick(p)&&i.isResettable()?i.reset():(L.center(p),k(L,p)):2===_&&(L._dist=A(p),k(L,p))}},handleWindowTouchEnd:function(){delete this._dist},handleWindowTouchMove:function(n){if(this.gv){var Y=this,h=Y._dist,l=j(n);1===l?Y.center(n):2===l&&h!=X&&Y.gv.handlePinch(X,A(n),h)}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);