!function(A,D){"use strict";var I="ht",X=A[I],r="position",z="absolute",f="px",L="left",u="top",U="innerHTML",K="className",o="width",M="height",J="0",Y="display",R="none",l="visibility",w="user-select",c="margin",V="padding",T=null,E=X.Color,Z=X.Default,B=Z.getInternal(),O=A.setTimeout,v=A.setInterval,b=A.clearTimeout,q=A.clearInterval,e=A.parseInt,N=Z.isLeftButton,t=Z.isDragging,W=Z.startDragging,S=Z.getDistance,m=Z.isTouchable,Q=E.widgetIconHighlight,C=E.widgetIconBorder,a=E.widgetIconGradient,P=function(){return document},G=function(B,Q){return B.querySelectorAll(Q)},$=function(W){var H=P().createElement(W);return"ul"===W&&(j(H,r,"relative"),j(H,c,J),j(H,V,J),j(H,"list-style",R),j(H,"box-sizing","border-box"),j(H,"-moz-box-sizing","border-box"),j(H,Y,"inline-block"),j(H,"vertical-align","text-bottom"),j(H,"border","1px solid "+Z.contextMenuBorderColor),j(H,"box-shadow","0 0 16px 1px "+Z.contextMenuShadowColor),j(H,"overflow","hidden"),Z.contextMenuBorderRadius&&j(H,"border-radius",Z.contextMenuBorderRadius+f)),H},y=function(Z){var E=Z.touches[0];return E?E:Z.changedTouches[0]},F=function(){return $("div")},n=function(){return $("canvas")},j=function(V,x,q){V.style.setProperty(x,q,T)},s=function(r,I,E){Z.def(X.widget[r],I,E)},p=function(o,Y){o.appendChild(Y)},H=function(j,J){j.removeChild(J)},g=Z.eventListenerOptionsFalse,i=(Z.eventListenerOptionsTrue,function(D,U,_,v){D.addEventListener(U,_,v?g:g)}),h=function(W,J,j,N){W.removeEventListener(J,j,N?g:g)};B.addMethod(Z,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:C},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:Q}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:C},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:Q,gradient:Z.imageGradient,gradientColor:a,background:Q}]},contextMenuLabelFont:(m?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var x=function(H){var M=this,L=H._view;if(M.$11b=H,M.addListeners(),i(L,"contextmenu",function(O){O.preventDefault()}),!m){var d=M.$37b=M.$36b.bind(M);i(L,"mouseover",d),i(L,"mouseout",d)}};Z.def(x,D,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(b){if(Z.preventDefault(b),N(b)){for(var Y=this,M=Y.$11b,c=Y.getView(),n=c.children,C=0;C<n.length;C++){var H=n[C],e=H.$24b,r=H.$25b;if(e&&e.contains(b.target))return M.scrollUp(H),Y.$28b=O(function(){Y.$29b=v(function(){M.scrollUp(H)},100)},500),W(Y,b),void 0;if(r&&r.contains(b.target))return M.scrollDown(H),Y.$28b=O(function(){Y.$29b=v(function(){M.scrollDown(H)},100)},500),W(Y,b),void 0}m&&(b=y(b)),Y.$30b={x:b.pageX,y:b.pageY}}},handle_mousedown:function(J){this.handle_touchstart(J)},handle_touchend:function(Z){if(N(Z)){var h=this,W=h.$30b,d=m?{x:y(Z).pageX,y:y(Z).pageY}:{x:Z.pageX,y:Z.pageY};if(!W||S(W,d)>1)return delete h.$30b,void 0;for(var x=h.getView(),k=h.$11b,l=Z.target,f=T,r=T,c=k._items,Y=x.$26b,o=0;o<Y.length;o++)if(r=Y[o],r.contains(l)){f=r.getAttribute("data-id");break}if(f&&c){var A=k.$17b(c,function(p){return p._id===f});if(A){var L=!1;A.disabled instanceof Function?L=A.disabled.call(k,A):A.disabled===!0&&(L=!0),L||(A.items?m&&h.$36b(r,!0):k.$1b(A,Z))}}delete h.$30b}},$36b:function(P,B){if(!t()){var c,S=this,W=S.$11b,D=S.getView(),E=W.$20b||D.children[0],k=W.$19b,z=D.$26b,Y=D.children,d=P.target,b=D.getBoundingClientRect(),M=Z.getWindowInfo(),y=M.width,s=M.height,C=function(o){for(var S=0;S<Y.length;S++){var c=Y[S],Q=new RegExp(o+"$"),x=c[K];if(x&&(Q.test(x)||x.indexOf(o+" ")>=0))return c}},G=function(N){for(var v=0;v<z.length;v++){var r=z[v],J=new RegExp(N+"$"),o=r[K];if(o&&(J.test(o)||o.indexOf(N+" ")>=0))return r}},v=function(M){var r=G("menu-item"+M.$45b),v=r.getBoundingClientRect(),F=v.top-b.top,V=v.left-b.left;j(M,u,F+f),j(M,L,V+v.width+f);var C=M.getBoundingClientRect(),Y=C.top,w=C.left,e=C.height,P=C.width,A=Y+e+2,$=w+P+2;A>s&&j(M,u,F+s-A+f),$>y&&j(M,L,V-P+f)};if(B)c=P;else{if("mouseover"===P.type){for(var e=0;e<z.length;e++){var A=z[e];if(A.contains(d)){c=A;break}}if(!c&&k){var x=k.parentNode,q=C("submenu"+k.getAttribute("data-id"));(q&&q.contains(d)||x&&x.contains(d))&&(c=k)}}else if("mouseout"===P.type){for(var V=!1,m=P.relatedTarget,e=0;e<Y.length;e++){var h=Y[e];if("hidden"!==h.style.visibility&&h.contains(m)){V=!0;break}}if(V)return}!c&&E&&(c=G("menu-item"+(E.$45b||"NaN")))}if(c!=k){if(k)for(var r=k;r;){if(r[K]=r[K].replace(" menu-item-hover",""),r[K].indexOf("disabled")<0){var R=W.getItemByProperty("_id",r.getAttribute("data-id"));null!=R.background?R.background instanceof Function?j(r,"background-color",R.background.call(W,R)):j(r,"background-color",R.background):j(r,"background-color",Z.contextMenuBackground),j(r,"color",Z.contextMenuLabelColor)}var H=C("submenu"+r.getAttribute("data-id"));H&&j(H,l,"hidden");var g=r.parentNode;r=G("menu-item"+(g.$45b||"NaN"))}if(c){for(var I=c,F=[];I;){I[K]+=" menu-item-hover",I[K].indexOf("disabled")<0&&(j(I,"background-color",Z.contextMenuHoverBackground),j(I,"color",Z.contextMenuHoverLabelColor));var U=C("submenu"+I.getAttribute("data-id"));U&&(j(U,l,"visible"),F.push(U));var g=I.parentNode;I=G("menu-item"+(g.$45b||"NaN"))}F.reverse(),F.forEach(function(Y){v(Y)})}}W.$19b=c,W.$20b=c?c.parentNode:D.children[0]}},handle_mouseup:function(H){this.handle_touchend(H)},handleWindowTouchEnd:function(){var k=this;k.$28b!=T&&(b(k.$28b),delete k.$28b),k.$29b!=T&&(q(k.$29b),delete k.$29b),delete k.$34b,delete k.$30b,delete k.$35b},handleWindowMouseUp:function(z){this.handleWindowTouchEnd(z)},handle_mousemove:function(q){this.handle_touchmove(q)},handle_touchmove:function(O){if(!t()&&N(O)){for(var l=this,j=l.getView().children,D=T,r=0;r<j.length;r++){var e=j[r];if(e.contains(O.target)){D=e;break}}var f=l.$30b,V=m?{x:y(O).pageX,y:y(O).pageY}:{x:O.pageX,y:O.pageY};D&&f&&S(f,V)>2&&(W(l,O),l.$34b=D,l.$35b=D.$18b)}},handleWindowTouchMove:function(U){U.preventDefault();var h=this,E=h.$11b,n=h.$34b,P=h.$35b,J=h.$30b;if(J&&n){var N=m?{x:y(U).pageX,y:y(U).pageY}:{x:U.pageX,y:U.pageY},k=N.y-J.y;k>0?E.scrollUp(n,n.$18b-(P-k)):E.scrollDown(n,P-k-n.$18b)}},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},$10b:function(f,A){f.preventDefault();for(var Y=this,I=Y.getView().children,h=T,O=0;O<I.length;O++){var p=I[O];if(p.contains(f.target)){h=p;break}}if(h){var m=this.$11b,_=m.getRowHeight();Math.abs(A)>.05&&(A>0?m.scrollUp(h,A*_):0>A&&m.scrollDown(h,-A*_))}},handle_mousewheel:function(T){this.$10b(T,T.wheelDelta/40)},handle_DOMMouseScroll:function(v){this.$10b(v,-v.detail)},$44b:function(v){this.getView().contains(v.target)||this.$11b.hide()},$41b:function(m){this.$11b.show(m)},$4b:function(J,I){var M=this.$11b;if(I=I||M._items,I&&I.length&&J.keyCode){var L=[J.keyCode];J.shiftKey&&L.push(16),J.ctrlKey&&L.push(17),J.altKey&&L.push(18),/mac/.test(A.navigator?A.navigator.userAgent.toLowerCase():"")?J.metaKey&&L.push(17):J.metaKey&&L.push(91),L.sort();var i=L.join(),j=M.$17b(I,function(e){if(e.key){var u=e.key.slice(0);return u.sort(),i===u.join()}});if(j){j.preventDefault!==!1&&J.preventDefault();var g=!1;j.disabled instanceof Function?g=j.disabled.call(M,j):j.disabled===!0&&(g=!0),g||M.$1b(j,J)}}},$39b:function(M){var Z=this,l=y(M);Z.$32b={x:l.pageX,y:l.pageY}},$38b:function(B){var $=this,R=y(B);$.$31b={x:R.pageX,y:R.pageY},$.$33b=O(function(){$.$31b&&($.$32b?S($.$31b,$.$32b)<10&&$.$11b.show(B):$.$11b.show(B)),delete $.$33b,delete $.$31b,delete $.$32b},600)},$40b:function(){var S=this;S.$33b!=T&&(b(S.$33b),delete S.$33b,delete S.$31b,delete S.$32b)}}),X.widget.ContextMenu=function(V){var P=this,F=P._view=B.createView(null,P);F[K]="ht-widget-contextmenu",P.setItems(V),P.$13b=new x(P),j(F,"font",Z.contextMenuLabelFont),j(F,r,z),j(F,"cursor","default"),j(F,"-webkit-"+w,R),j(F,"-moz-"+w,R),j(F,"-ms-"+w,R),j(F,w,R),j(F,"box-sizing","border-box"),j(F,"-moz-box-sizing","border-box"),Z.baseZIndex!=T&&j(F,"z-index",e(Z.baseZIndex)+2+""),P.$3b=function(r){P.$13b.$4b(r)}},s("ContextMenu",D,{$5b:0,_items:T,$21b:T,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var Y=this,h=Y._enableGlobalKey;h===!1&&(i(P(),"keydown",Y.$3b),Y._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,h(P(),"keydown",this.$3b)},setItems:function(f){this._items=f},getItems:function(){return this._items},setVisibleFunc:function(N){this.$16b=N},setLabelMaxWidth:function(I){this.$43b=I},$1b:function(U,n){var s=this;if("check"===U.type)U.selected=!U.selected;else if("radio"===U.type){var q=U.groupId;s.$17b(s._items,function(y){y.groupId===q&&(y.selected=!1)}),U.selected=!0}if(s.hide(),U.action)U.action.apply(U.scope||s,[U,n]);else if(U.href){var j=U.linkTarget||"_self";A.open(U.href,j)}},getItemById:function(N){return this.getItemByProperty("id",N)},setItemVisible:function(l,E){var r=this.getItemById(l);r&&(r.visible=E)},getItemByProperty:function(t,U,X){var e=this;if(X=X||e._items,!X||0===X.length)return T;var s=e.$17b(X,function(P){return P[t]===U});return s||T},scrollUp:function(J,v){var b=this;if(v=v==T?20:v,v=e(v),0!==v){var j=0;J.$18b>v&&(j=J.$18b-v),b.$42b(J,j),J.scrollTop=j,J.$18b=j}},scrollDown:function(x,A){var g=this;if(A=A==T?20:A,A=e(A),0!==A){var r=x.$22b,i=x.$23b,t=r-i;i+x.$18b+A<r&&(t=x.$18b+A),g.$42b(x,t),x.scrollTop=t,x.$18b=t}},$42b:function(O,Q){Q=Q==T?O.$18b:Q;var S=O.$24b,N=O.$25b;S&&(j(S,"top",Q+f),0==Q?j(S,Y,R):j(S,Y,"block")),N&&(j(N,"bottom",-Q+f),Q==O.$22b-O.$23b?j(N,Y,R):j(N,Y,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(q,n){for(var l=0;l<q.length;l++){var M=q[l];if(n(M))return M;if(M.items){var f=this.$17b(M.items,n);if(f)return f}}},$2b:function(I,d){for(var N=this,a=0;a<I.length;a++){N.$5b++;var v=I[a];if(v.visible!==!1&&!(Z.isFunction(v.visible)&&v.visible()===!1||N.$16b&&!N.$16b.call(N,v))){var G=$("li"),k=N.$5b+"";if(j(G,"white-space","nowrap"),j(G,Y,"block"),"separator"===v||v.separator===!0){var Q=F();Q[K]="separator",j(Q,M,Z.contextMenuSeparatorWidth+f),j(Q,"background",Z.contextMenuSeparatorColor),p(G,Q)}else{v._id=k,G.setAttribute("data-id",k);var g=$("span"),J=$("span"),H=n(),u=F();if(j(g,Y,"inline-block"),j(g,M,"1.2em"),j(J,Y,"inline-block"),j(J,M,"1.2em"),j(J,"line-height","1.2em"),H[K]="prefix",j(H,Y,"inline-block"),j(H,o,"1em"),j(H,M,"1em"),j(H,"vertical-align","middle"),j(H,c,"0 0.2em"),"check"===v.type&&v.selected?H[K]+=" check-prefix":"radio"===v.type&&v.selected&&(H[K]+=" radio-prefix"),p(G,H),v.icon){var q=n();q[K]="contextmenu-item-icon",j(q,Y,"inline-block"),j(q,M,"1.2em"),j(q,o,"1.2em"),j(q,"margin-right","0.2em"),j(q,"float","left"),q.$50b=v.icon,q._item=v,p(g,q)}if(J[U]=v.label,p(g,J),p(G,g),u[K]="suffix",j(u,Y,"inline-block"),j(u,"margin-left","1em"),j(u,"margin-right","0.4em"),j(u,"text-align","right"),j(u,"font-size","75%"),v.items&&(u[U]=Z.contextMenuSubmenuMark),v.suffix&&(u[U]=v.suffix),p(G,u),G[K]="menu-item menu-item"+k,null!=v.background?v.background instanceof Function?j(G,"background-color",v.background.call(N,v)):j(G,"background-color",v.background):j(G,"background-color",Z.contextMenuBackground),j(G,"color",Z.contextMenuLabelColor),j(G,V,"3px 0"),v.disabled instanceof Function){var A=v.disabled.call(N,v);A&&(G[K]+=" disabled",j(G,"color",Z.contextMenuDisabledLabelColor))}else v.disabled&&(G[K]+=" disabled",j(G,"color",Z.contextMenuDisabledLabelColor));if(v.items){N.$21b||(N.$21b=new X.List);var x=$("ul");x[K]="submenu"+k,x.$45b=k,j(x,l,"hidden"),j(x,r,z),p(N._view,x),N.$21b.add(x),N.$2b(v.items,x)}}p(d,G)}}},rebuild:function(){var r=this,E=r._items,A=r._view;if(A&&(A[U]="",r.$21b=T,r.$5b=0,r.$19b=T,r.$20b=T,A.$26b=T,E&&0!==E.length)){var G=$("ul",r._r);p(A,G),r.$2b(E,G)}},addTo:function(g){if(g){var q=this,p=q.$13b;if(q.$12b=g,q.$9b=function(K){p.$44b(K)},q.$27b=function(q){p.$41b(q)},m){var Z=q.$6b=function(k){p.$38b(k)},Q=q.$7b=function(D){p.$39b(D)},v=q.$8b=function(B){p.$40b(B)};i(g,"touchstart",Z,!0),i(g,"touchmove",Q),i(g,"touchend",v)}else i(g,"contextmenu",q.$27b)}},showOnView:function(I,R,Q){I=I.getView?I.getView():I;var E=Z.getWindowInfo(),f=I.getBoundingClientRect();this.show(f.left+E.left+R,f.top+E.top+Q)},show:function(l,v,q){var X=this,q=q==T?!0:!1,b=X._view;if(b){if(X.invalidate(),1===arguments.length){var d=l;if(m){var V=y(d);l=V.pageX,v=V.pageY}else l=d.pageX,v=d.pageY}var N=Z.getWindowInfo(),D=N.width,Q=N.height,t=N.left,k=N.top,R={pageX:l,pageY:v,clientX:l-t,clientY:v-k,target:1,originEvent:d},w=R.clientX,e=R.clientY,h=function(d){d.style.height=Q-6+f;var t=F(),h=F(),V=function(e){j(e,r,z),j(e,"text-align","center"),j(e,o,"100%"),j(e,"font-size",10+f),j(e,"padding","2px 0"),j(e,"border","0px solid "+Z.contextMenuScrollerBorderColor),j(e,"background-color",Z.contextMenuScrollerColor1),e.style.backgroundImage="-webkit-linear-gradient(top, "+Z.contextMenuScrollerColor1+", "+Z.contextMenuScrollerColor2+")",e.style.backgroundImage="linear-gradient(to bottom, "+Z.contextMenuScrollerColor1+", "+Z.contextMenuScrollerColor2+")"};t[K]="menu-arrow-item menu-arrow-item-top",h[K]="menu-arrow-item menu-arrow-item-bottom",V(t),j(t,"top",J),j(t,"left",J),j(t,"border-bottom-width",1+f),t[U]="▲",V(h),j(h,"bottom",J),j(h,"left",J),j(h,"border-top-width",1+f),h[U]="▼",d.$24b=t,d.$25b=h,d.$18b=d.scrollTop,d.$22b=d.scrollHeight,d.$23b=d.clientHeight,p(d,t),p(d,h),X.$42b(d)};X.beforeShow&&X.beforeShow(R);var n=X._items;if(n&&(d&&d.preventDefault(),n.length)){X.rebuild(),Z.appendToScreen(b),b.$26b=G(b,".menu-item");var s=b.children[0];s.offsetHeight>Q&&h(s);var E=e+(q?1:0),A=w+(q?1:0),S=function(T){for(var v=0,Z=0,W=0,r=X.$43b;W<T.children.length;W++){var E=T.children[W];if(E.getAttribute("data-id")){var N=E.children[1],J=E.children[2],A=N.children;if(r){var O=A[0];A.length>1&&(O=A[1]),O.offsetWidth>r&&(O[U]="<marquee scrollamount='3'>"+O[U]+"</marquee>",O.children[0].style.verticalAlign="text-bottom",j(O,o,r+f),j(O,Y,"inline-block"))}var C=N.offsetWidth,$=J.offsetWidth;C>v&&(v=C),$>Z&&(Z=$)}}for(W=0;W<T.children.length;W++){var E=T.children[W];if(E.getAttribute("data-id")){var N=E.children[1],J=E.children[2],K=N.children[0],z=N.children[1];!z&&K.style.width&&j(K,o,v+f),j(N,o,v+f),j(J,o,Z+f)}}};S(s);var W=e+3+b.offsetHeight,O=w+3+b.offsetWidth;W>Q?j(b,u,E-(W-Q)+k+f):j(b,u,E+k+f),O>D?j(b,L,A-(O-D)+t+f):j(b,L,A+t+f);var I=X.$21b;I&&I.each(function(Y){S(Y),Y.offsetHeight>Q&&h(Y)}),X.$9b&&i(P(),m?"touchstart":"mousedown",X.$9b,!0),X.afterShow&&X.afterShow(R),X.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=T:!1},getRelatedView:function(){return this.$12b},hide:function(){var A=this,U=A._view;U&&U.parentNode&&(H(U.parentNode,U),h(P(),m?"touchstart":"mousedown",A.$9b,!0),A.afterHide&&A.afterHide())},dispose:function(){var P=this,X=P.$12b,_=P._view;_&&(_.parentNode&&H(_.parentNode,_),P.disableGlobalKey(),X&&(m?(h(X,"touchstart",P.$6b,!0),h(X,"touchmove",P.$7b),h(X,"touchend",P.$8b)):h(X,"contextmenu",P.$27b)),P._view=P._items=P.$21b=P.$19b=P.$12b=P.beforeShow=P.afterShow=P.afterHide=P.$9b=P.$3b=P.$6b=P.$7b=P.$8b=P.$27b=T)},$46b:function(X,E,s,I,d){var l=B.initContext(X);B.translateAndScale(l,0,0,1),l.clearRect(0,0,s,I),Z.drawStretchImage(l,Z.getImage(E),"fill",0,0,s,I,d,this),l.restore()},$47b:function(){var l,s,L,k=this,w=k._view;if(k.isShowing()){var J=G(w,".check-prefix");for(L=0;L<J.length;L++){var j=J[L];l=j.clientWidth,s=j.clientHeight,j.$48b=l,j.$49b=s,B.setCanvas(j,l,s)}var O=G(w,".radio-prefix");for(L=0;L<O.length;L++){var y=O[L];l=y.clientWidth,s=y.clientHeight,y.$48b=l,y.$49b=s,B.setCanvas(y,l,s)}var b=G(w,".contextmenu-item-icon");for(L=0;L<b.length;L++){var Y=b[L];l=Y.clientWidth,s=Y.clientHeight,Y.$48b=l,Y.$49b=s,B.setCanvas(Y,l,s)}}},validateImpl:function(){var X,j,s,h=this,u=h._view;if(h.isShowing()){var i=G(u,".check-prefix");for(s=0;s<i.length;s++){var K=i[s];X=K.$48b,j=K.$49b,X&&j&&h.$46b(K,Z.contextMenuCheckIcon,X,j)}var v=G(u,".radio-prefix");for(s=0;s<v.length;s++){var l=v[s];X=l.$48b,j=l.$49b,X&&j&&h.$46b(l,Z.contextMenuRadioIcon,X,j)}var e=G(u,".contextmenu-item-icon");for(s=0;s<e.length;s++){var k=e[s];X=k.$48b,j=k.$49b,X&&j&&h.$46b(k,Z.getImage(k.$50b),X,j,k._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);