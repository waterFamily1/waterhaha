!function(t,Z,B){"use strict";var _="px",f="0",H="innerHTML",w="className",A=ht.Default,T=ht.Color,X=ht.Node,W="position",g="top",N="left",J=A.animate,O=A.getInternal(),h="width",f="0",i="none",q="max-height",b="font",s="background",e="border-box",E="user-select",Y="box-sizing",y="overflow",o=A.isTouchable,O=A.getInternal(),L=T.titleIconBackground,U=A.scrollBarInteractiveSize,S=/msie 9/.test(t.navigator?t.navigator.userAgent.toLowerCase():""),M=null,m=function(){return document},I=function(q){return m().createElement(q)},a=function(){return I("div")},C=function(){var t=a(),h=t.style;return h.msTouchAction=i,h.cursor="default",o&&h.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",M),h.position="absolute",h.left=f,h.top=f,t},F=function(){return I("canvas")},z=function(){return document.body},v=function(c,B,X){c.style.setProperty(B,X,M)},l=function(c,G){c.style.removeProperty(G)},R=function(G,n,S){A.def(ht.widget[G],n,S)},$=function(r,Z){r.appendChild(Z)},K=function(f,q){f.removeChild(q)},d=A.eventListenerOptionsFalse,r=(A.eventListenerOptionsTrue,function(g,W,Z,U){g.addEventListener(W,Z,U?d:d)});O.addMethod(A,{paletteExpandIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:L,rotation:3.14}]},paletteCollapseIcon:{width:16,height:16,comps:[{type:"triangle",rect:[4,4,10,8],background:L}]},paletteTitleLabelColor:A.labelSelectColor,paletteTitleLabelFont:A.labelFont,paletteContentLabelFont:A.labelFont,paletteContentLabelColor:"#777",paletteContentBackground:"#fff",paletteTitleHeight:A.widgetTitleHeight,paletteTitleBackground:T.titleBackground,paletteTitleHoverBackground:T.titleBackground,paletteSeparatorWidth:1,paletteSeparatorColor:B,paletteItemHoverBorderColor:T.highlight,paletteItemSelectBackground:T.highlight},!0);var j=".palette-item:hover{border: 1px solid "+A.paletteItemHoverBorderColor+" !important}"+" .palette-header:hover{background: "+A.paletteTitleHoverBackground+" !important}",p=document.createElement("style");o||(p.styleSheet?p.styleSheet.cssText=j:p.appendChild(m().createTextNode(j))),m().getElementsByTagName("head")[0].appendChild(p);var P=function(I){var F=this;F.$22h=I,F.addListeners()};A.def(P,Z,{ms_listener:1,getView:function(){return this.$22h.getView()},$26h:function(){var D=this;D.$36h&&z().removeChild(D.$36h),D.$23h=D.$24h=D.$25h=D.$35h=D.$36h=M},handle_touchstart:function(D){for(var L,g=this,l=g.$22h,J=D.target,t=l.sm(),p=l.dm(),f="palette-header",Z="palette-header-tool",x="palette-item",Q=!1,d=!1,m=!1;J&&(J[w]||"").indexOf(f)<0&&(J[w]||"").indexOf(x)<0;)J=J.parentNode;if(J&&J[w].indexOf(Z)>=0?Q=!0:J&&J[w].indexOf(f)>=0?m=!0:J&&J[w].indexOf(x)>=0&&(d=!0),A.isLeftButton(D))if(g.$27h(D))g.$24h=A.getClientPoint(D),g.$25h=l.ty();else if(Q){A.preventDefault(D),L=J.parentNode.$11h;var C=p.getDataById(L),e=C.s("tools")[J.toolIndex];e.action&&e.action.call(l)}else if(m){A.preventDefault(D),L=J.$11h;var C=p.getDataById(L);C.isExpanded()?C.setExpanded(!1):C.setExpanded(!0)}else if(d){L=J.$11h;var P=p.getDataById(L);t.ss(P),l.handleDragAndDrop&&(A.preventDefault(D),P.s("draggable")&&(l.handleDragAndDrop(D,"prepare"),g.$35h=0)),P.s("draggable")||(A.preventDefault(D),g.$24h=A.getClientPoint(D),g.$25h=l.ty())}else A.preventDefault(D),g.$24h=A.getClientPoint(D),g.$25h=l.ty();else g.$26h(D)},handle_mousedown:function(R){this.handle_touchstart(R)},handle_mousewheel:function(e){this.handleScroll(e,e.wheelDelta/40,e.wheelDelta!==e.wheelDeltaX)},handle_DOMMouseScroll:function(b){this.handleScroll(b,-b.detail,1)},handleScroll:function(P,t,e){var m=this.$22h;A.preventDefault(P),e&&m._41o()&&m.ty(m.ty()+20*t)},handle_mouseup:function(I){this.handle_touchend(I)},handle_touchend:function(V){var N=this;N.$37h(V),N.$26h(V)},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(m){var l=this;l.$37h(m),l.$26h(m)},$37h:function(k){var Y=this,G=Y.$22h;2===Y.$35h&&(Y.$35h=3,G.handleDragAndDrop(k,"end"))},handleWindowMouseMove:function(v){this.handleWindowTouchMove(v)},handleWindowTouchMove:function(U){var T=this,J=T.$22h,L=T.$23h,K=T.$24h,N=T.$25h,X=A.getClientPoint(U),x=J._29I,i=T.$36h;if(1===T.$35h||2===T.$35h){if(T.$35h=2,J.handleDragAndDrop(U,"between"),o){var e=U.touches[0];U=e?e:U.changedTouches[0]}i.style.left=U.pageX-parseInt(i.width)/2+_,i.style.top=U.pageY-parseInt(i.height)/2+_}else"p"===L?J.ty(N+X.y-K.y):"v"===L&&J.ty(N+(K.y-X.y)/x.height*J._59I)},handle_mousemove:function(r){this.handle_touchmove(r)},handle_touchmove:function(S){if(!A.isDragging()&&A.isLeftButton(S)){var t=this,K=t.$22h,N=t.$27h(S);if(t.$24h){if(!t.$23h){if(A.getDistance(A.getClientPoint(S),t.$24h)<2)return;t.$23h=N?"v":"p",A.startDragging(t)}}else if(N)K._43o();else if(0===t.$35h){if(t.$35h=1,K.handleDragAndDrop(S,"begin"),o){var u=S.touches[0];S=u?u:S.changedTouches[0]}var D=t.$36h=new Image,j=K.$10h[K.sm().ld().getId()].querySelector(".image-box"),T=parseInt(j.style.width),F=parseInt(j.style.height);D.draggable=!1,D.src=j.toDataURL(),D.width=T,D.height=F,D.style.position="absolute",D.style.left=S.pageX-T/2+_,D.style.top=S.pageY-F/2+_,z().appendChild(D),A.startDragging(t)}}},$27h:function(Y){var u=this.$22h,k=u.getView(),v=k.getBoundingClientRect(),h=u._29I,s=Y.clientX-v.left+k.scrollLeft;return u._41o()&&h.x+h.width-s<U}}),ht.widget.Palette=function(t){var q=this,F=q._view=O.createView(null,q);q.$9h={},q.$10h={},q.$4h={},q._29I={x:0,y:0,width:0,height:0},q._59I=0,q.dm(t?t:new ht.DataModel),F[w]="ht-widget-palette",q.$29h=new P(q),v(F,s,A.paletteContentBackground),v(F,y,"auto"),v(F,Y,e),v(F,"-moz-"+Y,e),v(F,"-webkit-"+E,i),v(F,"-moz-"+E,i),v(F,"-ms-"+E,i),v(F,E,i),v(F,"position","absolute"),v(F,"overflow","hidden"),$(F,q._79O=C()),r(F,"dragstart",function(f){f.dataTransfer&&(f.dataTransfer.setData("Text","nodeid:"+f.target.$11h),f.dataTransfer.effectAllowed="all",q.$29h.$26h())})},R("Palette",Z,{ms_v:1,ms_fire:1,ms_dm:1,ms_sm:1,ms_vs:1,ms_ac:["itemImageWidth","itemImageHeight","itemImagePadding","itemMargin","layout","autoHideScrollBar","scrollBarSize","scrollBarColor"],$30h:0,_itemImagePadding:4,_itemImageWidth:70,_itemImageHeight:50,_itemMargin:10,_layout:"largeicons",_autoHideScrollBar:A.autoHideScrollBar,_scrollBarSize:A.scrollBarSize,_scrollBarColor:A.scrollBarColor,getViewRect:function(){return this._29I},ty:function(j){return j==M?this.getTranslateY():(this.setTranslateY(j),void 0)},setTranslateY:function(R){if(this.$32h==M){var e=this,a=e.$33h(R),x=e.$30h;e.$30h=a,e.fp("translateY",x,a)}},getTranslateY:function(){return this.$30h},setLayout:function(w){var S,o,u=this,v=u._layout;u._layout=w,"smallicons"===w?S=o=20:"iconsonly"===w?S=o=50:(S=70,o=50),u.setItemImageWidth(S),u.setItemImageHeight(o),u.setItemImagePadding(4),u.fp("layout",v,w)},getDataAt:function(r){for(var w=r.target;w&&w.$11h==M;)w=w.parentNode;return w&&w.$11h!=M?this.getDataModel().getDataById(w.$11h):void 0},$20h:function(){var v=16;return o&&(v*=1.2),v},$19h:function(){return A.paletteTitleHeight},$18h:function(){var y=A.paletteSeparatorWidth,r=A.paletteTitleBackground,p=A.paletteSeparatorColor||A.brighter(r);return y+_+" solid "+p},$17h:function(L){v(L,"cursor","pointer"),v(L,"display","inline-block"),v(L,"margin-right",(o?8:4)+_),v(L,"vertical-align",g)},$1h:function(B){var d=this,G=a(),x=a(),L=I("span");G[w]="palette-header",v(G,W,"relative"),v(G,s,A.paletteTitleBackground),v(G,"color",A.paletteTitleLabelColor),v(G,g,f),v(G,Y,e),v(G,"-moz-"+Y,e),v(G,"padding","0 5px 0 0"),v(G,"border-top",d.$18h()),v(G,h,"100%"),v(G,"cursor","pointer"),v(G,"white-space","nowrap"),v(G,y,"hidden"),v(G,b,A.paletteTitleLabelFont),v(G,"line-height",d.$19h()+_),G.$11h=B.getId();var i=F(),M=d.$19h(),S=d.$20h();d.$17h(i),O.setCanvas(i,S,M),$(G,i);var o=B.s("tools");if(o)for(var E=0;E<o.length;E++){var R=F();d.$17h(R),O.setCanvas(R,S,M),R[w]="palette-header-tool palette-header-tool"+B.getId()+"-"+E,R.style.position="absolute",R.style.right=(S+10)*E+"px",R.toolIndex=E,$(G,R)}return i[w]="palette-toggle-icon-"+B.getId(),x[w]="palette-content",v(x,"max-height",0+_),v(x,b,A.paletteContentLabelFont),v(x,y,"hidden"),x.$11h=B.getId(),d.$9h[B.getId()]=x,L[H]=B.getName(),v(L,b,A.paletteTitleLabelFont),$(G,i),$(G,L),[G,x]},$2h:function(Z){var T=this,B=T._layout,f=S&&Z.s("draggable")?I("a"):a(),j=F(),o=a(),U=Z.getName()||"",x=Z.s("title")||Z.getToolTip()||U,Q=T._itemMargin;j[w]="image-box";var P=T.getItemImageWidth(),p=T.getItemImageHeight();return O.setCanvas(j,P,p),$(f,j),o[H]=U,o[w]="label-box","iconsonly"!==B&&$(f,o),f[w]="palette-item",v(f,"vertical-align",g),v(f,"cursor","pointer"),v(f,"border-radius",5+_),v(f,"border","1px solid transparent"),v(f,"text-align","center"),v(f,"display","inline-block"),v(f,"margin-left",Q+_),v(f,"margin-top",Q+_),v(f,"color",A.paletteContentLabelColor),"smallicons"===B?(v(j,"vertical-align","middle"),v(f,"margin-left",2+_),v(f,"margin-top",2+_),v(f,"padding",2+_),v(f,"text-align",N),v(o,"display","inline-block"),v(o,"min-width",T.$21h+T._itemMargin+_)):"largeicons"===B&&(v(o,"max-width",P+_),v(o,"overflow","hidden")),f.$11h=Z.getId(),x&&(f.title=x),Z.s("draggable")&&!T.handleDragAndDrop&&(S?(f.href="#",v(f,"text-decoration",i)):f.draggable="true"),f},$16h:function(s,t,L,g){var o=O.initContext(s);O.translateAndScale(o,0,0,1),o.clearRect(0,0,L,L);var Y=(L-g)/2;A.drawStretchImage(o,A.getImage(t),"fill",0,Y,g,g),o.restore()},$15h:function(J){var S=this,Q=J.getId(),U=S._view.querySelector(".palette-toggle-icon-"+Q),i=J.isExpanded()?A.paletteCollapseIcon:A.paletteExpandIcon;if(U&&i){var T=S.$19h(),E=S.$20h();S.$16h(U,i,T,E)}},_drawToolsIcon:function(C){var v=this,$=C.s("tools");if($)for(var O=0;O<$.length;O++){var m=v._view.querySelector(".palette-header-tool"+C.getId()+"-"+O),D=$[O].icon,x=v.$19h(),q=v.$20h();v.$16h(m,D,x,q)}},$14h:function(m){var W=this,q=m.getId(),D=W.$10h[q].querySelector(".image-box"),N=m.getImage(),i=m.s("image.stretch");if(D&&N){var z=O.initContext(D),f=W.getItemImagePadding();f="smallicons"===W._layout?f/2:f;var L=W.getItemImageWidth()-2*f,j=W.getItemImageHeight()-2*f;O.translateAndScale(z,0,0,1),z.clearRect(0,0,L,j),A.drawStretchImage(z,A.getImage(N),i,f,f,L,j,m,W),z.restore()}},validateImpl:function(){var s,k,U,m=this,j=m.$9h,D=m._layout,n=m.$10h,l=m.$4h,N=m._view,a=m.dm();if(m.$13h&&(delete m.$13h,l={},a.each(function(t){l[t.getId()]=t})),"smallicons"===D)for(var E in l){var v=l[E];if(v instanceof X){var w=v.getName()||"",u=A.getTextSize(A.paletteContentLabelFont,w).width;m.$21h!=M&&m.$21h>u||(m.$21h=u)}}for(var E in l){U=l[E];var Y,Z;if(a.contains(U)){if(U instanceof ht.Group){var r,c=m.$1h(U),i=n[U.getId()];i&&(r=i.nextSibling,K(N,r),K(N,i)),k=a.getSiblings(U).indexOf(U);var W=N.children[2*k]||m._79O;W&&W.parentNode?(N.insertBefore(c[0],W),N.insertBefore(r||c[1],W)):(N.appendChild(c[0]),N.appendChild(r||c[1])),n[U.getId()]=c[0],s=j[U.getId()]=r||c[1],Z=U.$12h;var O=U.s("promptText");Z||(U.$12h=I("div"),U.$12h[H]=O||"",Z=U.$12h),0===U.getChildren().size()?s.contains(Z)||$(s,Z):s.contains(Z)&&K(s,Z)}else if(Y=U.getParent()){var F=m.$2h(U),B=n[U.getId()];s=j[Y.getId()],B&&K(B.parentNode,B),k=a.getSiblings(U).indexOf(U);var g=s.children[k];g?s.insertBefore(F,g):$(s,F),n[U.getId()]=F,m.$14h(U)}}else{var L=n[U.getId()],S=L.parentNode;if(U instanceof ht.Group){var P=L.nextSibling;K(N,L),K(N,P),delete j[U.getId()]}else K(S,L),0===S.children.length&&(Y=a.getDataById(S.$11h),Y&&(Z=Y.$12h,Z&&!S.contains(Z)&&$(S,Z)));delete n[U.getId()]}}m.$4h={};var e=function(){var T=m._59I,N=0;m.$32h!=M&&(clearInterval(m.$32h),N=0,delete m.$32h),m.$32h=setInterval(function(){m.$31h(),T===m._59I?(N++,N>=2&&(clearInterval(m.$32h),delete m.$32h)):(N=0,T=m._59I)},30)};for(var d in j)if(s=j[d],U=a.getDataById(j[d].$11h),m.$15h(U),m._drawToolsIcon(U),U.isExpanded()){if(s.style.maxHeight===0+_){var Q=s.scrollHeight+m._itemMargin+_;J(s).duration(200).set(q,Q).set("padding-bottom",m._itemMargin+_).end(function(){return function(){e()}}(Q))}else s.style.maxHeight=s.scrollHeight+_;s.style.paddingBottom=m._itemMargin+_}else s.style.maxHeight!==0+_&&J(s).duration(200).set(q,f).set("padding-bottom",f).end(function(){return function(){e()}}(s));m.$28h(),m.$31h()},$31h:function(){for(var J=this,N=J._view,P=0,U=N.children,i=0;i<U.length;i++){var D=U[i];D.className&&D.className.indexOf("palette-")>=0&&(P+=D.offsetHeight)}J._59I=P,J.$30h=J.$33h(J.ty());var d=J.ty();N.scrollTop=-d,J._29I={x:0,y:-d,width:N.clientWidth,height:N.clientHeight},v(J._79O,g,-d+_),J._93I()},$33h:function(r){var z=this,e=z._29I.height-z._59I;return e>r&&(r=e),r>0?0:Math.round(r)},redraw:function(){this.$13h||(this.$13h=1,this.iv())},onPropertyChanged:function(I){["autoHideScrollBar","scrollBarSize","scrollBarColor","translateY"].indexOf(I.property)<0&&this.redraw(),"translateY"===I.property&&(this.iv(),this._43o())},findDataByName:function(D){for(var d=this.dm().getDatas(),$=0;$<d.size();$++){var s=d.get($);if(s.getName()===D)return s}},setDataModel:function(w){var k=this,m=k._dataModel,s=k._selectionModel;m!==w&&(m&&(m.umm(k.$6h,k),m.umd(k.$8h,k),m.umh(k.$7h,k),s||m.sm().ums(k.$28h,k)),k._dataModel=w,w.mm(k.$6h,k),w.md(k.$8h,k),w.mh(k.$7h,k),s?s._21I(w):w.sm().ms(k.$28h,k),k.sm().setSelectionMode("single"),k.fp("dataModel",m,w))},$6h:function(n){var R=this,P=R._view,r=n.data,l=R.$4h;"add"===n.kind?l[r.getId()]=r:"remove"===n.kind?l[r.getId()]=r:"clear"===n.kind&&(R.$10h={},R.$9h={},R.$4h={},P[H]=""),R.iv()},$7h:function(y){var v=this,J=y.data;v.$4h[J.getId()]=J,v.iv()},$8h:function(N){var c=this,H=N.data,i=N.property;"expanded"===i?c.iv():(c.$4h[H.getId()]=H,c.iv())},$28h:function(){var j,R=this,P=R.sm(),$="palette-item",y=P.ld();this.dm().each(function(f){j=R.$10h[f.getId()],j&&j[w].indexOf($)>=0&&(f===y?v(j,s,A.paletteItemSelectBackground):l(j,s))})}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);