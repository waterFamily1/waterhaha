!function(Y,f){"use strict";var d="ht",E=Y[d],$="innerHTML",i="className",C=null,w="px",j=E.Default,V=j.getInternal(),x="0",M=function(){return document},e=function(Q){return M().createElement(Q)},L=function(){return e("canvas")},A=function(R,H,W){R.style.setProperty(H,W,C)},t=function(O,c,D){j.def(E.widget[O],c,D)},l=function(a,z){a.appendChild(z)},c=function(n,j){n.removeChild(j)},q=j.eventListenerOptionsFalse,m=(j.eventListenerOptionsTrue,function(r,A,Z,f){r.addEventListener(A,Z,f?q:q)}),W=function(W,a,X,f){W.removeEventListener(a,X,f?q:q)},z=j.isTouchable;V.addMethod(j,{menuLabelFont:(z?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),E.widget.Menu=function(B){var K=this,F=K._view=V.createView(null,K),d=K.$1g=new E.widget.ContextMenu,O=e("ul");d._r=!0,d._view[i]+=" ht-widget-dropdownmenu",F[i]="ht-widget-menu",O[i]="header",A(F,"margin",x),A(F,"padding",x),A(F,"background",j.menuBackground),A(F,"-webkit-user-select","none"),A(F,"-moz-user-select","none"),A(F,"user-select","none"),A(F,"text-align","left"),A(F,"border-bottom",j.menuSeparatorWidth+"px solid "+j.menuSeparatorColor),A(F,"cursor","default"),A(F,"overflow","auto"),A(F,"white-space","nowrap"),A(F,"font",j.menuLabelFont),A(F,"color",j.menuLabelColor),A(F,"box-sizing","border-box"),A(F,"-moz-box-sizing","border-box"),A(O,"list-style","none"),A(O,"margin",x),A(O,"padding",x),A(O,"display","inline-block"),l(F,O),K.setItems(B),K.$2g=function(X){K.$3g(X)},K.$4g=function(y){K.$5g(y)},K.$6g=function(n){K.$7g(n)},K.$8g=function(n){K.$9g(n)},K.$9b=function(h){K.$10g(h)},K._autoShow=!0,K.setAutoShow(!1),d.afterHide=function(){K.$11g()},d.afterShow=function(){K.$12g()},W(M(),"keydown",d.$3b),K.$3b=function(O){K.$13g(O)},K.invalidate()},t("Menu",f,{_items:C,$14g:j.menuHoverBackground,$15g:j.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(v){var r=this;if(r.$21g=v,r.setItems(r._items),"largeicons"===v){for(var s=r._view.querySelectorAll(".header-item"),K=0,C=0;C<s.length;C++){var Z=s[C];K=Math.max(K,Z.clientWidth)}for(var C=0;C<s.length;C++){var Z=s[C];A(Z,"min-width",K+w)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(X){this.$22g=X;for(var Q=this._view.querySelectorAll(".header-item"),F=0;F<Q.length;F++){var E=Q[F];A(E,"margin-left",X+w),A(E,"margin-right",X+w)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(u){this.$23g=u;for(var o=this._view.querySelectorAll(".header-item"),S=0;S<o.length;S++){var O=o[S];A(O,"margin-top",u+w),A(O,"margin-bottom",u+w)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(u){this.$24g=u,A(this._view,"text-align",u)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var l=this,p=l._enableGlobalKey;p===!1&&(m(M(),"keydown",l.$3b),l._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,W(M(),"keydown",this.$3b)},setHoverBackground:function(Z){this.$14g=Z},setHoverColor:function(P){this.$15g=P},setItems:function(s){var q=this,n=q._view,C=q.$21g;if(q._items=s,n.children[0][$]="",q.$16g={},s&&s.length){for(var _=n.children[0],p=0,Z=M().createDocumentFragment();p<s.length;p++){var T=s[p],V=e("li"),O=e("span");if(T.icon){var w=L();w[i]="menu-item-icon","smallicons"===C?(A(w,"height","1.2em"),A(w,"width","1.2em"),A(w,"vertical-align","middle")):(A(w,"height","32px"),A(w,"width","32px"),A(w,"display","block"),A(w,"margin","0 auto")),w.$20g=T.icon,l(V,w)}V[i]="header-item",A(V,"display","inline-block"),A(V,"vertical-align","top"),A(V,"padding","0 1.2em"),A(V,"line-height","1.8em"),"largeicons"===C&&A(V,"text-align","center"),A(V,"background-color","rgba(0,0,0,0)"),V.setAttribute("data-index",p),q.$16g[p]=T.items,O[$]=T.label,"iconsonly"!==C&&l(V,O),l(Z,V)}l(_,Z)}},showDropdownMenu:function(X){var i=this,S=i.$16g[X],Y=i.$1g,y=i._view.children[0].children[X],I=i.$17g;if(y&&y!==I){I&&i.hideDropdownMenu();var H=y.getBoundingClientRect(),_=j.getWindowInfo();i.$17g=y,Y.setItems(S),Y.show(H.left+_.left,H.top+H.height+_.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(Y,m){var c=this,r=c._items;return r&&0!==r.length?c.$1g.getItemByProperty(Y,m,r):C},$12g:function(){var y=this,w=y.$17g;w.style.background=y.$14g,w.style.color=y.$15g,y._autoShow||m(M(),z?"touchstart":"mousedown",y.$9b)},$11g:function(){var R=this,p=R.$17g;p&&(p.style.background="",p.style.color="",R.$17g=C),W(M(),z?"touchstart":"mousedown",R.$9b)},$10g:function(P){var B=this,D=B._view,I=B.$1g,R=D.children[0];!M().body.contains(D)||R.contains(P.target)||I._view.contains(P.target)||B.hideDropdownMenu()},$13g:function(m){var Z=this,R=Z.$1g;M().body.contains(Z._view)&&R.$13b.$4b.call(R.$13b,m,Z._items)},setAutoShow:function(I){var t=this,y=t.$1g,C=t._view;t._autoShow!==I&&(t._autoShow?(W(C,"mouseover",t.$2g),W(C,"mouseout",t.$4g),W(y._view,"mouseout",t.$4g),z||(m(C,"mouseover",t.$8g),m(C,"mouseout",t.$8g)),m(C,z?"touchstart":"mousedown",t.$6g)):(W(C,"mouseover",t.$8g),W(C,"mouseout",t.$8g),W(C,z?"touchstart":"mousedown",t.$6g),W(M(),z?"touchstart":"mousedown",t.$9b),z||(m(C,"mouseover",t.$2g),m(C,"mouseout",t.$4g),m(y._view,"mouseout",t.$4g))),t._autoShow=I)},$3g:function(o){var D=this,P=D._view.children[0],V=o.target;if(P!==V&&P.contains(V)){for(;"header-item"!==V[i];)V=V.parentNode;D.showDropdownMenu(V.getAttribute("data-index"))}},$5g:function(I){var Z=this,n=Z._view.children[0],k=Z.$1g,s=I.target,u=I.relatedTarget;!n.contains(s)&&!k._view.contains(s)||n.contains(u)||k._view.contains(u)||Z.hideDropdownMenu()},$7g:function(_){_.preventDefault();var B=this,O=B._view.children[0],e=B.$1g,u=_.target;if(j.isLeftButton(_)&&O!==u&&O.contains(u))if(z){for(;"header-item"!==u[i];)u=u.parentNode;var f=u.getAttribute("data-index"),e=B.$1g,V=B._view.children[0].children[f],b=B.$17g;e.isShowing()&&B.hideDropdownMenu(),V!==b&&B.showDropdownMenu(f)}else if(e.isShowing())B.hideDropdownMenu();else{for(;"header-item"!==u[i];)u=u.parentNode;B.showDropdownMenu(u.getAttribute("data-index"))}},$9g:function(g){var J=this,s=J._view,u=J.$1g,k=g.target;if(s.contains(k)){for(var R=s.querySelectorAll(".header-item"),N=C,H=0;H<R.length;H++){var M=R[H];M.style.background="",M.style.color="","mouseover"===g.type?M.contains(k)&&(N=M):"mouseout"===g.type&&u.isShowing()&&J.$17g===M&&(N=M)}u.isShowing()&&(N||(N=J.$17g),J.showDropdownMenu(N.getAttribute("data-index"))),N&&(N.style.background=J.$14g,N.style.color=J.$15g)}},getShowingMenuIndex:function(){var l=this.$17g;return l?l.getAttribute("data-index"):-1},addTo:function(U){var u=this,B=u._view;l(U,B),u.invalidate()},dispose:function(){var _=this,U=_._view,Q=_.$1g;U&&(_._autoShow?(W(U,"mouseover",_.$2g),W(U,"mouseout",_.$4g),W(Q._view,"mouseout",_.$4g)):(W(U,"mouseover",_.$8g),W(U,"mouseout",_.$8g),W(U,z?"touchstart":"mousedown",_.$6g),W(M(),z?"touchstart":"mousedown",_.$9b)),W(M(),"keydown",_.$3b),Q.dispose(),U.parentNode&&c(U.parentNode,U),_._view=_.$1g=_.$16g=_._items=_.$17g=_.$2g=_.$4g=_.$6g=_.$8g=_.$9b=_.$3b=C)},$19g:function(h,J,H,w){var u=V.initContext(h);V.translateAndScale(u,0,0,1),u.clearRect(0,0,H,w),j.drawStretchImage(u,j.getImage(J),"fill",0,0,H,w),u.restore()},validateImpl:function(){var g,h,U,l=this,N=l._view,X=N.querySelectorAll(".menu-item-icon");for(U=0;U<X.length;U++){var n=X[U];g=n.clientWidth,h=n.clientHeight,g&&h&&(V.setCanvas(n,g,h),l.$19g(n,j.getImage(n.$20g),g,h))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);