!function(W){"use strict";var M="ht",i=W[M],x=i.Default,I=Math,c=(I.PI,I.sin,I.cos,I.atan2,I.sqrt,I.max),h=I.floor,S=(I.round,I.ceil),X=i.Shape,F=(i.Edge,i.List),b=i.Style,G=i.graph,P=x.getInternal(),e=P.ui(),m=null,n="prototype",_=W.clearInterval,q=W.setInterval,T=function(k){var c=k.data,f=this.dm();if(c&&"add"===k.kind){var y=f.$1c,I=c instanceof X?"shape.":"edge.";y&&c.s(I+"dash.flow")&&y.indexOf(c)<0&&y.push(c)}"clear"===k.kind&&(f.$1c=[])},y=function(j){var U=j.property,y=j.data,G=j.newValue,P=this.dm().$1c,w=y instanceof X?"s:shape.dash.flow":"s:edge.dash.flow";if(P&&U===w)if(G)P.indexOf(y)<0&&P.push(y);else for(var m=P.length,I=0;m>I;I++)if(P[I]===y){P.splice(I,1);break}},s=G.GraphView[n],d=e.EdgeUI[n],z=e.ShapeUI[n],D=z._80o,g=d._80o,l=i.DataModel[n],B=l.prepareRemove,u=s.setDataModel;b["edge.dash.flow.step"]==m&&(b["edge.dash.flow.step"]=3),b["shape.dash.flow.step"]==m&&(b["shape.dash.flow.step"]=3),l.prepareRemove=function(r){B.call(this,r);var L=r._dataModel,v=L.$1c;if(v)for(var m=v.length,k=0;m>k;k++)if(v[k]===r){v.splice(k,1);break}},s.setDataModel=function(q){var A=this,s=A._dataModel;if(s!==q){s&&(s.umm(T,A),s.umd(y,A),s.$1c=[]),q.mm(T,A),q.md(y,A);var w=q.$1c=[];q.each(function(L){var S=L instanceof X?"shape.":"edge.";L.s(S+"dash.flow")&&w.indexOf(L)<0&&w.push(L)}),u.call(A,q)}},s.setDashFlowInterval=function(F){var I=this,z=I.$2c;I.$2c=F,I.fp("dashFlowInterval",z,F),I.$3c!=m&&(_(I.$3c),delete I.$3c,I.enableDashFlow(F))},s.getDashFlowInterval=function(){return this.$2c},s.$4c=function(){var r,u,B,C=this,b=C.tx(),y=C.ty(),e=C._zoom,Y=C.getWidth(),d=C.getHeight(),T={x:-b/e,y:-y/e,width:Y/e,height:d/e},M=C.dm().$1c,V=C._56I,N=new F;if(M.forEach(function(h){V[h.getId()]&&(r=C.getDataUI(h),r&&(B=r._79o(),B&&N.add(B)))}),0!==N.size()&&(N.each(function(f){x.intersectsRect(T,f)&&(u=x.unionRect(u,f))}),u&&(u&&(x.grow(u,c(1,1/e)),u.x=h(u.x*e)/e,u.y=h(u.y*e)/e,u.width=S(u.width*e)/e,u.height=S(u.height*e)/e,u=x.intersection(T,u)),u))){var W=C._canvas.getContext("2d");W.save(),W.lineCap=x.lineCap,W.lineJoin=x.lineJoin,P.translateAndScale(W,b,y,e),W.beginPath(),W.rect(u.x,u.y,u.width,u.height),W.clip(),W.clearRect(u.x,u.y,u.width,u.height),C.$5c(W,u),W.restore()}},s.$5c=function(Q,m){var t,A,r=this;r._93db(Q),r.each(function(Y){r._56I[Y._id]&&(t=r.getDataUI(Y),t&&(A=t._79o(),(!m||x.intersectsRect(m,A))&&(t.$7c=!0,t._42(Q),delete t.$7c)))}),r._92db(Q)},s.enableDashFlow=function(L){var y=this;y.$3c==m&&(y.$3c=q(function(){y.$4c()},L||y.$2c||50))},s.disableDashFlow=function(){var m=this;_(m.$3c),delete m.$3c};var f=function(){var y=this,L=y._data,Q=L instanceof X?"shape.":"edge.",h=L.s(Q+"dash.pattern"),w=L.s(Q+"dash.flow.reverse");if(h&&L.s(Q+"dash")&&L.s(Q+"dash.flow")&&y.$7c){var Z=y.s(Q+"dash.offset")||0,I=L.s(Q+"dash.flow.step"),g=L.getStyleMap(),b=0;h.forEach(function(I){b+=I}),w&&(I=-I),Z-=I,Z%=b,g||(L._styleMap=g={}),g[Q+"dash.offset"]=Z}};d._80o=function(C){g.call(this,C),f.call(this)},z._80o=function(q){D.call(this,q),f.call(this)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);