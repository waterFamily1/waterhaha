/*
 * client.js - v0.3.1
 * Compiled Wed Dec 26 2018 09:49:35 GMT+0800 (GMT+08:00)
 * Copyright (c) 2018 www.hightopo.com
 */
var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
var hteditor=function(){"use strict";function c(c,l,b){b.style.cursor="ew-resize";var f=b.innerHTML.charAt(0),n=l.querySelector("input.color_"+f),U=function U(l){l.preventDefault();var b=("A"===f?parseFloat(n.value):parseInt(n.value))||0,U=ht.Default.getClientPoint(l).x,$=function $(l){l.preventDefault();var $=ht.Default.getClientPoint(l).x-U,H=void 0;"A"===f?(H=b+.01*$,H>1&&(H=1),H<0&&(H=0),n.value=H.toFixed(2)):(H=b+1*$,H>255&&(H=255),H<0&&(H=0),n.value=H),c.updateInputChange();};window.addEventListener("mousemove",$,!1),window.addEventListener("touchmove",$,!1);var H=function H(c){c.preventDefault(),window.removeEventListener("mousemove",$,!1),window.removeEventListener("touchmove",$,!1),window.removeEventListener("mouseup",H,!1),window.removeEventListener("touchend",H,!1);};window.addEventListener("mouseup",H,!1),window.addEventListener("touchend",H,!1);};b.addEventListener("mousedown",U,!1),b.addEventListener("touchstart",U,!1);}function l(c){var l=new RegExp("(^|&)"+c+"=([^&]*)(&|$)"),b=window.location.search.substr(1).match(l);return null!=b?decodeURIComponent(b[2]):null;}function b(c){return ht.Default.clone(c);}function f(c){return parseFloat(c.toFixed(ht.Default.numberDigits));}function n(c,l){if(null!=c)return l||!Gl.config.traceMissingI18n||Gl.customStrings[c]||Gl.strings[c]||console.log("i18n missing:["+c+"]"),l?Gl.customStrings[c]||Gl.strings[c]:Gl.customStrings[c]||Gl.strings[c]||c;}function U(c,l){var b=c.indexOf(l);b>=0&&c.splice(b,1);}function H(c){return ht.Default.isEmptyObject(c);}function L(c){return c?Yc(c)?c:c.__ht__||c.toString():"";}function e(c){var l=L(c),b=l.indexOf("{")+1,f=l.lastIndexOf("}");for(l=l.substring(b,f);l.startsWith("\n");){l=l.substr(1);}for(;l.endsWith("\n");){l=l.substring(0,l.length-1);}return l;}function I(c){var l=c.indexOf("function");if(c&&!(l<0)){var b=void 0,f=c.indexOf("{")+1,n=c.lastIndexOf("}"),U=c.indexOf("(")+1,$=c.indexOf(")");return f&&n&&U&&$&&(b=new Function(c.substring(U,$),c.substring(f,n)),b.__ht__=c.substr(l)),b;}}function Y(c,l){if("s"===c)return function(c){return c.s(l);};if("a"===c)return function(c){return c.a(l);};if("p"===c){var b=function(){var c=ht.Default.getter(l);return{v:function v(l){if(l[c])return l[c]();}};}();if("object"==(typeof b==="undefined"?"undefined":_typeof(b)))return b.v;}}function D(c,l){if("s"===c)return function(c,b){return c.s(l,b);};if("a"===c)return function(c,b){return c.a(l,b);};if("p"===c){var b=function(){var c=ht.Default.setter(l);return{v:function v(l,b){if(l[c])return l[c](b);}};}();if("object"==(typeof b==="undefined"?"undefined":_typeof(b)))return b.v;}}function T(c){return 37===c.keyCode;}function J(c){return 38===c.keyCode;}function y(c){return 39===c.keyCode;}function m(c){return 40===c.keyCode;}function Q(c){return 13===c.keyCode;}function B(c){return 27===c.keyCode;}function p(c){return ht.Default.isDelete(c);}function i(c){return ht.Default.isLeftButton(c);}function Z(c){return ht.Default.isDoubleClick(c);}function a(c,l){ht.Default.startDragging(c,l);}function j(c){return ht.Default.getClientPoint(c);}function u(c){return ht.Default.getTargetElement(c);}function X(c){return ht.Default.getPagePoint(c);}function A(){return ht.Default.getWindowInfo();}function v(c,l){return ht.Default.getDistance(c,l);}function N(){return ht.Default.unionPoint.apply(this,arguments);}function h(c){return ht.Default.getImageMap()[c]?(delete ht.Default.getImageMap()[c],!0):!!ht.Default.getCompTypeMap()[c]&&(delete ht.Default.getCompTypeMap()[c],!0);}function C(c,l,b){return ht.Default.getPosition(c,l,b);}function t(c,l){return ht.Default.stringify(c,l);}function F(c){return ht.Default.parse(c);}function W(c){if(!c)return"";var l=c.lastIndexOf(".");return l===-1?c:c.substr(0,l);}function V(c){return c=c.replace(/^.*[\\\/]/,""),W(c);}function g(c,l,b,f,n){ht.Default.layout(c,l,b,f,n);}function w(c,l,b,f){ht.Default.setCanvas(c,l,b,f);}function k(c){ht.Default.removeHTML(c);}function K(c,l,b){ht.Default.xhrLoad(c,l,b);}function x(c){return ht.Default.isShiftDown(c);}function G(c){return ht.Default.isCtrlDown(c);}function z(c,l){return ht.Default.createView(c,l);}function s(c){return ht.Default.createCanvas(c);}function M(c,l){return ht.Default.createDiv(l,c);}function _(c,l){return ht.Default.unionRect(c,l);}function R(c,l,b,f,n,U,$,H,L,e){return ht.Default.drawText(c,l,b,f,n,U,$,H,L,e);}function o(c,l,b,f,n,U,$,H,L,e){ht.Default.drawStretchImage(c,l,b,f,n,U,$,H,L,e);}function r(c,l,b,f,n,U,$){ht.Default.drawBorder(c,l,b,f,n,U,$);}function d(c,l,b,f,n,U){var $=c.getContext("2d");return $.save(),l=l||0,b=b||0,f=f||1,U=U||ht.Default.devicePixelRatio,$.translate(l*U,b*U),f*=U,1!==f&&$.scale(f,f),n&&($.beginPath(),$.rect(n.x,n.y,n.width,n.height),$.clip(),$.clearRect(n.x,n.y,n.width,n.height)),$;}function S(c,l){var b=c.prototype,f=ht.Default.getMSMap();for(var n in l){f[n]&&f.hasOwnProperty(n)?f[n](b,l):b[n]=l[n];}}function E(c,l){l[c._id]=c,c.eachChild(function(c){l[c._id]=c,E(c,l);});}function q(c){ht.Default.preventDefault(c);}function P(c){return /^displays/.test(c);}function O(c){return /^symbols/.test(c);}function cc(c){return /^components/.test(c);}function lc(c){return /^scenes/.test(c);}function bc(c){return /^models/.test(c);}function fc(c){return /^assets/.test(c);}function nc(c){return /\.(png|jpg|gif|jpeg|bmp|svg|dxf|mp4|mp3)$/i.test(c);}function Uc(c){return /\.json$/i.test(c);}function $c(c){return /\.mp3$/i.test(c);}function Hc(c){return /\.mp4$/i.test(c);}function Lc(c){return /\.svg$/i.test(c);}function ec(c){return /\.dxf$/i.test(c);}function Ic(c){return c.substring(0,c.length-5)+".png";}function Yc(c){return"string"==typeof c||c instanceof String;}function Dc(c){return c&&"object"==(typeof c==="undefined"?"undefined":_typeof(c));}function Tc(c){return"function"==typeof c;}function Jc(c){return c instanceof Array;}function yc(c,l){var b=c.getPosition().x,f=c.getPosition().y,n=c.getWidth(),U=c.getHeight(),$=[b-n*c.getAnchor().x,f-U*c.getAnchor().y,n,U],H=c.a("rect");jc(l,"rect",H,$,void 0);}function mc(c,l){var b=c.getRotation(),f=c.a("rotation");jc(l,"rotation",f,b,0);}function Qc(c,l){var b=c.getAnchor().x,f=c.a("anchorX");jc(l,"anchorX",f,b,.5),b=c.getAnchor().y,f=c.a("anchorY"),jc(l,"anchorY",f,b,.5);}function Bc(c,l){var b=c.getScale().x,f=c.a("scaleX");jc(l,"scaleX",f,b,1),b=c.getScale().y,f=c.a("scaleY"),jc(l,"scaleY",f,b,1);}function pc(c,l){var b=c.isClosePath(),f=c.a("closePath");jc(l,"closePath",f,b,!1);}function ic(c,l,f,n,U){4===arguments.length&&(U=ht.Style[f]);var $=b(c.s(f)),H=c.a(f);jc(l,n,H,$,U);}function Zc(c,l){var b=c.getDisplayName(),f=c.a("displayName");jc(l,"displayName",f,b,void 0);}function ac(c,l){if(Jc(c)&&Jc(l)){if(c.length===l.length){for(var b=0;b<c.length;b++){if(!ac(c[b],l[b]))return!1;}return!0;}return!1;}if(Dc(c)&&Dc(l)){var f=Object.keys(c);if(f.length===Object.keys(l).length){for(var n=0;n<f.length;n++){var U=f[n];if(!ac(c[U],l[U]))return!1;}return!0;}return!1;}return c===l;}function jc(c,l,b,f,n){b?c[l]={func:b,value:f}:ac(f,n)||void 0===f||(c[l]=f);}function uc(c,l,b,f){Ac(c,"2d.visible",l.visible),Ac(c,"2d.selectable",l.selectable),Ac(c,"2d.movable",l.movable),Ac(c,"2d.editable",l.editable),Ac(c,"comp.pixelPerfect",l.pixelPerfect,!1),Ac(c,"opacity",l.opacity,1),Ac(c,"clip.percentage",l.clipPercentage,1),Ac(c,"clip.direction",l.clipDirection,"top"),Ac(c,"layout.h",l.layoutH),Ac(c,"layout.v",l.layoutV),c instanceof ht.Text||(Ac(c,"shadow",l.shadow,!1),Ac(c,"select.color",l.shadowColor,ht.Color.highlight),Ac(c,"shadow.blur",l.shadowBlur,6),Ac(c,"shadow.offset.x",l.shadowOffsetX,3),Ac(c,"shadow.offset.y",l.shadowOffsetY,3)),vc(c,l),hc(c,l),Cc(c,l),Nc(c,l),c instanceof ht.Shape&&!l.rect||Fc(c,l,b,f);var n=Al.customProperties.comp;n&&n.length&&n.forEach(function(b){Ac(c,b.property,l[b.property],b.defaultValue);}),zl.forEach(function(b){c.a(b,l[b]);}),c.a("renderHTML",l.renderHTML);}function Xc(c,l){ic(c,l,"2d.visible","visible"),ic(c,l,"2d.selectable","selectable"),ic(c,l,"2d.movable","movable"),ic(c,l,"2d.editable","editable"),ic(c,l,"comp.pixelPerfect","pixelPerfect",!1),ic(c,l,"opacity","opacity",1),ic(c,l,"clip.percentage","clipPercentage",1),ic(c,l,"clip.direction","clipDirection","top"),ic(c,l,"layout.h","layoutH"),ic(c,l,"layout.v","layoutV"),c instanceof ht.Text||(ic(c,l,"shadow","shadow",!1),ic(c,l,"select.color","shadowColor",ht.Color.highlight),ic(c,l,"shadow.blur","shadowBlur",6),ic(c,l,"shadow.offset.x","shadowOffsetX",3),ic(c,l,"shadow.offset.y","shadowOffsetY",3)),Zc(c,l),Qc(c,l),Bc(c,l),mc(c,l),c instanceof ht.Shape&&!c.a("rect")||yc(c,l);var b=Al.customProperties.comp,f=!!Al.saveCompCustomPropertyDefaultValue;b&&b.length&&b.forEach(function(b){f?ic(c,l,b.property,b.property):ic(c,l,b.property,b.property,b.defaultValue);}),zl.forEach(function(b){c.a(b)&&(l[b]=c.a(b));}),c.a("renderHTML")&&(l.renderHTML=c.a("renderHTML"));}function Ac(c,l,f,n){3===arguments.length&&(n=ht.Style[l]);var U=Wc(f);void 0===U&&(U=n),c.s(l,b(U)),c.a(l,Vc(f));}function vc(c,l){c.setDisplayName(Wc(l.displayName),void 0),c.a("displayName",Vc(l.displayName));}function Nc(c,l){c.setRotation(Wc(l.rotation,0)),c.a("rotation",Vc(l.rotation));}function hc(c,l){var b=Wc(l.anchorX,.5),f=Wc(l.anchorY,.5);.5===b&&.5===f||c.setAnchor(b,f),c.a("anchorX",Vc(l.anchorX)),c.a("anchorY",Vc(l.anchorY));}function Cc(c,l){var b=Wc(l.scaleX,1),f=Wc(l.scaleY,1);c.setScale(b,f),c.a("scaleX",Vc(l.scaleX)),c.a("scaleY",Vc(l.scaleY));}function tc(c,l){c.setClosePath(Wc(l.closePath,!1)),c.a("closePath",Vc(l.closePath));}function Fc(c,l,b,f){var n=Wc(l.rect),U=Wc(l.relative);n||(n=[0,0,b,f],U=!1);var $=n.length;if(4===$)n={x:n[0],y:n[1],width:n[2],height:n[3]},U&&(n.x*=b,n.y*=f,n.width*=b,n.height*=f);else if(3===$){var H=n[0];n={width:n[1],height:n[2]},U&&(n.width*=b,n.height*=f),"object"==(typeof H==="undefined"?"undefined":_typeof(H))?H.length&&(H={x:H[0],y:H[1]}):H=C(H,{x:0,y:0,width:b,height:f},n),n.x=H.x-n.width*c.getAnchor().x,n.y=H.y-n.height*c.getAnchor().y;}var L=Wc(l.offsetX);L&&(n.x+=L),L=Wc(l.offsetY),L&&(n.y+=L),n.width<0||n.height<0?c.p(n.x,n.y):c.setRect(n),c.a("rect",Vc(l.rect));}function Wc(c,l){var b=void 0;return b=Dc(c)&&c.func?c.value:c,void 0===b&&(b=l),b;}function Vc(c){if(Dc(c)&&c.func)return c.func;}function gc(c){if(Jc(c)){for(var l=new ht.List(),b=c.length,f=0;f<b;f+=2){l.add({x:c[f],y:c[f+1]});}c=l;}return c;}function wc(c){if(c instanceof ht.List&&(c=c.toArray()),Jc(c)){for(var l=[],b=0;b<c.length;b++){var f=c[b];l.push(f.x,f.y);}c=l;}return c;}function kc(c){var l=16;return{width:l,height:l,comps:[{type:function type(b,f,n,U,$){var H=ht.Default.getImage(c.graphView.getImage(U));if(H&&H.snapshotURL)H=ht.Default.getImage(H.snapshotURL),H&&o(b,H,"uniform",f.x,f.y,f.width,f.height,U,$);else{var L=H&&H.boundExtend?U.getRect():c.graphView.getDataUIBounds(U);if(L&&L.width&&L.height){b.save();var e=Math.min(1,l/Math.max(L.width,L.height));b.translate(-L.x*e+(l-L.width*e)/2,-L.y*e+(l-L.height*e)/2),b.scale(e,e),c.graphView.drawData(b,U),b.restore();}}}}]};}function Kc(c,l){var b=16,f=c.graphView.getEdgeInfo(l);if(!f)return Ub;var n=f.edgeTypeInfo,U=void 0,$=void 0;if(!f.type||f.points){f.sourcePoint.x,f.sourcePoint.y,f.targetPoint.x,f.targetPoint.y;f.type?(U=new ht.List(f.sourcePoint),U.addAll(f.points),U.add(f.targetPoint),$=f.segments):f.looped?(U=Hb,$=Lb):U=f.center?[f.c1,f.sourcePoint,f.targetPoint,f.c2]:[f.sourcePoint,f.targetPoint];}else n&&(U=n.points,$=n.segments);var H=N(U);if(!H||!H.width&&!H.height)return Ub;var L=function(){var c=Math.max(1,Math.max(H.width,H.height)/b),l=[],n=(b-H.width/c)/2,L=(b-H.height/c)/2;U instanceof ht.List&&(U=U.toArray()),U.forEach(function(b){l.push((b.x-H.x)/c+n,(b.y-H.y)/c+L);});var e=$?$.toArray():null;return{v:{width:b,height:b,comps:[{type:"shape",points:l,segments:e,borderWidth:1,borderColor:f.color,borderCap:f.cap,borderJoin:f.join}]}};}();return"object"==(typeof L==="undefined"?"undefined":_typeof(L))?L.v:void 0;}function xc(c){var l=16,b=N(c.getPoints());if(b&&(b.width||b.height)){var f=function(){var f=Math.max(1,Math.max(b.width,b.height)/l),n=[],U=(l-b.width/f)/2,$=(l-b.height/f)/2;c.getPoints().each(function(c){n.push((c.x-b.x)/f+U,(c.y-b.y)/f+$);});var H=c.getSegments()?c.getSegments().toArray():null;return{v:{width:l,height:l,comps:[{type:"shape",points:n,segments:H,rotation:c.getRotation(),background:c.s("shape.background"),repeatImage:c.s("shape.repeat.image"),borderWidth:c.s("shape.border.width")?1:0,borderColor:c.s("shape.border.color"),borderCap:c.s("shape.border.cap"),borderJoin:c.s("shape.border.join"),gradient:c.s("shape.gradient"),gradientColor:c.s("shape.gradient.color"),closePath:c.isClosePath()}]}};}();if("object"==(typeof f==="undefined"?"undefined":_typeof(f)))return f.v;}return Ub;}function Gc(c){return ht.Default.isInput(c);}function zc(c,l){var b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=b.nullable,U=void 0===f||f,$=b.trim,H=void 0!==$&&$,L=b.cancellable,e=void 0===L||L,I=b.width,Y=void 0===I?300:I,D=b.height,T=void 0===D?120:D,J=b.maxLength,y=void 0===J?-1:J,m=b.checkFunc,Q=void 0===m?void 0:m,B=arguments[3],p=new xl();p.addRow([{id:"input",textField:{text:l}}],[.1]);var i=new Kl(),Z=[],a=null,j=null;a=function a(){var c=p.v("input");return H&&c&&c.trim(),U!==!1||c?y>0&&c&&c.length>y?void sc(null,n("editor.inputmax"),function(){}):Q&&!(c=Q(c))?void sc(null,n("editor.invalidinput"),function(){}):(B(c,"ok"),void i.hide()):void sc(null,n("editor.inputempty"),function(){});},Z.push({label:n("editor.ok"),action:a}),e&&(j=function j(){B(l,"cancel"),i.hide();},Z.push({label:n("editor.cancel"),action:j})),i.setConfig({title:c,draggable:!0,width:Y,height:T,contentPadding:10,content:p,buttons:Z,buttonsAlign:"right"}),i.$49$=j,i.$48$=a,i.show(),p.getViewById("input").getElement()._ignore=!0,p.getViewById("input").setFocus();}function sc(c,l,b,f){var U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300,$=[],H=void 0,L=void 0;b&&(H=function H(){e.hide(),b();},$.push({label:n("editor.ok"),action:H})),f&&(L=function L(){e.hide(),f();},$.push({label:n("editor.cancel"),action:L}));var e=new Kl({title:c||n("editor.prompt"),contentPadding:20,width:U,draggable:!0,content:"<p>"+l+"</p>",buttons:$});e.$49$=L||H,e.$48$=H,e.show();}function Mc(c,l,b,f){var n={unfocusable:!0,id:c,toolTip:l},U=ht.Default.getImage(b),$=U?U.width:16,H=U?U.height:16;return n.icon={width:$+8,height:H+8,fitSize:!!U&&U.fitSize,comps:[{type:"rect",background:{func:function func(c,l){return l.getCurrentItem()===n?Gl.config.color_hover:null;}},rect:[0,0,$+8,H+8]},{type:"image",name:b,color:{func:function func(c,l){return f&&f()?Gl.config.color_select:Gl.config.color_dark;}},rect:[4,4,$,H]}]},n;}function _c(c,l){var b=ht.Default.createDiv(!0);return b.style.font=ht.Default.labelFont,b.style.color=ht.Default.labelColor,b.style.paddingLeft="4px",b.style.lineHeight=ht.Default.widgetRowHeight+"px",b.style.whiteSpace="nowrap",b.innerHTML=c,l&&(b.style.textAlign=l),b;}function Rc(c,l,b,f){var n=new ht.widget.Button();return n.setLabel(c),n.setLabelColor(ht.Default.labelColor),n.setLabelSelectColor(Gl.config.color_select),n.setIcon(b),n.setBackground(null),n.setBorderColor(null),f&&(n.onClicked=f),l&&(n.setToolTip(l),n.enableToolTip()),n.getCurrentBackground=function(){return this._hover||this.isPressed()?Gl.config.color_hover:null;},n.getCurrentBorderColor=function(){return this.isSelected()?Gl.config.color_select:null;},n.getView().addEventListener("mouseenter",function(){n.isDisabled()||(n._hover=!0,n.iv());},!1),n.getView().addEventListener("mouseleave",function(){n.isDisabled()||(n._hover=!1,n.iv());},!1),n;}function oc(c,l){var b=ht.Default.getImage(c);if(!b)throw c;var f={width:b.width,height:b.height,fitSize:b.fitSize,comps:[{type:"image",name:c,color:{func:function func(){return l&&l()?Gl.config.color_select:Gl.config.color_dark;}}}]},n=c+".state";return ht.Default.setImage(n,f),n;}function rc(c,l,b){var f=new FileReader();f.onloadend=function(c){l(c.target.result);},b?f.readAsDataURL(c):f.readAsText(c);}function dc(c,l){l&&!function(){l===document.body&&(document.title=n("editor.title"),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"),l.appendChild(c.getView());var b=c.getView().style;b.left="0px",b.top="0px",setInterval(function(){if(c.getView()!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){var f=void 0,n=void 0;l===document.body?(f=document.documentElement.clientWidth,window.innerWidth&&window.innerWidth<f&&(f=window.innerWidth),n=document.documentElement.clientHeight,window.innerHeight&&window.innerHeight<n&&(n=window.innerHeight)):(f=l.clientWidth,n=l.clientHeight),f===c._oldWidth&&n===c._oldHeight||(c._oldWidth=f,c._oldHeight=n,b.width=f+"px",b.height=n+"px",c.iv());}},500);}();}function Sc(c){if(c)for(var l=0;l<c.length;l++){null==c[l]&&(c[l]=0);}}function Ec(c){if(c)for(var l=ht.Color.chart,b=0;b<c.length;b++){null==c[b]&&(c[b]=l[b%l.length]);}}function qc(c,l){l=void 0===l?c?c.length:0:l;for(var b=new Array(l),f=0;f<l;f++){b[f]=c?c[f]:void 0;}return b;}function Pc(c){if(c instanceof ht.graph.GraphView){var l=c.getContentRect(),b=Math.max(l.width,l.height),f=Math.min(1,Gl.config.imageSize/b);return b<3&&(f=Gl.config.imageSize/b),c.toDataURL(void 0,void 0,f);}var n=ht.Default.getImage(c),U=Math.max(n.width,n.height),$=Math.min(1,Gl.config.imageSize/U);return ht.Default.toCanvas(c,n.width*$,n.height*$).toDataURL("image/png",1);}function Oc(c,l,b){if(c instanceof Array)for(var f=0,n=c.length;f<n;f++){Oc(c[f],l,b);}else if(c instanceof Object)for(var U in c){if(c.hasOwnProperty(U)){var $=c[U];if(!Dc($))continue;if(Yc($.func)&&bb.test($.func)){var H=$.func.slice(5);l&&void 0===l[H]&&(l[H]=U),b&&void 0===b[H]&&(b[H]=$.value);}else Oc($,l,b);}}}function cl(c){var l={clazz:this.getClass(),name:this.getName(),displayName:this.getDisplayName(),toolTip:this.getToolTip(),tag:this.getTag(),icon:this.getIcon(),layer:this.getLayer(),parent:c.$58$(this.getParent()),a:{},s:{},dataBindings:this.getDataBindings()?t(this.getDataBindings()):null},f=this.getStyleMap();for(var n in f){l.s[n]=b(this.s(n));}var U=this.getAttrObject();for(var $ in U){l.a[$]=b(this.a($));}return l;}function ll(c,l){var f=new c.clazz();if(Gl.config.cloneName&&f.setName(c.name),Gl.config.cloneDisplayName&&f.setDisplayName(c.displayName),Gl.config.cloneToolTip&&f.setToolTip(c.toolTip),Gl.config.cloneTag&&f.setTag(c.tag),Gl.config.cloneIcon&&f.setIcon(c.icon),Gl.config.cloneLayer&&f.setLayer(c.layer),Gl.config.cloneStyle)for(var n in c.s){f.s(n,b(c.s[n]));}if(Gl.config.cloneAttr)for(var U in c.a){f.a(U,b(c.a[U]));}return Gl.config.cloneDataBindings&&c.dataBindings&&f.setDataBindings(F(c.dataBindings)),f;}function bl(c,l,b){var f=Gl.config.cloneParent?l.$50$(c.parent,b):void 0;this.setParent(f?f:l.getCurrentSubGraph());}function fl(c){var l=cl.call(this,c);return l.rotation=this.getRotation(),l.position=this.p(),l.size={width:this._width,height:this._height},l.scale=this.getScale(),l.anchor=this.getAnchor(),l.image=this.getImage(),l.host=c.$58$(this.getHost()),l;}function nl(c,l){var b=ll(c,l);return Gl.config.cloneRotation&&b.setRotation(c.rotation),Gl.config.clonePosition&&b.setPosition(c.position),Gl.config.cloneSize&&b.setSize(c.size),Gl.config.cloneScale&&b.setScale(c.scale),.5===c.anchor.x&&.5===c.anchor.y||Gl.config.cloneAnchor&&b.setAnchor(c.anchor),Gl.config.cloneImage&&b.setImage(c.image),b;}function Ul(c,l,b){bl.call(this,c,l,b),Gl.config.cloneHost&&this.setHost(l.$50$(c.host,b));}function $l(c){var l=cl.call(this,c);return l.source=c.$58$(this.getSource()),l.target=c.$58$(this.getTarget()),l;}function Hl(c,l){var b=ll(c,l);return b;}function Ll(c,l,b){bl.call(this,c,l,b),Gl.config.cloneSource&&this.setSource(l.$50$(c.source,b)),Gl.config.cloneTarget&&this.setTarget(l.$50$(c.target,b));}function el(c){var l=fl.call(this,c);return l.expanded=this.isExpanded(),l;}function Il(c,l){var b=nl(c,l);return Gl.config.cloneExpanded&&b.setExpanded(c.expanded),b;}function Yl(c){var l=fl.call(this,c);return l.points=b(this.getPoints()),l.segments=b(this.getSegments()),l.thickness=this.getThickness(),l.closePath=this.isClosePath(),l;}function Dl(c,l){var f=nl(c,l);return Gl.config.clonePoints&&f.setPoints(b(c.points)),Gl.config.cloneSegments&&f.setSegments(b(c.segments)),Gl.config.cloneThickness&&f.setThickness(c.thickness),Gl.config.cloneClosePath&&f.setClosePath(c.closePath),f;}function Tl(c){var l=fl.call(this,c);return l.clickThroughEnabled=this.isClickThroughEnabled(),l.syncSize=this.isSyncSize(),l;}function Jl(c,l){var b=nl(c,l);return Gl.config.cloneClickThroughEnabled&&b.setClickThroughEnabled(c.clickThroughEnabled),Gl.config.cloneSyncSize&&b.setSyncSize(c.syncSize),b;}function yl(c){var l=Tl.call(this,c);return l.ref=this.getRef(),l;}function ml(c,l){var b=Jl(c,l);return Gl.config.cloneRef&&b.setRef(c.ref),b;}function Ql(c){if(!(c instanceof ht.Node))return null;if(c instanceof ht.Group||c instanceof ht.Grid||c instanceof ht.Block)return null;var l=void 0;if(c instanceof yb)l={type:"clip",points:b(c.getPoints()),segments:b(c.getSegments()),closePath:c.isClosePath()};else if(c instanceof mb)l={type:"restore"};else if(c instanceof ht.Shape)l={type:"shape",points:b(c.getPoints()),segments:b(c.getSegments()),closePath:c.isClosePath()};else if(c instanceof ht.Text)l={type:"text",text:c.s("text"),align:c.s("text.align"),vAlign:c.s("text.vAlign"),color:c.s("text.color"),font:c.s("text.font"),shadow:c.s("text.shadow"),shadowColor:c.s("text.shadow.color"),shadowBlur:c.s("text.shadow.blur"),shadowOffsetX:c.s("text.shadow.offset.x"),shadowOffsetY:c.s("text.shadow.offset.y")};else if(c instanceof ht.Node){var f=c.s("shape");f?(l={type:"node_shape",shape:c.s("shape")},"rect"===f?l.depth=c.s("shape.depth"):"roundRect"===f?l.polygonSide=c.s("shape.corner.radius"):"polygon"===f?l.polygonSide=c.s("shape.polygon.side"):"arc"===f&&(l.arcFrom=c.s("shape.arc.from"),l.arcTo=c.s("shape.arc.to"),l.arcClose=c.s("shape.arc.close"),l.arcOval=c.s("shape.arc.oval"))):c.getImage()&&(l={type:"node_image",image:c.getImage(),stretch:c.s("image.stretch"),color:c.s("body.color")});}return l&&(l.visible=c.s("2d.visible"),l.displayName=c.getDisplayName(),l.x=c.getPosition().x,l.y=c.getPosition().y,l.anchorX=c.getAnchor().x,l.anchorY=c.getAnchor().y,l.scaleX=c.getScale().x,l.scaleY=c.getScale().y,l.rotation=c.getRotation(),l.width=c._width,l.height=c._height,l.opacity=c.s("opacity"),"shape"!==l.type&&"node_shape"!==l.type||(l.background=c.s("shape.background"),l.repeatImage=c.s("shape.repeat.image"),l.borderWidth=c.s("shape.border.width"),l.borderColor=c.s("shape.border.color"),l.border3d=c.s("shape.border.3d"),l.border3dColor=c.s("shape.border.3d.color"),l.border3dAccuracy=c.s("shape.border.3d.accuracy"),l.borderCap=c.s("shape.border.cap"),l.borderJoin=c.s("shape.border.join"),l.borderPattern=c.s("shape.border.pattern"),l.gradient=c.s("shape.gradient"),l.gradientColor=c.s("shape.gradient.color"),l.dash=c.s("shape.dash"),l.dashPattern=c.s("shape.dash.pattern"),l.dashOffset=c.s("shape.dash.offset"),l.dashColor=c.s("shape.dash.color"),l.dashWidth=c.s("shape.dash.width"),l.dash3d=c.s("shape.dash.3d"),l.dash3dColor=c.s("shape.dash.3d.color"),l.dash3dAccuracy=c.s("shape.dash.3d.accuracy"),l.fillRule=c.s("shape.fill.rule"),l.fillClipDirection=c.s("shape.fill.clip.direction"),l.fillClipPercentage=c.s("shape.fill.clip.percentage"),l.gradientPack=b(c.s("shape.gradient.pack")),l.borderWidthAbsolute=c.s("shape.border.width.absolute"))),l;}function Bl(c,l){var f=void 0;if("clip"===c.type)l&&(f=new yb(),f.s("type","clip"),f.setPoints(c.points),f.setSegments(c.segments));else if("restore"===c.type)l&&(f=new mb(),f.s("type","restore"));else if("shape"===c.type)f=l?new Db():new ht.Shape(),f.s("type","shape"),f.setPoints(c.points),f.setSegments(c.segments),f.setClosePath(c.closePath);else if("node_shape"===c.type){f=l?new Yb():new ht.Node();var n=c.shape;f.s("shape",n),"rect"===n?f.s("shape.depth",c.depth):"roundRect"===n?f.s("shape.corner.radius",c.polygonSide):"polygon"===n?f.s("shape.polygon.side",c.polygonSide):"arc"===n&&(f.s("shape.arc.from",c.arcFrom),f.s("shape.arc.to",c.arcTo),f.s("shape.arc.close",c.arcClose),f.s("shape.arc.oval",c.arcOval));}else"node_image"===c.type?(l?(f=new Tb(),f.s("type","image"),f.s("image",c.image)):(f=new ht.Node(),f.setImage(c.image)),f.s("body.color",c.color)):"text"===c.type&&(f=l?new Jb():new ht.Text(),f.s("type","text"),f.s("text",c.text),f.s("text.align",c.align),f.s("text.vAlign",c.vAlign),f.s("text.color",c.color),f.s("text.font",c.font),f.s("text.shadow",c.shadow),f.s("text.shadow.color",c.shadowColor),f.s("text.shadow.blur",c.shadowBlur),f.s("text.shadow.offset.x",c.shadowOffsetX),f.s("text.shadow.offset.y",c.shadowOffsetY));return f?(f.s("2d.visible",c.visible),f.setDisplayName(c.displayName),f.setPosition(c.x,c.y),.5===c.anchorX&&.5===c.anchorY||f.setAnchor(c.anchorX,c.anchorY),f.setScale(c.scaleX,c.scaleY),f.setRotation(c.rotation),f.setSize(c.width,c.height),f.s("opacity",c.opacity),"shape"!==c.type&&"node_shape"!==c.type||(f.s("shape.background",c.background),f.s("shape.repeat.image",c.repeatImage),f.s("shape.border.width",c.borderWidth),f.s("shape.border.color",c.borderColor),f.s("shape.border.3d",c.border3d),f.s("shape.border.3d.color",c.border3dColor),f.s("shape.border.3d.accuracy",c.border3dAccuracy),f.s("shape.border.cap",c.borderCap),f.s("shape.border.join",c.borderJoin),f.s("shape.border.pattern",c.borderPattern),f.s("shape.gradient",c.gradient),f.s("shape.gradient.color",c.gradientColor),f.s("shape.dash",c.dash),f.s("shape.dash.pattern",c.dashPattern),f.s("shape.dash.offset",c.dashOffset),f.s("shape.dash.color",c.dashColor),f.s("shape.dash.width",c.dashWidth),f.s("shape.dash.3d",c.dash3d),f.s("shape.dash.3d.color",c.dash3dColor),f.s("shape.dash.3d.accuracy",c.dash3dAccuracy),f.s("shape.fill.rule",c.fillRule),f.s("shape.fill.clip.direction",c.fillClipDirection),f.s("shape.fill.clip.percentage",c.fillClipPercentage),f.s("shape.gradient.pack",b(c.gradientPack)),f.s("shape.border.width.absolute",c.borderWidthAbsolute)),f):null;}function pl(c,l){var b=void 0,f=l?l.dm:null,n=f?f.a("width"):100,U=f?f.a("height"):100,$=Wc(c.type);if(Yc($)){var H=Yf[$];H?b=new H(c,n,U):Uc($)&&(b=new rb(c,n,U));}else b=new If(c,n,U);return b&&l&&l.addData(b,!0),b;}function il(c,l){c.s("chart.series")||c.s("chart.series",[]);var b=c.s("chart.series");b[0]||(b[0]={});var f=b[0];return f.values||(f.values=[]),f.colors||(f.colors=[]),f[l];}function Zl(c,l){return Wc(il(c,l));}function al(c,l){return Vc(il(c,l));}function jl(){var c=Gl.config.customProperties.display;c&&c.length&&c.forEach(function(c){var l=(c.accessType||"a")+":"+c.property;$b.display[l]=!0;}),c=Gl.config.customProperties.data,c&&c.length&&c.forEach(function(c){var l=(c.accessType||"a")+":"+c.property;$b.data[l]=!0;}),c=Gl.config.customProperties.symbol,c&&c.length&&c.forEach(function(c){$b.symbol[c.property]=!0;}),c=Gl.config.customProperties.comp,c&&c.length&&c.forEach(function(c){$b.comp[c.property]=!0;});}function ul(){var c=Gl.config,l=Gl.consts,b=function b(l,_b2){void 0===c.valueTypes[l]&&(_b2.name="editor.valuetype."+l.toLowerCase(),c.valueTypes[l]=_b2);};b("String",{type:"string"}),b("Image",{type:"image"}),b("URL",{type:"url"}),b("Multiline",{type:"multiline",rows:1}),b("Font",{type:"font"}),b("Angle",{type:"number",angle:!0}),b("Int",{type:"int",step:1}),b("PositiveNumber",{type:"number",step:1,min:0}),b("Number",{type:"number",step:1}),b("Color",{type:"color"}),b("Boolean",{type:"boolean"}),b("Function",{type:"function"}),b("Object",{type:"object"}),b("ObjectArray",{type:"objectArray",rows:3}),b("StringArray",{type:"stringArray",rows:3}),b("NumberArray",{type:"numberArray",rows:3}),b("ColorArray",{type:"colorArray",rows:3}),b("Opacity",{type:"number",min:0,max:1,step:.01}),b("Percentage",{type:"number",min:0,max:1,step:.01}),b("Gradient",{type:"enum",values:c.gradients,icons:c.gradientIcons,dropDownWidth:140}),b("FillRule",{type:"enum",values:l.fillRules,labels:l.fillRuleLabels}),b("ClipDirection",{type:"enum",values:l.clipDirections,labels:l.clipDirectionLabels}),b("CapStyle",{type:"enum",values:l.caps,labels:l.capLabels}),b("JoinStyle",{type:"enum",values:l.joins,labels:l.joinLabels}),b("Align",{type:"enum",values:l.aligns,labels:l.alignLabels}),b("VAlign",{type:"enum",values:l.vAligns,labels:l.vAlignLabels}),b("Stretch",{type:"enum",values:l.stretchs,labels:l.stretchLabels}),b("Direction",{type:"enum",values:l.directions,labels:l.directionLabels}),b("Orientation",{type:"enum",values:l.orientations,labels:l.orientationLabels}),b("ColumnChart",{type:"enum",values:l.columnChartTypes,labels:l.columnChartTypeLabels}),l.valueTypes=[],l.valueTypeLabels=[];var f=function f(c){var b=Gl.config.valueTypes[c];b.type&&(l.valueTypes.push(c),l.valueTypeLabels.push(n(b.name)||n(c)),"enum"===b.type&&b.i18nLabels&&!b.labels&&(b.labels=[],b.i18nLabels.forEach(function(c){b.labels.push(n(c));})));};for(var U in Gl.config.valueTypes){f(U);}}function Xl(){var c=Gl.consts={};c.edgeTypes=[void 0,"points"].concat(Object.keys(ht.Default.getEdgeTypeMap())),c.aligns=["left","center","right"],c.alignLabels=[n("editor.align.left"),n("editor.align.center"),n("editor.align.right")],c.vAligns=["top","middle","bottom"],c.vAlignLabels=[n("editor.valign.top"),n("editor.valign.middle"),n("editor.valign.bottom")],c.stretchs=["fill","uniform","centerUniform"],c.stretchLabels=[n("editor.stretch.fill"),n("editor.stretch.uniform"),n("editor.stretch.centeruniform")],c.fillRules=["nonzero","evenodd"],c.fillRuleLabels=[n("editor.nonzero"),n("editor.evenodd")],c.clipDirections=["top","bottom","left","right"],c.clipDirectionLabels=[n("editor.clipdirection.top"),n("editor.clipdirection.bottom"),n("editor.clipdirection.left"),n("editor.clipdirection.right")],c.caps=["butt","round","square"],c.capLabels=[n("editor.cap.butt"),n("editor.cap.round"),n("editor.cap.square")],c.joins=["bevel","round","miter"],c.joinLabels=[n("editor.join.bevel"),n("editor.join.round"),n("editor.join.miter")],c.directions=["h","v"],c.directionLabels=[n("editor.direction.h"),n("editor.direction.v")],c.orientations=["top","right","bottom","left"],c.orientationLabels=[n("editor.orientation.top"),n("editor.orientation.right"),n("editor.orientation.bottom"),n("editor.orientation.left")],c.columnChartTypes=["columnChart","stackedColumnChart","percentageColumnChart"],c.columnChartTypeLabels=[n("editor.columncharttype.columnchart"),n("editor.columncharttype.stackedcolumnchart"),n("editor.columncharttype.percentagecolumnchart")],c.gradients=Gl.config.gradients,c.shapes=[void 0,"rect","circle","oval","roundRect","star","pentagram","triangle","hexagon","pentagon","diamond","rightTriangle","parallelogram","trapezoid","polygon","arc"],c.shapeLabels=[],c.shapeIcons=[],c.shapes.forEach(function(l){l?(c.shapeLabels.push(n("editor.comptype."+l.toLowerCase())),c.shapeIcons.push({width:16,height:16,comps:[{type:l,rect:[2,4,12,8],borderWidth:1,borderColor:Gl.config.color_dark}]})):(c.shapeLabels.push(""),c.shapeIcons.push({width:16,height:16,comps:[]}));}),c.selectTypes=["shadow","rect","circle","oval","roundRect"],c.selectTypeLabels=[],c.selectTypeIcons=[],c.selectTypes.forEach(function(l){"shadow"===l?(c.selectTypeLabels.push(n("editor.shadow")),c.selectTypeIcons.push({width:16,height:16,comps:[]})):(c.selectTypeLabels.push(n("editor.comptype."+l.toLowerCase())),c.selectTypeIcons.push({width:16,height:16,comps:[{type:l,rect:[2,4,12,8],borderWidth:1,borderColor:Gl.config.color_dark}]}));}),c.displayConnectActionTypes=Gl.config.displayConnectActionTypes,c.displayConnectActionTypeLabels=[],c.displayConnectActionTypes.forEach(function(l){var b=l?l.toLowerCase():"none";c.displayConnectActionTypeLabels.push(n("editor.connectactiontype."+b,!0)||n(l));}),c.symbolConnectActionTypes=Gl.config.symbolConnectActionTypes,c.symbolConnectActionTypeLabels=[],c.symbolConnectActionTypes.forEach(function(l){var b=l?l.toLowerCase():"none";c.symbolConnectActionTypeLabels.push(n("editor.connectactiontype."+b,!0)||n(l));}),c.vLayoutValues=[void 0,"top","bottom","topbottom","center","scale"],c.vLayoutLabels=[n("editor.layout.none"),n("editor.layout.top"),n("editor.layout.bottom"),n("editor.layout.topbottom"),n("editor.layout.center"),n("editor.layout.scale")],c.hLayoutValues=[void 0,"left","right","leftright","center","scale"],c.hLayoutLabels=[n("editor.layout.none"),n("editor.layout.left"),n("editor.layout.right"),n("editor.layout.leftright"),n("editor.layout.center"),n("editor.layout.scale")],c.fullscreenValues=[void 0,"fill","uniform"],c.fullscreenLabels=[n("editor.layout.none"),n("editor.stretch.fill"),n("editor.stretch.uniform")],c.fullscreenLockValues=[!1,"h","v"],c.fullscreenLockLabels=[n("editor.layout.none"),n("editor.direction.h"),n("editor.direction.v")];}String.prototype.startsWith||(String.prototype.startsWith=function(c,l){return l=l||0,this.substr(l,c.length)===c;}),String.prototype.endsWith||(String.prototype.endsWith=function(c,l){var b=this.toString();("number"!=typeof l||!isFinite(l)||Math.floor(l)!==l||l>b.length)&&(l=b.length),l-=c.length;var f=b.lastIndexOf(c,l);return f!==-1&&f===l;});var Al=window.hteditor_config||{},vl=function vl(c,l){void 0===Al[c]&&(Al[c]=l);};vl("color_select","#45C4F9"),vl("color_select_dark","#39B0E4"),vl("color_pane","#FCFCFC"),vl("color_pane_dark","#F7F7F7"),vl("color_line","#E4E4E4"),vl("color_dark","#2C2C2C"),vl("color_light","white"),vl("color_data_border","#979797"),vl("color_data_background","#D8D8D8"),vl("color_transparent","rgba(70,70,70,0.4)"),vl("color_disabled","#8C8C8C"),vl("color_guide","red"),vl("color_hover","rgba(184,184,184,0.18)"),vl("color_mask","rgba(84,110,125,0.30)");var Nl=function(){var c=navigator.userAgent;return c.indexOf("compatible")>-1&&c.indexOf("MSIE")>-1||c.indexOf("Trident")>-1&&c.indexOf("rv:11.0")>-1;}();if(vl("host",window.location.hostname),vl("port",window.location.port),vl("locale","en"),vl("serviceClass","hteditor.WebSocketService"),vl("maxUndoRedoSteps",200),vl("inspectorTitleHeight",void 0),vl("smallFont","10px arial, sans-serif"),vl("boldFont","bold 12px arial, sans-serif"),vl("leftSplitViewPosition",260),vl("rightSplitViewPosition",-300),vl("mainSplitViewPosition",-320),vl("explorerSplitViewPosition",.4),vl("requestDelay",100),vl("imageSize",200),vl("fileSize",50),vl("maxFileSize",200),vl("dragImageSize",50),vl("dragImageOpacity",.7),vl("animate",!0),vl("fitPadding",20),vl("fitContentForDisplayView",!0),vl("fitContentForSymbolView",!0),vl("rulerSize",16),vl("edgeLoop",!0),vl("pasteOffset",5),vl("continuousLayout",!0),vl("maxZoom",50),vl("minZoom",.01),vl("detailFilter",{}),vl("compactFilter",{}),vl("customProperties",{}),vl("rulerEnabled",!0),vl("gridEnabled",!1),vl("displayGridBlockSize",40),vl("displayGridThickLinesEvery",10),vl("displayGridThickColor","rgb(191, 191, 191)"),vl("displayGridLightColor","rgba(191, 191, 191, 0.4)"),vl("displayGridAngle",Math.PI/2),vl("displayGridRotation",0),vl("displayGridZoomThreshold",.25),vl("displayGridAlignmentGuideColor",Al.color_guide),vl("symbolGridBlockSize",1),vl("symbolGridThickLinesEvery",20),vl("symbolGridThickColor","rgb(191, 191, 191)"),vl("symbolGridLightColor","rgba(191, 191, 191, 0.2)"),vl("symbolGridAngle",Math.PI/2),vl("symbolGridRotation",0),vl("symbolGridZoomThreshold",.25),vl("symbolGridAlignmentGuideColor",Al.color_guide),vl("maxStringLength",1e6),vl("maxFileNameLength",100),vl("traceMissingI18n",!1),vl("container",void 0),vl("continuousCreating",!1),vl("valueTypes",{}),vl("indent","zh"===Al.locale?90:110),vl("indent2",70),vl("clearDataBindingsBeforeImporting",!0),vl("insertDisplayViewAsRefGraph",!1),vl("displayPreviewURL","display.html"),vl("symbolPreviewURL","symbol.html"),vl("removeFileByKeyboardEnabled",!1),vl("locateFileEnabled",!0),vl("promptBeforeClosing",!0),vl("displaysVisible",!0),vl("symbolsVisible",!0),vl("componentsVisible",!0),vl("scenesVisible",!1),vl("modelsVisible",!1),vl("assetsVisible",!0),vl("displaysEditable",!0),vl("symbolsEditable",!0),vl("componentsEditable",!0),vl("scenesEditable",!0),vl("modelsEditable",!0),vl("assetsEditable",!0),vl("settingDefaultValueBeforeSaving",!1),vl("svgSegments",20),vl("importConfirm",!0),vl("newIfFailToOpen",!0),vl("dataBindings",{}),vl("dataBindingsForSymbol",{}),vl("useCodeEditor",!Nl),vl("codeEditorClass","hteditor.CodeEditor"),vl("fontPreview","Hightopo"),vl("checkForFileChanges",!0),vl("checkForFileChangesInterval",3e3),vl("rotateAsClock",!1),vl("cloneAttr",!0),vl("cloneStyle",!0),vl("cloneName",!0),vl("cloneDisplayName",!0),vl("cloneToolTip",!0),vl("cloneTag",!1),vl("cloneIcon",!0),vl("cloneLayer",!0),vl("cloneParent",!0),vl("cloneDataBindings",!0),vl("cloneSource",!0),vl("cloneTarget",!0),vl("cloneExpanded",!0),vl("cloneClickThroughEnabled",!0),vl("cloneSyncSize",!0),vl("cloneRef",!0),vl("clonePoints",!0),vl("cloneSegments",!0),vl("cloneThickness",!0),vl("cloneClosePath",!0),vl("cloneRotation",!0),vl("clonePosition",!0),vl("cloneSize",!0),vl("cloneScale",!0),vl("cloneAnchor",!0),vl("cloneImage",!0),vl("cloneHost",!0),vl("isOpenable",null),vl("dialogTitleBackground",null),vl("componentViewSize",{width:700,height:500}),vl("eventViewSize",{width:500,height:400}),vl("fontViewSize",{width:500,height:400}),vl("functionViewSize",{width:500,height:400}),vl("objectViewSize",{width:500,height:400}),vl("textViewSize",{width:500,height:400}),vl("drawAccordionTitle",null),vl("accordionMutex",!1),vl("importDataBindingsButtonVisible",!0),vl("saveSymbolCustomPropertyDefaultValue",!1),vl("saveCompCustomPropertyDefaultValue",!1),vl("explorerMode","treeList"),vl("isDataBound",function(c,l,b){var f=c.getDataBindings();return f&&f[l]&&f[l][b];}),vl("checkFileName",function(c){return!!c&&(c=c.trim(),!!c&&!/[!@?#$%^&*\/]/.test(c)&&c);}),vl("paletteColors",[["rgb(51,153,255)","#60ACFC","#32D3EB","rgb(93,217,174)","rgb(125,195,125)","rgb(255,235,195)","rgb(226,250,87)"],["#FEB64D","#FF7C7C","rgb(241,125,164)","rgb(204,104,166)","rgb(135,144,204)","rgb(145,115,205)","rgb(124,145,155)"],["rgb(48,242,120)","rgb(0,199,7)","rgb(242,83,75)","rgb(212,0,0)","rgb(240,225,19)","rgb(247,247,247)","rgb(61,61,61)"]]),vl("gradients",[null,"linear.southwest","linear.southeast","linear.northwest","linear.northeast","linear.north","linear.south","linear.west","linear.east","radial.center","radial.southwest","radial.southeast","radial.northwest","radial.northeast","radial.north","radial.south","radial.west","radial.east","spread.horizontal","spread.vertical","spread.diagonal","spread.antidiagonal","spread.north","spread.south","spread.west","spread.east"]),Al.gradientIcons||(Al.gradientIcons=[],Al.gradients.forEach(function(c){c?Al.gradientIcons.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:c,gradientColor:Al.color_line,background:Al.color_dark}]}):Al.gradientIcons.push({width:20,height:14,comps:[]});})),vl("fontList",["SimSun","NSimSun","FangSong","KaiTi","FangSong_GB2312","Microsoft YaHei","cursive","monospace","serif","sans-serif","fantasy","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Bookman Old Style","Bradley Hand ITC","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Georgia","Gentium","Impact","King","Lucida Console","Lalit","Modena","Monotype Corsiva","Papyrus","Tahoma","TeX","Times","Times New Roman","Trebuchet MS","Verdana","Verona"]),vl("expandedTitles",{}),["TitleBasic","TitleCustom","TitleBackground","TitleBorder","TitleText","TitleImage","TitleNode","TitleGroupBasic","TitleEdgeBasic","TitleArc","TitleDataBinding","TitleComponent","TitleShapeBackground","TitleShapeBorder","TitleGroupTitle","TitleEditingPoint","TitleChart","TitleLayout","TitleNodeLayout"].forEach(function(c){null==Al.expandedTitles[c]&&(Al.expandedTitles[c]=!0);}),ht.Default.handleUnfoundImage=function(c,l){return ht.Default.getImage("editor.unknown");},vl("displayConnectActionType",null),vl("symbolConnectActionType",null),vl("displayConnectActionTypes",[null,"copyStyle","host","parent"]),vl("symbolConnectActionTypes",[null,"copyStyle"]),vl("appendDisplayConnectActionTypes",null),vl("appendSymbolConnectActionTypes",null),vl("appendConnectActions",null),vl("connectActions",{copyStyle:{action:function action(c,l,f){if(f){var n=f.getStyleMap();for(var U in n){"shape"!==U&&"label"!==U&&"label2"!==U&&"note"!==U&&"note2"!==U&&"text"!==U&&l.s(U,b(n[U]));}}},extraInfo:{visible:function visible(c){return!0;}}},host:{action:function action(c,l,b){l instanceof ht.Node&&b instanceof ht.Node&&l.setHost(b);},extraInfo:{delete:{visible:function visible(c){return c.sm().ld()instanceof ht.Node&&c.sm().ld().getHost();},action:function action(c,l){l instanceof ht.Node&&l.setHost(void 0);}},visible:function visible(c){return c.sm().ld()instanceof ht.Node;}}},parent:{action:function action(c,l,b){b&&l.setParent(b);},extraInfo:{delete:{visible:function visible(c){return c.sm().ld().getParent();},action:function action(c,l){l.setParent(void 0);}},visible:function visible(c){return!0;}}}}),Al.appendDisplayConnectActionTypes&&Al.appendDisplayConnectActionTypes.forEach(function(c){Al.displayConnectActionTypes.push(c);}),Al.appendSymbolConnectActionTypes&&Al.appendSymbolConnectActionTypes.forEach(function(c){Al.symbolConnectActionTypes.push(c);}),Al.appendConnectActions)for(var hl in Al.appendConnectActions){Al.connectActions[hl]=Al.appendConnectActions[hl];}for(var Cl in Al.connectActions){var tl=Al.connectActions[Cl];ht.Default.setConnectAction(Cl,tl.action,tl.extraInfo);}var Fl=ht.Default.getToolTipDiv();Fl.style.color=Al.color_dark,Fl.style.background=Al.color_pane,ht.widget.ColorPicker.prototype._paletteColors=Al.paletteColors,ht.graph.GraphView.prototype._scrollBarColor=Al.color_transparent,ht.graph.GraphView.prototype._rectSelectBackground=Al.color_transparent,ht.graph.GraphView.prototype._rectSelectBorderColor=Al.color_select,ht.graph.GraphView.prototype.isLabelVisible=function(){return!0;},ht.widget.ListView.prototype._scrollBarColor=Al.color_transparent,ht.widget.TreeView.prototype._scrollBarColor=Al.color_transparent,ht.widget.TableView.prototype._scrollBarColor=Al.color_transparent,ht.widget.TreeTableView.prototype._scrollBarColor=Al.color_transparent,ht.widget.PropertyView.prototype._scrollBarColor=Al.color_transparent,ht.widget.FormPane.prototype._scrollBarColor=Al.color_transparent,ht.widget.SplitView.prototype._dividerBackground=Al.color_line,ht.widget.SplitView.prototype._continuousLayout=Al.continuousLayout,ht.widget.ListView.prototype._selectBackground=Al.color_select,ht.widget.TreeView.prototype._selectBackground=Al.color_select,ht.widget.TableView.prototype._selectBackground=Al.color_select,ht.widget.TreeTableView.prototype._selectBackground=Al.color_select,ht.widget.TableHeader.prototype._columnLineColor=Al.color_line,ht.widget.TableHeader.prototype._insertColor=Al.color_select_dark,ht.widget.TableView.prototype._columnLineColor=Al.color_line,ht.widget.Toolbar.prototype._separatorColor=Al.color_line,ht.widget.Toolbar.prototype._itemGap=4,ht.widget.Button.prototype._labelColor=Al.color_light,ht.widget.Button.prototype._borderColor=null,ht.widget.Button.prototype._background=Al.color_select,ht.widget.Button.prototype._selectBackground=Al.color_select_dark,ht.widget.CheckBox.prototype._pressBackground=Al.color_pane_dark,ht.widget.ComboBox.prototype._selectBackground=Al.color_select,ht.widget.TabView.prototype._insertColor=Al.color_select_dark,ht.widget.TabView.prototype._selectWidth=0,ht.widget.TabView.prototype._selectBackground=Al.color_select,ht.widget.TabView.prototype._tabBackground=Al.color_dark;var Wl=ht.widget.TabView.prototype.drawTab;ht.widget.TabView.prototype.drawTab=function(c,l,b,f,n,U,$){return $=l==this.getCurrentTab()?Al.color_select:Al.color_dark,Wl.call(this,c,l,b,f,n,U,$);},ht.widget.FormPane.prototype._hPadding=4,ht.widget.FormPane.prototype._vPadding=4,ht.widget.FormPane.prototype._hGap=4,ht.widget.FormPane.prototype._vGap=4,ht.widget.Slider.prototype._background=Al.color_dark,ht.widget.Slider.prototype._leftBackground=Al.color_select,ht.widget.Slider.prototype._button={width:14,height:14,comps:[{type:"circle",rect:[0,0,14,14],borderWidth:1,borderColor:Al.color_dark,background:Al.color_pane_dark}]},ht.widget.ComboBox.prototype._dropDownIcon=ht.widget.MultiComboBox.prototype._dropDownIcon={width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:Al.color_dark}]},ht.Default.comboBoxBorderColor=Al.color_line,ht.Default.textFieldBorderColor=Al.color_line,ht.Default.contextMenuHoverBackground=Al.color_select,ht.Default.contextMenuSeparatorColor=Al.color_line,ht.Default.dialogTitleBackground=Al.dialogTitleBackground||Al.color_dark,ht.Default.dialogButtonBackground=Al.color_select,ht.Default.dialogButtonSelectBackground=Al.color_select_dark,ht.Default.dialogHeaderBackground=Al.color_pane_dark,ht.Default.toolbarBackground=Al.color_pane_dark,ht.Default.tableHeaderBackground=Al.color_pane_dark,ht.Default.contextMenuLabelFont=ht.Default.labelFont,ht.Default.contextMenuBorderRadius=0,ht.Default.contextMenuBorderColor=Al.color_line,ht.Default.contextMenuSubmenuMark=">&nbsp;",ht.Default.contextMenuCheckIcon={width:16,height:16,comps:[{type:"shape",points:[13,3,7,12,4,8],borderWidth:1,borderColor:Al.color_dark}]},ht.Default.setImage("radioOn",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:ht.Color.widgetIconBorder,background:"#FFF"},{type:"circle",rect:[4,4,8,8],background:Al.color_select}]}),ht.Default.setImage("expandIcon",{width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:Al.color_dark}]}),ht.Default.setImage("collapseIcon",{width:16,height:16,comps:[{type:"shape",points:[6,3,12,8,6,13],segments:[1,2,2],borderWidth:1,borderColor:Al.color_dark}]}),ht.widget.TreeView.prototype._expandIcon="expandIcon",ht.widget.TreeView.prototype._collapseIcon="collapseIcon",ht.widget.TreeTableView.prototype._expandIcon="expandIcon",ht.widget.TreeTableView.prototype._collapseIcon="collapseIcon",ht.widget.TextField.prototype.setEditable=ht.widget.TextArea.prototype.setEditable=function(c){var l=this._element;c?(l.removeAttribute("readonly"),l.style.color=ht.Default.labelColor):(l.setAttribute("readonly",!0),l.style.color=Al.color_disabled);},ht.Default.onElementCreated=function(c){("INPUT"===c.tagName&&"button"!==c.type||"TEXTAREA"===c.tagName)&&(c.style.border=Al.color_line+" solid 1px",c.style.outline=0,c.style.padding="2px","TEXTAREA"===c.tagName&&(c.style.whiteSpace="pre",c.setAttribute("spellcheck","false")),c.addEventListener("focus",function(l){c.oldBorder=c.style.border,c.style.border=Al.color_select+" solid 1px","INPUT"===c.tagName&&requestAnimationFrame(function(){c.select();}),"TEXTAREA"===c.tagName&&(c.style.zIndex="1");},!1),c.addEventListener("blur",function(l){c.style.border=c.oldBorder,"TEXTAREA"===c.tagName&&(c.style.zIndex="");},!1));},ht.Default.onWidgetColorPickerCreated=function(l){for(var b=Al.color_line+" solid 1px",f=l.getView(),n=f.querySelectorAll(".colorPalette"),U=0;U<n.length;U++){n[U].style.border=b;}f.querySelector(".satval").style.border=b,f.querySelector(".hue_image").style.border=b,f.querySelector(".preview").style.border=b,n=f.querySelectorAll('input[type="button"]');for(var $=0;$<n.length;$++){var H=n[$];H.style.border=b,H.style.background="none",H.style.outline="none",H.style.width="30px",H.addEventListener("mouseover",function(c){c.target.style.background=Al.color_hover;},!1),H.addEventListener("mouseout",function(){event.target.style.background="none";},!1);}n=f.querySelectorAll("span");for(var L=0;L<n.length;L++){c(l,f,n[L]);}},ht.Default.handleUnfoundImage=function(c,l){return ht.Default.getImage("editor.unknown");};var Vl=(function(){function c(c){this.value=c;}function l(l){function b(c,l){return new Promise(function(b,n){var H={key:c,arg:l,resolve:b,reject:n,next:null};$?$=$.next=H:(U=$=H,f(c,l));});}function f(b,U){try{var $=l[b](U),H=$.value;H instanceof c?Promise.resolve(H.value).then(function(c){f("next",c);},function(c){f("throw",c);}):n($.done?"return":"normal",$.value);}catch(c){n("throw",c);}}function n(c,l){switch(c){case"return":U.resolve({value:l,done:!0});break;case"throw":U.reject(l);break;default:U.resolve({value:l,done:!1});}U=U.next,U?f(U.key,U.arg):$=null;}var U,$;this._invoke=b,"function"!=typeof l.return&&(this.return=void 0);}return"function"==typeof Symbol&&Symbol.asyncIterator&&(l.prototype[Symbol.asyncIterator]=function(){return this;}),l.prototype.next=function(c){return this._invoke("next",c);},l.prototype.throw=function(c){return this._invoke("throw",c);},l.prototype.return=function(c){return this._invoke("return",c);},{wrap:function wrap(c){return function(){return new l(c.apply(this,arguments));};},await:function _await(l){return new c(l);}};}(),function(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function");}),gl=function(){function c(c,l){for(var b=0;b<l.length;b++){var f=l[b];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f);}}return function(l,b,f){return b&&c(l.prototype,b),f&&c(l,f),l;};}(),wl=function wl(c,l){if("function"!=typeof l&&null!==l)throw new TypeError("Super expression must either be null or a function, not "+(typeof l==="undefined"?"undefined":_typeof(l)));c.prototype=Object.create(l&&l.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(c,l):c.__proto__=l);},kl=function kl(c,l){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!l||"object"!=(typeof l==="undefined"?"undefined":_typeof(l))&&"function"!=typeof l?c:l;},Kl=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l.prototype.onShown=function(){nb.push(this);},l.prototype.onHidden=function(){U(nb,this);},l;}(ht.widget.Dialog),xl=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this,b));return f.getView().style.background=Gl.config.color_pane,f;}return wl(l,c),l.prototype.addLine=function(){this.addRow([],[.1],1.01,{background:Gl.config.color_line});},l.prototype.addTitle=function(c){var l=[{element:c,font:Gl.config.boldFont}],b={background:Gl.config.color_pane_dark};this.addRow(l,[.1],null,b);},l.prototype.getRowIndex=function(c){return this.getRows().indexOf(c);},l;}(ht.widget.FormPane),Gl={strings:{},customStrings:{},config:Al},zl=["onDown","onUp","onMove","onEnter","onHover","onLeave","onBeginDrag","onDrag","onEndDrag","onScroll"],sl="unknow",Ml="root",_l="dir",Rl="image",ol="symbol",rl="display",dl="component",Sl="model",El="scene",ql="tile",Pl="list",Ol="accordion",cb="normal",lb="error",bb=/^attr@/,fb=/firefox/.test(window.navigator.userAgent.toLowerCase()),nb=[],Ub={width:16,height:16,comps:[]},$b={display:{},symbol:{},data:{},comp:{}},Hb=new ht.List([{x:50,y:75},{x:25,y:75},{x:25,y:25},{x:75,y:25},{x:75,y:75},{x:65,y:60},{x:75,y:75},{x:85,y:60}]),Lb=new ht.List([1,2,2,2,2,2,1,2]),eb="0.3.1";ht.Default.setImage("check",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:Gl.config.color_line},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:{func:function func(c,l){return c&&l&&l.getRowSize&&l.isSelected&&l.isSelected(c)?Gl.config.color_line:Gl.config.color_select;}}}]}),ht.Default.setImage("uncheck",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:Gl.config.color_line}]}),ht.Default.setImage("text_icon",{width:16,height:16,comps:[{type:"shape",points:[3,14,8,2,13,14,5,9,11,9],segments:[1,2,2,1,2],borderColor:Gl.config.color_dark,borderWidth:1}]}),ht.Default.setImage("refGraph_icon",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:Gl.config.color_dark,rotation:.7854,points:[12.90381,7.59615,12.90381,7.59615,12.90381,4.61619,12.90381,3.59619,12.90381,2.57619,11.72047,1.59619,10.40381,1.59619,9.08714,1.59619,7.90381,2.61619,7.90381,3.59619,7.90381,4.35799,7.90381,7.59615,7.90381,7.59615,7.90381,7.59615,7.90381,9.59619,10.40381,9.59619],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:Gl.config.color_dark,rotation:-2.35619,points:[8.21091,12.28904,8.21091,12.28904,8.21091,9.30909,8.21091,8.28909,8.21091,7.26909,7.02758,6.28909,5.71091,6.28909,4.39425,6.28909,3.21091,7.30909,3.21091,8.28909,3.21091,9.05088,3.21091,12.28904,3.21091,12.28904,3.21091,12.28904,3.21091,14.28909,5.71091,14.28909],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unknown",{width:50,height:50,fitSize:!0,comps:[{type:"shape",points:[5,5,45,45],segments:[1,2],borderWidth:1,borderColor:"red"},{type:"shape",points:[5,45,45,5],segments:[1,2],borderWidth:1,borderColor:"red"}]}),ht.Default.setImage("editor.root",{width:30,height:30,fitSize:!0,comps:[{type:"shape",points:[23,8,8,23],segments:[1,2],borderWidth:1,borderColor:"white"}]}),ht.Default.setImage("editor.display",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:Gl.config.color_light,rect:[6,1,4,4.00837]},{type:"circle",borderWidth:1,borderColor:Gl.config.color_light,rect:[11,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:Gl.config.color_light,points:[2.98235,11.0795,2.98235,8,7.89475,8,7.89475,5.00837,7.89475,8,13,8,13,11]},{type:"circle",borderWidth:1,borderColor:Gl.config.color_light,rect:[1,10.99163,4,4.00837]}]}),ht.Default.setImage("editor.symbol",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:Gl.config.color_light,rect:[0,2,10,8]},{type:"rect",borderWidth:1,borderColor:Gl.config.color_light,rect:[5,6,10,8]}]}),ht.Default.setImage("editor.filter",{background:"rgb(130,130,130)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",closePath:!0,points:[2,1.5,14,1.5,9.50949,5.5,9.50949,9.5,13,9.5,9.50949,9.5,9.50949,11.5,12,11.5,9.50949,11.5,9.50949,14.5,6.5335,12.5,6.5335,5.5,2,1.5]}]}),ht.Default.setImage("editor.bind",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unbind",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:.7854,points:[13.49999,7.03553,13.49999,7.03553,13.49999,5.05554,13.49999,4.03553,13.49999,3.01553,12.31666,2.03553,10.99999,2.03553,9.68333,2.03553,8.49999,3.05553,8.49999,4.03553,8.49999,5.01553,8.49999,7.03553,8.49999,7.03553],segments:[1,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.92699,points:[7.28554,13.25761,7.28554,13.25761,7.28554,11.27761,7.28554,10.2576,7.28554,9.23761,6.1022,8.25761,4.78554,8.25761,3.46887,8.25761,2.28554,9.2776,2.28554,10.2576,2.28554,11.2376,2.28554,13.25761,2.28554,13.25761],segments:[1,4,4,4,4]}]}),ht.Default.setImage("editor.dircollapsed",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,204,153)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14.5,14.5,.5,14.5,.5,1.50001,6.5,1.50001,7.5,3.50001,14.5,3.50001,14.5,14.5]},{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.5,5.50001,14.5,5.50001,14.5,14.50001,.5,14.50001,.5,5.50001]}]}),ht.Default.setImage("editor.direxpanded",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(51,153,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.35891,10.47175,3.3125,6.30284,15.5,6.30284,13.625,14.5,.5,14.5,.5,1.5,6.125,1.5,7.0625,3.2289,12.6875,3.2289,12.6875,6.30284]}]}),ht.Default.setImage("editor.dir",{background:"rgb(227,227,227)",width:20,height:20,fitSize:!0,comps:[{type:"shape",background:"#FFCC99",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[19,4,19,18,1,18,1,2,8.71429,2,10,4,19,4]},{type:"rect",shadow:!0,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(255,255,255)",borderColor:"#979797",rotation:6.28319,rect:[2.98273,5.998,13.98346,9.99004]},{type:"shape",background:"rgba(255,255,153,0.3)",borderColor:"rgb(255,255,255)",borderCap:"round",points:[18,9,18,17,2,17,2,9,18,9]},{type:"rect",shadowColor:"rgb(0,0,0)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(232,230,230)",borderColor:"#979797",rotation:6.28319,rect:[4,7,11.98532,1.06039]}]}),ht.Default.setImage("editor.dxf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[25.13334,60.62742,20.38001,60.62742,20.11302,60.62742,19.89504,60.41688,19.89504,60.15453,19.89504,43.31796,19.89504,43.05561,20.11302,42.84507,20.38001,42.84507,25.13334,42.84507,30.66329,42.84507,33.35167,45.67873,33.35167,51.50916,33.35167,57.47593,30.51009,60.62742,25.13334,60.62742,25.13334,60.62742,23.32783,57.5939,25.03463,57.5939,28.43349,57.5939,29.82018,55.90554,29.82018,51.77117,29.82018,47.64415,28.35946,45.88193,24.93627,45.88193,23.32783,45.88193,23.32783,57.5939,23.32783,57.5939],segments:[1,2,4,2,4,2,4,4,2,1,2,4,4,2,2,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[48.10416,60.62742,45.1488,60.62742,44.97846,60.62742,44.82286,60.54254,44.73581,60.40217,40.95446,54.3465,37.26771,60.39482,37.1786,60.53886,37.01957,60.62776,36.84889,60.62776,34.01657,60.62776,33.84041,60.62776,33.67761,60.53552,33.59227,60.38379,33.50693,60.2324,33.51275,60.04759,33.60735,59.89987,39.05608,51.53522,33.90312,43.56961,33.80853,43.42557,33.8027,43.24076,33.88804,43.08937,33.97338,42.93797,34.13618,42.8454,34.31235,42.8454,37.31706,42.8454,37.4874,42.8454,37.64677,42.93396,37.73382,43.078,41.14399,48.68284,44.48219,43.08168,44.56924,42.93396,44.72861,42.84507,44.90272,42.84507,47.73299,42.84507,47.91121,42.84507,48.074,42.93731,48.15729,43.08903,48.24434,43.24042,48.2368,43.42524,48.14221,43.56928,43.03826,51.48342,48.51339,59.89987,48.60798,60.04759,48.61552,60.2324,48.52847,60.38379,48.44518,60.53485,48.28238,60.62742,48.10416,60.62742,48.10416,60.62742],segments:[1,2,4,2,2,4,2,4,4,2,2,4,4,2,4,2,2,4,2,4,4,2,2,4,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]}]}),ht.Default.setImage("editor.sound",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[29.93506,40.65719,29.93506,52.11129,29.99768,52.17391,38.01482,58.31199,38.01482,53.06642,38.01482,39.70982,38.01482,34.45641,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,44.44257,36.03797,44.44257,36.03797,43.87107,35.70912,43.69881,34.9732,44.02766,34.40163,44.37211,33.84573,45.10803,33.65787,45.66393,33.99448,47.80131,35.26287,49.59417,37.09491,50.81553,39.2714,52.01338,41.37743,52.71019,43.80448,52.71019,46.38028,52.71019,48.95608,52.01338,51.38313,50.81553,53.48924,49.59417,55.65789,47.80131,57.49777,45.66393,58.77392,45.10803,59.1262,44.37211,58.93834,44.02766,58.35901,43.69881,57.79528,43.87107,57.05152,44.44257,56.7305,46.24326,55.65789,47.71518,54.13119,48.7486,52.32266,49.73508,50.57675,50.30665,48.55685,50.30665,46.38812,50.30665,44.23514,49.72724,42.19948,48.7486,40.46141,47.71518,38.63721,46.23542,37.10275,44.44257,36.03797,44.44257,36.03797,44.44257,36.03797,28.49449,40.89991,28.49449,40.89991,23.62472,40.89991,23.62472,51.86073,28.49449,51.86073,28.49449,40.89991,28.49449,40.89991,28.49449,40.89991,28.80767,38.51197,28.80767,38.51197,38.42189,31.14469,38.64118,30.96459,38.91517,30.86286,39.21267,30.86286,39.88597,30.86286,40.41052,31.38741,40.41052,32.05287,40.41052,39.70982,40.41052,39.97605,41.53008,40.43014,42.47745,41.16606,43.21337,42.09776,44.14506,43.28777,44.7088,44.76753,44.7088,46.38812,44.7088,48.00879,44.1529,49.50414,43.21337,50.67856,42.50096,51.61017,41.53008,52.33834,40.41052,52.80027,40.41052,53.07426,40.41052,60.72336,40.41052,60.99743,40.32439,61.24015,40.1678,61.45936,39.76073,61.97607,39.01698,62.07788,38.50019,61.67073,28.82334,54.25651,22.46606,54.25651,22.43471,54.25651,21.77708,54.25651,21.23686,53.72412,21.23686,53.06642,21.23686,39.73333,21.23686,39.70982,21.23686,39.04435,21.76924,38.51197,22.43471,38.51197,28.80767,38.51197,28.80767,38.51197,28.80767,38.51197,40.40269,41.5497,40.40269,41.5497,40.40269,51.21878,41.06823,50.85858,41.62405,50.37322,42.08598,49.79381,42.8219,48.86219,43.26039,47.6721,43.26039,46.38812,43.26039,45.11197,42.81414,43.92196,42.08598,42.98243,41.62405,42.39526,41.06039,41.90982,40.40269,41.5497,40.40269,41.5497,40.40269,41.5497],segments:[1,2,2,2,2,2,2,2,2,2,2,1,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,1,2,2,2,2,2,2,2,1,2,2,4,4,2,2,4,4,4,4,2,2,4,4,2,2,2,4,2,2,4,2,2,2,1,2,2,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.video",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[34.79567,39.50193,35.8771,39.50193,36.86394,39.06777,37.56645,38.36518,38.28485,37.63888,38.7269,36.65212,38.7269,35.57851,38.7269,34.497,38.28485,33.51024,37.56645,32.80765,36.86394,32.08933,35.86927,31.6472,34.79567,31.6472,33.70626,31.6472,32.7274,32.08933,32.0169,32.80765,31.30641,33.51024,30.86435,34.497,30.86435,35.57851,30.86435,36.65212,31.30641,37.63888,32.0169,38.36518,32.7274,39.05987,33.71416,39.50193,34.79567,39.50193,34.79567,39.50193,34.79567,39.50193,33.03527,33.81021,33.03527,33.81021,33.47733,33.36816,34.10098,33.08399,34.79567,33.08399,35.48246,33.08399,36.0982,33.36816,36.54816,33.81021,36.99022,34.26807,37.27438,34.88382,37.27438,35.57061,37.27438,36.2574,36.99022,36.87315,36.54816,37.33101,36.0982,37.76524,35.48246,38.0494,34.79567,38.0494,34.10098,38.0494,33.47733,37.76524,33.03527,37.33101,32.59314,36.87315,32.31687,36.2574,32.31687,35.57061,32.31687,34.88382,32.59314,34.27598,33.03527,33.81021,33.03527,33.81021,33.03527,33.81021,38.719,42.35963,38.719,42.35963,39.05848,43.38583,39.77688,44.19107,40.6768,44.64103,42.60298,45.61989,44.97913,44.84625,45.95008,42.92007,46.40794,42.02015,46.53422,40.94655,46.17901,39.92027,45.86323,38.89408,45.14484,38.08884,44.23702,37.63888,43.33711,37.18892,42.2714,37.06264,41.24513,37.40995,40.21894,37.74943,39.39789,38.46775,38.95583,39.35984,38.49007,40.25185,38.3796,41.32546,38.719,42.35963,38.719,42.35963,38.719,42.35963,40.24257,40.02292,40.24257,40.02292,40.53471,39.44669,41.04781,38.99665,41.68726,38.77563,42.33454,38.5704,43.02923,38.64144,43.58184,38.93351,44.15808,39.22558,44.60803,39.72295,44.82124,40.38604,45.03436,41.03339,44.96332,41.70438,44.67907,42.28851,44.06341,43.50428,42.55557,43.98577,41.33198,43.3543,40.77937,43.07005,40.30578,42.56486,40.10048,41.9175,39.87945,41.25442,39.9663,40.58343,40.24257,40.02292,40.24257,40.02292,40.24257,40.02292,40.13209,46.26716,40.13209,46.26716,39.16114,46.10935,38.09543,46.33828,37.21915,46.96976,36.34286,47.61711,35.80606,48.54073,35.65607,49.5354,35.65607,49.5354,35.50608,50.53006,35.71929,51.57996,36.35076,52.46415,36.98231,53.33245,37.89803,53.86926,38.89269,54.02714,38.9243,54.02714,41.04781,54.38235,43.08447,52.8904,43.42395,50.76689,43.42395,50.75899,43.56604,49.76433,43.34501,48.71435,42.71346,47.84604,42.06618,46.96976,41.14256,46.42505,40.13209,46.26716,40.13209,46.26716,40.13209,46.26716,39.14533,52.60623,39.14533,52.60623,39.12953,52.59833,38.49797,52.49568,37.91384,52.1641,37.51912,51.61157,37.1244,51.05896,36.97441,50.38798,37.07706,49.75642,37.17181,49.13278,37.51912,48.54073,38.07172,48.13021,38.62433,47.73549,39.30322,47.60131,39.93469,47.69606,40.55044,47.79081,41.15046,48.13021,41.5451,48.69072,41.94772,49.24333,42.08981,49.91431,41.98724,50.53796,41.77403,51.87993,40.4794,52.81936,39.14533,52.60623,39.14533,52.60623,39.14533,52.60623,49.24984,57.84791,49.24984,57.84791,41.37939,57.84791,46.82629,55.31388,50.46553,49.76433,50.46553,43.63056,50.46553,39.30453,48.70514,35.38909,45.86323,32.54719,43.03714,29.72109,39.12162,27.9607,34.79567,27.9607,26.1594,27.9607,19.12572,34.99437,19.12572,43.63056,19.12572,47.94079,20.88612,51.87993,23.71222,54.69813,26.54622,57.54003,30.46963,59.30043,34.79567,59.30043,35.20611,59.30043,35.29296,59.30043,49.24984,59.30043,49.64456,59.30043,49.96816,58.96893,49.96816,58.57421,49.96816,58.17158,49.64456,57.84791,49.24984,57.84791,49.24984,57.84791,49.24984,57.84791,34.79567,56.88485,34.79567,56.88485,31.13271,56.88485,27.81723,55.39282,25.42528,53.00087,23.01761,50.5853,21.54138,47.28553,21.54138,43.62266,21.54138,36.34425,27.51725,30.36837,34.79567,30.36837,38.45064,30.36837,41.77403,31.8525,44.15808,34.25227,46.56583,36.64422,48.04206,39.96769,48.04206,43.62266,48.04206,47.28553,46.55793,50.6011,44.16598,53.00087,41.68726,55.48757,38.30856,56.88485,34.79567,56.88485,34.79567,56.88485,34.79567,56.88485,28.91446,44.64103,28.91446,44.64103,29.80655,44.18317,30.54067,43.38583,30.86435,42.35173,31.19593,41.32546,31.08538,40.25976,30.63542,39.35984,29.67237,37.44156,27.25672,36.66002,25.35424,37.63888,23.42015,38.62564,22.64651,41.00178,23.62545,42.92007,24.07541,43.81998,24.88057,44.53838,25.90684,44.86206,26.94884,45.20146,28.02245,45.09889,28.91446,44.64103,28.91446,44.64103,28.91446,44.64103,26.3647,43.51211,26.3647,43.51211,25.71735,43.29108,25.20425,42.82532,24.91218,42.28069,24.29643,41.0492,24.79373,39.54136,26.00942,38.92561,27.22519,38.30986,28.73294,38.79143,29.34869,40.02292,29.63286,40.59134,29.7118,41.25442,29.50658,41.90178,29.28555,42.54905,28.81979,43.06215,28.27509,43.34639,27.69877,43.63056,27.01198,43.71741,26.3647,43.51211,26.3647,43.51211,26.3647,43.51211,29.44344,46.26716,29.44344,46.26716,27.31195,46.59874,25.85153,48.61178,26.17521,50.72738,26.17521,50.75899,26.33309,51.75365,26.8778,52.69308,27.73828,53.32455,28.59876,53.9561,29.66447,54.17713,30.62752,54.02714,30.66703,54.01924,32.80634,53.67194,34.25886,51.66681,33.92728,49.52749,33.60361,47.39609,31.58275,45.94356,29.44344,46.26716,29.44344,46.26716,29.44344,46.26716,32.50637,49.75642,32.50637,49.75642,32.7274,51.1063,31.80378,52.39303,30.44593,52.60623,30.4223,52.61413,29.79865,52.7009,29.13557,52.55091,28.59086,52.14837,28.04616,51.75365,27.69877,51.15371,27.5962,50.53006,27.5962,50.50635,27.3909,49.17229,28.33032,47.90128,29.66447,47.69606,31.00644,47.48293,32.29317,48.40655,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,37.44808,43.63056,37.44808,43.63056,37.44808,42.89644,37.1481,42.22537,36.67444,41.75171,36.18497,41.27022,35.52189,40.96235,34.79567,40.96235,34.06147,40.96235,33.39048,41.27022,32.90891,41.75171,32.43525,42.23328,32.14318,42.89644,32.14318,43.63056,32.14318,44.36469,32.43525,45.02785,32.90891,45.50933,33.39838,45.983,34.06147,46.28297,34.79567,46.28297,36.25609,46.28297,37.44808,45.08308,37.44808,43.63056,37.44808,43.63056,37.44808,43.63056,34.79567,44.83835,34.79567,44.83835,34.45619,44.83835,34.14831,44.71207,33.93519,44.49104,33.71416,44.28574,33.5878,43.96997,33.5878,43.63846,33.5878,43.31479,33.71416,42.99901,33.93519,42.77798,34.14831,42.56486,34.45619,42.42277,34.79567,42.42277,35.11927,42.42277,35.42714,42.55695,35.64817,42.77798,35.86927,42.99901,36.01136,43.31479,36.01136,43.63846,36.01136,44.30155,35.46665,44.83835,34.79567,44.83835,34.79567,44.83835,34.79567,44.83835],segments:[1,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,2,4,4,2,4,2,4,4,2,2,1,2,2,4,4,4,4,4,4,4,2,2,1,2,2,4,4,4,4,4,4,2,2,2,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.flipx",{width:16,height:16,comps:[{type:"shape",points:[8,1,8,14],segments:[1,2],borderWidth:1,borderColor:Gl.config.color_dark},{type:"shape",points:[6,3,6,13,2,13],background:Gl.config.color_dark},{type:"shape",points:[10,3,10,13,14,13],background:Gl.config.color_select}]}),ht.Default.setImage("editor.flipy",{width:16,height:16,comps:[{type:"shape",points:[2,8,15,8],segments:[1,2],borderWidth:1,borderColor:Gl.config.color_dark},{type:"shape",points:[3,6,13,6,3,2],background:Gl.config.color_dark},{type:"shape",points:[3,10,13,10,3,14],background:Gl.config.color_select}]}),ht.Default.setImage("editor.resetsize",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[8,1,8,6,6,3,8,1,10,3,8,10,8,15,6,13,8,15,10,13,1,8,6,8,3,6,1,8,3,10,10,8,15,8,13,6,15,8,13,10],segments:[1,2,1,2,2,1,2,1,2,2,1,2,1,2,2,1,2,1,2,2]}]}),ht.Default.setImage("editor.func",{width:16,height:16,comps:[{type:"border",rect:[0,0,16,16],width:1,color:"#E4E4E4"},{type:"text",rect:[0,0,16,16],text:"F",align:"center",color:"black"}]}),ht.Default.setImage("editor.comp",{fitSize:!0,comps:[{type:{func:function func(c){return c.compType;},isSafeFunc:!0}}]}),ht.Default.setImage("editor.oops",{width:128,height:128,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",background:"rgb(237,237,237)",borderColor:"#979797",points:[34.08079,87.52544,34.08079,87.52544,59.57908,97.75645,77.79215,90.58303,96.00522,83.40961,106.8249,68.87436,109.71641,51.69689,109.71641,51.69689,117.89865,74.48774,101.34821,87.52544,84.79777,100.56314,59.50721,102.27801,46.42474,94.29524],segments:[1,4,4,4,4]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,36.49467,28.49791,18.12387]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,36.49467,28.49791,18.12387]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",points:[39.9814,51.13901,39.9814,51.13901,32.00842,57.90113,30.56723,66.4088,29.12604,74.91647,34.21664,85.16969,34.21664,85.16969,39.0516,89.44677,39.0516,89.44677,36.05169,79.68945,37.3999,70.48443,38.74811,61.27941,44.44444,52.62669,44.44444,52.62669,39.9814,51.13901,39.9814,51.13901],segments:[1,4,4,2,4,4,2,2]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",scaleX:-1,points:[97.67259,49.56003,97.67259,49.56003,89.6996,57.90113,88.25841,66.4088,86.81722,74.91647,91.8398,85.99598,91.8398,85.99598,96.74279,89.44677,96.74279,89.44677,93.74288,79.68945,95.09109,70.48443,96.4393,61.27941,102.44264,50.50641,102.44264,50.50641,97.67259,49.56003],segments:[1,4,4,2,4,4,2]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[59.61377,32.055,59.61377,32.055,61.61221,36.91182,59.19747,38.71578,56.78274,40.51974,34.08079,42.18493,34.08079,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[94.48806,32.055,94.48806,32.055,96.4865,36.91182,94.07177,38.71578,91.65703,40.51974,68.95508,42.18493,68.95508,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[67.02409,33.58143,67.02409,33.58143,64.9426,37.74441,67.02409,39.68714],segments:[1,4]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,40.07324,28.49791,11.89121]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,40.07323,28.49791,11.89121]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[60.89581,46.6003,56.70566,57.66949,39.6779,55.58118,39.6779,55.58118],segments:[1,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[90.173,46.6003,85.98284,57.66949,68.95508,55.58118,68.95508,55.58118],segments:[1,4]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[40.88134,45.66533,40.88134,50.44931,49.68823,51.31913,49.03586,45.66533,40.99007,45.5566]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[78.31735,45.66533,78.31735,50.44931,87.12423,51.31913,86.47187,45.66533,78.42607,45.5566]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[36.81151,80.08117,46.71402,84.60188,54.03326,76.42155,61.35251,85.46297,73.83828,76.20628,86.96987,83.95607,93.85858,76.85209,99.24038,80.08117]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",points:[95.58345,31.98512,95.58345,31.98512,104.33563,25.53184,105.97087,18.7394,107.6061,11.94695,113.65647,33.63444,105.97087,42.39888],segments:[1,4,4]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[44.41276,23.77714,38.68944,23.77714,33.30496,20.23699,28.88983,14.5401,24.47469,8.84321,22.55729,35.68983,32.04166,40.72938],segments:[1,4,4]},{type:"oval",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[93.19422,30.5138,93.19422,30.5138,96.32695,28.82985,99.04364,25.51534,100.63358,23.57553,102.08422,21.24706,102.68792,18.7394,104.32316,11.94695,112.13179,31.92062,104.44618,40.68506],segments:[1,4,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[40.62881,26.14647,34.90549,26.14647,32.31798,22.75803,27.90285,17.06114,23.48771,11.36426,18.41848,35.24736,27.90285,40.28692],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[91.52207,49.98659,1.67215,3.35736]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[39.44815,49.46033,2.86639,3.35736]}]}),ht.Default.setImage("editor.block",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15,14.5,1,14.5,1,1.50001,7,1.50001,8,3.50001,15,3.50001,15,14.5]},{type:"rect",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[5.5,7.22625,6,5]},{type:"circle",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[2.5,4.72625,6,5]}]}),ht.Default.setImage("editor.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.82964,11.54111,13.17036,11.54111,13.17036,13.12467,13.17036,5.20688,2.82964,5.20688,2.82964,13.12467,13.17036,13.12467,7.26137,13.12467,5.78413,15.5,10.21588,15.5,8.84426,13.12467,13.17036,13.12467,13.17036,11.54111]}]}),ht.Default.setImage("editor.subgraph",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[4.90316,8.05737,4.90316,8.05737,4.30121,6.50546,5.25104,5.82166,6.20086,5.13787,7.09165,5.82166,7.09165,5.82166,7.09165,5.82166,7.76857,4.36921,9.6391,4.91013,11.50964,5.45106,11.09684,8.05737,11.09684,8.05737,11.09684,8.05737,12.482,8.53031,12.482,9.79106,12.482,10.86629,11.67411,11.63079,11.09684,11.63079,4.90316,11.63079,4.31315,11.63079,3.518,10.84732,3.518,9.79106,3.518,8.56402,4.90316,8.05737,4.90316,8.05737],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[13,13.5,8.02409,13.5,8,9,8.02409,13.5,3,13.5]}]}),ht.Default.setImage("editor.restore",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.add",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",rotation:3.14159,points:[9.47991,2.5,13.48953,7.4,9.47991,7.4,9.47991,2.5,2.48953,2.5,2.48953,13.5,13.48953,13.5,13.48953,7.4]}]}),ht.Default.setImage("editor.delete",{background:"rgb(89,89,89)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[5.5,5.57173,5.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.05685,5.57173,8.05685,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[10.5,5.57173,10.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,3.18902,15,3.16996,5.32652,3.16021,6.32652,1.16021,9.32652,1.16021,10.32652,3.16021]},{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[3.33333,3.18902,9.33334,11.65078]}]}),ht.Default.setImage("editor.import",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"triangle",borderColor:"rgb(255,255,255)",borderWidth:1,rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.top",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.86035,6.44002,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,4.58061,13.85824,4.51881]}]}),ht.Default.setImage("editor.up",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.89924,6.05159,8.20153,8.2581]}]}),ht.Default.setImage("editor.down",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.89924,.69031,8.20153,8.2581]}]}),ht.Default.setImage("editor.bottom",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.93812,.69031,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,10.85024,13.85824,10.78844]}]}),ht.Default.setImage("editor.menu",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.93729,4,14.93729,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,8,15.06271,8]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,12,15.06271,12]}]}),ht.Default.setImage("editor.undo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.redo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",scaleX:-1,points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.edit",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(51,153,255)",shadowColor:"#1ABC9C",rotation:5.49779,closePath:!0,points:[6,-.83884,.5,13.16116,6.04966,10.58206,11.5,13.16116,6,-.83884]}]}),ht.Default.setImage("editor.rulers",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[1.50517,1.5,1.5,4.49799,2.47337,4.49798,1.5,4.49799,1.50003,14.5,11.23413,14.48019,11.23413,13.48171,11.23413,14.47896,14.5,14.47897,4.00002,14.47899,4.00001,12.00001,1.50521,12.00002]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14,6,14,14,6,14]}]}),ht.Default.setImage("editor.grid",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.49468,1.49999,4.5,14.49999,4.49468,11.53541,1.5,11.51432,14.5,11.51432,11.52105,11.53541,11.52105,14.49999,11.52105,1.49999,11.5,4.50429,14.5,4.50429,1.5,4.50429]}]}),ht.Default.setImage("editor.save",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[3.66183,14.5,14.5,14.5,14.5,4.83454,10.71984,1.5,3.66183,1.5,3.66183,6.18654,10.71984,6.18654,10.71984,1.5,1.5,1.5,1.5,14.5,3.66183,14.5,3.66183,9.03168,12.17213,9.03168,12.17213,14.5]}]}),ht.Default.setImage("editor.preview",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[1.9869,6.489,2,2,14,8,1.9869,14,2,9.555]}]}),ht.Default.setImage("editor.reload",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.zoomout",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8]}]}),ht.Default.setImage("editor.zoomin",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8,8,2,8,14],segments:[1,2,1,2]}]}),ht.Default.setImage("editor.zoomtofit",{background:"rgb(179,179,179)",gridLightColor:"rgba(0,0,0,0.20)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.00001,11.91764,8.00001,15]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-1.5708,rect:[9.75,7.24608,2,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-1.5708,points:[13.516,6.484,13.516,9.51599]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-3.14159,points:[8.00001,.99999,8.00001,4.08236]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[2.516,6.4801,2.516,9.51209]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[4.25,7.24608,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:3.14159,rect:[7.00001,4.5,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:6.28319,rect:[7,10,2,1.5]}]}),ht.Default.setImage("editor.toggleleft",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[3.49001,5.50001,3.51001,10.49999]}]}),ht.Default.setImage("editor.toggleboth",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.toggleright",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[12.49999,5.50001,12.51999,10.49999]}]}),ht.Default.setImage("editor.layout.helper",ht.Default.parse(JSON.stringify({modified:"Mon Oct 29 2018 09:55:40 GMT+0800 (\u4E2D\u56FD\u6807\u51C6\u65F6\u95F4)",dataBindings:[{attr:"selectColor",valueType:"Color",defaultValue:"#60ACFC"},{attr:"layout.h",valueType:"String"},{attr:"layout.v",valueType:"String"}],width:100,height:100,interactive:!0,disableSelectedBorder:!0,pixelPerfect:!1,comps:[{type:"rect",borderColor:"#979797",displayName:"\u5DE6\u4FA7\u4EA4\u4E92",rect:[5.51795,27.5,20.9641,44.5],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'left');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u53F3\u4FA7\u4EA4\u4E92",rect:[74.0359,27.5,20.9641,45],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'right');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4E0A\u4FA7\u4EA4\u4E92",rect:[27.5,6,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'top');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4E0B\u4FA7\u4EA4\u4E92",rect:[27.5,74,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'bottom');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6A2A\u5411\u4E2D\u5FC3\u4EA4\u4E92",rect:[28.22051,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6A2A\u5411\u4E2D\u5FC3\u4EA4\u4E92",rect:[55.77949,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7EB5\u5411\u4E2D\u5FC3\u4EA4\u4E92",rect:[44.22051,28,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7EB5\u5411\u4E2D\u5FC3\u4EA4\u4E92",rect:[44.22051,56,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",rect:[5,5,90,90]},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",borderPattern:[6,6],rect:[27.5,27.5,45,45]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'left' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D4D4D4"},borderColor:"#979797",rect:[8,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'right' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[76,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[34,48,32,4],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'bottom' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,76,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'top' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,8,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,34,4,32],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nif (data.a('layout.h') === 'center' || data.a('layout.v')  === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,48,4,4]}]}))),ht.Default.setImage("editor.attachPoint",{width:10,height:10,boundExtend:1,comps:[{type:"shape",borderWidth:1,background:{func:"attr@selectColor",value:"rgb(51,153,255)"},borderColor:{func:"attr@selectColor",value:"rgb(51,153,255)"},closePath:!0,points:[5,0,0,5,5,10,10,5]}]}),ht.Default.setImage("editor.display.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.display.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.display.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.display.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.display.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.display.node",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.5,9.38462,14.5,9.38462,14.5,11.23077,14.5,2,1.5,2,1.5,11.23077,14.5,11.23077,7.07143,11.23077,5,15,11,15,8.92857,11.23077]}]}),ht.Default.setImage("editor.display.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[13,12.5,13,10.54,3,10.54,13,10.54,13,5.5,3,5.5,3,12.5,13,12.5,7,12.5,5.85714,15.5,10.14287,15.5,9,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8,2.19286,15.5,2.19286,15.5,15.5]}]}),ht.Default.setImage("editor.display.edge",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[.69044,.97071,4,4.00837]},{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[11.27696,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[4.35933,3.02819,7.84441,2.9749,7.84441,12.99581,11.64067,12.99581]}]}),ht.Default.setImage("editor.display.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.display.subgraph",{gridThickColor:"rgb(191,191,191)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(207,207,207)",visible:!1,closePath:!0,points:[2.81788,9.09381,2.81788,9.09381,1.38027,6.92868,3.20223,5.43826,5.02418,3.94784,6.51488,5.43826,6.51488,5.43826,6.51488,5.43826,7.61273,3.06338,10.74281,3.94784,13.87289,4.8323,13.18212,9.09381,13.18212,9.09381,13.18212,9.09381,15.5,9.8671,15.5,11.92851,15.5,13.6866,14.14811,14.93662,13.18212,14.93662,2.81788,14.93662,1.83057,14.93662,.5,13.65558,.5,11.92851,.5,9.92221,2.81788,9.09381,2.81788,9.09381],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[4.99379,5.52777,6,4.47223]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",visible:!1,shadowColor:"#1ABC9C",rect:[4,6.43826,2,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.15905,arcTo:5.5676,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[2.5,3.11794,5,5]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.57792,arcTo:6.6497,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[5.63862,1.53868,9.36138,7.15852]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:1.5708,arcTo:3.87463,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[-1,6.56338,8.99379,5.93662]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:5.00909,arcTo:1.5708,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[8.00621,6.56338,8.99379,5.93662]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",visible:!1,points:[3.4969,12.5,12.5031,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[9.72,12.5,8,10,6.34,12.5]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",displayName:"\u5706\u5F62",rect:[0,0,2,2]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[15,15.5,8.02409,15.5,8.02409,14,8.02409,15.5,1,15.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[2.81167,6.59481,2.81167,6.59481,1.80439,4.03022,3.39379,2.90023,4.98319,1.77025,6.47379,2.90023,6.47379,2.90023,6.47379,2.90023,7.60652,.5,10.7366,1.3939,13.86668,2.28781,13.17591,6.59481,13.17591,6.59481,13.17591,6.59481,15.49379,7.37636,15.49379,9.45978,15.49379,11.23663,14.1419,12.5,13.17591,12.5,2.81167,12.5,1.82436,12.5,.49379,11.20528,.49379,9.45978,.49379,7.43206,2.81167,6.59481,2.81167,6.59481],segments:[1,4,4,4,4,4,4,2,4,4]}]}),ht.Default.setImage("editor.symbol.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.symbol.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.symbol.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.symbol.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.symbol.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.image",{background:"rgb(156,156,156)",width:16,height:16,comps:[{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",rect:[.5,1.96,15,12]},{type:"circle",background:"rgb(255,255,255)",borderColor:"rgb(255,255,255)",rect:[3.32103,4.48721,1.5,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[2.18757,9.112,6.11684,9.112,7.77072,10.39241,9.50807,13.68975,9.69338,14.04145,9.04982,12.34611,7.45717,10.69236,7.45717,10.69236,8.72728,5.98721,14.05092,5.98721],segments:[1,4,4,4]}]}),ht.Default.setImage("editor.symbol.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.symbol.border",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[.5,6.01503,.5,2,15.48868,2,15.5,14,.5,14,.5,10]}]}),ht.Default.setImage("editor.symbol.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.symbol.piechart",{background:"rgb(97,97,97)",width:16,height:16,comps:[{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:.5236,arcTo:4.71239,rect:[.53628,2.06928,13.08634,13.08634]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:4.71239,arcTo:.5236,rect:[2.37737,1,13.08634,13.08634]}]}),ht.Default.setImage("editor.symbol.onedimensionalcolumnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[3.42625,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[10.00543,1,3,14]}]}),ht.Default.setImage("editor.symbol.columnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[1,9,3,6]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[4,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[9,1,3,14]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[12,10.93747,3,4.06253]}]}),ht.Default.setImage("editor.symbol.linechart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[1,14,5,7,11,8,15,2]}]}),ht.Default.setImage("editor.point.mirrored",{width:30,height:30,fitSize:!1,comps:[{type:"arc",background:"rgb(202,235,248)",borderWidth:2,borderColor:"rgb(17,158,216)",arcClose:!1,rect:[3.5,10.30081203536023,23,25.3726296254234]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.300812035360231,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[17.842265898626422,9.310233818119592,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.713262902082427,8.310233818119592,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.4018068742542837,9.30081203536023,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.286737097917573,8.310233818119592,3,4]}]}),ht.Default.setImage("editor.point.straight",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[26.974999999999998,23.185840967335317,15.133692185007973,10.275109094255685,3.0250000000000004,23.185840967335317]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.561327956066684,6,6]}]}),ht.Default.setImage("editor.point.disconnected",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.1940148593724587,22.95774078992803,3.1940148593724587,18.139874123261343,7.6015038461565965,10.497740789928038,14.542032480517832,10.497740789928038,26.80598514062754,22.95774078992803],segments:[1,4,2]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12.093814401372779,7.5391087731804305,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[16.36973009802768,14.555043156001322,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[22.831111406474626,16.51363217953681,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.2671011430070465,9.53910877318043,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.152031366670336,8.548530555939791,3,4]}]}),ht.Default.setImage("editor.point.asymmetric",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.5000000000000027,22.974997694265234,3.5000000000000027,17.50768540873153,5.131816608669447,11.637417102180905,12.400695544362113,11.637417102180905,22.516641067164265,11.637417102180905,26.5,22.974997694265234,26.5,22.974997694265234],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[9.324670579660944,7.637417102180905,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[3.405482351035767,9.637417102180905,6.540642002660807,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.7221578598514142,8.637417102180905,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[15.278596259040164,9.637417102180905,11.965262549245955,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.731262324024406,8.637417102180905,3,4]}]}),ht.Default.setImage("editor.layout.circular",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,3,3,8,5,13,11,13,13,8],segments:[1,2,2,2,2,5]}]}),ht.Default.setImage("editor.layout.symmetric",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderWidth:1,borderColor:"white",points:[8,8,8,3,8,8,3,8,8,8,5,13,8,8,11,13,8,8,13,8],segments:[1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.hierarchical",{width:16,height:16,comps:[{type:"shape",background:"white",points:[4,3,4,5,6,5,6,3,10,3,10,5,12,5,12,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[5,4,2,12,5,4,8,12,5,4,14,12,11,4,2,12,11,4,8,12,11,4,14,12],segments:[1,2,1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardnorth",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,3,7,5,9,5,9,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,4,2,12,8,4,8,12,8,4,14,12],segments:[1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardsouth",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardeast",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*-Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardwest",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.align.distributehorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14,14,2,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_dark;}}},{type:"shape",points:[8,5,8,11],borderWidth:3,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_select;}}}]}),ht.Default.setImage("editor.align.distributevertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2,2,14,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_dark;}}},{type:"shape",points:[5,8,11,8],borderWidth:3,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_select;}}}]}),ht.Default.setImage("editor.align.alignleft",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_dark;}}},{type:"shape",points:[5,5,13,5,5,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_select;}}}]}),ht.Default.setImage("editor.align.alignhorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[8,2,8,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_dark;}}},{type:"shape",points:[3,5,13,5,6,11,10,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_select;}}}]}),ht.Default.setImage("editor.align.alignright",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[14,2,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_dark;}}},{type:"shape",points:[3,5,11,5,11,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_select;}}}]}),ht.Default.setImage("editor.align.aligntop",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_dark;}}},{type:"shape",points:[5,5,5,13,11,5,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_select;}}}]}),ht.Default.setImage("editor.align.alignvertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,8,14,8],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_dark;}}},{type:"shape",points:[5,3,5,13,11,6,11,10],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_select;}}}]}),ht.Default.setImage("editor.align.alignbottom",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,14,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_dark;}}},{type:"shape",points:[5,3,5,11,11,11,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function func(){return hteditor.config.color_select;}}}]});var Ib=function Ib(){return!0;};oc("editor.layout.circular"),oc("editor.layout.symmetric"),oc("editor.layout.hierarchical"),oc("editor.layout.towardnorth"),oc("editor.layout.towardsouth"),oc("editor.layout.towardeast"),oc("editor.layout.towardwest"),oc("editor.root"),oc("editor.bind",Ib),oc("editor.unbind"),oc("editor.dir"),oc("editor.dxf"),oc("editor.sound"),oc("editor.video"),oc("editor.resetsize"),oc("editor.restore"),ht.Data.prototype.$50$=bl,ht.Data.prototype.$51$=function(c){return this._refGraph?[]:[cl.call(this,c),ll];},ht.Node.prototype.$50$=Ul,ht.Node.prototype.$51$=function(c){return this._refGraph?[]:[fl.call(this,c),nl];},ht.Edge.prototype.$50$=Ll,ht.Edge.prototype.$51$=function(c){return this._refGraph?[]:[$l.call(this,c),Hl];},ht.Group.prototype.$51$=function(c){return this._refGraph?[]:[el.call(this,c),Il];},ht.Shape.prototype.$51$=function(c){return this._refGraph?[]:[Yl.call(this,c),Dl];},ht.Block.prototype.$51$=function(c){return this._refGraph?[]:[Tl.call(this,c),Jl];},ht.RefGraph.prototype.$51$=function(c){return this._refGraph?[]:[yl.call(this,c),ml];};var Yb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.parse(b,f,n),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype."+this.s("shape").toLowerCase());},l.prototype.parse=function(c,l,b){c&&(Ac(this,"shape",c.type,"rect"),Ac(this,"shape.background",c.background,null),Ac(this,"shape.repeat.image",c.repeatImage),Ac(this,"shape.border.width",c.borderWidth),Ac(this,"shape.border.color",c.borderColor,null),Ac(this,"shape.border.3d",c.border3d),Ac(this,"shape.border.3d.color",c.border3dColor),Ac(this,"shape.border.3d.accuracy",c.border3dAccuracy),Ac(this,"shape.border.cap",c.borderCap),Ac(this,"shape.border.join",c.borderJoin),Ac(this,"shape.border.pattern",c.borderPattern),Ac(this,"shape.gradient",c.gradient),Ac(this,"shape.gradient.color",c.gradientColor),Ac(this,"shape.dash",c.dash),Ac(this,"shape.dash.pattern",c.dashPattern),Ac(this,"shape.dash.offset",c.dashOffset),Ac(this,"shape.dash.color",c.dashColor),Ac(this,"shape.dash.width",c.dashWidth),Ac(this,"shape.dash.3d",c.dash3d),Ac(this,"shape.dash.3d.color",c.dash3dColor),Ac(this,"shape.dash.3d.accuracy",c.dash3dAccuracy),Ac(this,"shape.border.width.absolute",c.borderWidthAbsolute),Ac(this,"shape.fill.clip.direction",c.fillClipDiretion),Ac(this,"shape.fill.clip.percentage",c.fillClipPercentage),"rect"===this.compType?Ac(this,"shape.depth",c.depth):"roundRect"===this.compType?Ac(this,"shape.corner.radius",c.cornerRadius):"polygon"===this.compType?Ac(this,"shape.polygon.side",c.polygonSide):"arc"===this.compType&&(Ac(this,"shape.arc.from",c.arcFrom),Ac(this,"shape.arc.to",c.arcTo),Ac(this,"shape.arc.close",c.arcClose),Ac(this,"shape.arc.oval",c.arcOval)),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return ic(this,c,"shape","type",void 0),ic(this,c,"shape.background","background",null),ic(this,c,"shape.repeat.image","repeatImage"),ic(this,c,"shape.border.width","borderWidth"),ic(this,c,"shape.border.color","borderColor",null),ic(this,c,"shape.border.3d","border3d"),ic(this,c,"shape.border.3d.color","border3dColor"),ic(this,c,"shape.border.3d.accuracy","border3dAccuracy"),ic(this,c,"shape.border.cap","borderCap"),ic(this,c,"shape.border.join","borderJoin"),ic(this,c,"shape.border.pattern","borderPattern"),ic(this,c,"shape.gradient","gradient"),ic(this,c,"shape.gradient.color","gradientColor"),ic(this,c,"shape.dash","dash"),ic(this,c,"shape.dash.pattern","dashPattern"),ic(this,c,"shape.dash.offset","dashOffset"),ic(this,c,"shape.dash.color","dashColor"),ic(this,c,"shape.dash.width","dashWidth"),ic(this,c,"shape.dash.3d","dash3d"),ic(this,c,"shape.dash.3d.color","dash3dColor"),ic(this,c,"shape.dash.3d.accuracy","dash3dAccuracy"),ic(this,c,"shape.border.width.absolute","borderWidthAbsolute"),ic(this,c,"shape.fill.clip.direction","fillClipDirection"),ic(this,c,"shape.fill.clip.percentage","fillClipPercentage"),"rect"===this.compType?ic(this,c,"shape.depth","depth"):"roundRect"===this.compType?ic(this,c,"shape.corner.radius","cornerRadius"):"polygon"===this.compType?ic(this,c,"shape.polygon.side","polygonSide"):"arc"===this.compType&&(ic(this,c,"shape.arc.from","arcFrom"),ic(this,c,"shape.arc.to","arcTo"),ic(this,c,"shape.arc.close","arcClose"),ic(this,c,"shape.arc.oval","arcOval")),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return this.s("shape");}}]),l;}(ht.Node),Db=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.parse(b,f,n),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype.shape");},l.prototype.parse=function(c,l,b){c&&(Ac(this,"type",c.type,"shape"),Ac(this,"shape.background",c.background,null),Ac(this,"shape.repeat.image",c.repeatImage),Ac(this,"shape.border.width",c.borderWidth),Ac(this,"shape.border.color",c.borderColor,null),Ac(this,"shape.border.3d",c.border3d),Ac(this,"shape.border.3d.color",c.border3dColor),Ac(this,"shape.border.3d.accuracy",c.border3dAccuracy),Ac(this,"shape.border.cap",c.borderCap),Ac(this,"shape.border.join",c.borderJoin),Ac(this,"shape.border.pattern",c.borderPattern),Ac(this,"shape.gradient",c.gradient),Ac(this,"shape.gradient.color",c.gradientColor),Ac(this,"shape.dash",c.dash),Ac(this,"shape.dash.pattern",c.dashPattern),Ac(this,"shape.dash.offset",c.dashOffset),Ac(this,"shape.dash.color",c.dashColor),Ac(this,"shape.dash.width",c.dashWidth),Ac(this,"shape.dash.3d",c.dash3d),Ac(this,"shape.dash.3d.color",c.dash3dColor),Ac(this,"shape.dash.3d.accuracy",c.dash3dAccuracy),Ac(this,"shape.fill.rule",c.fillRule),Ac(this,"shape.fill.clip.direction",c.fillClipDiretion),Ac(this,"shape.fill.clip.percentage",c.fillClipPercentage),Ac(this,"shape.gradient.pack",c.gradientPack),Ac(this,"shape.border.width.absolute",c.borderWidthAbsolute),uc(this,c,l,b),tc(this,c),this.setPoints(gc(Wc(c.points))),this.setSegments(Wc(c.segments)));},l.prototype.toJSON=function(){var c={};if(ic(this,c,"type","type",void 0),ic(this,c,"shape.background","background",null),ic(this,c,"shape.repeat.image","repeatImage"),ic(this,c,"shape.border.width","borderWidth"),ic(this,c,"shape.border.color","borderColor",null),ic(this,c,"shape.border.3d","border3d"),ic(this,c,"shape.border.3d.color","border3dColor"),ic(this,c,"shape.border.3d.accuracy","border3dAccuracy"),ic(this,c,"shape.border.cap","borderCap"),ic(this,c,"shape.border.join","borderJoin"),ic(this,c,"shape.border.pattern","borderPattern"),ic(this,c,"shape.gradient","gradient"),ic(this,c,"shape.gradient.color","gradientColor"),ic(this,c,"shape.dash","dash"),ic(this,c,"shape.dash.pattern","dashPattern"),ic(this,c,"shape.dash.offset","dashOffset"),ic(this,c,"shape.dash.color","dashColor"),ic(this,c,"shape.dash.width","dashWidth"),ic(this,c,"shape.dash.3d","dash3d"),ic(this,c,"shape.dash.3d.color","dash3dColor"),ic(this,c,"shape.dash.3d.accuracy","dash3dAccuracy"),ic(this,c,"shape.fill.rule","fillRule"),ic(this,c,"shape.fill.clip.direction","fillClipDirection"),ic(this,c,"shape.fill.clip.percentage","fillClipPercentage"),ic(this,c,"shape.gradient.pack","gradientPack"),ic(this,c,"shape.border.width.absolute","borderWidthAbsolute"),Xc(this,c),pc(this,c),jc(c,"points",this.a("points"),wc(this.getPoints())),this.getSegments()){var l=this.getSegments().toArray();if(l.length){var b=1===l[0];if(b)for(var f=1;f<l.length;f++){if(2!==l[f]){b=!1;break;}}b||jc(c,"segments",this.a("segments"),l);}}return c;},gl(l,[{key:"compType",get:function get(){return this.s("type");}}]),l;}(ht.Shape),Tb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.parse(b,f,n),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){if(this.getDisplayName())return this.getDisplayName();var c=this.s("image");return c&&c.length<100?c:n("editor.comptype.image");},l.prototype.onStyleChanged=function(l,b,f){c.prototype.onStyleChanged.call(this,l,b,f),"image"===l&&this.setImage(f);},l.prototype.parse=function(c,l,b){c&&(Ac(this,"type",c.type,"image"),Ac(this,"body.color",c.color),Ac(this,"image.stretch",c.stretch),Ac(this,"image",c.name,"node_image"),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return ic(this,c,"type","type",void 0),ic(this,c,"body.color","color"),ic(this,c,"image.stretch","stretch"),ic(this,c,"image","name"),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return this.s("type");}}]),l;}(ht.Node),Jb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.parse(b,f,n),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||this.s("text")||n("editor.comptype.text");},l.prototype.parse=function(c,l,b){c&&(Ac(this,"type",c.type,"text"),Ac(this,"text",c.text),Ac(this,"text.align",c.align),Ac(this,"text.vAlign",c.vAlign),Ac(this,"text.color",c.color),Ac(this,"text.font",c.font),Ac(this,"text.shadow",c.shadow),Ac(this,"text.shadow.color",c.shadowColor),Ac(this,"text.shadow.blur",c.shadowBlur),Ac(this,"text.shadow.offset.x",c.shadowOffsetX),Ac(this,"text.shadow.offset.y",c.shadowOffsetY),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return ic(this,c,"type","type",void 0),ic(this,c,"text","text"),ic(this,c,"text.align","align"),ic(this,c,"text.vAlign","vAlign"),ic(this,c,"text.color","color"),ic(this,c,"text.font","font"),ic(this,c,"text.shadow","shadow"),ic(this,c,"text.shadow.color","shadowColor"),ic(this,c,"text.shadow.blur","shadowBlur"),ic(this,c,"text.shadow.offset.x","shadowOffsetX"),ic(this,c,"text.shadow.offset.y","shadowOffsetY"),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return this.s("type");}}]),l;}(ht.Text),yb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.s({"shape.border.color":"red","shape.border.width":1,"shape.background":null}),U.parse(b,f,n),U.setClosePath(!0),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype.clip");},l.prototype.parse=function(c,l,b){c&&(Ac(this,"type",c.type,"clip"),uc(this,c,l,b),this.setPoints(gc(Wc(c.points))),this.setSegments(Wc(c.segments)));},l.prototype.toJSON=function(){var c={};if(ic(this,c,"type","type",void 0),Xc(this,c),jc(c,"points",this.a("points"),wc(this.getPoints())),this.getSegments()){var l=this.getSegments().toArray();if(l.length){var b=1===l[0];if(b)for(var f=1;f<l.length;f++){if(2!==l[f]){b=!1;break;}}b||jc(c,"segments",this.a("segments"),l);}}return c;},gl(l,[{key:"compType",get:function get(){return this.s("type");}}]),l;}(ht.Shape),mb=function(c){function l(b,f,n){return Vl(this,l),kl(this,c.call(this));}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype.restore");},l.prototype.parse=function(c,l,b){c&&(Ac(this,"type",c.type,"restore"),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return ic(this,c,"type","type",void 0),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return this.s("type");}}]),l;}(ht.Node),Qb=function(c){function l(){return Vl(this,l),kl(this,c.call(this));}return wl(l,c),l;}(ht.widget.BorderPane),Bb=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l;}(ht.widget.ContextMenu),pb=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l.prototype.invalidateAll=function(l,b){if("imageLoading"!==b)return"imageLoaded"===b?(this.fpImageLoaded=!0,this.dm().each(function(c){c.fp("imageLoaded",!1,!0);}),void(this.fpImageLoaded=!1)):void c.prototype.invalidateAll.call(this,l,b);},l.prototype.adjustZoom=function(c){return c>Gl.config.maxZoom?Gl.config.maxZoom:c<Gl.config.minZoom?Gl.config.minZoom:c;},l.prototype.getUnionNodeRect=function(c){var l=this,b=void 0;return c=c._as||c,c.forEach(function(c){c instanceof ht.Node&&(b=_(b,l.getNodeRect(c)));}),b;},l.prototype.$64$=function(c){this.validate();var l=this.getViewRect(),b=this.getUnionNodeRect(c);if(!l||!b||ht.Default.intersectsRect(l,b))return null;var f=l.x+l.width/2-b.x-b.width/2,n=l.y+l.height/2-b.y-b.height/2;return this.moveDatas(c,f,n),{x:f,y:n};},l.prototype.getFullscreenDatas=function(){return null;},l;}(ht.graph.GraphView),ib=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l;}(ht.widget.ListView),Zb=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this,b));return f.getView().style.background=Gl.config.color_pane_dark,f.setMaskBackground(null),f.setContentBorderColor(null),f.setContentBackground("white"),f.getMask().style.border=Gl.config.color_select+" solid 1px",f;}return wl(l,c),l;}(ht.graph.Overview),ab=function(c){function l(b,f,n,U){Vl(this,l);var $=kl(this,c.call(this,b,f,n,U));return $.setTogglable(!1),$;}return wl(l,c),l;}(ht.widget.SplitView),jb=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l;}(ht.widget.TablePane),ub=function(c){function l(){return Vl(this,l),kl(this,c.call(this));}return wl(l,c),l.prototype.add=function(l,b,f){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!n){var U=new ht.Tab();return U.setName(l),U.setView(b),U;}return c.prototype.add.call(this,l,b,f);},l;}(ht.widget.TabView),Xb=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l;}(ht.widget.Toolbar),Ab=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this,b));return f.setDoubleClickToToggle(!1),f;}return wl(l,c),l.prototype.getToggleIcon=function(c){if(this._loader&&!this._loader.isLoaded(c))return this._collapseIcon;var l=c.getChildren(),b=l.size();if(b){for(var f=!1,n=0;n<b;n++){if(this.isVisible(l.get(n))){f=!0;break;}}if(f)return this.isExpanded(c)?this._expandIcon:this._collapseIcon;}},l.prototype.hasExpandedChild=function(c){if(!this.isExpanded(c))return!1;var l=c.getChildren(),b=l.size();if(b)for(var f=0;f<b;f++){if(this.isVisible(l.get(f)))return!0;}return!1;},gl(l,[{key:"expandIds",get:function get(){return Object.keys(this._expandMap);},set:function set(c){var l=this;c.forEach(function(c){var b=l.dm().getDataById(c);b&&l.expand(b);});}},{key:"selectionIds",get:function get(){var c=[];return this.sm().each(function(l){c.push(l.$34$||l._id);}),c;},set:function set(c){var l=this,b=[];c.forEach(function(c){var f=l.dm().getDataById(c);f&&b.push(f);}),this.sm().ss(b);}}]),l;}(ht.widget.TreeView);!function(c,l,b){var f="ht",n=c[f],U=n.Default,H=U.getInternal();H.addMethod(U,{svgToShape:function svgToShape(c,l){var b=new n.SvgConverter(l);return{converter:b,output:b.toShape(c)};}});var L=n.Context2dProxy=function(c,l,b){var f=this;f.ctx=c,f.writer=l,f._currentContext={a:1,b:0,c:0,d:1,tx:0,ty:0},f._emptyPath(),f._forceSplitEllipse=!0,f._splitToBezier=b.splitToBezier,f._ellipseSegments=b.segments,f._contextStack=[];for(var n in CanvasRenderingContext2D.prototype){if("webkitImageSmoothingEnabled"!==n){var U=c[n];"function"==typeof U&&(c[n]=function(l,b){return function(){try{var n=b.apply(c,arguments);return f.handleFunc(l,n,arguments),n;}catch(c){}};}(n,U));}}};L.prototype={},L.prototype.constructor=L,L.prototype.handleFunc=function(c,l,b){var f=this;switch(c){case"save":f._ctxSave();break;case"restore":f._ctxRestore();break;case"translate":f._ctxTranslate.apply(f,b);break;case"rotate":f._ctxRotate.apply(f,b);break;case"scale":f._ctxScale.apply(f,b);break;case"setTransform":f._ctxSetTransform.apply(f,b);break;case"transform":f._ctxTransform.apply(f,b);break;case"fillText":case"strokeText":f._ctxText(b[0],b[1],b[2],"fillText"===c);break;case"rect":f._ctxRect.apply(f,b);break;case"fill":f._ctxFill(b[0]);break;case"fillRect":f._ctxRect.apply(f,b),f._ctxDraw("fill");break;case"stroke":f._ctxDraw("stroke");break;case"moveTo":f._ctxMoveTo(b[0],b[1]);break;case"lineTo":f._ctxLineTo(b[0],b[1]);break;case"beginPath":f._ctxBeginPath();break;case"closePath":f._ctxClosePath();break;case"arc":f._ctxArc.apply(f,b);break;case"ellipse":f._ctxEllipse.apply(f,b);break;case"quadraticCurveTo":f._ctxBezier([{x:b[0],y:b[1]}],b[2],b[3]);break;case"bezierCurveTo":f._ctxBezier([{x:b[0],y:b[1]},{x:b[2],y:b[3]}],b[4],b[5]);break;case"createLinearGradient":f._ctxCreateGradient(l,!0,b);break;case"createRadialGradient":f._ctxCreateGradient(l,!1,b);break;case"createPattern":f._ctxCreatePattern(l,b[0],b[1]);break;case"drawImage":f._ctxDrawImage.apply(f,b);break;case"clip":f._ctxClip();}},L.prototype.handleSetter=function(c,l){},L.prototype._ctxSave=function(){var c=this,l={},b=c._currentContext;for(var f in b){l[f]=b[f],"clip"===f&&b[f]&&delete b[f];}c._contextStack.push(l);},L.prototype._ctxRestore=function(){var c=this;c._currentContext.clip&&c.writer.addRestore(),c._currentContext=c._contextStack.pop(),c._transformUpdated();},L.prototype._ctxTranslate=function(c,l){if(c=c||0,l=l||0,0!==c||0!==l){var b=this,f=b._currentContext,n=f.a,U=f.b,$=f.c,H=f.d;f.tx=n*c+$*l+f.tx,f.ty=U*c+H*l+f.ty,b._transformUpdated();}},L.prototype._ctxScale=function(c,l){if(c=c||1,l=l||1,1!==c||1!==l){var b=this,f=b._currentContext;f.a*=c,f.b*=c,f.c*=l,f.d*=l,b._transformUpdated();}},L.prototype._ctxRotate=function(c){var l=Math.cos(c),b=Math.sin(c),f=this,n=f._currentContext,U=n.a,$=n.b,H=n.c,L=n.d;n.a=U*l+H*b,n.b=$*l+L*b,n.c=-U*b+H*l,n.d=-$*b+L*l,f._transformUpdated();},L.prototype._ctxSetTransform=function(c,l,b,f,n,U){var $=this,H=$._currentContext;H.a=c,H.b=l,H.c=b,H.d=f,H.tx=n,H.ty=U,$._transformUpdated();},L.prototype._ctxTransform=function(c,l,b,f,n,U){var $=this,H=$._currentContext,L=H.a,e=H.b,I=H.c,Y=H.d;H.a=L*c+I*l,H.b=e*c+Y*l,H.c=L*b+I*f,H.d=e*b+Y*f,H.tx=L*n+I*U+H.tx,H.ty=e*n+Y*U+H.ty,$._transformUpdated();},L.prototype._transformUpdated=function(){},L.prototype._calcCurrentRotation=function(){var c=this._currentContext;return 0===c.b&&0===c.c?0:Math.atan2(c.b,c.a);},L.prototype._calcCurrentScale=function(){var c=this._currentContext;return{x:Math.sqrt(c.a*c.a+c.c*c.c),y:Math.sqrt(c.b*c.b+c.d*c.d)};},L.prototype._transformPoint=function(c){var l=this._currentContext,b=c.x,f=c.y;return{x:l.a*b+l.c*f+l.tx,y:l.b*b+l.d*f+l.ty};},L.prototype._transformPoints=function(c){for(var l=this,b=new Array(c.length),f=0,n=c.length;f<n;f++){b[f]=l._transformPoint(c[f]);}return b;},L.prototype._transformSize=function(c){var l=this._currentContext;return c*Math.max(Math.sqrt(l.c*l.c+l.d*l.d),Math.sqrt(l.a*l.a+l.b*l.b));},L.prototype._equal=function(c,l){var b=c-l;return b>-1e-5&&b<1e-5;},L.prototype._ctxText=function(c,l,b,f){var n,U,$=this,H=$.ctx,L=H.font,e=f?H.fillStyle:H.strokeStyle,I=H.textAlign,Y=H.textBaseline;"string"==typeof L&&(U=L.match(/\d+/),U&&(n=U[0],L=L.replace(/\d+/,$._transformSize(n))));var D=$._calcCurrentRotation();"alphabetic"===Y?(Y="bottom",b+=.25*H.measureText("e").width):"hanging"===Y&&(Y="top",b+=.2*H.measureText("e").width),"string"==typeof e&&"rgba(0,0,0,0)"===e.replace(/ /g,"")||c.trim().length&&$.writer.addText(c,$._transformPoint({x:l,y:b}),L,D,I,Y,e);},L.prototype._ctxDrawImage=function(c,l,f,n,U,$,H,L,e){if(c.width&&c.height){n===b&&U===b?($=l,H=f,l=0,f=0,n=L=c.width,U=e=c.height):$===b&&H===b&&($=l,H=f,L=n,e=U,l=0,f=0,n=c.width,U=c.height);var I=this,Y=I._currentContext,D=L/n,T=e/U,J=$-D*l,y=H-T*f,m=Y.a,Q=Y.b,B=Y.c,p=Y.d;m*J+B*y+Y.tx,Q*J+p*y+Y.ty;}},L.prototype._ctxClip=function(){var c=this,l=c._currentContext;l.clip=!0,c._ctxDraw("clip");},L.prototype._ctxCreateGradient=function(c,l,b){c.isLinear=l,l?c.points=[b[0],b[1],b[2],b[3]]:c.points=[b[0],b[1],b[2],b[3],b[4],b[5]];var f=this._currentContext;c.trans=[f.a,f.b,f.c,f.d,f.tx,f.ty];var n=c.addColorStop;c.addColorStop=function(l,b){n.apply(this,arguments),c.colorStops||(c.colorStops=[]),c.colorStops.push(l,b);};},L.prototype._ctxCreatePattern=function(c,l,b){console.log("create pattern");},L.prototype._ctxRect=function(c,l,b,f){var n=this,U=n._transformPoints([{x:c,y:l},{x:c+b,y:l},{x:c+b,y:l+f},{x:c,y:l+f}]);n._path.push({type:"rect",points:U});},L.prototype._ctxMoveTo=function(c,l){var b=this,f=b._transformPoint({x:c,y:l});b._headPoint=f,b._path.push({type:"moveTo",x:f.x,y:f.y});},L.prototype._ctxLineTo=function(c,l){var b=this,f=b._transformPoint({x:c,y:l});b._path.push({type:"lineTo",x:f.x,y:f.y});},L.prototype._ctxArc=function(c,l,b,f,n,U){f=f||0,n=n||2*Math.PI,b&&this._ctxEllipse(c,l,b,b,0,f,n,U);},L.prototype._ctxEllipse=function(c,l,b,f,n,U,$,H){var L,e,I,Y,D,T,J,y,m,Q,B,p,i,Z,a,j=this,u=j._calcCurrentScale(),X=j._transformPoint({x:c,y:l});T=Math.sin(n),J=Math.cos(n);var A=function A(c){return v(Math.cos(-c),Math.sin(-c));},v=function v(n,U){var $=b*n,H=f*U;return{x:c+(J*$-T*H),y:l+(T*$+J*H)};},N=[],h=$;if(H)for(;h>=U;){h-=2*Math.PI;}else for(;h<=U;){h+=2*Math.PI;}for(Q=(h-U)/j._ellipseSegments,p=0;p<=j._ellipseSegments;p++){B=U+Q*p,i=j._transformPoint(A(-B)),N.push(i);}var C=U,t=h;if(Y=N[0],D=N[N.length-1],L=j._calcaEllipseAngle(U,$,H),U=L.start,$=L.end,y=j._equal(u.x,u.y),m=j._equal(b,f),!j._forceSplitEllipse&&y&&m&&j._equal(Math.abs(U-$),2*Math.PI))j._path.push({type:"circle",x:X.x,y:X.y,end:D,keyPoints:N,radius:b*u.x});else if(!j._forceSplitEllipse&&y&&m)e=j._calcCurrentRotation(),I=Math.cos(e),Z=j._currentContext.a*I<0,a=j._currentContext.d*I<0,L=j._transformStartEndAngle(U,$,Z,a),U=L.start-e,$=L.end-e,j._path.push({type:"arc",x:X.x,y:X.y,end:D,radius:b*u.x,startAngle:U,endAngle:$,keyPoints:N});else{if(j._forceSplitEllipse||!y){if(j._path.length||j._path.push({type:"moveTo",x:N[0].x,y:N[0].y}),j._splitToBezier){var F,W,V,g=t-C,w=Math.max(Math.ceil(Math.abs(g)/Math.PI*2),1),k=g/w,K=Math.tan(.5*k),x=Math.sin(k)*(Math.sqrt(4+3*K*K)-1)/3,G=Math.cos(C),z=Math.sin(C),s=C;for(p=0;p<w;p++){V=C+(p+1)*k,F=Math.cos(V),W=Math.sin(V);var M=v(F,W);j._ctxBezier([v(G-z*x,z+G*x),v(F+W*x,W-F*x)],M.x,M.y),G=F,z=W,s=V;}return;}for(p=1;p<=j._ellipseSegments;p++){i=N[p],j._path.push({type:"lineTo",x:i.x,y:i.y});}return;}var _,R,o=j._transformPoint(A(0)),r=j._transformPoint(A(Math.PI/2)),d=function d(c,l){var b=c.x-l.x,f=c.y-l.y;return Math.sqrt(b*b+f*f);},S=d(o,X),E=d(r,X);E>S?(R=S,S=E,E=R,_=r):_=o,e=j._calcCurrentRotation(),I=Math.cos(e),Z=j._currentContext.a*I<0,a=j._currentContext.d*I<0,L=j._transformStartEndAngle(U-Math.PI/2,$-Math.PI/2,Z,a),U=L.start,$=L.end,j._path.push({type:"ellipse",x:X.x,y:X.y,end:D,major:{x:_.x-X.x,y:_.y-X.y},ratio:E/S,startAngle:U,endAngle:$,keyPoints:N});}},L.prototype._ctxBezier=function(c,l,b){var f=this,n=f._transformPoint({x:l,y:b});this._path.push({type:"bezier",x:n.x,y:n.y,ctrl:f._transformPoints(c)});},L.prototype._ctxBeginPath=function(){this._emptyPath();},L.prototype._ctxClosePath=function(){var c=this,l=c._headPoint;l&&(c._path.push({type:"lineTo",x:l.x,y:l.y,subType:"closePath"}),c._headPoint=null,c._lastPoint=null);},L.prototype._calcaEllipseAngle=function(c,l,b){c=-c,l=-l;var f,n=c%(2*Math.PI),U=l%(2*Math.PI);for(n<0&&(n+=2*Math.PI),U<0&&(U+=2*Math.PI),b||(f=n,n=U,U=f);U<=n;){U+=2*Math.PI;}return{start:n,end:U};},L.prototype._transformStartEndAngle=function(c,l,b,f){var n;return(f||b)&&(b&&f?(c=Math.PI+c,l=Math.PI+l):(n=Math.PI*(b?1:2)-l,l=Math.PI*(b?1:2)-c,c=n)),{start:c,end:l};},L.prototype._ctxFill=function(c){var l=this;return l._fillRule=c||"nonzero",l._ctxDraw("fill");},L.prototype._ctxDraw=function(c){var l=this,b=l._path;if(b.length){var f,n,U,$,H,L,e=[],I=[];if("clip"===c)L={clip:!0};else{if("stroke"===c){L={stroke:!0,lineWidth:l._transformSize(l.ctx.lineWidth),color:l.ctx.strokeStyle};var Y=l.ctx.lineCap;"butt"!==Y&&(L.lineCap=Y);var D=l.ctx.getLineDash();if(D&&D.length){L.dash=!0;for(var T=0,J=D.length;T<J;T++){D[T]=l._transformSize(D[T]);}L.dashPattern=D,L.dashOffset=l._transformSize(l.ctx.lineDashOffset);}}else L={stroke:!1,color:l.ctx.fillStyle},"nonzero"!==l._fillRule&&(L.fillRule=l._fillRule);if(l.ctx.globalAlpha<1&&(L.opacity=l.ctx.globalAlpha),"string"!=typeof L.color)if(L.color instanceof CanvasGradient){var y=L.color,m=[y.isLinear?"L":"R"];m=m.concat(y.points);var Q=l._currentContext;m=m.concat([Q.a,Q.b,Q.c,Q.d,Q.tx,Q.ty]),m=m.concat(y.colorStops),L.gradientPack=m;}else if(L.color instanceof CanvasPattern&&L.color.gradient){var U=L.color,y=U.gradient,m=[y.isLinear?"L":"R"];m=m.concat(y.points);var B=U.trans,Q=l._currentContext,p=Q.a,i=Q.b,Z=Q.c,a=Q.d,j=Q.tx,u=Q.ty,X=B[0],A=B[1],v=B[2],N=B[3],h=B[4],C=B[5];m=m.concat([p*X+Z*A,i*X+a*A,p*v+Z*N,i*v+a*N,p*h+Z*C+j,i*h+a*C+u]),m=m.concat(y.colorStops),L.gradientPack=m;}else L.trans=[l._currentContext.a,l._currentContext.b,l._currentContext.c,l._currentContext.d,l._currentContext.tx,l._currentContext.ty],L.color=L.color.image?L.color.image:L.color,L.isPattern=!0;if("string"==typeof L.color&&"rgba(0,0,0,0)"===L.color.replace(/ /g,""))return;}for(n=0,f=b.length;n<f;n++){switch(U=b[n],U.type){case"moveTo":l._lastPoint={x:U.x,y:U.y},e.push(l._lastPoint),I.push(1);break;case"lineTo":"closePath"===U.subType?I.push(5):(e.push({x:U.x,y:U.y}),I.push(2)),l._lastPoint={x:U.x,y:U.y};break;case"rect":H=U.points,e.push({x:H[0].x,y:H[0].y},{x:H[1].x,y:H[1].y},{x:H[2].x,y:H[2].y},{x:H[3].x,y:H[3].y},{x:H[0].x,y:H[0].y}),I.push(2,2,2,2,2),l._lastPoint=U.points[0];break;case"circle":case"arc":case"ellipse":console.log("split to line",U.type);break;case"arcBegin":e.length&&I.length&&l.writer.addShape(e,I,L),e=[],I=[];break;case"arcClose":l.writer.addShape(e,I,L),e=[],I=[];break;case"bezier":if($=l._lastPoint,!$)break;1===U.ctrl.length?(e.push({x:U.ctrl[0].x,y:U.ctrl[0].y},{x:U.x,y:U.y}),I.push(3)):(e.push({x:U.ctrl[0].x,y:U.ctrl[0].y},{x:U.ctrl[1].x,y:U.ctrl[1].y},{x:U.x,y:U.y}),I.push(4)),l._lastPoint={x:U.x,y:U.y};break;default:e.push({x:U.x,y:U.y}),I.push(2);}}l.writer.addShape(e,I,L);}},L.prototype._emptyPath=function(){var c=this;c._path=[],c._lastPoint=null,c._headPoint=null;};var e=n.SvgConverter=function(c){var l=this;l.initConfig(c||{}),l.initCanvas();};e.prototype={},e.prototype.constructor=e,e.prototype.initConfig=function(c){var l,f=this;l=f.options={},l.size=c.size||512,l.segments=c.segments||16,l.splitToBezier=c.splitToBezier===b||c.splitToBezier;},e.prototype.initCanvas=function(){var c=this,l=document.createElement("canvas");l.width=l.height=c.options.size,l.style.width=l.style.height=c.options.size;var b=l.getContext;l.getContext=function(l){return function(b){var f=l.apply(this,arguments);return"2d"===b&&c.wrapContext2d(f),f;};}(b),c._canvas=l,c._segments=[];},e.prototype.toShape=function(c){var l=this;l._canvas;return l._segments=[],canvg(l._canvas,c,{ignoreMouse:!0,ignoreAnimation:!0}),l.write();},e.prototype.wrapContext2d=function(c){var l=this,b=new n.Context2dProxy(c,l,l.options);return b;},e.prototype.write=function(){var c=this;return{width:c._canvas.width,height:c._canvas.height,comps:c._segments};},e.prototype.addComponent=function(c){var l=this;l._segments.push(c);},e.prototype.addText=function(c,l,b,f,n,U,$){n=n||"left","start"===n?n="left":"end"===n&&(n="right"),"alphabetic"===U?U="bottom":"hanging"===U&&(U="top");var H=this;H.addComponent({type:"text",color:$,text:c,rotation:f,rect:[l.x,l.y,0,0],align:n,vAlign:U,font:b});},e.prototype.addShape=function(c,l,f){for(var n=this,U=[],$=0,H=c.length;$<H;$++){var L=c[$];U.push(L.x,L.y);}if(f.clip)return void n.addComponent({type:"clip",points:U,segments:l});var e={type:"shape",points:U,segments:l};if(f.opacity!=b&&(e.opacity=f.opacity),f.stroke)f.dash?(e.dash=f.dash,e.dashPattern=f.dashPattern,e.dashOffset=f.dashOffset,e.dashColor=f.color,e.dashWidth=f.lineWidth,e.borderColor=null,e.borderWidth=0,e.background=null):(e.borderColor=f.color,e.borderWidth=f.lineWidth,e.background=null),f.lineCap&&(e.borderCap=f.lineCap);else{if(e.borderColor=null,e.borderWidth=0,f.isPattern)e.repeatImage=f.color,e.trans=f.trans,e.background=null;else if(f.gradientPack){var I=f.gradientPack,Y="L"===I[0]?[I[5],I[6],I[7],I[8],I[9],I[10]]:[I[7],I[8],I[9],I[10],I[11],I[12]];if(Math.abs(Y[4])>1e8||Math.abs(Y[5])>1e8){var D=Y[0],T=Y[1],J=Y[2],y=Y[3],m=Y[4],Q=Y[5],B=Math.floor((m*y-Q*J)/(D*y-T*J)),p=Math.floor((m*T-Q*D)/(J*T-D*y));m=-(D*B+J*p),Q=-(T*B+y*p),"L"===I[0]?(I[9]+=m,I[10]+=Q,I[1]+=B,I[2]+=p,I[3]+=B,I[4]+=p):(I[11]+=m,I[12]+=Q,I[1]+=B,I[2]+=p,I[4]+=B,I[5]+=p);}e.gradientPack=I,e.background=null;}else e.background=f.color;f.gradient&&(e.gradient=f.gradient,e.gradientColor=f.gradientColor),f.fillRule&&(e.fillRule=f.fillRule);}n.addComponent(e);},e.prototype.addRestore=function(){this.addComponent({type:"restore"});},function(c){function l(c){this.ok=!1,"#"==c.charAt(0)&&(c=c.substr(1,6)),c=c.replace(/ /g,""),c=c.toLowerCase();var b={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var f in b){c==f&&(c=b[f]);}for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function process(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])];}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function process(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)];}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function process(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)];}}],U=0;U<n.length;U++){var $=n[U].re,H=n[U].process,L=$.exec(c);if(L){var e=H(L);this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0;}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")";},this.toHex=function(){var c=this.r.toString(16),l=this.g.toString(16),b=this.b.toString(16);return 1==c.length&&(c="0"+c),1==l.length&&(l="0"+l),1==b.length&&(b="0"+b),"#"+c+l+b;},this.getHelpXML=function(){for(var c=new Array(),f=0;f<n.length;f++){for(var U=n[f].example,$=0;$<U.length;$++){c[c.length]=U[$];}}for(var H in b){c[c.length]=H;}var L=document.createElement("ul");L.setAttribute("id","rgbcolor-examples");for(var f=0;f<c.length;f++){try{var e=document.createElement("li"),I=new l(c[f]),Y=document.createElement("div");Y.style.cssText="margin: 3px; border: 1px solid black; background:"+I.toHex()+"; color:"+I.toHex(),Y.appendChild(document.createTextNode("test"));var D=document.createTextNode(" "+c[f]+" -> "+I.toRGB()+" -> "+I.toHex());e.appendChild(Y),e.appendChild(D),L.appendChild(e);}catch(c){}}return L;};}c.RGBColor=l;}("undefined"!=typeof c?c:this),function(c){function l(c){for(var l=c.data,b=c.width*c.height*4,f=0;f<b;f+=4){var n=l[f+3]/255;l[f]*=n,l[f+1]*=n,l[f+2]*=n;}}function b(c){for(var l=c.data,b=c.width*c.height*4,f=0;f<b;f+=4){var n=l[f+3];0!=n&&(n=255/n,l[f]*=n,l[f+1]*=n,l[f+2]*=n);}}function f(c,l,b,f){var $=document.getElementById(c),H=$.naturalWidth,L=$.naturalHeight,e=document.getElementById(l);e.style.width=H+"px",e.style.height=L+"px",e.width=H,e.height=L;var I=e.getContext("2d");I.clearRect(0,0,H,L),I.drawImage($,0,0),isNaN(b)||b<1||(f?n(l,0,0,H,L,b):U(l,0,0,H,L,b));}function n(c,f,n,U,e,I){if(!(isNaN(I)||I<1)){I|=0;var Y,D=document.getElementById(c),T=D.getContext("2d");try{try{Y=T.getImageData(f,n,U,e);}catch(c){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),Y=T.getImageData(f,n,U,e);}catch(c){throw alert("Cannot access local image"),new Error("unable to access local image data: "+c);}}}catch(c){throw alert("Cannot access image"),new Error("unable to access image data: "+c);}l(Y);var J,y,m,Q,B,p,i,Z,a,j,u,X,A,v,N,h,C,t,F,W,V,g,w,k,K=Y.data,x=I+I+1,G=U-1,z=e-1,s=I+1,M=s*(s+1)/2,_=new $(),R=_;for(m=1;m<x;m++){if(R=R.next=new $(),m==s)var o=R;}R.next=_;var r=null,d=null;i=p=0;var S=H[I],E=L[I];for(y=0;y<e;y++){for(h=C=t=F=Z=a=j=u=0,X=s*(W=K[p]),A=s*(V=K[p+1]),v=s*(g=K[p+2]),N=s*(w=K[p+3]),Z+=M*W,a+=M*V,j+=M*g,u+=M*w,R=_,m=0;m<s;m++){R.r=W,R.g=V,R.b=g,R.a=w,R=R.next;}for(m=1;m<s;m++){Q=p+((G<m?G:m)<<2),Z+=(R.r=W=K[Q])*(k=s-m),a+=(R.g=V=K[Q+1])*k,j+=(R.b=g=K[Q+2])*k,u+=(R.a=w=K[Q+3])*k,h+=W,C+=V,t+=g,F+=w,R=R.next;}for(r=_,d=o,J=0;J<U;J++){K[p]=Z*S>>E,K[p+1]=a*S>>E,K[p+2]=j*S>>E,K[p+3]=u*S>>E,Z-=X,a-=A,j-=v,u-=N,X-=r.r,A-=r.g,v-=r.b,N-=r.a,Q=i+((Q=J+I+1)<G?Q:G)<<2,h+=r.r=K[Q],C+=r.g=K[Q+1],t+=r.b=K[Q+2],F+=r.a=K[Q+3],Z+=h,a+=C,j+=t,u+=F,r=r.next,X+=W=d.r,A+=V=d.g,v+=g=d.b,N+=w=d.a,h-=W,C-=V,t-=g,F-=w,d=d.next,p+=4;}i+=U;}for(J=0;J<U;J++){for(C=t=F=h=a=j=u=Z=0,p=J<<2,X=s*(W=K[p]),A=s*(V=K[p+1]),v=s*(g=K[p+2]),N=s*(w=K[p+3]),Z+=M*W,a+=M*V,j+=M*g,u+=M*w,R=_,m=0;m<s;m++){R.r=W,R.g=V,R.b=g,R.a=w,R=R.next;}for(B=U,m=1;m<=I;m++){p=B+J<<2,Z+=(R.r=W=K[p])*(k=s-m),a+=(R.g=V=K[p+1])*k,j+=(R.b=g=K[p+2])*k,u+=(R.a=w=K[p+3])*k,h+=W,C+=V,t+=g,F+=w,R=R.next,m<z&&(B+=U);}for(p=J,r=_,d=o,y=0;y<e;y++){Q=p<<2,K[Q]=Z*S>>E,K[Q+1]=a*S>>E,K[Q+2]=j*S>>E,K[Q+3]=u*S>>E,Z-=X,a-=A,j-=v,u-=N,X-=r.r,A-=r.g,v-=r.b,N-=r.a,Q=J+((Q=y+s)<z?Q:z)*U<<2,Z+=h+=r.r=K[Q],a+=C+=r.g=K[Q+1],j+=t+=r.b=K[Q+2],u+=F+=r.a=K[Q+3],r=r.next,X+=W=d.r,A+=V=d.g,v+=g=d.b,N+=w=d.a,h-=W,C-=V,t-=g,F-=w,d=d.next,p+=U;}}b(Y),T.putImageData(Y,f,n);}}function U(c,l,b,f,n,U){if(!(isNaN(U)||U<1)){U|=0;var e,I=document.getElementById(c),Y=I.getContext("2d");try{try{e=Y.getImageData(l,b,f,n);}catch(c){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),e=Y.getImageData(l,b,f,n);}catch(c){throw alert("Cannot access local image"),new Error("unable to access local image data: "+c);}}}catch(c){throw alert("Cannot access image"),new Error("unable to access image data: "+c);}var D,T,J,y,m,Q,B,p,i,Z,a,j,u,X,A,v,N,h,C,t,F=e.data,W=U+U+1,V=f-1,g=n-1,w=U+1,k=w*(w+1)/2,K=new $(),x=K;for(J=1;J<W;J++){if(x=x.next=new $(),J==w)var G=x;}x.next=K;var z=null,s=null;B=Q=0;var M=H[U],_=L[U];for(T=0;T<n;T++){for(X=A=v=p=i=Z=0,a=w*(N=F[Q]),j=w*(h=F[Q+1]),u=w*(C=F[Q+2]),p+=k*N,i+=k*h,Z+=k*C,x=K,J=0;J<w;J++){x.r=N,x.g=h,x.b=C,x=x.next;}for(J=1;J<w;J++){y=Q+((V<J?V:J)<<2),p+=(x.r=N=F[y])*(t=w-J),i+=(x.g=h=F[y+1])*t,Z+=(x.b=C=F[y+2])*t,X+=N,A+=h,v+=C,x=x.next;}for(z=K,s=G,D=0;D<f;D++){F[Q]=p*M>>_,F[Q+1]=i*M>>_,F[Q+2]=Z*M>>_,p-=a,i-=j,Z-=u,a-=z.r,j-=z.g,u-=z.b,y=B+((y=D+U+1)<V?y:V)<<2,X+=z.r=F[y],A+=z.g=F[y+1],v+=z.b=F[y+2],p+=X,i+=A,Z+=v,z=z.next,a+=N=s.r,j+=h=s.g,u+=C=s.b,X-=N,A-=h,v-=C,s=s.next,Q+=4;}B+=f;}for(D=0;D<f;D++){for(A=v=X=i=Z=p=0,Q=D<<2,a=w*(N=F[Q]),j=w*(h=F[Q+1]),u=w*(C=F[Q+2]),p+=k*N,i+=k*h,Z+=k*C,x=K,J=0;J<w;J++){x.r=N,x.g=h,x.b=C,x=x.next;}for(m=f,J=1;J<=U;J++){Q=m+D<<2,p+=(x.r=N=F[Q])*(t=w-J),i+=(x.g=h=F[Q+1])*t,Z+=(x.b=C=F[Q+2])*t,X+=N,A+=h,v+=C,x=x.next,J<g&&(m+=f);}for(Q=D,z=K,s=G,T=0;T<n;T++){y=Q<<2,F[y]=p*M>>_,F[y+1]=i*M>>_,F[y+2]=Z*M>>_,p-=a,i-=j,Z-=u,a-=z.r,j-=z.g,u-=z.b,y=D+((y=T+w)<g?y:g)*f<<2,p+=X+=z.r=F[y],i+=A+=z.g=F[y+1],Z+=v+=z.b=F[y+2],z=z.next,a+=N=s.r,j+=h=s.g,u+=C=s.b,X-=N,A-=h,v-=C,s=s.next,Q+=f;}}Y.putImageData(e,l,b);}}function $(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null;}var H=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],L=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],e={image:f,canvasRGBA:n,canvasRGB:U};c.stackBlur=e;}("undefined"!=typeof c?c:this),function(c,l){c.canvg=l(c.RGBColor,c.stackBlur);}("undefined"!=typeof c?c:this,function(l,b){function f(c){var l=[0,0,0],b=function b(_b3,f){var n=c.match(_b3);null!=n&&(l[f]+=n.length,c=c.replace(_b3," "));};return c=c.replace(/:not\(([^\)]*)\)/g,"     $1 "),c=c.replace(/{[\s\S]*/gm," "),b(e,1),b(I,0),b(Y,1),b(D,2),b(T,1),b(J,1),c=c.replace(/[\*\s\+>~]/g," "),c=c.replace(/[#\.]/g," "),b(y,2),l.join("");}function U(U){var $={opts:U};$.FRAMERATE=30,$.MAX_VIRTUAL_PIXELS=3e4,$.log=function(c){},1==$.opts.log&&"undefined"!=typeof console&&($.log=function(c){console.log(c);}),$.init=function(c){var l=0;$.UniqueId=function(){return l++,"canvg"+l;},$.Definitions={},$.Styles={},$.StylesSpecificity={},$.Animations=[],$.Images=[],$.ctx=c,$.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[];},this.SetCurrent=function(c,l){this.viewPorts.push({width:c,height:l});},this.RemoveCurrent=function(){this.viewPorts.pop();},this.Current=function(){return this.viewPorts[this.viewPorts.length-1];},this.width=function(){var c,l=this.Current();return l&&(c=l.width)?c:100;},this.height=function(){var c,l=this.Current();return l&&(c=l.height)?c:100;},this.ComputeSize=function(c){return null!=c&&"number"==typeof c?c:"x"==c?this.width():"y"==c?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2);};}();},$.init(),$.ImagesLoaded=function(){for(var c=0;c<$.Images.length;c++){if(!$.Images[c].loaded)return!1;}return!0;},$.trim=function(c){return c.replace(/^\s+|\s+$/g,"");},$.compressSpaces=function(c){return c.replace(/[\s\r\t\n]+/gm," ");},$.ajax=function(c){c=n.Default.beforeLoadURL(c);var l=new n.Request(),b={};return b.url=encodeURI(c),b.sync=!0,l.send(b),l.getResponseText();},$.parseXml=function(l){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var b=new Windows.Data.Xml.Dom.XmlDocument(),f=new Windows.Data.Xml.Dom.XmlLoadSettings();return f.prohibitDtd=!1,b.loadXml(l,f),b;}if(c.DOMParser){var n=new DOMParser();return n.parseFromString(l,"text/xml");}l=l.replace(/<!DOCTYPE svg[^>]*>/,"");var b=new ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(l),b;},$.Property=function(c,l){this.name=c,this.value=l;},$.Property.prototype.getValue=function(){return this.value;},$.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value;},$.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var c=parseFloat(this.value);return(this.value+"").match(/%$/)&&(c/=100),c;},$.Property.prototype.valueOrDefault=function(c){return this.hasValue()?this.value:c;},$.Property.prototype.numValueOrDefault=function(c){return this.hasValue()?this.numValue():c;},$.Property.prototype.addOpacity=function(c){var b=this.value;if(null!=c.value&&""!=c.value&&"string"==typeof this.value){var f=new l(this.value);f.ok&&(b="rgba("+f.r+", "+f.g+", "+f.b+", "+c.numValue()+")");}return new $.Property(this.name,b);},$.Property.prototype.getDefinition=function(){var c=this.value.match(/#([^\)'"]+)/);return c&&(c=c[1]),c||(c=this.value),$.Definitions[c];},$.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(");},$.Property.prototype.getFillStyleDefinition=function(c,l){var b=this.getDefinition();if(null!=b&&b.createGradient)return b.createGradient($.ctx,c,l);if(null!=b&&b.createPattern){if(b.getHrefAttribute().hasValue()){var f=b.attribute("patternTransform");b=b.getHrefAttribute().getDefinition(),f.hasValue()&&(b.attribute("patternTransform",!0).value=f.value);}return b.createPattern($.ctx,c);}return null;},$.Property.prototype.getDPI=function(c){return 96;},$.Property.prototype.getEM=function(c){var l=12,b=new $.Property("fontSize",$.Font.Parse($.ctx.font).fontSize);return b.hasValue()&&(l=b.toPixels(c)),l;},$.Property.prototype.getUnits=function(){var c=this.value+"";return c.replace(/[0-9\.\-]/g,"");},$.Property.prototype.toPixels=function(c,l){if(!this.hasValue())return 0;var b=this.value+"";if(b.match(/em$/))return this.numValue()*this.getEM(c);if(b.match(/ex$/))return this.numValue()*this.getEM(c)/2;if(b.match(/px$/))return this.numValue();if(b.match(/pt$/))return this.numValue()*this.getDPI(c)*(1/72);if(b.match(/pc$/))return 15*this.numValue();if(b.match(/cm$/))return this.numValue()*this.getDPI(c)/2.54;if(b.match(/mm$/))return this.numValue()*this.getDPI(c)/25.4;if(b.match(/in$/))return this.numValue()*this.getDPI(c);if(b.match(/%$/))return this.numValue()*$.ViewPort.ComputeSize(c);var f=this.numValue();return l&&f<1?f*$.ViewPort.ComputeSize(c):f;},$.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var c=this.value+"";return c.match(/s$/)?1e3*this.numValue():c.match(/ms$/)?this.numValue():this.numValue();},$.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var c=this.value+"";return c.match(/deg$/)?this.numValue()*(Math.PI/180):c.match(/grad$/)?this.numValue()*(Math.PI/200):c.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180);};var L={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return $.Property.prototype.toTextBaseline=function(){return this.hasValue()?L[this.value]:null;},$.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(c,l,b,f,n,U){var H=null!=U?this.Parse(U):this.CreateFont("","","","","",$.ctx.font);return{fontFamily:n||H.fontFamily,fontSize:f||H.fontSize,fontStyle:c||H.fontStyle,fontWeight:b||H.fontWeight,fontVariant:l||H.fontVariant,toString:function toString(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ");}};};var c=this;this.Parse=function(l){for(var b={},f=$.trim($.compressSpaces(l||"")).split(" "),n={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},U="",H=0;H<f.length;H++){n.fontStyle||c.Styles.indexOf(f[H])==-1?n.fontVariant||c.Variants.indexOf(f[H])==-1?n.fontWeight||c.Weights.indexOf(f[H])==-1?n.fontSize?"inherit"!=f[H]&&(U+=f[H]):("inherit"!=f[H]&&(b.fontSize=f[H].split("/")[0]),n.fontStyle=n.fontVariant=n.fontWeight=n.fontSize=!0):("inherit"!=f[H]&&(b.fontWeight=f[H]),n.fontStyle=n.fontVariant=n.fontWeight=!0):("inherit"!=f[H]&&(b.fontVariant=f[H]),n.fontStyle=n.fontVariant=!0):("inherit"!=f[H]&&(b.fontStyle=f[H]),n.fontStyle=!0);}return""!=U&&(b.fontFamily=U),b;};}(),$.ToNumberArray=function(c){for(var l=$.trim($.compressSpaces((c||"").replace(/,/g," "))).split(" "),b=0;b<l.length;b++){l[b]=parseFloat(l[b]);}return l;},$.Point=function(c,l){this.x=c,this.y=l;},$.Point.prototype.angleTo=function(c){return Math.atan2(c.y-this.y,c.x-this.x);},$.Point.prototype.applyTransform=function(c){var l=this.x*c[0]+this.y*c[2]+c[4],b=this.x*c[1]+this.y*c[3]+c[5];this.x=l,this.y=b;},$.CreatePoint=function(c){var l=$.ToNumberArray(c);return new $.Point(l[0],l[1]);},$.CreatePath=function(c){for(var l=$.ToNumberArray(c),b=[],f=0;f<l.length;f+=2){b.push(new $.Point(l[f],l[f+1]));}return b;},$.BoundingBox=function(c,l,b,f){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1;},this.y=function(){return this.y1;},this.width=function(){return this.x2-this.x1;},this.height=function(){return this.y2-this.y1;},this.addPoint=function(c,l){null!=c&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=c,this.x2=c),c<this.x1&&(this.x1=c),c>this.x2&&(this.x2=c)),null!=l&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=l,this.y2=l),l<this.y1&&(this.y1=l),l>this.y2&&(this.y2=l));},this.addX=function(c){this.addPoint(c,null);},this.addY=function(c){this.addPoint(null,c);},this.addBoundingBox=function(c){this.addPoint(c.x1,c.y1),this.addPoint(c.x2,c.y2);},this.addQuadraticCurve=function(c,l,b,f,n,U){var $=c+2/3*(b-c),H=l+2/3*(f-l),L=$+1/3*(n-c),e=H+1/3*(U-l);this.addBezierCurve(c,l,$,L,H,e,n,U);},this.addBezierCurve=function(c,l,b,f,n,U,$,H){var L=[c,l],e=[b,f],I=[n,U],Y=[$,H];this.addPoint(L[0],L[1]),this.addPoint(Y[0],Y[1]);for(var D=0;D<=1;D++){var T=function T(c){return Math.pow(1-c,3)*L[D]+3*Math.pow(1-c,2)*c*e[D]+3*(1-c)*Math.pow(c,2)*I[D]+Math.pow(c,3)*Y[D];},J=6*L[D]-12*e[D]+6*I[D],y=-3*L[D]+9*e[D]-9*I[D]+3*Y[D],m=3*e[D]-3*L[D];if(0!=y){var Q=Math.pow(J,2)-4*m*y;if(!(Q<0)){var B=(-J+Math.sqrt(Q))/(2*y);0<B&&B<1&&(0==D&&this.addX(T(B)),1==D&&this.addY(T(B)));var p=(-J-Math.sqrt(Q))/(2*y);0<p&&p<1&&(0==D&&this.addX(T(p)),1==D&&this.addY(T(p)));}}else{if(0==J)continue;var i=-m/J;0<i&&i<1&&(0==D&&this.addX(T(i)),1==D&&this.addY(T(i)));}}},this.isPointInBox=function(c,l){return this.x1<=c&&c<=this.x2&&this.y1<=l&&l<=this.y2;},this.addPoint(c,l),this.addPoint(b,f);},$.Transform=function(c){var l=this;this.Type={},this.Type.translate=function(c){this.p=$.CreatePoint(c),this.getMatrix=function(){return[1,0,0,1,this.p.x||0,this.p.y||0];},this.apply=function(c){c.translate(this.p.x||0,this.p.y||0);},this.unapply=function(c){c.translate(-1*this.p.x||0,-1*this.p.y||0);},this.applyToPoint=function(c){c.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);};},this.Type.rotate=function(c){var l=$.ToNumberArray(c);this.angle=new $.Property("angle",l[0]),this.cx=l[1]||0,this.cy=l[2]||0,this.apply=function(c){c.translate(this.cx,this.cy),c.rotate(this.angle.toRadians()),c.translate(-this.cx,-this.cy);},this.getMatrix=function(){var c=this.angle.toRadians(),l=Math.sin(c),b=Math.cos(c),f=this.cx,n=this.cy;return[b,l,-l,b,b*-f+l*n+f,l*-f-b*n+n];},this.unapply=function(c){c.translate(this.cx,this.cy),c.rotate(-1*this.angle.toRadians()),c.translate(-this.cx,-this.cy);},this.applyToPoint=function(c){var l=this.angle.toRadians();c.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),c.applyTransform([Math.cos(l),Math.sin(l),-Math.sin(l),Math.cos(l),0,0]),c.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0]);};},this.Type.scale=function(c){this.p=$.CreatePoint(c),this.getMatrix=function(){return[this.p.x||1,0,0,this.p.y||this.p.x||1,0,0];},this.apply=function(c){c.scale(this.p.x||1,this.p.y||this.p.x||1);},this.unapply=function(c){c.scale(1/this.p.x||1,1/this.p.y||this.p.x||1);},this.applyToPoint=function(c){c.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0]);};},this.Type.matrix=function(c){this.m=$.ToNumberArray(c),this.getMatrix=function(){return this.m;},this.apply=function(c){c.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5]);},this.unapply=function(c){var l=this.m[0],b=this.m[2],f=this.m[4],n=this.m[1],U=this.m[3],$=this.m[5],H=0,L=0,e=1,I=1/(l*(U*e-$*L)-b*(n*e-$*H)+f*(n*L-U*H));c.transform(I*(U*e-$*L),I*($*H-n*e),I*(f*L-b*e),I*(l*e-f*H),I*(b*$-f*U),I*(f*n-l*$));},this.applyToPoint=function(c){c.applyTransform(this.m);};},this.Type.SkewBase=function(c){this.base=l.Type.matrix,this.base(c),this.angle=new $.Property("angle",c);},this.Type.SkewBase.prototype=new this.Type.matrix(),this.Type.skewX=function(c){this.base=l.Type.SkewBase,this.base(c),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0];},this.Type.skewX.prototype=new this.Type.SkewBase(),this.Type.skewY=function(c){this.base=l.Type.SkewBase,this.base(c),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0];},this.Type.skewY.prototype=new this.Type.SkewBase(),this.transforms=[],this.getMatrix=function(){for(var c=1,l=0,b=0,f=1,n=0,U=0,$=0;$<this.transforms.length;$++){var H=this.transforms[$].getMatrix(),L=c,e=l,I=b,Y=f,D=n,T=U;c=L*H[0]+I*H[1],l=e*H[0]+Y*H[1],b=L*H[2]+I*H[3],f=e*H[2]+Y*H[3],n=L*H[4]+I*H[5]+D,U=e*H[4]+Y*H[5]+T;}return[c,l,b,f,n,U];},this.apply=function(c){for(var l=0;l<this.transforms.length;l++){this.transforms[l].apply(c);}},this.unapply=function(c){for(var l=this.transforms.length-1;l>=0;l--){this.transforms[l].unapply(c);}},this.applyToPoint=function(c){for(var l=0;l<this.transforms.length;l++){this.transforms[l].applyToPoint(c);}};for(var b=$.trim($.compressSpaces(c)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),f=0;f<b.length;f++){var n=$.trim(b[f].split("(")[0]),U=b[f].split("(")[1].replace(")",""),H=this.Type[n];if("undefined"!=typeof H){var L=new H(U);L.type=n,this.transforms.push(L);}}},$.AspectRatio=function(c,l,b,f,n,U,H,L,e,I){l=$.compressSpaces(l),l=l.replace(/^defer\s/,"");var Y=l.split(" ")[0]||"xMidYMid",D=l.split(" ")[1]||"meet",T=b/f,J=n/U,y=Math.min(T,J),m=Math.max(T,J);"meet"==D&&(f*=y,U*=y),"slice"==D&&(f*=m,U*=m),e=new $.Property("refX",e),I=new $.Property("refY",I),e.hasValue()&&I.hasValue()?c.translate(-y*e.toPixels("x"),-y*I.toPixels("y")):(Y.match(/^xMid/)&&("meet"==D&&y==J||"slice"==D&&m==J)&&c.translate(b/2-f/2,0),Y.match(/YMid$/)&&("meet"==D&&y==T||"slice"==D&&m==T)&&c.translate(0,n/2-U/2),Y.match(/^xMax/)&&("meet"==D&&y==J||"slice"==D&&m==J)&&c.translate(b-f,0),Y.match(/YMax$/)&&("meet"==D&&y==T||"slice"==D&&m==T)&&c.translate(0,n-U)),"none"==Y?c.scale(T,J):"meet"==D?c.scale(y,y):"slice"==D&&c.scale(m,m),c.translate(null==H?0:-H,null==L?0:-L);},$.Element={},$.EmptyProperty=new $.Property("EMPTY",""),$.Element.ElementBase=function(c){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(c,l){var b=this.attributes[c];return null!=b?b:(1==l&&(b=new $.Property(c,""),this.attributes[c]=b),b||$.EmptyProperty);},this.getHrefAttribute=function(){for(var c in this.attributes){if("href"==c||c.match(/:href$/))return this.attributes[c];}return $.EmptyProperty;},this.style=function(c,l,b){var f=this.styles[c];if(null!=f)return f;var n=this.attribute(c);if(null!=n&&n.hasValue())return this.styles[c]=n,n;if(1!=b){var U=this.parent;if(null!=U){var H=U.style(c);if(null!=H&&H.hasValue())return H;}}return 1==l&&(f=new $.Property(c,""),this.styles[c]=f),f||$.EmptyProperty;},this.render=function(c){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(c.save(),this.style("mask").hasValue()){var l=this.style("mask").getDefinition();null!=l&&l.apply(c,this);}else this.setContext(c),this.renderChildren(c),this.clearContext(c);c.restore();}},this.setContext=function(c){},this.clearContext=function(c){},this.renderChildren=function(c){for(var l=0;l<this.children.length;l++){this.children[l].render(c);}},this.addChild=function(c,l){var b=c;l&&(b=$.CreateElement(c)),b.parent=this,"title"!=b.type&&this.children.push(b);},this.addStylesFromStyleDefinition=function(){for(var l in $.Styles){if("@"!=l[0]&&H(c,l)){var b=$.Styles[l],f=$.StylesSpecificity[l];if(null!=b)for(var n in b){var U=this.stylesSpecificity[n];"undefined"==typeof U&&(U="000"),f>U&&(this.styles[n]=b[n],this.stylesSpecificity[n]=f);}}}};var l=new RegExp("^[A-Z-]+$"),b=function b(c){return l.test(c)?c.toLowerCase():c;};if(null!=c&&1==c.nodeType){for(var f=0;f<c.attributes.length;f++){var n=c.attributes[f],U=b(n.nodeName);this.attributes[U]=new $.Property(U,n.value);}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var L=this.attribute("style").value.split(";"),f=0;f<L.length;f++){if(""!=$.trim(L[f])){var e=L[f].split(":"),I=$.trim(e[0]),Y=$.trim(e[1]);this.styles[I]=new $.Property(I,Y);}}this.attribute("id").hasValue()&&null==$.Definitions[this.attribute("id").value]&&($.Definitions[this.attribute("id").value]=this);for(var f=0;f<c.childNodes.length;f++){var D=c.childNodes[f];if(1==D.nodeType&&this.addChild(D,!0),this.captureTextNodes&&(3==D.nodeType||4==D.nodeType)){var T=D.value||D.text||D.textContent||"";""!=$.compressSpaces(T)&&this.addChild(new $.Element.tspan(D),!1);}}}},$.Element.RenderedElementBase=function(c){this.base=$.Element.ElementBase,this.base(c),this.setContext=function(c){if(this.style("fill").isUrlDefinition()){var l=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=l&&(c.fillStyle=l);}else if(this.style("fill").hasValue()){var b=this.style("fill");"currentColor"==b.value&&(b.value=this.style("color").value),"inherit"!=b.value&&(c.fillStyle="none"==b.value?"rgba(0,0,0,0)":b.value);}if(this.style("fill-opacity").hasValue()){var b=new $.Property("fill",c.fillStyle);b=b.addOpacity(this.style("fill-opacity")),c.fillStyle=b.value;}if(this.style("stroke").isUrlDefinition()){var l=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=l&&(c.strokeStyle=l);}else if(this.style("stroke").hasValue()){var f=this.style("stroke");"currentColor"==f.value&&(f.value=this.style("color").value),"inherit"!=f.value&&(c.strokeStyle="none"==f.value?"rgba(0,0,0,0)":f.value);}if(this.style("stroke-opacity").hasValue()){var f=new $.Property("stroke",c.strokeStyle);f=f.addOpacity(this.style("stroke-opacity")),c.strokeStyle=f.value;}if(this.style("stroke-width").hasValue()){var n=this.style("stroke-width").toPixels();c.lineWidth=0==n?.001:n;}if(this.style("stroke-linecap").hasValue()&&(c.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(c.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(c.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var U=$.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof c.setLineDash?c.setLineDash(U):"undefined"!=typeof c.webkitLineDash?c.webkitLineDash=U:"undefined"==typeof c.mozDash||1==U.length&&0==U[0]||(c.mozDash=U);var H=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof c.lineDashOffset?c.lineDashOffset=H:"undefined"!=typeof c.webkitLineDashOffset?c.webkitLineDashOffset=H:"undefined"!=typeof c.mozDashOffset&&(c.mozDashOffset=H);}if("undefined"!=typeof c.font&&(c.font=$.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var L=new $.Transform(this.style("transform",!1,!0).value);L.apply(c);}if(this.style("clip-path",!1,!0).hasValue()){var e=this.style("clip-path",!1,!0).getDefinition();null!=e&&e.apply(c);}this.style("opacity").hasValue()&&(c.globalAlpha=this.style("opacity").numValue());};},$.Element.RenderedElementBase.prototype=new $.Element.ElementBase(),$.Element.PathElementBase=function(c){this.base=$.Element.RenderedElementBase,this.base(c),this.path=function(c){return null!=c&&c.beginPath(),new $.BoundingBox();},this.renderChildren=function(c){this.path(c),$.Mouse.checkPath(this,c),""!=c.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?c.fill(this.style("fill-rule").value):c.fill()),""!=c.strokeStyle&&c.stroke();var l=this.getMarkers();if(null!=l){if(this.style("marker-start").isUrlDefinition()){var b=this.style("marker-start").getDefinition();b.render(c,l[0][0],l[0][1]);}if(this.style("marker-mid").isUrlDefinition())for(var b=this.style("marker-mid").getDefinition(),f=1;f<l.length-1;f++){b.render(c,l[f][0],l[f][1]);}if(this.style("marker-end").isUrlDefinition()){var b=this.style("marker-end").getDefinition();b.render(c,l[l.length-1][0],l[l.length-1][1]);}}},this.getBoundingBox=function(){return this.path();},this.getMarkers=function(){return null;};},$.Element.PathElementBase.prototype=new $.Element.RenderedElementBase(),$.Element.svg=function(l){this.base=$.Element.RenderedElementBase,this.base(l),this.baseClearContext=this.clearContext,this.clearContext=function(c){this.baseClearContext(c),$.ViewPort.RemoveCurrent();},this.baseSetContext=this.setContext,this.setContext=function(l){l.strokeStyle="rgba(0,0,0,0)",l.lineCap="butt",l.lineJoin="miter",l.miterLimit=4,"undefined"!=typeof l.font&&"undefined"!=typeof c.getComputedStyle&&(l.font=c.getComputedStyle(l.canvas).getPropertyValue("font")),this.baseSetContext(l),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),l.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var b=$.ViewPort.width(),f=$.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){b=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y");var n=0,U=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(n=-this.attribute("refX").toPixels("x"),U=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(l.beginPath(),l.moveTo(n,U),l.lineTo(b,U),l.lineTo(b,f),l.lineTo(n,f),l.closePath(),l.clip());}if($.ViewPort.SetCurrent(b,f),this.attribute("viewBox").hasValue()){var H=$.ToNumberArray(this.attribute("viewBox").value),L=H[0],e=H[1];b=H[2],f=H[3],$.AspectRatio(l,this.attribute("preserveAspectRatio").value,$.ViewPort.width(),b,$.ViewPort.height(),f,L,e,this.attribute("refX").value,this.attribute("refY").value),$.ViewPort.RemoveCurrent(),$.ViewPort.SetCurrent(H[2],H[3]);}};},$.Element.svg.prototype=new $.Element.RenderedElementBase(),$.Element.rect=function(c){this.base=$.Element.PathElementBase,this.base(c),this.path=function(c){var l=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),n=this.attribute("height").toPixels("y"),U=this.attribute("rx").toPixels("x"),H=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(H=U),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(U=H),U=Math.min(U,f/2),H=Math.min(H,n/2),null!=c&&(c.beginPath(),c.moveTo(l+U,b),c.lineTo(l+f-U,b),c.quadraticCurveTo(l+f,b,l+f,b+H),c.lineTo(l+f,b+n-H),c.quadraticCurveTo(l+f,b+n,l+f-U,b+n),c.lineTo(l+U,b+n),c.quadraticCurveTo(l,b+n,l,b+n-H),c.lineTo(l,b+H),c.quadraticCurveTo(l,b,l+U,b),c.closePath()),new $.BoundingBox(l,b,l+f,b+n);};},$.Element.rect.prototype=new $.Element.PathElementBase(),$.Element.circle=function(c){this.base=$.Element.PathElementBase,this.base(c),this.path=function(c){var l=this.attribute("cx").toPixels("x"),b=this.attribute("cy").toPixels("y"),f=this.attribute("r").toPixels();return null!=c&&(c.beginPath(),c.arc(l,b,f,0,2*Math.PI,!0),c.closePath()),new $.BoundingBox(l-f,b-f,l+f,b+f);};},$.Element.circle.prototype=new $.Element.PathElementBase(),$.Element.ellipse=function(c){this.base=$.Element.PathElementBase,this.base(c),this.path=function(c){var l=4*((Math.sqrt(2)-1)/3),b=this.attribute("rx").toPixels("x"),f=this.attribute("ry").toPixels("y"),n=this.attribute("cx").toPixels("x"),U=this.attribute("cy").toPixels("y");return null!=c&&(c.beginPath(),c.moveTo(n,U-f),c.bezierCurveTo(n+l*b,U-f,n+b,U-l*f,n+b,U),c.bezierCurveTo(n+b,U+l*f,n+l*b,U+f,n,U+f),c.bezierCurveTo(n-l*b,U+f,n-b,U+l*f,n-b,U),c.bezierCurveTo(n-b,U-l*f,n-l*b,U-f,n,U-f),c.closePath()),new $.BoundingBox(n-b,U-f,n+b,U+f);};},$.Element.ellipse.prototype=new $.Element.PathElementBase(),$.Element.line=function(c){this.base=$.Element.PathElementBase,this.base(c),this.getPoints=function(){return[new $.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new $.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))];},this.path=function(c){var l=this.getPoints();return null!=c&&(c.beginPath(),c.moveTo(l[0].x,l[0].y),c.lineTo(l[1].x,l[1].y)),new $.BoundingBox(l[0].x,l[0].y,l[1].x,l[1].y);},this.getMarkers=function(){var c=this.getPoints(),l=c[0].angleTo(c[1]);return[[c[0],l],[c[1],l]];};},$.Element.line.prototype=new $.Element.PathElementBase(),$.Element.polyline=function(c){this.base=$.Element.PathElementBase,this.base(c),this.points=$.CreatePath(this.attribute("points").value),this.path=function(c){var l=new $.BoundingBox(this.points[0].x,this.points[0].y);null!=c&&(c.beginPath(),c.moveTo(this.points[0].x,this.points[0].y));for(var b=1;b<this.points.length;b++){l.addPoint(this.points[b].x,this.points[b].y),null!=c&&c.lineTo(this.points[b].x,this.points[b].y);}return l;},this.getMarkers=function(){for(var c=[],l=0;l<this.points.length-1;l++){c.push([this.points[l],this.points[l].angleTo(this.points[l+1])]);}return c.length>0&&c.push([this.points[this.points.length-1],c[c.length-1][1]]),c;};},$.Element.polyline.prototype=new $.Element.PathElementBase(),$.Element.polygon=function(c){this.base=$.Element.polyline,this.base(c),this.basePath=this.path,this.path=function(c){var l=this.basePath(c);return null!=c&&(c.lineTo(this.points[0].x,this.points[0].y),c.closePath()),l;};},$.Element.polygon.prototype=new $.Element.polyline(),$.Element.path=function(c){this.base=$.Element.PathElementBase,this.base(c);var l=this.attribute("d").value;l=l.replace(/,/gm," ");for(var b=0;b<2;b++){l=l.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");}l=l.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),l=l.replace(/([0-9])([+\-])/gm,"$1 $2");for(var b=0;b<2;b++){l=l.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");}l=l.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),l=$.compressSpaces(l),l=$.trim(l),this.PathParser=new function(c){this.tokens=c.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new $.Point(0,0),this.control=new $.Point(0,0),this.current=new $.Point(0,0),this.points=[],this.angles=[];},this.isEnd=function(){return this.i>=this.tokens.length-1;},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/);},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0;}return!1;},this.getToken=function(){return this.i++,this.tokens[this.i];},this.getScalar=function(){return parseFloat(this.getToken());},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken();},this.getPoint=function(){var c=new $.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(c);},this.getAsControlPoint=function(){var c=this.getPoint();return this.control=c,c;},this.getAsCurrentPoint=function(){var c=this.getPoint();return this.current=c,c;},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var c=new $.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return c;},this.makeAbsolute=function(c){return this.isRelativeCommand()&&(c.x+=this.current.x,c.y+=this.current.y),c;},this.addMarker=function(c,l,b){null!=b&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(b)),this.addMarkerAngle(c,null==l?null:l.angleTo(c));},this.addMarkerAngle=function(c,l){this.points.push(c),this.angles.push(l);},this.getMarkerPoints=function(){return this.points;},this.getMarkerAngles=function(){for(var c=0;c<this.angles.length;c++){if(null==this.angles[c])for(var l=c+1;l<this.angles.length;l++){if(null!=this.angles[l]){this.angles[c]=this.angles[l];break;}}}return this.angles;};}(l),this.path=function(c){var l=this.PathParser;l.reset();var b=new $.BoundingBox();for(null!=c&&c.beginPath();!l.isEnd();){switch(l.nextCommand(),l.command){case"M":case"m":var f=l.getAsCurrentPoint();for(l.addMarker(f),b.addPoint(f.x,f.y),null!=c&&c.moveTo(f.x,f.y),l.start=l.current;!l.isCommandOrEnd();){var f=l.getAsCurrentPoint();l.addMarker(f,l.start),b.addPoint(f.x,f.y),null!=c&&c.lineTo(f.x,f.y);}break;case"L":case"l":for(;!l.isCommandOrEnd();){var n=l.current,f=l.getAsCurrentPoint();l.addMarker(f,n),b.addPoint(f.x,f.y),null!=c&&c.lineTo(f.x,f.y);}break;case"H":case"h":for(;!l.isCommandOrEnd();){var U=new $.Point((l.isRelativeCommand()?l.current.x:0)+l.getScalar(),l.current.y);l.addMarker(U,l.current),l.current=U,b.addPoint(l.current.x,l.current.y),null!=c&&c.lineTo(l.current.x,l.current.y);}break;case"V":case"v":for(;!l.isCommandOrEnd();){var U=new $.Point(l.current.x,(l.isRelativeCommand()?l.current.y:0)+l.getScalar());l.addMarker(U,l.current),l.current=U,b.addPoint(l.current.x,l.current.y),null!=c&&c.lineTo(l.current.x,l.current.y);}break;case"C":case"c":for(;!l.isCommandOrEnd();){var H=l.current,L=l.getPoint(),e=l.getAsControlPoint(),I=l.getAsCurrentPoint();l.addMarker(I,e,L),b.addBezierCurve(H.x,H.y,L.x,L.y,e.x,e.y,I.x,I.y),null!=c&&c.bezierCurveTo(L.x,L.y,e.x,e.y,I.x,I.y);}break;case"S":case"s":for(;!l.isCommandOrEnd();){var H=l.current,L=l.getReflectedControlPoint(),e=l.getAsControlPoint(),I=l.getAsCurrentPoint();l.addMarker(I,e,L),b.addBezierCurve(H.x,H.y,L.x,L.y,e.x,e.y,I.x,I.y),null!=c&&c.bezierCurveTo(L.x,L.y,e.x,e.y,I.x,I.y),l.previousCommand=l.command;}break;case"Q":case"q":for(;!l.isCommandOrEnd();){var H=l.current,e=l.getAsControlPoint(),I=l.getAsCurrentPoint();l.addMarker(I,e,e),b.addQuadraticCurve(H.x,H.y,e.x,e.y,I.x,I.y),null!=c&&c.quadraticCurveTo(e.x,e.y,I.x,I.y);}break;case"T":case"t":for(;!l.isCommandOrEnd();){var H=l.current,e=l.getReflectedControlPoint();l.control=e;var I=l.getAsCurrentPoint();l.addMarker(I,e,e),b.addQuadraticCurve(H.x,H.y,e.x,e.y,I.x,I.y),null!=c&&c.quadraticCurveTo(e.x,e.y,I.x,I.y),l.previousCommand=l.command;}break;case"A":case"a":for(;!l.isCommandOrEnd();){var H=l.current,Y=l.getScalar(),D=l.getScalar(),T=l.getScalar()*(Math.PI/180),J=l.getScalar(),y=l.getScalar(),I=l.getAsCurrentPoint(),m=new $.Point(Math.cos(T)*(H.x-I.x)/2+Math.sin(T)*(H.y-I.y)/2,-Math.sin(T)*(H.x-I.x)/2+Math.cos(T)*(H.y-I.y)/2),Q=Math.pow(m.x,2)/Math.pow(Y,2)+Math.pow(m.y,2)/Math.pow(D,2);Q>1&&(Y*=Math.sqrt(Q),D*=Math.sqrt(Q));var B=(J==y?-1:1)*Math.sqrt((Math.pow(Y,2)*Math.pow(D,2)-Math.pow(Y,2)*Math.pow(m.y,2)-Math.pow(D,2)*Math.pow(m.x,2))/(Math.pow(Y,2)*Math.pow(m.y,2)+Math.pow(D,2)*Math.pow(m.x,2)));isNaN(B)&&(B=0);var p=new $.Point(B*Y*m.y/D,B*-D*m.x/Y),i=new $.Point((H.x+I.x)/2+Math.cos(T)*p.x-Math.sin(T)*p.y,(H.y+I.y)/2+Math.sin(T)*p.x+Math.cos(T)*p.y),Z=function Z(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2));},a=function a(c,l){return(c[0]*l[0]+c[1]*l[1])/(Z(c)*Z(l));},j=function j(c,l){return(c[0]*l[1]<c[1]*l[0]?-1:1)*Math.acos(a(c,l));},u=j([1,0],[(m.x-p.x)/Y,(m.y-p.y)/D]),X=[(m.x-p.x)/Y,(m.y-p.y)/D],A=[(-m.x-p.x)/Y,(-m.y-p.y)/D],v=j(X,A);a(X,A)<=-1&&(v=Math.PI),a(X,A)>=1&&(v=0);var N=1-y?1:-1,h=u+N*(v/2),C=new $.Point(i.x+Y*Math.cos(h),i.y+D*Math.sin(h));if(l.addMarkerAngle(C,h-N*Math.PI/2),l.addMarkerAngle(I,h-N*Math.PI),b.addPoint(I.x,I.y),null!=c){var a=Y>D?Y:D,t=Y>D?1:Y/D,F=Y>D?D/Y:1;c.translate(i.x,i.y),c.rotate(T),c.scale(t,F),c.arc(0,0,a,u,u+v,1-y),c.scale(1/t,1/F),c.rotate(-T),c.translate(-i.x,-i.y);}}break;case"Z":case"z":null!=c&&c.closePath(),l.current=l.start;}}return b;},this.getMarkers=function(){for(var c=this.PathParser.getMarkerPoints(),l=this.PathParser.getMarkerAngles(),b=[],f=0;f<c.length;f++){b.push([c[f],l[f]]);}return b;};},$.Element.path.prototype=new $.Element.PathElementBase(),$.Element.pattern=function(c){this.base=$.Element.ElementBase,this.base(c),this.createPattern=function(c,l){var b=this.attribute("width").toPixels("x",!0),f=this.attribute("height").toPixels("y",!0),n=new $.Element.svg();n.attributes.viewBox=new $.Property("viewBox",this.attribute("viewBox").value),n.attributes.width=new $.Property("width",b+"px"),n.attributes.height=new $.Property("height",f+"px"),n.attributes.transform=new $.Property("transform",this.attribute("patternTransform").value),n.children=this.children;var U=document.createElement("canvas");U.width=b,U.height=f;var H=U.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&H.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var L=-1;L<=1;L++){for(var e=-1;e<=1;e++){H.save(),n.attributes.x=new $.Property("x",L*U.width),n.attributes.y=new $.Property("y",e*U.height),n.render(H),H.restore();}}var I=c.createPattern(U,"repeat");return I;};},$.Element.pattern.prototype=new $.Element.ElementBase(),$.Element.marker=function(c){this.base=$.Element.ElementBase,this.base(c),this.baseRender=this.render,this.render=function(c,l,b){c.translate(l.x,l.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&c.rotate(b),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&c.scale(c.lineWidth,c.lineWidth),c.save();var f=new $.Element.svg();f.attributes.viewBox=new $.Property("viewBox",this.attribute("viewBox").value),f.attributes.refX=new $.Property("refX",this.attribute("refX").value),f.attributes.refY=new $.Property("refY",this.attribute("refY").value),f.attributes.width=new $.Property("width",this.attribute("markerWidth").value),f.attributes.height=new $.Property("height",this.attribute("markerHeight").value),f.attributes.fill=new $.Property("fill",this.attribute("fill").valueOrDefault("black")),f.attributes.stroke=new $.Property("stroke",this.attribute("stroke").valueOrDefault("none")),f.children=this.children,f.render(c),c.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&c.scale(1/c.lineWidth,1/c.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&c.rotate(-b),c.translate(-l.x,-l.y);};},$.Element.marker.prototype=new $.Element.ElementBase(),$.Element.defs=function(c){this.base=$.Element.ElementBase,this.base(c),this.render=function(c){};},$.Element.defs.prototype=new $.Element.ElementBase(),$.Element.GradientBase=function(c){this.base=$.Element.ElementBase,this.base(c),this.stops=[];for(var l=0;l<this.children.length;l++){var b=this.children[l];"stop"==b.type&&this.stops.push(b);}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox");},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(c){for(var l=0;l<this.attributesToInherit.length;l++){var b=this.attributesToInherit[l];!this.attribute(b).hasValue()&&c.attribute(b).hasValue()&&(this.attribute(b,!0).value=c.attribute(b).value);}},this.createGradient=function(c,l,b){var f=this;this.getHrefAttribute().hasValue()&&(f=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(f));var n=function n(c){if(b.hasValue()){var l=new $.Property("color",c);return l.addOpacity(b).value;}return c;},U=this.getGradient(c,l);if(null==U)return n(f.stops[f.stops.length-1].color);for(var H=0;H<f.stops.length;H++){U.addColorStop(f.stops[H].offset,n(f.stops[H].color));}if(this.attribute("gradientTransform").hasValue()){var L=$.ViewPort.viewPorts[0],e=new $.Element.rect();e.attributes.x=new $.Property("x",-$.MAX_VIRTUAL_PIXELS/3),e.attributes.y=new $.Property("y",-$.MAX_VIRTUAL_PIXELS/3),e.attributes.width=new $.Property("width",$.MAX_VIRTUAL_PIXELS),e.attributes.height=new $.Property("height",$.MAX_VIRTUAL_PIXELS);var I=new $.Element.g();I.attributes.transform=new $.Property("transform",this.attribute("gradientTransform").value),I.children=[e];var Y=new $.Element.svg();Y.attributes.x=new $.Property("x",0),Y.attributes.y=new $.Property("y",0),Y.attributes.width=new $.Property("width",L.width),Y.attributes.height=new $.Property("height",L.height),Y.children=[I];var D=document.createElement("canvas");D.width=L.width,D.height=L.height;var T=D.getContext("2d");T.fillStyle=U,Y.render(T);var J=T.createPattern(D,"no-repeat");return J.gradient=U,J.gradientTransform=this.attribute("gradientTransform").value,J.trans=new $.Transform(this.attribute("gradientTransform").value).getMatrix(),J;}return U;};},$.Element.GradientBase.prototype=new $.Element.ElementBase(),$.Element.linearGradient=function(c){this.base=$.Element.GradientBase,this.base(c),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(c,l){var b="objectBoundingBox"==this.gradientUnits()?l.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var f="objectBoundingBox"==this.gradientUnits()?b.x()+b.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),n="objectBoundingBox"==this.gradientUnits()?b.y()+b.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),U="objectBoundingBox"==this.gradientUnits()?b.x()+b.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),$="objectBoundingBox"==this.gradientUnits()?b.y()+b.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return f==U&&n==$?null:c.createLinearGradient(f,n,U,$);};},$.Element.linearGradient.prototype=new $.Element.GradientBase(),$.Element.radialGradient=function(c){this.base=$.Element.GradientBase,this.base(c),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(c,l){var b=l.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var f="objectBoundingBox"==this.gradientUnits()?b.x()+b.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),n="objectBoundingBox"==this.gradientUnits()?b.y()+b.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),U=f,$=n;this.attribute("fx").hasValue()&&(U="objectBoundingBox"==this.gradientUnits()?b.x()+b.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&($="objectBoundingBox"==this.gradientUnits()?b.y()+b.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var H="objectBoundingBox"==this.gradientUnits()?(b.width()+b.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return c.createRadialGradient(U,$,0,f,n,H);};},$.Element.radialGradient.prototype=new $.Element.GradientBase(),$.Element.stop=function(c){this.base=$.Element.ElementBase,this.base(c),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var l=this.style("stop-color",!0);""===l.value&&(l.value="#000"),this.style("stop-opacity").hasValue()&&(l=l.addOpacity(this.style("stop-opacity"))),this.color=l.value;},$.Element.stop.prototype=new $.Element.ElementBase(),$.Element.AnimateBase=function(c){this.base=$.Element.ElementBase,this.base(c),$.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var c=this.attribute("attributeType").value,l=this.attribute("attributeName").value;return"CSS"==c?this.parent.style(l,!0):this.parent.attribute(l,!0);},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return"";},this.update=function(c){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0;}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1;}this.duration=this.duration+c;var l=!1;if(this.begin<this.duration){var b=this.calcValue();if(this.attribute("type").hasValue()){var f=this.attribute("type").value;b=f+"("+b+")";}this.getProperty().value=b,l=!0;}return l;},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var c={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var l=c.progress*(this.values.value.length-1),b=Math.floor(l),f=Math.ceil(l);c.from=new $.Property("from",parseFloat(this.values.value[b])),c.to=new $.Property("to",parseFloat(this.values.value[f])),c.progress=(l-b)/(f-b);}else c.from=this.from,c.to=this.to;return c;};},$.Element.AnimateBase.prototype=new $.Element.ElementBase(),$.Element.animate=function(c){this.base=$.Element.AnimateBase,this.base(c),this.calcValue=function(){var c=this.progress(),l=c.from.numValue()+(c.to.numValue()-c.from.numValue())*c.progress;return l+this.initialUnits;};},$.Element.animate.prototype=new $.Element.AnimateBase(),$.Element.animateColor=function(c){this.base=$.Element.AnimateBase,this.base(c),this.calcValue=function(){var c=this.progress(),b=new l(c.from.value),f=new l(c.to.value);if(b.ok&&f.ok){var n=b.r+(f.r-b.r)*c.progress,U=b.g+(f.g-b.g)*c.progress,$=b.b+(f.b-b.b)*c.progress;return"rgb("+parseInt(n,10)+","+parseInt(U,10)+","+parseInt($,10)+")";}return this.attribute("from").value;};},$.Element.animateColor.prototype=new $.Element.AnimateBase(),$.Element.animateTransform=function(c){this.base=$.Element.AnimateBase,this.base(c),this.calcValue=function(){for(var c=this.progress(),l=$.ToNumberArray(c.from.value),b=$.ToNumberArray(c.to.value),f="",n=0;n<l.length;n++){f+=l[n]+(b[n]-l[n])*c.progress+" ";}return f;};},$.Element.animateTransform.prototype=new $.Element.animate(),$.Element.font=function(c){this.base=$.Element.ElementBase,this.base(c),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var l=0;l<this.children.length;l++){var b=this.children[l];"font-face"==b.type?(this.fontFace=b,b.style("font-family").hasValue()&&($.Definitions[b.style("font-family").value]=this)):"missing-glyph"==b.type?this.missingGlyph=b:"glyph"==b.type&&(""!=b.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[b.unicode]&&(this.glyphs[b.unicode]=[]),this.glyphs[b.unicode][b.arabicForm]=b):this.glyphs[b.unicode]=b);}},$.Element.font.prototype=new $.Element.ElementBase(),$.Element.fontface=function(c){this.base=$.Element.ElementBase,this.base(c),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue();},$.Element.fontface.prototype=new $.Element.ElementBase(),$.Element.missingglyph=function(c){this.base=$.Element.path,this.base(c),this.horizAdvX=0;},$.Element.missingglyph.prototype=new $.Element.path(),$.Element.glyph=function(c){this.base=$.Element.path,this.base(c),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value;},$.Element.glyph.prototype=new $.Element.path(),$.Element.text=function(c){this.captureTextNodes=!0,this.base=$.Element.RenderedElementBase,this.base(c),this.baseSetContext=this.setContext,this.setContext=function(c){this.baseSetContext(c);var l=this.style("dominant-baseline").toTextBaseline();null==l&&(l=this.style("alignment-baseline").toTextBaseline()),null!=l&&(c.textBaseline=l);},this.getBoundingBox=function(){var c=this.attribute("x").toPixels("x"),l=this.attribute("y").toPixels("y"),b=this.parent.style("font-size").numValueOrDefault($.Font.Parse($.ctx.font).fontSize);return new $.BoundingBox(c,l-b,c+Math.floor(2*b/3)*this.children[0].getText().length,l);},this.renderChildren=function(c){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(c,this,0);for(var l=0;l<this.children.length;l++){this.renderChild(c,this,this,l);}},this.getAnchorDelta=function(c,l,b){var f=this.style("text-anchor").valueOrDefault("start");if("start"!=f){for(var n=0,U=b;U<l.children.length;U++){var $=l.children[U];if(U>b&&$.attribute("x").hasValue())break;$.measureTextRecursive&&(n+=$.measureTextRecursive(c));}return-1*("end"==f?n:n/2);}return 0;},this.renderChild=function(c,l,b,f){var n=b.children[f];n.attribute("x").hasValue()?(n.x=n.attribute("x").toPixels("x")+l.getAnchorDelta(c,b,f),n.attribute("dx").hasValue()&&(n.x+=n.attribute("dx").toPixels("x"))):(n.attribute("dx").hasValue()&&(l.x+=n.attribute("dx").toPixels("x")),n.x=l.x),l.x=n.x+(n.measureText?n.measureText(c):0),n.attribute("y").hasValue()?(n.y=n.attribute("y").toPixels("y"),n.attribute("dy").hasValue()&&(n.y+=n.attribute("dy").toPixels("y"))):(n.attribute("dy").hasValue()&&(l.y+=n.attribute("dy").toPixels("y")),n.y=l.y),l.y=n.y,n.render(c);for(var f=0;f<n.children.length;f++){l.renderChild(c,l,n,f);}};},$.Element.text.prototype=new $.Element.RenderedElementBase(),$.Element.TextElementBase=function(c){this.base=$.Element.RenderedElementBase,this.base(c),this.getGlyph=function(c,l,b){var f=l[b],n=null;if(c.isArabic){var U="isolated";(0==b||" "==l[b-1])&&b<l.length-2&&" "!=l[b+1]&&(U="terminal"),b>0&&" "!=l[b-1]&&b<l.length-2&&" "!=l[b+1]&&(U="medial"),b>0&&" "!=l[b-1]&&(b==l.length-1||" "==l[b+1])&&(U="initial"),"undefined"!=typeof c.glyphs[f]&&(n=c.glyphs[f][U],null==n&&"glyph"==c.glyphs[f].type&&(n=c.glyphs[f]));}else n=c.glyphs[f];return null==n&&(n=c.missingGlyph),n;},this.renderChildren=function(c){var l=this.parent.style("font-family").getDefinition();if(null==l)""!=c.fillStyle&&c.fillText($.compressSpaces(this.getText()),this.x,this.y),""!=c.strokeStyle&&c.strokeText($.compressSpaces(this.getText()),this.x,this.y);else{var b=this.parent.style("font-size").numValueOrDefault($.Font.Parse($.ctx.font).fontSize),f=this.parent.style("font-style").valueOrDefault($.Font.Parse($.ctx.font).fontStyle),n=this.getText();l.isRTL&&(n=n.split("").reverse().join(""));for(var U=$.ToNumberArray(this.parent.attribute("dx").value),H=0;H<n.length;H++){var L=this.getGlyph(l,n,H),e=b/l.fontFace.unitsPerEm;c.translate(this.x,this.y),c.scale(e,-e);var I=c.lineWidth;c.lineWidth=c.lineWidth*l.fontFace.unitsPerEm/b,"italic"==f&&c.transform(1,0,.4,1,0,0),L.render(c),"italic"==f&&c.transform(1,0,-.4,1,0,0),c.lineWidth=I,c.scale(1/e,-1/e),c.translate(-this.x,-this.y),this.x+=b*(L.horizAdvX||l.horizAdvX)/l.fontFace.unitsPerEm,"undefined"==typeof U[H]||isNaN(U[H])||(this.x+=U[H]);}}},this.getText=function(){},this.measureTextRecursive=function(c){for(var l=this.measureText(c),b=0;b<this.children.length;b++){l+=this.children[b].measureTextRecursive(c);}return l;},this.measureText=function(c){var l=this.parent.style("font-family").getDefinition();if(null!=l){var b=this.parent.style("font-size").numValueOrDefault($.Font.Parse($.ctx.font).fontSize),f=0,n=this.getText();l.isRTL&&(n=n.split("").reverse().join(""));for(var U=$.ToNumberArray(this.parent.attribute("dx").value),H=0;H<n.length;H++){var L=this.getGlyph(l,n,H);f+=(L.horizAdvX||l.horizAdvX)*b/l.fontFace.unitsPerEm,"undefined"==typeof U[H]||isNaN(U[H])||(f+=U[H]);}return f;}var e=$.compressSpaces(this.getText());if(!c.measureText)return 10*e.length;c.save(),this.setContext(c);var I=c.measureText(e).width;return c.restore(),I;};},$.Element.TextElementBase.prototype=new $.Element.RenderedElementBase(),$.Element.tspan=function(c){this.captureTextNodes=!0,this.base=$.Element.TextElementBase,this.base(c),this.text=$.compressSpaces(c.value||c.text||c.textContent||""),this.getText=function(){return this.children.length>0?"":this.text;};},$.Element.tspan.prototype=new $.Element.TextElementBase(),$.Element.tref=function(c){this.base=$.Element.TextElementBase,this.base(c),this.getText=function(){var c=this.getHrefAttribute().getDefinition();if(null!=c)return c.children[0].getText();};},$.Element.tref.prototype=new $.Element.TextElementBase(),$.Element.a=function(l){this.base=$.Element.TextElementBase,this.base(l),this.hasText=l.childNodes.length>0;for(var b=0;b<l.childNodes.length;b++){3!=l.childNodes[b].nodeType&&(this.hasText=!1);}this.text=this.hasText?l.childNodes[0].value:"",this.getText=function(){return this.text;},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(c){if(this.hasText){this.baseRenderChildren(c);var l=new $.Property("fontSize",$.Font.Parse($.ctx.font).fontSize);$.Mouse.checkBoundingBox(this,new $.BoundingBox(this.x,this.y-l.toPixels("y"),this.x+this.measureText(c),this.y));}else if(this.children.length>0){var b=new $.Element.g();b.children=this.children,b.parent=this,b.render(c);}},this.onclick=function(){c.open(this.getHrefAttribute().value);},this.onmousemove=function(){$.ctx.canvas.style.cursor="pointer";};},$.Element.a.prototype=new $.Element.TextElementBase(),$.Element.image=function(c){this.base=$.Element.RenderedElementBase,this.base(c);var l=this.getHrefAttribute().value;if(""!=l){var b=l.match(/\.svg$/);if($.Images.push(this),this.loaded=!1,b)this.img=$.ajax(l),this.loaded=!0;else{this.img=document.createElement("img"),1==$.opts.useCORS&&(this.img.crossOrigin="Anonymous");var f=this;this.img.onload=function(){f.loaded=!0;},this.img.onerror=function(){$.log('ERROR: image "'+l+'" not found'),f.loaded=!0;},this.img.src=l;}this.renderChildren=function(c){var l=this.attribute("x").toPixels("x"),f=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),U=this.attribute("height").toPixels("y");0!=n&&0!=U&&(c.save(),b?c.drawSvg(this.img,l,f,n,U):(c.translate(l,f),$.AspectRatio(c,this.attribute("preserveAspectRatio").value,n,this.img.width,U,this.img.height,0,0),c.drawImage(this.img,0,0)),c.restore());},this.getBoundingBox=function(){var c=this.attribute("x").toPixels("x"),l=this.attribute("y").toPixels("y"),b=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y");return new $.BoundingBox(c,l,c+b,l+f);};}},$.Element.image.prototype=new $.Element.RenderedElementBase(),$.Element.g=function(c){this.base=$.Element.RenderedElementBase,this.base(c),this.getBoundingBox=function(){for(var c=new $.BoundingBox(),l=0;l<this.children.length;l++){c.addBoundingBox(this.children[l].getBoundingBox());}return c;};},$.Element.g.prototype=new $.Element.RenderedElementBase(),$.Element.symbol=function(c){this.base=$.Element.RenderedElementBase,this.base(c),this.render=function(c){};},$.Element.symbol.prototype=new $.Element.RenderedElementBase(),$.Element.switch=function(c){this.base=$.Element.RenderedElementBase,this.base(c);},$.Element.switch.prototype=new $.Element.symbol(),$.Element.style=function(c){this.base=$.Element.ElementBase,this.base(c);for(var l="",b=0;b<c.childNodes.length;b++){l+=c.childNodes[b].data;}l=l.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),l=$.compressSpaces(l);for(var n=l.split("}"),b=0;b<n.length;b++){if(""!=$.trim(n[b]))for(var U=n[b].split("{"),H=U[0].split(","),L=U[1].split(";"),e=0;e<H.length;e++){var I=$.trim(H[e]);if(""!=I){for(var Y=$.Styles[I]||{},D=0;D<L.length;D++){var T=L[D].indexOf(":"),J=L[D].substr(0,T),y=L[D].substr(T+1,L[D].length-T);null!=J&&null!=y&&(Y[$.trim(J)]=new $.Property($.trim(J),$.trim(y)));}if($.Styles[I]=Y,$.StylesSpecificity[I]=f(I),"@font-face"==I)for(var m=Y["font-family"].value.replace(/"/g,""),Q=Y.src.value.split(","),B=0;B<Q.length;B++){if(Q[B].indexOf('format("svg")')>0)for(var p=Q[B].indexOf("url"),i=Q[B].indexOf(")",p),Z=Q[B].substr(p+5,i-p-6),a=$.parseXml($.ajax(Z)),j=a.getElementsByTagName("font"),u=0;u<j.length;u++){var X=$.CreateElement(j[u]);$.Definitions[m]=X;}}}}}},$.Element.style.prototype=new $.Element.ElementBase(),$.Element.use=function(c){this.base=$.Element.RenderedElementBase,this.base(c),this.baseSetContext=this.setContext,this.setContext=function(c){this.baseSetContext(c),this.attribute("x").hasValue()&&c.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&c.translate(0,this.attribute("y").toPixels("y"));};var l=this.getHrefAttribute().getDefinition();this.path=function(c){null!=l&&l.path(c);},this.getBoundingBox=function(){if(null!=l)return l.getBoundingBox();},this.renderChildren=function(c){if(null!=l){var b=l;"symbol"==l.type&&(b=new $.Element.svg(),b.type="svg",b.attributes.viewBox=new $.Property("viewBox",l.attribute("viewBox").value),b.attributes.preserveAspectRatio=new $.Property("preserveAspectRatio",l.attribute("preserveAspectRatio").value),b.attributes.overflow=new $.Property("overflow",l.attribute("overflow").value),b.children=l.children),"svg"==b.type&&(this.attribute("width").hasValue()&&(b.attributes.width=new $.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(b.attributes.height=new $.Property("height",this.attribute("height").value)));var f=b.parent;b.parent=null,b.render(c),b.parent=f;}};},$.Element.use.prototype=new $.Element.RenderedElementBase(),$.Element.mask=function(c){this.base=$.Element.ElementBase,this.base(c),this.apply=function(c,l){var b=this.attribute("x").toPixels("x"),f=this.attribute("y").toPixels("y"),n=this.attribute("width").toPixels("x"),U=this.attribute("height").toPixels("y"),H=1,L=2048;if(0==n&&0==U){for(var e=new $.BoundingBox(),I=0;I<this.children.length;I++){this.children[I].getBoundingBox&&e.addBoundingBox(this.children[I].getBoundingBox());}b=Math.floor(e.x1),f=Math.floor(e.y1),n=Math.floor(e.width()),U=Math.floor(e.height());}if(n&&U){var Y=b+n,D=f+U;(Y>L||D>L)&&(H=Math.min(L/Y,L/D),Y*=H,D*=H);var T=l.style("mask").value;l.style("mask").value="";var J=document.createElement("canvas");J.width=Y,J.height=D;var y=J.getContext("2d");if(y.save(),1!==H&&y.scale(H,H),this.renderChildren(y),y.restore(),J.width&&J.height){var m=document.createElement("canvas");m.width=Y,m.height=D;var Q=m.getContext("2d");Q.save(),1!==H&&Q.scale(H,H),l.render(Q),Q.restore(),Q.globalCompositeOperation="destination-in",Q.fillStyle=y.createPattern(J,"no-repeat"),Q.fillRect(0,0,Y,D),c.save(),1!==H&&c.scale(1/H,1/H),c.fillStyle=Q.createPattern(m,"no-repeat"),c.fillRect(0,0,Y,D),c.restore(),l.style("mask").value=T;}}},this.render=function(c){};},$.Element.mask.prototype=new $.Element.ElementBase(),$.Element.clipPath=function(c){this.base=$.Element.ElementBase,this.base(c),this.apply=function(c){var l=c.beginPath;c.beginPath=function(){};var b=c.closePath;c.closePath=function(){};var f;this.style("transform",!1,!0).hasValue()&&(f=new $.Transform(this.style("transform",!1,!0).value),f.apply(c)),l.call(c);for(var n=0;n<this.children.length;n++){var U=this.children[n];if("undefined"!=typeof U.path){var H=null;U.style("transform",!1,!0).hasValue()&&(H=new $.Transform(U.style("transform",!1,!0).value),H.apply(c)),U.path(c),c.closePath=b,H&&H.unapply(c);}}b.call(c),c.clip(),f&&f.unapply(c),c.beginPath=l,c.closePath=b;},this.render=function(c){};},$.Element.clipPath.prototype=new $.Element.ElementBase(),$.Element.filter=function(c){this.base=$.Element.ElementBase,this.base(c),this.apply=function(c,l){return;},this.render=function(c){};},$.Element.filter.prototype=new $.Element.ElementBase(),$.Element.feMorphology=function(c){this.base=$.Element.ElementBase,this.base(c),this.apply=function(c,l,b,f,n){};},$.Element.feMorphology.prototype=new $.Element.ElementBase(),$.Element.feComposite=function(c){this.base=$.Element.ElementBase,this.base(c),this.apply=function(c,l,b,f,n){};},$.Element.feComposite.prototype=new $.Element.ElementBase(),$.Element.feColorMatrix=function(c){function l(c,l,b,f,n,U){return c[b*f*4+4*l+U];}function b(c,l,b,f,n,U,$){c[b*f*4+4*l+U]=$;}function f(c,l){var b=n[c];return b*(b<0?l-255:l);}this.base=$.Element.ElementBase,this.base(c);var n=$.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var U=n[0];n=[.213+.787*U,.715-.715*U,.072-.072*U,0,0,.213-.213*U,.715+.285*U,.072-.072*U,0,0,.213-.213*U,.715-.715*U,.072+.928*U,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var H=n[0]*Math.PI/180,L=function L(c,l,b){return c+Math.cos(H)*l+Math.sin(H)*b;};n=[L(.213,.787,-.213),L(.715,-.715,-.715),L(.072,-.072,.928),0,0,L(.213,-.213,.143),L(.715,.285,.14),L(.072,-.072,-.283),0,0,L(.213,-.213,-.787),L(.715,-.715,.715),L(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];}this.apply=function(c,n,U,$,H){if($&&H){for(var L=c.getImageData(0,0,$,H),U=0;U<H;U++){for(var n=0;n<$;n++){var e=l(L.data,n,U,$,H,0),I=l(L.data,n,U,$,H,1),Y=l(L.data,n,U,$,H,2),D=l(L.data,n,U,$,H,3);b(L.data,n,U,$,H,0,f(0,e)+f(1,I)+f(2,Y)+f(3,D)+f(4,1)),b(L.data,n,U,$,H,1,f(5,e)+f(6,I)+f(7,Y)+f(8,D)+f(9,1)),b(L.data,n,U,$,H,2,f(10,e)+f(11,I)+f(12,Y)+f(13,D)+f(14,1)),b(L.data,n,U,$,H,3,f(15,e)+f(16,I)+f(17,Y)+f(18,D)+f(19,1));}}c.clearRect(0,0,$,H),c.putImageData(L,0,0);}};},$.Element.feColorMatrix.prototype=new $.Element.ElementBase(),$.Element.feGaussianBlur=function(c){this.base=$.Element.ElementBase,this.base(c),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(c,l,f,n,U){return"undefined"==typeof b.canvasRGBA?void $.log("ERROR: StackBlur.js must be included for blur to work"):(c.canvas.id=$.UniqueId(),c.canvas.style.display="none",document.body.appendChild(c.canvas),b.canvasRGBA(c.canvas.id,l,f,n,U,this.blurRadius),void document.body.removeChild(c.canvas));};},$.Element.feGaussianBlur.prototype=new $.Element.ElementBase(),$.Element.title=function(c){},$.Element.title.prototype=new $.Element.ElementBase(),$.Element.desc=function(c){},$.Element.desc.prototype=new $.Element.ElementBase(),$.Element.MISSING=function(c){$.log("ERROR: Element '"+c.nodeName+"' not yet implemented.");},$.Element.MISSING.prototype=new $.Element.ElementBase(),$.CreateElement=function(c){var l=c.nodeName.replace(/^[^:]+:/,"");l=l.replace(/\-/g,"");var b=null;return b="undefined"!=typeof $.Element[l]?new $.Element[l](c):new $.Element.MISSING(c),b.type=c.nodeName,b;},$.load=function(c,l){$.loadXml(c,$.ajax(l));},$.loadXml=function(c,l){$.loadXmlDoc(c,$.parseXml(l));},$.loadXmlDoc=function(l,b){$.init(l);var f=function f(b){for(var f=l.canvas;f;){b.x-=f.offsetLeft,b.y-=f.offsetTop,f=f.offsetParent;}return c.scrollX&&(b.x+=c.scrollX),c.scrollY&&(b.y+=c.scrollY),b;};1!=$.opts.ignoreMouse&&(l.canvas.onclick=function(c){var l=f(new $.Point(null!=c?c.clientX:event.clientX,null!=c?c.clientY:event.clientY));$.Mouse.onclick(l.x,l.y);},l.canvas.onmousemove=function(c){var l=f(new $.Point(null!=c?c.clientX:event.clientX,null!=c?c.clientY:event.clientY));$.Mouse.onmousemove(l.x,l.y);});var n=$.CreateElement(b.documentElement);n.root=!0,n.addStylesFromStyleDefinition();var U=!0,H=function H(){$.ViewPort.Clear(),l.canvas.parentNode&&$.ViewPort.SetCurrent(l.canvas.parentNode.clientWidth,l.canvas.parentNode.clientHeight),1!=$.opts.ignoreDimensions&&(n.style("width").hasValue()&&(l.canvas.width=n.style("width").toPixels("x"),l.canvas.style.width=l.canvas.width+"px"),n.style("height").hasValue()&&(l.canvas.height=n.style("height").toPixels("y"),l.canvas.style.height=l.canvas.height+"px"));var c=l.canvas.clientWidth||l.canvas.width,f=l.canvas.clientHeight||l.canvas.height;if(1==$.opts.ignoreDimensions&&n.style("width").hasValue()&&n.style("height").hasValue()&&(c=n.style("width").toPixels("x"),f=n.style("height").toPixels("y")),$.ViewPort.SetCurrent(c,f),null!=$.opts.offsetX&&(n.attribute("x",!0).value=$.opts.offsetX),null!=$.opts.offsetY&&(n.attribute("y",!0).value=$.opts.offsetY),null!=$.opts.scaleWidth||null!=$.opts.scaleHeight){var H=null,L=null,e=$.ToNumberArray(n.attribute("viewBox").value);null!=$.opts.scaleWidth&&(n.attribute("width").hasValue()?H=n.attribute("width").toPixels("x")/$.opts.scaleWidth:isNaN(e[2])||(H=e[2]/$.opts.scaleWidth)),null!=$.opts.scaleHeight&&(n.attribute("height").hasValue()?L=n.attribute("height").toPixels("y")/$.opts.scaleHeight:isNaN(e[3])||(L=e[3]/$.opts.scaleHeight)),null==H&&(H=L),null==L&&(L=H),n.attribute("width",!0).value=$.opts.scaleWidth,n.attribute("height",!0).value=$.opts.scaleHeight,n.style("transform",!0,!0).value+=" scale("+1/H+","+1/L+")";}1!=$.opts.ignoreClear&&l.clearRect(0,0,c,f),n.render(l),U&&(U=!1,"function"==typeof $.opts.renderCallback&&$.opts.renderCallback(b));},L=!0;$.ImagesLoaded()&&(L=!1,H()),$.intervalID=setInterval(function(){var c=!1;if(L&&$.ImagesLoaded()&&(L=!1,c=!0),1!=$.opts.ignoreMouse&&(c|=$.Mouse.hasEvents()),1!=$.opts.ignoreAnimation)for(var l=0;l<$.Animations.length;l++){c|=$.Animations[l].update(1e3/$.FRAMERATE);}"function"==typeof $.opts.forceRedraw&&1==$.opts.forceRedraw()&&(c=!0),c&&(H(),$.Mouse.runEvents());},1e3/$.FRAMERATE);},$.stop=function(){$.intervalID&&clearInterval($.intervalID);},$.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length;},this.onclick=function(c,l){this.events.push({type:"onclick",x:c,y:l,run:function run(c){c.onclick&&c.onclick();}});},this.onmousemove=function(c,l){this.events.push({type:"onmousemove",x:c,y:l,run:function run(c){c.onmousemove&&c.onmousemove();}});},this.eventElements=[],this.checkPath=function(c,l){for(var b=0;b<this.events.length;b++){var f=this.events[b];l.isPointInPath&&l.isPointInPath(f.x,f.y)&&(this.eventElements[b]=c);}},this.checkBoundingBox=function(c,l){for(var b=0;b<this.events.length;b++){var f=this.events[b];l.isPointInBox(f.x,f.y)&&(this.eventElements[b]=c);}},this.runEvents=function(){$.ctx.canvas.style.cursor="";for(var c=0;c<this.events.length;c++){for(var l=this.events[c],b=this.eventElements[c];b;){l.run(b),b=b.parent;}}this.events=[],this.eventElements=[];};}(),$;}var H,L=function L(c,l,b){if(null!=c||null!=l||null!=b){"string"==typeof c&&(c=document.getElementById(c)),null!=c.svg&&c.svg.stop();var f=U(b||{});1==c.childNodes.length&&"OBJECT"==c.childNodes[0].nodeName||(c.svg=f);var n=c.getContext("2d");"undefined"!=typeof l.documentElement?f.loadXmlDoc(n,l):"<"==l.substr(0,1)?f.loadXml(n,l):f.load(n,l);}else for(var $=document.querySelectorAll("svg"),H=0;H<$.length;H++){var e=$[H],I=document.createElement("canvas");I.width=e.clientWidth,I.height=e.clientHeight,e.parentNode.insertBefore(I,e),e.parentNode.removeChild(e);var Y=document.createElement("div");Y.appendChild(e),L(I,Y.innerHTML);}};"undefined"!=typeof Element.prototype.matches?H=function H(c,l){return c.matches(l);}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?H=function H(c,l){return c.webkitMatchesSelector(l);}:"undefined"!=typeof Element.prototype.mozMatchesSelector?H=function H(c,l){return c.mozMatchesSelector(l);}:"undefined"!=typeof Element.prototype.msMatchesSelector?H=function H(c,l){return c.msMatchesSelector(l);}:"undefined"!=typeof Element.prototype.oMatchesSelector?H=function H(c,l){return c.oMatchesSelector(l);}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(H=function H(c,l){return $(c).is(l);}),"undefined"==typeof H&&(H=Sizzle.matchesSelector));var e=/(\[[^\]]+\])/g,I=/(#[^\s\+>~\.\[:]+)/g,Y=/(\.[^\s\+>~\.\[:]+)/g,D=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,T=/(:[\w-]+\([^\)]*\))/gi,J=/(:[^\s\+>~\.\[:]+)/g,y=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(c,l,b,f,n,U){var $={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:l,offsetY:b,scaleWidth:f,scaleHeight:n};for(var H in U){U.hasOwnProperty(H)&&($[H]=U[H]);}L(this.canvas,c,$);}),L;});}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(c,l,b){function f(c){this._pointer=0,this._data=c,this._eof=!1;}function n(c,l){return c<=9?l:c>=10&&c<=59?parseFloat(l):c>=60&&c<=99?parseInt(l):c>=100&&c<=109?l:c>=110&&c<=149?parseFloat(l):c>=160&&c<=179?parseInt(l):c>=210&&c<=239?parseFloat(l):c>=270&&c<=289?parseInt(l):c>=290&&c<=299?U(l):c>=300&&c<=369?l:c>=370&&c<=389?parseInt(l):c>=390&&c<=399?l:c>=400&&c<=409?parseInt(l):c>=410&&c<=419?l:c>=420&&c<=429?parseInt(l):c>=430&&c<=439?l:c>=440&&c<=459?parseInt(l):c>=460&&c<=469?parseFloat(l):c>=470&&c<=481?l:999===c?l:c>=1e3&&c<=1009?l:c>=1010&&c<=1059?parseFloat(l):c>=1060&&c<=1071?parseInt(l):(console.log("WARNING: Group code does not have a defined type: %j",{code:c,value:l}),l);}function U(c){if("0"===c)return!1;if("1"===c)return!0;throw TypeError("String '"+c+"' cannot be cast to Boolean type");}function $(c){c&&c.sanitize!==b&&(this.sanitize=c.sanitize);}function H(c){y.debug("unhandled group "+L(c));}function L(c){return c.code+":"+c.value;}function e(c){return m[c];}var I="ht",Y=c[I],D=Y.Default,T=D.getInternal();T.addMethod(D,{cadToShape:function cadToShape(c,l){var b=new Y.DxfViewer(l);return b.toShape(c);},shapeToCad:function shapeToCad(c,l,b){var f=new Y.DxfWriter(b);return f.toDxf(c,l);}});var J=function J(){},y={debug:J,warn:J,error:J},m=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];f.prototype.next=function(){var c;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return c={code:parseInt(this._data[this._pointer])},this._pointer++,c.value=n(c.code,this._data[this._pointer].trim()),this._pointer++,0===c.code&&"EOF"===c.value&&(this._eof=!0),c;},f.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2);},f.prototype.isEOF=function(){return this._eof;},$.prototype.parse=function(c,l){throw new Error("read() not implemented. Use readSync()");},$.prototype.parseSync=function(c){return"string"==typeof c?this._parse(c):(console.error("Cannot read dxf source of type `"+(typeof c==="undefined"?"undefined":_typeof(c))),null);},$.prototype.parseStream=function(c,l){function b(c){U+=c;}function f(){try{var c=$._parse(U);}catch(c){return l(c);}l(null,c);}function n(c){l(c);}var U="",$=this;c.on("data",b),c.on("end",f),c.on("error",n);},$.prototype.sanitizeFileName=function(){var c=/[\/\?<>\\:\*\|":]/g,l=/[\x00-\x1f\x80-\x9f]/g,b=/^\.+$/,f=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,n=/[\. ]+$/;return function(U){var $=this.sanitize;return null==$?U:U.replace(c,$).replace(l,$).replace(b,$).replace(f,$).replace(n,$);};}(),$.prototype._parse=function(c){var n,U,$=this,I={},Y=0,D=c.split(/\r\n|\r|\n/g);if(n=new f(D),!n.hasNext())throw Error("Empty file");var T=function T(){for(U=n.next();!n.isEOF();){if(0===U.code&&"SECTION"===U.value){if(U=n.next(),2!==U.code){console.error("Unexpected code %s after 0:SECTION",L(U)),U=n.next();continue;}"HEADER"===U.value?(y.debug("> HEADER"),I.header=m(),y.debug("<")):"BLOCKS"===U.value?(y.debug("> BLOCKS"),I.blocks=Q(),y.debug("<")):"ENTITIES"===U.value?(y.debug("> ENTITIES"),I.entities=A(!1),y.debug("<")):"TABLES"===U.value?(y.debug("> TABLES"),I.tables=p(),y.debug("<")):"EOF"===U.value?y.debug("EOF"):y.warn("Skipping section '%s'",U.value);}else U=n.next();}},J=function J(c,l){return U.code===c&&U.value===l;},m=function m(){var c=null,l=null,b={};for(U=n.next();;){if(J(0,"ENDSEC")){c&&(b[c]=l);break;}9===U.code?(c&&(b[c]=l),c=U.value):10===U.code?l={x:U.value}:20===U.code?l.y=U.value:30===U.code?l.z=U.value:l=U.value,U=n.next();}return U=n.next(),b;},Q=function Q(){var c,l={};for(U=n.next();"EOF"!==U.value&&!J(0,"ENDSEC");){J(0,"BLOCK")?(y.debug("block {"),c=B(),y.debug("}"),d(c),c.name?l[c.name]=c:y.error('block with handle "'+c.handle+'" is missing a name.')):(H(U),U=n.next());}return l;},B=function B(){var c={};for(U=n.next();"EOF"!==U.value;){switch(U.code){case 1:c.xrefPath=U.value,U=n.next();break;case 2:c.name=$.sanitizeFileName(U.value),U=n.next();break;case 3:c.name2=$.sanitizeFileName(U.value),U=n.next();break;case 5:c.handle=U.value,U=n.next();break;case 8:c.layer=U.value,U=n.next();break;case 10:c.position=C();break;case 67:c.paperSpace=!(!U.value||1!=U.value),U=n.next();break;case 70:0!=U.value&&(c.type=U.value),U=n.next();break;case 100:U=n.next();break;case 330:c.ownerHandle=U.value,U=n.next();break;case 0:if("ENDBLK"==U.value)break;n._pointer-=2,c.entities=A(!0);break;default:H(U),U=n.next();}if(J(0,"ENDBLK")){U=n.next();break;}}return c;},p=function p(){var c={};for(U=n.next();"EOF"!==U.value&&!J(0,"ENDSEC");){if(J(0,"TABLE")){U=n.next();var l=X[U.value];l?(y.debug(U.value+" Table {"),c[X[U.value].tableName]=Z(),y.debug("}")):y.debug("Unhandled Table "+U.value);}else U=n.next();}return U=n.next(),c;},i="ENDTAB",Z=function Z(){var c,b=X[U.value],f={},$=0;for(U=n.next();!J(0,i);){switch(U.code){case 5:f.handle=U.value,U=n.next();break;case 330:f.ownerHandle=U.value,U=n.next();break;case 100:"AcDbSymbolTable"===U.value?U=n.next():(H(U),U=n.next());break;case 70:$=U.value,U=n.next();break;case 0:U.value===b.dxfSymbolName?f[b.tableRecordsProperty]=b.parseTableRecords():(H(U),U=n.next());break;default:H(U),U=n.next();}}var L=f[b.tableRecordsProperty];return L&&(L.constructor===Array?c=L.length:"object"==(typeof L==="undefined"?"undefined":_typeof(L))&&(c=l.keys(L).length),$!==c&&y.warn("Parsed "+c+" "+b.dxfSymbolName+"'s but expected "+$)),U=n.next(),f;},a=function a(){var c=[],l={};for(y.debug("ViewPort {"),U=n.next();!J(0,i);){switch(U.code){case 2:l.name=U.value,U=n.next();break;case 10:l.lowerLeftCorner=C();break;case 11:l.upperRightCorner=C();break;case 12:l.center=C();break;case 13:l.snapBasePoint=C();break;case 14:l.snapSpacing=C();break;case 15:l.gridSpacing=C();break;case 16:l.viewDirectionFromTarget=C();break;case 17:l.viewTarget=C();break;case 40:l.viewHeight=U.value,l.aspectRatio!==b&&(l.viewWidth=U.value*l.aspectRatio),U=n.next();break;case 41:l.aspectRatio=U.value,l.viewHeight!==b&&(l.viewWidth=U.value*l.viewHeight),U=n.next();break;case 42:l.lensLength=U.value,U=n.next();break;case 43:l.frontClippingPlane=U.value,U=n.next();break;case 44:l.backClippingPlane=U.value,U=n.next();break;case 45:l.viewHeight=U.value,U=n.next();break;case 50:l.snapRotationAngle=U.value,U=n.next();break;case 51:l.viewTwistAngle=U.value,U=n.next();break;case 79:l.orthographicType=U.value,U=n.next();break;case 110:l.ucsOrigin=C();break;case 111:l.ucsXAxis=C();break;case 112:l.ucsYAxis=C();break;case 110:l.ucsOrigin=C();break;case 281:l.renderMode=U.value,U=n.next();break;case 281:l.defaultLightingType=U.value,U=n.next();break;case 292:l.defaultLightingOn=U.value,U=n.next();break;case 330:l.ownerHandle=U.value,U=n.next();break;case 63:case 421:case 431:l.ambientColor=U.value,U=n.next();break;case 0:"VPORT"===U.value&&(y.debug("}"),c.push(l),y.debug("ViewPort {"),l={},U=n.next());break;default:H(U),U=n.next();}}return y.debug("}"),c.push(l),c;},j=function j(){var c,l,b={},f={};for(y.debug("LType {"),U=n.next();!J(0,"ENDTAB");){switch(U.code){case 2:f.name=U.value,c=U.value,U=n.next();break;case 3:f.description=U.value,U=n.next();break;case 73:l=U.value,l>0&&(f.pattern=[]),U=n.next();break;case 40:f.patternLength=U.value,U=n.next();break;case 49:f.pattern.push(U.value),U=n.next();break;case 0:y.debug("}"),l>0&&l!==f.pattern.length&&y.warn("lengths do not match on LTYPE pattern"),b[c]=f,f={},y.debug("LType {"),U=n.next();break;default:U=n.next();}}return y.debug("}"),b[c]=f,b;},u=function u(){var c,l={},f={};for(y.debug("Layer {"),U=n.next();!J(0,"ENDTAB");){switch(U.code){case 2:f.name=U.value,c=U.value,U=n.next();break;case 62:f.visible=U.value>=0,f.color=e(Math.abs(U.value)),U=n.next();break;case 6:f.lineType=U.value,U=n.next();break;case 0:"LAYER"===U.value&&(y.debug("}"),l[c]=f,y.debug("Layer {"),f={},c=b,U=n.next());break;default:H(U),U=n.next();}}return y.debug("}"),l[c]=f,l;},X={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:a},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:j},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:u}},A=function A(c){var l=[],b=c?"ENDBLK":"ENDSEC";for(U=n.next();;){if(0===U.code){if(U.value===b)break;var f;if("LWPOLYLINE"===U.value)y.debug("LWPOLYLINE {"),f=w(),y.debug("}");else if("POLYLINE"===U.value)y.debug("POLYLINE {"),f=k(),y.debug("}");else if("LINE"===U.value)y.debug("LINE {"),f=K(),y.debug("}");else if("CIRCLE"===U.value)y.debug("CIRCLE {"),f=x(),y.debug("}");else if("ARC"===U.value)y.debug("ARC {"),f=x(),y.debug("}");else if("ELLIPSE"===U.value)y.debug("ELLIPSE {"),f=G(),y.debug("}");else if("SPLINE"===U.value)y.debug("SPLINE {"),f=M(),y.debug("}");else if("TEXT"===U.value)y.debug("TEXT {"),f=_(),y.debug("}");else if("DIMENSION"===U.value)y.debug("DIMENSION {"),f=R(),y.debug("}");else if("INSERT"===U.value)y.debug("INSERT {"),f=z(),y.debug("}");else if("HATCH"===U.value)y.debug("HATCH {"),f=s(),y.debug("}");else if("SOLID"===U.value)y.debug("SOLID {"),f=o(),y.debug("}");else if("POINT"===U.value)y.debug("POINT {"),f=r(),y.debug("}");else if("MTEXT"===U.value)y.debug("MTEXT {"),f=V(),y.debug("}");else{if("ATTDEF"!==U.value){y.warn("Unhandled entity "+U.value),U=n.next();continue;}y.debug("ATTDEF {"),f=g(),y.debug("}");}d(f),l.push(f);}else U=n.next();}return"ENDSEC"==b&&(U=n.next()),l;},v=function v(c){switch(U.code){case 0:c.type=U.value,U=n.next();break;case 5:c.handle=U.value,U=n.next();break;case 6:c.lineType=U.value,U=n.next();break;case 8:c.layer=U.value,U=n.next();break;case 48:c.lineTypeScale=U.value,U=n.next();break;case 60:c.visible=0===U.value,U=n.next();break;case 62:c.colorIndex=U.value,c.color=e(Math.abs(U.value)),U=n.next();break;case 67:c.inPaperSpace=0!==U.value,U=n.next();break;case 210:c.extrusionDirection=C();break;case 230:c.extrusionDirection={x:0,y:0,z:U.value},U=n.next();break;case 330:c.ownerHandle=U.value,U=n.next();break;case 347:c.materialObjectHandle=U.value,U=n.next();break;case 370:c.lineweight=U.value,U=n.next();break;case 420:c.color=U.value,U=n.next();break;case 100:if("AcDbEntity"==U.value){U=n.next();break;}default:H(U),U=n.next();}},N=function N(){var c={type:U.value};for(U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:c.x=U.value,U=n.next();break;case 20:c.y=U.value,U=n.next();break;case 30:c.z=U.value,U=n.next();break;case 40:case 41:case 42:U=n.next();break;case 70:c.curveFittingVertex=0!==(1|U.value),c.curveFitTangent=0!==(2|U.value),c.splineVertex=0!==(8|U.value),c.splineControlPoint=0!==(16|U.value),c.ThreeDPolylineVertex=0!==(32|U.value),c.ThreeDPolylineMesh=0!==(64|U.value),c.polyfaceMeshVertex=0!==(128|U.value),U=n.next();break;case 50:case 71:case 72:case 73:case 74:U=n.next();break;default:v(c);}}return c;},h=function h(){var c={type:U.value};for(U=n.next();"EOF"!=U&&0!=U.code;){v(c);}return c;},C=function C(){var c={},l=U.code;if(c.x=U.value,l+=10,U=n.next(),U.code!=l)throw new Error("Expected code for point value to be "+l+" but got "+U.code+".");return c.y=U.value,l+=10,U=n.next(),U.code!=l?c:(c.z=U.value,U=n.next(),c);},t=function t(){var c={},l=U.code;return c.x=U.value,l+=1,U=n.next(),U.code!=l?(n._pointer-=2,c.y=1):c.y=U.value,l+=1,U=n.next(),U.code!=l?(n._pointer-=2,c.z=1):c.z=U.value,U=n.next(),c;},F=function F(c){if(!c||c<=0)throw Error("n must be greater than 0 verticies");var l,b=[],f=!1,$=!1;for(l=0;l<c;l++){for(var H={};"EOF"!==U&&0!==U.code&&!$;){switch(U.code){case 10:if(f){$=!0;continue;}H.x=U.value,f=!0;break;case 20:H.y=U.value;break;case 30:H.z=U.value;break;case 40:H.startWidth=U.value;break;case 41:H.endWidth=U.value;break;case 42:0!=U.value&&(H.bulge=U.value);break;default:if(f){$=!0;continue;}}U=n.next();}b.push(H),f=!1,$=!1;}return b;},W=function W(){for(var c=[];"EOF"!==U;){if(0===U.code)if("VERTEX"===U.value)c.push(N());else if("SEQEND"===U.value){h();break;}}return c;},V=function V(){var c={type:U.value};for(U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 1:c.text=U.value,U=n.next();break;case 3:c.text+=U.value,U=n.next();break;case 10:c.position=C();break;case 40:c.height=U.value,U=n.next();break;case 41:c.width=U.value,U=n.next();break;case 71:c.attachmentPoint=U.value,U=n.next();break;case 72:c.drawingDirection=U.value,U=n.next();break;case 50:c.angle=2*U.value*Math.PI/360,U=n.next();break;case 11:c.directionX=U.value,U=n.next();break;case 21:c.directionY=U.value,U=n.next();break;default:v(c);}}return c;},g=function g(){var c={type:U.value,scale:1,textStyle:"STANDARD"};for(U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 1:c.text=U.value,U=n.next();break;case 2:c.tag=U.value,U=n.next();break;case 3:c.prompt=U.value,U=n.next();break;case 7:c.textStyle=U.value,U=n.next();break;case 10:c.x=U.value,U=n.next();break;case 20:c.y=U.value,U=n.next();break;case 30:c.z=U.value,U=n.next();break;case 39:c.thickness=U.value,U=n.next();break;case 40:c.textHeight=U.value,U=n.next();break;case 41:c.scale=U.value,U=n.next();break;case 50:c.rotation=U.value,U=n.next();break;case 51:c.obliqueAngle=U.value,U=n.next();break;case 70:c.invisible=!!(1&U.value),c.constant=!!(2&U.value),c.verificationRequired=!!(4&U.value),c.preset=!!(8&U.value),U=n.next();break;case 71:c.backwards=!!(2&U.value),c.mirrored=!!(4&U.value),U=n.next();break;case 72:c.horizontalJustification=U.value,U=n.next();break;case 73:c.fieldLength=U.value,U=n.next();break;case 74:c.verticalJustification=U.value,U=n.next();break;case 100:U=n.next();break;case 210:c.extrusionDirectionX=U.value,U=n.next();break;case 220:c.extrusionDirectionY=U.value,U=n.next();break;case 230:c.extrusionDirectionZ=U.value,U=n.next();break;default:v(c);}}return c;},w=function w(){var c={type:U.value,vertices:[]},l=0;for(U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 38:c.elevation=U.value,U=n.next();break;case 39:c.depth=U.value,U=n.next();break;case 70:c.shape=1===U.value,U=n.next();break;case 90:l=U.value,U=n.next();break;case 10:c.vertices=F(l);break;case 40:0!==U.value&&(c.startWidth=U.value),U=n.next();break;case 41:0!==U.value&&(c.endWidth=U.value),U=n.next();break;case 43:0!==U.value&&(c.width=U.value),U=n.next();break;default:v(c);}}return c;},k=function k(){var c={type:U.value,vertices:[]};for(U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:case 20:case 30:case 39:U=n.next();break;case 40:0!==U.value&&(c.startWidth=U.value),U=n.next();break;case 41:0!==U.value&&(c.endWidth=U.value),U=n.next();break;case 70:c.shape=1===U.value,U=n.next();break;case 71:case 72:case 73:case 74:case 75:U=n.next();break;case 100:U=n.next();break;default:v(c);}}return c.vertices=W(),c;},K=function K(){var c={type:U.value,vertices:[]};for(U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:c.vertices.unshift(C());break;case 11:c.vertices.push(C());break;case 100:if("AcDbLine"==U.value){U=n.next();break;}default:v(c);}}return c;},x=function x(){var c,l;for(c={type:U.value},U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:c.center=C();break;case 40:c.radius=U.value,U=n.next();break;case 50:c.startAngle=Math.PI/180*U.value,U=n.next();break;case 51:l=Math.PI/180*U.value,l<c.startAngle?c.angleLength=l+2*Math.PI-c.startAngle:c.angleLength=l-c.startAngle,c.endAngle=l,U=n.next();break;default:v(c);}}return c;},G=function G(){var c,l;for(c={type:U.value},U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:c.center=C();break;case 11:c.major=C();break;case 40:c.ratio=U.value,U=n.next();break;case 41:c.startAngle=U.value,U=n.next();break;case 42:l=U.value,l<c.startAngle?c.angleLength=l+2*Math.PI-c.startAngle:c.angleLength=l-c.startAngle,c.endAngle=l,U=n.next();break;default:v(c);}}return c;},z=function z(){var c;for(c={type:U.value},U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 2:c.block=$.sanitizeFileName(U.value),U=n.next();break;case 10:c.center=C();break;case 41:c.scale=t();break;case 50:c.deg=U.value,U=n.next();break;default:v(c);}}return c;},s=function s(){var c;for(c={type:U.value},U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 2:c.block=$.sanitizeFileName(U.value),U=n.next();break;case 10:c.center=C();break;case 41:c.scale=t();break;case 50:c.deg=U.value,U=n.next();break;default:v(c);}}return c;},M=function M(){var c,l;for(c={type:U.value},U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:c.center=C();break;case 11:c.major=C();break;case 40:c.ratio=U.value,U=n.next();break;case 41:c.startAngle=U.value,U=n.next();break;case 42:l=U.value,l<c.startAngle?c.angleLength=l+2*Math.PI-c.startAngle:c.angleLength=l-c.startAngle,c.endAngle=l,U=n.next();break;default:v(c);}}return c;},_=function _(){var c;for(c={type:U.value},U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:c.startPoint=C();break;case 11:c.endPoint=C();break;case 40:c.textHeight=U.value,U=n.next();break;case 41:c.xScale=U.value,U=n.next();break;case 1:c.text=U.value,U=n.next();break;case 7:c.font=U.value,U=n.next();break;case 71:c.generationFlags=U.value,U=n.next();break;case 72:c.halign=U.value,U=n.next();break;case 73:c.valign=U.value,U=n.next();break;case 50:c.rotation=2*U.value*Math.PI/360,U=n.next();break;default:v(c);}}return c;},R=function R(){var c;for(c={type:U.value},U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 2:c.block=$.sanitizeFileName(U.value),U=n.next();break;case 10:c.anchorPoint=C();break;case 11:c.middleOfText=C();break;case 71:c.attachmentPoint=U.value,U=n.next();break;case 42:c.actualMeasurement=U.value,U=n.next();break;case 1:c.text=U.value,U=n.next();break;case 50:c.angle=U.value,U=n.next();break;default:v(c);}}return c;},o=function o(){var c;for(c={type:U.value},c.points=[],U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:c.points[0]=C();break;case 11:c.points[1]=C();break;case 12:c.points[2]=C();break;case 13:c.points[3]=C();break;default:v(c);}}return c;},r=function r(){var c;for(c={type:U.value},U=n.next();"EOF"!==U&&0!==U.code;){switch(U.code){case 10:c.position=C();break;case 39:c.thickness=U.value,U=n.next();break;case 100:if("AcDbPoint"==U.value){U=n.next();break;}default:v(c);}}return c;},d=function d(c){if(!c)throw new TypeError("entity cannot be undefined or null");c.handle||(c.handle=Y++);};return T(),I;};var Q=Y.DxfViewer=function(c){var l=this;l.init(c);};Q.prototype={},Q.prototype.constructor=Q;var B={LINE:["LINE","POLYLINE","LWPOLYLINE"],CIRCLE:["CIRCLE","ARC"],ELLIPSE:["ELLIPSE"],TEXT:["TEXT","MTEXT"],SOLID:["SOLID"],POINT:["POINT"]};l.defineProperties(Q.prototype,{dxf:{get:function get(){return this._dxf;}}}),Q.prototype.init=function(c){var l=this,b=l.options={};c=c||{},b.font=c.font||"Standard",b.textScaleRatio=c.textScaleRatio||1,b.size=c.size,b.scale=c.scale,b.blockSize=c.blockSize||256,b.filter=c.filter,b.defaultColor=c.defaultColor||0,b.edgeLayer=c.edgeLayer,b.showText=c.showText||!0,b.mapColor=c.mapColor,b.circleSegments=c.circleSegments||72,b.browserMinFontSize=c.browserMinFontSize||8,b.useDxfViewport=c.useDxfViewport||!0,c.sanitize!==!1&&(b.sanitize=c.sanitize||"_");},Q.prototype.toShape=function(c){var l=this;l.parseFile(c);var b,f,n,U=l._dxf.blocks,$=l.sortBlocks(U);l._blockDef={};for(var H=$.length-1;H>=0;H--){f=$[H],n=U[f],n.entities&&(l._blockDef[f]||(b=l.entitiesToShape(n.entities,n.position,null,!1),b&&(b.flag=n.type,l._blockDef[f]=b)));}return b=l.entitiesToShape(l._dxf.entities,null,l.options.size,!0,l.options.scale),b.sortedBlockName=$,b.blockDef=l._blockDef,b.layers=l._dxf.tables.layer.layers,b;},Q.prototype.entitiesToShape=function(c,l,b,f,n){var U=this;U._minFontSize=12,U._bound={xMin:1/0,yMin:1/0,xMax:-(1/0),yMax:-(1/0)},l=l||{x:0,y:0,z:0};var $,H,L,e=U._models={},I=U._dxf;for($=0,H=c.length;$<H;$++){L=c[$],U._groupEntity(e,L,I);}if(f&&U.options.useDxfViewport){var Y=U._dxfViewport;!Y||isNaN(Y.x)||isNaN(Y.y)||isNaN(Y.width)||isNaN(Y.height)||(U._bound={xMin:Y.x-Y.width/2,xMax:Y.x+Y.width/2,yMin:Y.y-Y.height/2,yMax:Y.y+Y.height/2});}U._shiftX=U._bound.xMin,U._shiftY=U._bound.yMax;var D=U._bound.xMax-U._bound.xMin,T=U._bound.yMax-U._bound.yMin;if(!(D<0||T<0)){if(D=D||1,T=T||1,U._bound.pos=l,n)U._scale=n;else{if(b){var J=b/D,y=b/T;U._scale=Math.min(J,y);}else U._scale=1;U._scale*=Math.max(1,Math.ceil(U.options.browserMinFontSize/U._minFontSize));}U.shapeComps=[],U.drawLine(),U.drawSolid(),U.drawCircle(),U.drawEllipse(),U.options.showText&&U.drawText(),U.drawBlock();var m={width:D*U._scale,height:T*U._scale,comps:U.shapeComps,scale:U._scale,anchorX:-(U._bound.xMin-l.x)/D,anchorY:(U._bound.yMax-l.y)/T,bound:U._bound};return U._calcBoundExtend(m),m;}},Q.prototype._calcBoundExtend=function(c){var l=1,b=!1;c.comps.forEach(function(c){l=Math.max(l,c.borderWidth||0),c.borderWidthAbsolute&&(b=!0);}),c.boundExtend=l,b&&(c.boundExtendAbsolute=!0);},Q.prototype._bulgesAt=function(c,l){return c[l].bulge;},Q.prototype._isStraightLine=function(c){return!c||Math.abs(c)<1e-6;},Q.prototype._getDistance=function(c,l){var b=c.x-l.x,f=c.y-l.y;return Math.sqrt(b*b+f*f);},Q.prototype._getBulgeSegment=function(c,l,b){var f=this,n=b<0,U=4*Math.atan(b);if(Math.abs(U)>2*Math.PI-1e-6)return[l];var $={x:(c.x+l.x)/2,y:(c.y+l.y)/2},H=f._getDistance(c,l)/2,L=Math.atan2(l.y-c.y,l.x-c.x),e=Math.abs(H/Math.sin(U/2)),I=Math.abs(e*e-H*H),Y=Math.sqrt(I);b>0?L+=Math.PI/2:L-=Math.PI/2,Math.abs(U)>Math.PI&&(Y*=-1);var D,L,T=Y*Math.cos(L)+$.x,J=Y*Math.sin(L)+$.y,y=Math.atan2(c.y-J,c.x-T),m=Math.atan2(l.y-J,l.x-T),Q=[];if(D=2*Math.PI/f.options.circleSegments,L=y,n){for(;m>y;){m-=2*Math.PI;}for(;L>m;){L-=D,L<m&&(L=m),Q.push({x:T+e*Math.cos(L),y:J+e*Math.sin(L)});}}else{for(;m<y;){m+=2*Math.PI;}for(;L<m;){L+=D,L>m&&(L=m),Q.push({x:T+e*Math.cos(L),y:J+e*Math.sin(L)});}}return Q;},Q.prototype.drawLine=function(){var c,l,f,n,U,$,H,L,e,I,Y,D,T,J,y,m,Q,p,i,Z,a=this,j=a._models;for(c=B.LINE,n=0,U=c.length;n<U;n++){l=c[n],f=j[l];for(L in f){for(e=f[L],$=0,H=e.length;$<H;$++){if(I=e[$],Y=I.vertices,Y&&Y.length){for(y=a.toLocal(Y[0].x,1),m=a.toLocal(Y[0].y,2),p={type:"shape",cadType:l,maybeEdge:I.layer===a.options.edgeLayer,borderColor:L,points:[y,m],segments:[1]},Z=b,I.startWidth?Z=(I.startWidth+(I.endWidth?I.endWidth:I.startWidth))/2:I.width&&(Z=I.width),Z?p.borderWidth=a.toLocal(Z):(p.borderWidthAbsolute=!0,p.borderWidth=1),T=1,J=Y.length;T<J;T++){D=Y[T],Q=a._bulgesAt(Y,T-1),a._isStraightLine(Q)?(p.points.push(a.toLocal(D.x,1),a.toLocal(D.y,2)),p.segments.push(2)):(i=a._getBulgeSegment(Y[T-1],D,Q),i.forEach(function(c){p.points.push(a.toLocal(c.x,1),a.toLocal(c.y,2)),p.segments.push(2);}));}I.shape&&(Q=a._bulgesAt(Y,Y.length-1),a._isStraightLine(Q)?p.segments.push(5):(i=a._getBulgeSegment(Y[Y.length-1],Y[0],Q),i.forEach(function(c){p.points.push(a.toLocal(c.x,1),a.toLocal(c.y,2)),p.segments.push(2);}))),p.handle=I.handle,a.shapeComps.push(p);}}}}},Q.prototype.drawBlock=function(){var c,l,b,f,n,U,$,H,L,e,I,Y,D=this,T=D._models.BLOCK;if(T)for(c=0,l=T.length;c<l;c++){b=T[c],f=b.block,n=D._blockDef[f],I=b.transform,U=Math.atan2(I.b,I.a),U===Math.PI||0===U?(L=Math.cos(U),$=I.a/L,H=I.d/L):(e=Math.sin(U),$=I.b/e,H=-I.c/e),Y={type:"image",cadType:"block",handle:b.handle,name:f,rect:[[D.toLocal(I.tx,1),D.toLocal(I.ty,2)],D.toLocal(n.width/n.scale),D.toLocal(n.height/n.scale)],rotation:U},1===$&&1===H||(Y.scaleX=$,Y.scaleY=H),D.shapeComps.push(Y);}},Q.prototype.drawSolid=function(){var c,l,b,f,n,U,$,H,L,e,I,Y=this,D=Y._models;for(c=B.SOLID,f=0,n=c.length;f<n;f++){l=c[f],b=D[l];for(H in b){for(L=b[H],U=0,$=L.length;U<$;U++){e=L[U],I=e.points,Y.shapeComps.push({type:"shape",cadType:l,handle:e.handle,background:H,points:[Y.toLocal(I[0].x,1),Y.toLocal(I[0].y,2),Y.toLocal(I[1].x,1),Y.toLocal(I[1].y,2),Y.toLocal(I[3].x,1),Y.toLocal(I[3].y,2),Y.toLocal(I[2].x,1),Y.toLocal(I[2].y,2)],segments:[1,2,2,2,5]});}}}},Q.prototype.extrusionZNagative=function(c){var l=c.extrusionDirection;return!!l&&Math.abs(l.z+1)<1e-5;},Q.prototype.drawCircle=function(){var c,l,b,f,n,U,$,H,L,e,I,Y,D,T,J,y,m,Q,p,i,Z=this,a=Z._models;for(c=B.CIRCLE,f=0,n=c.length;f<n;f++){l=c[f],b=a[l];for(H in b){for(L=b[H],U=0,$=L.length;U<$;U++){if(e=L[U],I=e.startAngle||0,Y=e.angleLength||2*Math.PI,D=I+Y,T=Z.toLocal(e.radius),J=e.addonAngle||0,y=Z.toLocal(e.center.x,1),m=Z.toLocal(e.center.y,2),i=e.xInvert^Z.extrusionZNagative(e),p=e.yInvert,p||i?i&&p?(I=Math.PI+I,D=Math.PI+D,Q=!1):(I=Math.PI*(i?1:2)-I,D=Math.PI*(i?1:2)-D,Q=!0):Q=!1,Q=!Q,I=2*Math.PI-I-J,D=2*Math.PI-D-J,Q){var j=I;I=D,D=j;}Z.shapeComps.push({type:"arc",cadType:l,handle:e.handle,borderColor:H,borderWidth:1,borderWidthAbsolute:!0,rect:[y-T,m-T,2*T,2*T],arcFrom:I,arcTo:D,arcClose:!1});}}}},Q.prototype.drawText=function(){var c,l,b,f,n,U,$,H,L,e,I,Y,D,T,J,y,m,Q,p,i,Z,a,j,u,X,A=this,v=A._models;for(c=B.TEXT,u=A.options.textScaleRatio,f=0,n=c.length;f<n;f++){l=c[f],b=v[l];for(H in b){for(L=b[H],U=0,$=L.length;U<$;U++){if(e=L[U],I=e.text,I&&I.length){if("MTEXT"===l)Y=A.toLocal(e.height||12),D=A.toLocal(e.position.x,1),T=A.toLocal(e.position.y,2),i=e.angle?e.angle:e.directionX?Math.atan2(e.directionY,e.directionX):0,i+=e.addonAngle||0,j=1,p=e.attachmentPoint||1,m=p%3,Q=Math.floor(p/3),Q=1===Q?"middle":0===Q?"top":"bottom",y=0===m?"right":2===m?"center":"left";else{Y=A.toLocal(e.textHeight||12);var N=e.endPoint;N||(N=e.startPoint),D=N.x,T=N.y,i=e.rotation||0,j=e.xScale||1,2===e.generationFlags?i=2*Math.PI-i:4===e.generationFlags?i=Math.PI-i:6===e.generationFlags&&(i=Math.PI+i),D=A.toLocal(D,1),T=A.toLocal(T,2),m=e.halign,Q=e.valign,y=2===m?"right":1===m?"center":"left",Q=3===Q?"top":2===Q?"middle":"bottom";}T+=Y/4;if(i=2*Math.PI-i,J=Y*u+"px "+(e.font||A.options.font),"MTEXT"===l)for(I=I.replace(/\\{/g,"#@#"),I=I.replace(/\\}/g,"#@@"),I=I.replace(/({|})/g,""),I=I.replace(/#@#/g,"{"),I=I.replace(/#@@/g,"}"),I=I.replace(/\\[ACT]\d+;/g,""),(X=I.match(/\\f[^;]*;/))&&(I=I.replace(X[0],""),X=X[0].match(/\|p(\d+)/),X&&(J=X[0]/10*Y*u+"px "+J)),T-=Y/6,Z=I.split("\\P"),a=0;a<Z.length;a++){A.shapeComps.push({type:"text",cadType:l,handle:e.handle,color:H,text:Z[a],rotation:i,rect:[D,T+a*Y*1.5,0,0],align:y,vAlign:Q,font:J});}else A.shapeComps.push({type:"text",cadType:l,handle:e.handle,color:H,text:I,scaleX:j,rotation:i,rect:[D,T,1e-5,1e-5],align:y,vAlign:Q,font:J});}}}}},Q.prototype.drawEllipse=function(){var c,l,b,f,n,U,$,H,L,e,I,Y,D,T,J,y,m,Q,p,i,Z,a,j=this,u=j._models;for(c=B.ELLIPSE,f=0,n=c.length;f<n;f++){l=c[f],b=u[l];for(H in b){for(L=b[H],U=0,$=L.length;U<$;U++){if(e=L[U],I=e.major,Y=Math.atan2(I.y,I.x),D=j.toLocal(Math.sqrt(I.x*I.x+I.y*I.y)),T=D*e.ratio,J=e.startAngle||0,y=e.angleLength||2*Math.PI,m=J+y,Q=j.toLocal(e.center.x,1),p=j.toLocal(e.center.y,2),i=e.xInvert,Z=e.yInvert^j.extrusionZNagative(e),Z^=1,Z||i?i&&Z?(J=Math.PI+J,m=Math.PI+m,a=!1):(J=Math.PI*(i?1:2)-J,m=Math.PI*(i?1:2)-m,a=!0):a=!1,a){var X=J;J=m,m=X;}Y=2*Math.PI-Y,j.shapeComps.push({type:"arc",cadType:l,handle:e.handle,borderColor:H,borderWidth:1,borderWidthAbsolute:!0,rotation:Y,rect:[Q-D,p-T,2*D,2*T],arcFrom:J,arcTo:m,arcClose:!1,arcOval:!0});}}}},Q.prototype._transformPoint=function(c,l,b){if(c){var f=c.x,n=c.y;return b=b||1,{x:f*b*l.a+n*l.c+l.tx,y:f*b*l.b+n*l.d+l.ty};}},Q.prototype._groupEntity=function(c,l,b,f,n){var U=this,$=U.getColor(l,b);if($&&(!U.options.filter||!U.options.filter(l,n))){var H,L,e,I=U._transformPoint,Y=l.type;if("DIMENSION"===Y||"INSERT"===Y){if(!l.block)return;var D=b.blocks[l.block];if(!D||!D.entities)return;if(!(e=U._blockDef[l.block]))return void console.log("no entity ",l.block);var T=f||{a:1,b:0,c:0,d:1,tx:0,ty:0};if("INSERT"===Y){var J=l.scale?l.scale.x:1,y=l.scale?l.scale.y:1,m=0,Q=1,B=0;if(l.deg&&(m=l.deg*Math.PI/180,m=2*Math.PI-m,Q=Math.cos(m),B=Math.sin(m)),f){var p=J*Q,i=J*B,Z=-y*B,a=y*Q,j=l.center.x,u=l.center.y;T={a:f.a*p+f.c*i,b:f.b*p+f.d*i,c:f.a*Z+f.c*a,d:f.b*Z+f.d*a,tx:f.a*j+f.c*u+f.tx,ty:f.b*j+f.d*u+f.ty};}else T={a:J*Q,b:J*B,c:-y*B,d:y*Q,tx:l.center.x,ty:l.center.y};}U.extrusionZNagative(l)&&(T.a*=-1,T.c*=-1,T.tx*=-1);var X=e.bound,A=(X.pos.x,X.pos.y,I({x:X.xMin,y:X.yMin},T)),v=I({x:X.xMax,y:X.yMax},T),N=I({x:X.xMin,y:X.yMax},T),h=I({x:X.xMax,y:X.yMin},T),C=U._bound;C.xMin=Math.min(C.xMin,A.x,v.x,N.x,h.x),C.yMin=Math.min(C.yMin,A.y,v.y,N.y,h.y),C.xMax=Math.max(C.xMax,A.x,v.x,N.x,h.x),C.yMax=Math.max(C.yMax,A.y,v.y,N.y,h.y);var t;return(t=U._models.BLOCK)||(U._models.BLOCK=t=[]),void t.push({handle:l.handle,block:l.block,transform:T});}(H=c[Y])||(H=c[Y]={}),(L=H[$])||(L=H[$]=[]);var F=U.extrusionZNagative(l)&&["POINT","LINE","ELLIPSE"].indexOf(Y)<0;if(f||F){f||(f={a:1,b:0,c:0,d:1,tx:0,ty:0});var W={};for(var V in l){W[V]=l[V];}W.radius&&(W.radius*=Math.sqrt(f.a*f.a+f.b*f.b)),W.textHeight&&(W.textHeight*=Math.sqrt(f.a*f.a+f.b*f.b));var g=F?-1:1;if(W.position=I(W.position,f,g),W.startPoint=I(W.startPoint,f,g),W.center=I(W.center,f,g),"ELLIPSE"===Y){var w;w=I({x:l.major.x+l.center.x,y:l.major.y+l.center.y},f,g),W.major={x:w.x-W.center.x,y:w.y-W.center.y},U.extrusionZNagative(l)&&(W.major.x*=-1);}var k;W.vertices&&(k=[],W.vertices.forEach(function(c){var l=I(c,f,g);c.bulge&&(l.bulge=c.bulge),k.push(l);}),W.vertices=k),W.points&&(k=[],W.points.forEach(function(c){var l=I(c,f,g);c.bulge&&(l.bulge=c.bulge),k.push(l);}),W.points=k);var K=Math.atan2(f.b,f.a),x=Math.cos(K);W.yInvert=f.d*x<0,W.xInvert=f.a*x<0,0!==K&&(W.addonAngle=K),l=W;}U.mergeBound(l),L.push(l);}},Q.prototype.getPointsBound=function(c){for(var l=1/0,b=1/0,f=-(1/0),n=-(1/0),U=0,$=c.length;U<$;U++){var H=c[U];l=Math.min(l,H.x),b=Math.min(b,H.y),f=Math.max(f,H.x),n=Math.max(n,H.y);}return{xMin:l,yMin:b,xMax:f,yMax:n};},Q.prototype.mergeBound=function(c){var l,b,f=this;b=c.type;for(l in B){if(B[l].indexOf(b)>=0)break;}var n,U,$,H,L,e,I,Y,D,T,J,y,m,Q,p,i,Z,a,j,u,X,A=f.getPointsBound;switch(l){case"LINE":for(n=A(c.vertices),u=c.vertices.length,a=0;a<u;a++){j=c.vertices[a],f._isStraightLine(j.bulge)||(a!==u-1||c.shape)&&(X=A(f._getBulgeSegment(j,c.vertices[(a+1)%u],j.bulge)),n.xMin=Math.min(n.xMin,X.xMin),n.yMin=Math.min(n.yMin,X.yMin),n.xMax=Math.max(n.xMax,X.xMax),n.yMax=Math.max(n.yMax,X.yMax));}break;case"SOLID":n=A(c.points);break;case"POINT":if(!c.position)return;U=c.position.x,$=c.position.y,n={xMin:U,yMin:$,xMax:U,yMax:$};break;case"TEXT":if(!c.text||!c.text.length)return;U=c.position?c.position.x:c.startPoint.x,$=c.position?c.position.y:c.startPoint.y,Z=c.height||c.textHeight||12,f._minFontSize=Math.min(f._minFontSize,Z),n={xMin:U,yMin:$,xMax:U+Z*c.text.length,yMax:$+Z};break;case"CIRCLE":for(U=c.center.x,$=c.center.y,H=c.radius,L=[],e=c.startAngle||0,I=e+(c.angleLength||2*Math.PI),Y=c.xInvert^f.extrusionZNagative(c),D=c.yInvert,T=Y?-1:1,J=D?-1:1,y=e;y<I+Math.PI/30;y+=Math.PI/30){y=Math.min(y,I),L.push({x:U+T*H*Math.cos(y),y:$+J*H*Math.sin(y)});}n=A(L);break;case"ELLIPSE":for(U=c.center.x,$=c.center.y,L=[],m=Math.sqrt(c.major.x*c.major.x+c.major.y*c.major.y),Q=m*c.ratio,H=Math.atan2(c.major.y,c.major.x),p=Math.sin(H),i=Math.cos(H),e=c.startAngle||0,I=e+(c.angleLength||2*Math.PI),Y=c.xInvert,D=c.yInvert^f.extrusionZNagative(c),T=Y?-1:1,J=D?-1:1,y=e;y<I+Math.PI/30;y+=Math.PI/30){y=Math.min(y,I);var v=T*m*Math.cos(y),N=J*Q*Math.sin(y);L.push({x:U+(i*v-p*N),y:$+(p*v+i*N)});}n=A(L);break;default:return;}var h=f._bound;h.xMin=Math.min(h.xMin,n.xMin),h.yMin=Math.min(h.yMin,n.yMin),h.xMax=Math.max(h.xMax,n.xMax),h.yMax=Math.max(h.yMax,n.yMax);},Q.prototype.parseFile=function(c){var l=this,b="string"==typeof l.options.sanitize?{sanitize:l.options.sanitize}:null,f=new $(b),n=f.parseSync(c);l._dxf=n,l._isAc2015="AC1015"===n.header.$ACADVER,l._dxfViewport=l.getCameraParametersFromDxf(n);},Q.prototype.toLocal=function(c,l){var b,f=this;return b=2===l?-(c-f._shiftY):1===l?c-f._shiftX:c,b*f._scale;},Q.prototype.getCameraParametersFromDxf=function(c){var l,b,f,n,U,$,H,L,e,I,Y,D,T=0;if(!l&&c.tables&&c.tables.viewPort){I=c.tables.viewPort.viewPorts;for(e in I){if(Y=I[e],D=Y.viewDirectionFromTarget,Y.center&&(Y.renderMode===T||D&&0===D.x&&0===D.y&&1===D.z)){f=Y.center,n=Y.upperRightCorner,U=Y.lowerLeftCorner,l={x:n.x,y:n.y},b={x:U.x,y:U.y},$=Y.viewWidth||0,H=Y.viewHeight||0,Y.viewTarget&&(f={x:f.x+Y.viewTarget.x,y:f.y+Y.viewTarget.y});break;}}}return!l&&c.header&&(L=c.header,L.$EXTMIN&&L.$EXTMAX&&(l=L.$EXTMAX,b=L.$EXTMIN)),$=Math.max($,l.x-b.x),H=Math.max(H,l.y-b.y),f=f||{x:$/2+b.x,y:H/2+b.y},{width:$,height:H,x:f.x,y:f.y};},Q.prototype.getColor=function(c,l){var f,n=this;if(c||console.log("no entity",c),l.tables&&l.tables.layer&&(f=l.tables.layer.layers[c.layer]),!f||f.visible){var U;c.color!==b?(U=c.color,0===U&&(U=n.options.defaultColor)):f&&(U=f.color),U&&16777215!==U||(U=n.options.defaultColor);var U="#"+((1<<24)+U).toString(16).slice(1);return n.options.mapColor&&(U=n.options.mapColor(U)),U;}},Q.prototype.sortBlocks=function(c){var b,f,n,U,$=l.keys(c),H={};for(b in c){if(f=c[b],f.entities)for(var L=0,e=f.entities.length;L<e;L++){n=f.entities[L],U=n.type,"DIMENSION"!==U&&"INSERT"!==U||n.block&&(H[b]||(H[b]=[]),H[b].push(n.block));}}for(var I=$.length,Y=I,D={},T=new Array(I),J=!1,y=function y(c,l,b){if(b.indexOf(c)>=0)return void(J=!0);if(!D[l]){D[l]=!0;var f=H[c],n=f?f.length:0;if(n){var U=b.concat(c);do{var L=f[--n];if(y(L,$.indexOf(L),U),J)break;}while(n);}T[--I]=c;}};Y--;){D[Y]||y($[Y],Y,[]);}return J?[]:T;};var p=Y.DxfWriter=function(c){var l=this;l.init(c);};p.prototype={},p.prototype.constructor=p,l.defineProperties(p.prototype,{}),p.prototype.init=function(c){var b=this,f=Y.DxfWriter.template;f.converted||(l.keys(f).forEach(function(c){f[c]=f[c].join("\n");}),f.converted=!0),b._transformFunc=c.transformFunc||function(c){return c;},b._drawingScale=c.scale,b._matchFunc=c.matchFunc||function(){return!0;},b._maxHandleId=262128;},p.prototype.toDxf=function(c,l){var b=this;b.dxfContent=c,b.gv=l,b.outputEntityLines=["ENTITIES","  0","ENDSEC"],b._fetchEntityContent(),b._collectGvEntity(),b._insertEntities();var f=b._write();return f;},p.prototype._collectGvEntity=function(){var c=this;c.gv.dm().toDatas(c._matchFunc).each(function(l){var b=l.a("handle");b&&c._recordMaxHandleId(b);});},p.prototype._fetchEntityContent=function(){var c=this,l=c.dxfContent,b="ENDSEC",f=c.entitiesStartIndex=l.indexOf("ENTITIES"),n=c.entitiesEndIndex=l.indexOf(b,f)+b.length;c.entitiesContent=l.slice(f,n),c.dxfEntityLines=c.entitiesContent.split(/\r\n|\n/);},p.prototype._updateEntities=function(){var c=this,l=c.outputEntityLines,f=c.dxfEntityLines,n=c.gvEntities;l.push(f[0]);for(var U,$,H,L,e,I,Y,D,T,J,y,m,Q,B,p=1,i=1e5,Z=c._findCode,a=c._toFloat;i--;){if(L=f[p+1].trim(),"ENDSEC"===L){l.push(f[p]),l.push(f[p+1]);break;}for(U=p+2;i--&&"0"!==f[U].trim();){U+=2;}if(e=f[Z("5",f,p,U)],c._recordMaxHandleId(e),I=n[e]){for($=l.length,y=p;y<U;y++){l.push(f[y]);}if(H=l.length,p=U,"edge"!==I.a("shapeType")){if("image"===I.a("shapeType")){for(Y=c._getNodeRealScale(I),T=2*Math.PI-I.getRotation();T>=2*Math.PI;){T-=2*Math.PI;}for(;T<0;){T+=2*Math.PI;}D=c._transformFunc(I.getPosition()),Math.abs(Y.x-1)<1e-5&&Math.abs(Y.y+1)<1e-5&&(Y.x=-1,Y.y=1,T=2*Math.PI-T);var j={};[{key:"10",value:D.x},{key:"20",value:D.y},{key:"42",value:Y.y,default:1,before:["50"]},{key:"41",value:Y.x,default:1,dependOn:"42",before:["42","50"]},{key:"50",value:180*T/Math.PI,default:0}].forEach(function(c){if(m=c.key,Q=c.value,B=c.default!==b&&Math.abs(Q-c.default)<1e-5,Q=a(Q,"10"===m||"20"===m||"50"===m),J=Z(m,l,$,H))Q!==l[J].trim()&&(l[J]=Q);else{if(B&&(!c.dependOn||j[c.dependOn]))return void(j[m]=!0);var f=!1;do{if(!c.before)break;if(J=b,c.before.forEach(function(c){var b=Z(c,l,$,H);b&&(!J||b<J)&&(J=b);}),!J)break;l.splice(J-1,0," "+m,Q),f=!0;}while(!1);f||(l.push(" "+m),l.push(Q)),H+=2;}});}}else c._tryUpdateEdge(l,$,H,L,I);}else console.log("have no entity with handle "+e+" "+L),p=U;}},p.prototype._recordMaxHandleId=function(c){var l=parseInt("0x"+c),b=this;b._maxHandleId=Math.max(b._maxHandleId,l);},p.prototype._nextHandleId=function(){var c=this,l=++c._maxHandleId;return l.toString(16).toUpperCase();},p.prototype._getNodeRealScale=function(c){var l=this,b=c.getScale(),f=c.getSize(),n=Y.Default.getImage(c.getImage());return{x:b.x*f.width*n.scale/(n.width*l._drawingScale),y:b.y*f.height*n.scale/(n.height*l._drawingScale)};},p.template={INSERT:["  0","INSERT","  5","$HANDLE","330","1F","100","AcDbEntity","  8","0","100","AcDbBlockReference","  2","$BLOCK"," 10","$POSITION.X"," 20","$POSITION.Y"," 30","0.0"," 41","$SCALE.X"," 42","$SCALE.Y"," 50","$ROTATION"]},p.prototype._insertEntities=function(){var c,l=this;l.gv.dm().toDatas(l._matchFunc).each(function(b){if(c=null,b.a("addonBlock"))c=l._addonBlock(b);else if(b.a("addonText"))c=l._addonText(b);else if(b.a("addonARC")&&!b.s("shape.arc.oval")){var f=b.s("shape.arc.to"),n=b.s("shape.arc.from")||0;c=!f||Math.abs(f-n)>=2*Math.PI?l._addonCircle(b):l._addonARC(b);}else b.a("addonARC")&&b.s("shape.arc.oval")?c=l._addonEllipse(b):b.a("addonLine")?c=l._addonLine(b):b.a("addonRect")&&(c=l._addonRect(b));c&&(c.unshift(-2,0),l.outputEntityLines.splice.apply(l.outputEntityLines,c));});};var i=function i(c){if(c instanceof Y.Shape){var l=new Y.Matrix(),b=c.getPosition();return l.translate(-b.x,-b.y).scale(c.getScaleX(),c.getScaleY()).rotate(c.getRotation()).translate(b.x,b.y),l;}return c.getMatrix?c.getMatrix():new Y.Matrix();};p.prototype._addonRect=function(c){var l=this,b=c.getPoints(),f=c.getSegments(),n=!0;f&&(n=5===f.get(f.size()-1));var U,$=["  0","LWPOLYLINE","  5",c.a("handle")||l._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbPolyline"," 90","        "+b.size()," 70","     "+(n?1:0)," 43","0.0"],H=l._toFloat,L=i(c);return b.each(function(c){U=l._transformFunc(L.tf(c)),$.push.apply($,[" 10",H(U.x,!0)," 20",H(U.y,!0)]);}),$;},p.prototype._addonCircle=function(c){var l=this,b=["  0","CIRCLE","  5",c.a("handle")||l._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"],f=l._toFloat,n=l._transformFunc(c.getPosition());b.push.apply(b,[" 10",f(n.x,!0)," 20",f(n.y,!0)," 30","0.0"]);var U=c.getScale(),$=c.getWidth()*U.x,H=c.getHeight()*U.y;return b.push.apply(b,[" 40",.5*Math.min($,H)/l._drawingScale]),b;},p.prototype._addonLine=function(c){var l,b=this,f=[],n=b._toFloat,U=c.getPoints(),$=i(c),H=b._transformFunc($.tf(U.get(0))),L=c.a("handle")||b._nextHandleId();return U.each(function(c,U){0!==U&&(f.push.apply(f,["  0","LINE","  5",L,"330","1F","100","AcDbEntity","  8","0","100","AcDbLine"]),f.push.apply(f,[" 10",n(H.x,!0)," 20",n(H.y,!0)," 30","0.0"]),l=b._transformFunc($.tf(c)),f.push.apply(f,[" 11",n(l.x,!0)," 21",n(l.y,!0)," 31","0.0"]),H=l,L=b._nextHandleId());}),f;},p.prototype._addonEllipse=function(c){var l=this,b=["  0","ELLIPSE","  5",c.a("handle")||l._nextHandleId()];b.push.apply(b,["330","1F","100","AcDbEntity","  8","0","100","AcDbEllipse"]);var f=l._toFloat,n=l._transformFunc(c.getPosition());b.push(" 10");b.push(f(n.x,!0));b.push(" 20");b.push(f(n.y,!0)),b.push.apply(b,[" 30","0.0"]);var U,$=c.getScale(),H=c.getWidth()*$.x/l._drawingScale,L=c.getHeight()*$.y/l._drawingScale,e=.5*Math.max(H,L),I=0;H>L?U={x:e,y:0}:(U={x:0,y:e},I=.5*-Math.PI);var Y=-c.getRotation(),D=Math.sin(Y),T=Math.cos(Y),J=T*U.x-D*U.y,y=D*U.x+T*U.y;b.push.apply(b,[" 11",f(J,!0)," 21",f(y,!0)," 31","0.0"]),b.push.apply(b,["210","0.0","220","0.0","230","1.0"]);var m=H/L;m>1&&(m=1/m),b.push.apply(b,[" 40",f(m,!0)]);var Q=c.s("shape.arc.from"),B=c.s("shape.arc.to"),p=2*Math.PI-B+I,i=(p+B-Q)%(2*Math.PI);return b.push.apply(b,[" 41",p," 42",i||2*Math.PI]),b;},p.prototype._addonARC=function(c){var l=this,b=["  0","ARC","  5",c.a("handle")||l._nextHandleId()];b.push.apply(b,["330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"]);var f=l._toFloat,n=l._transformFunc(c.getPosition());b.push(" 10");b.push(f(n.x,!0));b.push(" 20");b.push(f(n.y,!0)),b.push.apply(b,[" 30","0.0"]);var U=c.getScale(),$=c.getWidth()*U.x,H=c.getHeight()*U.y,L=.5*Math.min($,H);b.push.apply(b,[" 40",f(L/l._drawingScale,!0)]),b.push.apply(b,["100","AcDbArc"]);var e=c.getRotation(),I=c.s("shape.arc.from"),Y=c.s("shape.arc.to"),D=2*Math.PI,T=(D-Y-e)%D,J=(T+Y-I)%D;return J=J||2*Math.PI,b.push.apply(b,[" 50",f(180*T/Math.PI,!0)," 51",f(180*J/Math.PI,!0)]),b;};var Z={left:0,center:1,right:2},a={top:3,middle:2,bottom:1};p.prototype._addonText=function(c){var l=this,b=["  0","TEXT","  5",c.a("handle")||l._nextHandleId()];b.push.apply(b,["330","1F","100","AcDbEntity","  8","0","100","AcDbText"]);var f=c.s("text.font")||"16px Standard",n=c.s("text"),U=Y.Default.getTextSize(f,n),$=c.getScale(),H=parseFloat(f)/l._drawingScale*$.y,L=H/U.height*U.width,e=l._toFloat,I=l._transformFunc(c.getPosition());I.y+=H/4;var D=b.push(" 10");b.push(e(I.x,!0));var T=b.push(" 20");b.push(e(I.y,!0)),b.push.apply(b,[" 30","0.0"]),b.push(" 40"),b.push(H),b.push("  1"),b.push(n);var J=2*Math.PI-c.getRotation();b.push(" 50"),b.push(e(180*J/Math.PI%360,!0)),b.push(" 41"),b.push($.x/$.y),f=f.substr(f.indexOf("px")+3).split(","),b.push("  7"),b.push(f[0]);var y=c.s("text.align")||"left",m=c.s("text.vAlign")||"bottom";if("left"!==y&&(b.push(" 72"),b.push("     "+Z[y])),"bottom"!==m||"left"!==y){b.push(" 11"),b.push(e(I.x,!0)),b.push(" 21"),b.push(e(I.y,!0)),b.push.apply(b,[" 31","0.0"]);var Q=0,B=0;"center"===y?Q=.5*L:"right"===y&&(Q=L),Q*=$.x,"top"===m?B=H:"middle"===m&&(B=.5*H),B*=$.y;var p=Math.cos(J+Math.PI),i=Math.sin(J+Math.PI);b[D]=p*Q-i*B+I.x,b[T]=i*Q+p*B+I.y;}return b.push.apply(b,["100","AcDbText"]),"bottom"!==m&&(b.push(" 73"),b.push("     "+a[m])),b;},p.prototype._addonBlock=function(c){var l=this,b=Y.DxfWriter.template.INSERT;b=b.replace("$HANDLE",c.a("handle")||l._nextHandleId()),b=b.replace("$BLOCK",c.getImage());for(var f=l._getNodeRealScale(c),n=2*Math.PI-c.getRotation();n>=2*Math.PI;){n-=2*Math.PI;}for(;n<0;){n+=2*Math.PI;}var U=l._transformFunc(c.getPosition());Math.abs(f.x-1)<1e-5&&Math.abs(f.y+1)<1e-5&&(f.x=-1,f.y=1,n=2*Math.PI-n);var $=l._toFloat;return b=b.replace("$POSITION.X",$(U.x,!0)),b=b.replace("$POSITION.Y",$(U.y,!0)),b=b.replace("$SCALE.X",$(f.x)),b=b.replace("$SCALE.Y",$(f.y)),b=b.replace("$ROTATION",$(180*n/Math.PI,!0)),b.split(/\r\n|\n/);},p.prototype._tryUpdateEdge=function(c,l,b,f,n){var U=this,$=Y.Default.getInternal(),H=$.getEdgeAgentPosition(U.gv,n.getSourceAgent(),n.s("edge.source.position"),n.s("edge.source.offset.x"),n.s("edge.source.offset.y"),n.s("edge.source.anchor.x"),n.s("edge.source.anchor.y")),L=$.getEdgeAgentPosition(U.gv,n.getTargetAgent(),n.s("edge.target.position"),n.s("edge.target.offset.x"),n.s("edge.target.offset.y"),n.s("edge.target.anchor.x"),n.s("edge.target.anchor.y"));H=U._transformFunc(H),L=U._transformFunc(L);var e=U._findCode;if("LINE"===f)c[e("10",c,l,b)]=H.x,c[e("20",c,l,b)]=H.y,c[e("11",c,l,b)]=L.x,c[e("21",c,l,b)]=L.y;else if("LWPOLYLINE"===f){for(var I,D=e("10",c,l,b),T=D;I=e("10",c,T+1,b);){T=I;}T=(I=e("30",c,T+1,b))?I:e("20",c,T+1,b),c.splice(D-1,T-D+2);var J=[H];n.s("edge.points").each(function(c){J.push(U._transformFunc(c));}),J.push(L);var y=D-1;J.forEach(function(l){c.splice(y,0,"10",l.x,"20",l.y),y+=4;});}},p.prototype._findCode=function(c,l,b,f){for(var n=b,U=!1;n<f;){if(c===l[n].trim()){U=!0;break;}n+=2;}if(U)return n+1;},p.prototype._toFloat=function(c,l){return l||(c=Math.round(1e8*c)/1e8),c=""+c,c.indexOf(".")<0&&(c+=".0"),c;},p.prototype._write=function(){var c=this,l=c.dxfContent,b=c.outputEntityLines.join("\n"),f=c.entitiesStartIndex,n=c.entitiesEndIndex;return l.slice(0,f)+b+l.slice(n);};}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);var vb=function(c){function l(b,f){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Vl(this,l);var U=kl(this,c.call(this,f));return U.editor=b,U.editable=n,U.dragToIndexEnabled=!0,U.addTopPainter(U.$1$.bind(U)),U;}return wl(l,c),l.prototype.getLabelColor=function(l){return l!==this.draggingData||this.isSelected(l)?c.prototype.getLabelColor.call(this,l):Gl.config.color_select;},l.prototype.handleDelete=function(){this.editable&&this.removeSelection();},l.prototype.isDroppable=function(c,l){return!1;},l.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw());},l.prototype._endDrag=function(c,l){},l.prototype._endCrossDrag=function(c,l){},l.prototype.$1$=function(c){c.texureImage2D=!0;var l=void 0;if(this._dragInfo&&this._dragInfo.inView?l=this._dragInfo:this._crossDragInfo&&(l=this._crossDragInfo),l){var b=this.getWidth(),f=this.getRowHeight(),n=l.type,U=l.parent,$=U?this.getRowDatas().indexOf(U):-1,H=Gl.config.color_select_dark;if(l.refData){if(r(c,H,0,$*f,b,f,2),"up"===n||"down"===n){var L=l.x,e=l.y;c.beginPath(),c.arc(L-3,e,3,0,2*Math.PI,!0),c.moveTo(L,e),c.lineTo(b,e),c.lineWidth=2,c.strokeStyle=H,c.stroke();}}else{var I=this.getViewRect();r(c,H,I.x,I.y,I.width,I.height,2);}}},l.prototype._dragging=function(c,l){var b=this.getRowHeight(),f=this.lp(c),n=f.y/b,U=Math.floor(n),$=this.getRowSize();if(U>$-1)l.refData=null,l.type="parent",l.parent=null;else{var H=f.y-U*b;this.dragToIndexEnabled?H<.25*b?l.type="up":H>.75*b?l.type="down":l.type="parent":l.type="parent";var L=l.refData=this.getRowDatas().get(U);"up"===l.type?(l.parent=L.getParent(),l.x=(this.getLevel(L)+1)*this.getIndent(),l.y=U*b):"down"===l.type?(this.getToggleIcon(L)===this.getExpandIcon()?(l.parent=L,l.x=(this.getLevel(L)+2)*this.getIndent()):(l.parent=L.getParent(),l.x=(this.getLevel(L)+1)*this.getIndent()),l.y=(U+1)*b):l.parent=L;}this.autoScroll(c),this.redraw();},l.prototype.$2$=function(){var c="";if(this.draggingData&&(c=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var l=this.sm().size();c+=l>1?" (+"+l+") ":"";}return c;},l.prototype.handleDragAndDrop=function(c,l){if(this.editable){if("prepare"===l)return void this._clearDragInfo();"begin"===l&&(this._dragInfo={tip:this.$2$(),view:this});var b=this._dragInfo;if(b){var f=this.editor.dnd;if("begin"===l||"between"===l){var n=this.getView().contains(u(c));return n?(b.inView=!0,this._dragging(c,b),f.clearDropView(c,b)):(b.inView&&this.redraw(),b.inView=!1,f.crossDrag(c,b)),void f.showTip(b.tip,c);}return"end"===l?(b.inView?this._endDrag(c,b):f.crossDrop(c,b),void this._clearDragInfo()):"cancel"===l?(b.inView||f.crossCancel(c,b),void this._clearDragInfo()):void 0;}}},l.prototype.handleCrossDrag=function(c,l,b){return"exit"===l||"cancel"===l?(this._crossDragInfo=null,void this.redraw()):"enter"===l||"over"===l?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(c,this._crossDragInfo)):"drop"===l?(this._endCrossDrag(c,b),this._crossDragInfo=null,void this.redraw()):void 0;},l.prototype.isEditable=function(c){return this.editable;},l.prototype.rename=function(c,l){c.setName(l);},l.prototype.handleDataDoubleSelect=function(c,l){if(this.isEditable(l)){var b=this.getLevel(l);b+=this.getIcon(l)?2:1,this.lp(c).x>b*this.getIndent()&&this.beginEditing(l);}},l.prototype.getEditingLabel=function(c){return this.getLabel(c);},l.prototype.beginEditing=function(c){var l=this;this.cancelEditing(),this.makeVisible(c),this.validate();var b=this.getLevel(c);b+=this.getIcon(c)?2:1;var f=this.getIndent()*b,n=this.ty()+this.getRowIndex(c)*this.getRowHeight(),U=Math.max(1,this.getWidth()-f),$=this.getRowHeight();this._currentEditor=new ht.widget.TextField(),this._currentEditor.data=c;var H=this._currentEditor.getElement(),L=this.getEditingLabel(c);H.value=null==L?"":L,H.onblur=function(c){l.endEditing();},H.onkeydown=function(c){Q(c)?l.endEditing():B(c)&&l.cancelEditing();},this.getView().appendChild(this._currentEditor.getView()),g(this._currentEditor,f,n,U,$),this._currentEditor.setFocus(),ht.Default.callLater(H.select,H);},l.prototype.endEditing=function(){var c=this._currentEditor;c&&(this.rename(c.data,c.getValue()),delete this._currentEditor,k(c.getView()),this.redraw());},l.prototype.cancelEditing=function(){var c=this._currentEditor;c&&(delete this._currentEditor,k(c.getView()),this.redraw());},l;}(Ab);Gl.DNDTree=vb;var Nb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b.editor,b.dataModel,f));return n.explorer=b,n.dragToIndexEnabled=!1,n;}return wl(l,c),l.prototype.isVisible=function(c){return(!this._visibleFunc||this._visibleFunc(c)!==!1)&&(c.fileType===_l||c.fileType===Ml);},l.prototype.getLabel=function(c){return n("url:"+c.url,!0)||this.getEditingLabel(c);},l.prototype.getEditingLabel=function(c){return c.getName();},l.prototype.handleBackgroundClick=function(c){},l.prototype.handleDelete=function(){this.editable&&Gl.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this);},l.prototype.isDroppable=function(c,l){return!(!this.editable||l.view!==this.explorer.list)||l.view===this.editor.dndFromOutside;},l.prototype._endCrossDrag=function(c,l){var b=this;if(this._crossDragInfo){var f=l.view,n=this._crossDragInfo.parent;n||(n=this.explorer.rootNode),f===this.explorer.list?f.isSelected(f.draggingData)?f.sm().toSelection().each(function(c){b.editor.moveFile(c,n);}):this.editor.moveFile(f.draggingData,n):f===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(c,n);}},l.prototype._endDrag=function(c,l){var b=this,f=l.parent;if(f||(f=this.explorer.rootNode),this.isSelected(this.draggingData)){var n=this.getTopRowOrderSelection();n.each(function(c){b.editor.moveFile(c,f);});}else this.editor.moveFile(this.draggingData,f),this.sm().ss(this.draggingData);f&&this.expand(f);},l.prototype.isEditable=function(c){return this.editable&&c!==this.explorer.rootNode;},l.prototype.beginEditing=function(l){var b={data:l,url:l.url};this.editor.fireEvent("fileRenaming",b),b.preventDefault||c.prototype.beginEditing.call(this,l);},l.prototype.rename=function(c,l){this.editor.renameFile(c,l)&&(c.s("label")?c.s("label",l):c.setName(l));},l.prototype.getIcon=function(c){return void 0!==c.getIcon()?c.getIcon():c.fileType===_l?this.hasExpandedChild(c)?"editor.direxpanded":"editor.dircollapsed":c.fileType===Ml?"editor.root.state":null;},l;}(vb),hb=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this,b));return f._lastSelectDataTime=Date.now(),f;}return wl(l,c),l.prototype.isVScrollable=function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height;},l.prototype.isV=function(c){var l=this.gv.getViewRect();return this.isVScrollable()&&(l.x+l.width-this.gv.lp(c).x)*this.gv.getZoom()<ht.Default.scrollBarInteractiveSize;},l.prototype.clear=function(c){c&&this._dragging&&!this._dragCancel&&this.gv.handleDragAndDrop(c,"end"),this.gv.draggingData&&(this.gv.draggingData.iv(),this.gv.draggingData=null,this.gv.redraw()),this._dragging=this._dragCancel=this._clientPoint=null;},l.prototype.handle_mousedown=function(c){this.handle_touchstart(c);},l.prototype.handle_touchstart=function(c){if(!this.isV(c)&&!Gc(c.target)){q(c),this.clear(c),this._clientPoint=j(c);var l=this.gv.getDataAt(c);i(c)?l?(this.gv.draggingData=l,l.iv(),this.gv.redraw(),this.gv.handleDragAndDrop(c,"prepare"),a(this,c)):this.gv.sm().cs():(l&&this.handleSelection(c,l),this.clear(c));}},l.prototype.handle_mouseup=function(c){this.handle_touchend(c);},l.prototype.handle_touchend=function(c){if(this._clientPoint&&!this._dragging){var l=this.gv.getDataAt(c);l&&this.handleSelection(c,l);}this.clear(c);},l.prototype.handleWindowMouseMove=function(c){this.handleWindowTouchMove(c);},l.prototype.handleWindowMouseUp=function(c){this.handleWindowTouchEnd(c);},l.prototype.handleWindowTouchMove=function(c){q(c),this._dragging?this._dragCancel||this.gv.handleDragAndDrop(c,"between"):this._clientPoint&&this.gv.draggingData&&v(j(c),this._clientPoint)>2&&(this._dragging=!0,this.gv.handleDragAndDrop(c,"begin"));},l.prototype.handleWindowTouchEnd=function(c){q(c),this.clear(c);},l.prototype.handleSelection=function(c,l){var b=this.gv.sm();if(G(c))this.gv.isSelected(l)?b.removeSelection(l):b.appendSelection(l);else if(x(c)){var f=b.ld();if(f)for(var n=this.gv.nodes,U=n.indexOf(f),$=n.indexOf(l);U!==$;){U+=$>U?1:-1,b.as(n[U]);}else b.ss(l);}else if(i(c)){var H=Date.now();if(b.contains(l)){var L=H-this._lastSelectDataTime;L>500&&L<1500&&this.gv.handleDataDoubleSelect(c,l);}b.ss(l),this._lastSelectDataTime=H;}else b.contains(l)||b.ss(l);},l.prototype.handle_keydown=function(c){if(!Gc(c.target))if(B(c))this._dragging&&!this._dragCancel&&(this.gv.handleDragAndDrop(c,"cancel"),this._dragCancel=!0);else if(J(c)||m(c)||T(c)||y(c)){var l=this.gv.sm(),b=this.gv.nodes,f=l.ld();if(b.length){var n=void 0;if(f){var U=b.indexOf(f);J(c)||T(c)?0!==U&&(n=b[U-1]):U!==b.length-1&&(n=b[U+1]);}else n=b[0];n&&(x(c)?l.as(n):l.ss(n));}}},l;}(ht.graph.Interactor),Cb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b.editor,b.dm,f));return n.displayView=b,n.graphView=b.graphView,n.nodeIcon=kc(n),n.initMenu(),b.dm.addDataPropertyChangeListener(function(c){var l=c.data;(l instanceof ht.Shape||l instanceof ht.Edge)&&(l.editorIcon=null);}),n;}return wl(l,c),l.prototype.getBorderColor=function(c){return null;},l.prototype.onDataDoubleClicked=function(c,l){l.altKey?this.graphView.fitData(c,!0,Gl.config.fitPadding):this.graphView.makeCenter(c,!0);},l.prototype.onPropertyChanged=function(l){"filter"===l.property&&(this.visibleMap=null,this.ivm()),c.prototype.onPropertyChanged.call(this,l);},l.prototype.handleDataPropertyChange=function(l){!this._filter||"name"!==l.property&&"displayName"!==l.property?c.prototype.handleDataPropertyChange.call(this,l):(this.visibleMap=null,this.ivm());},l.prototype.checkVisible=function(c){if(!this._filter)return!0;var l=this.getLabel(c);return null!=l&&(l=(l+"").toLowerCase(),l.indexOf(this._filter)>=0);},l.prototype.validateModel=function(){var l=this;this._filter&&!this.visibleMap&&(this.visibleMap={},this.getDataModel().each(function(c){if(l.checkVisible(c)){l.visibleMap[c._id]=!0;for(var b=c.getParent();b&&!l.visibleMap[b._id];){l.visibleMap[b._id]=!0,b=b.getParent();}}})),c.prototype.validateModel.call(this);},l.prototype.isVisible=function(c){return!c._refGraph&&(!this._filter||this.visibleMap&&this.visibleMap[c._id]);},l.prototype.validate=function(){this.graphView.validate(),c.prototype.validate.call(this);},l.prototype.getLabel=function(c){var l=c.toLabel();return null==l&&c.s("editor.folder")?n("ht.Folder"):c.toLabel()||n(c.getClassName());},l.prototype.getIcon=function(c){return c instanceof ht.SubGraph?"editor.subgraph":c instanceof ht.Group?"editor.group":c instanceof ht.RefGraph||c instanceof ht.Text?c.getIcon():c instanceof ht.Block?"editor.block":c instanceof ht.Shape?(c.editorIcon||(c.editorIcon=xc(c)),c.editorIcon):c instanceof ht.Edge?(c.editorIcon||(c.editorIcon=Kc(this,c)),c.editorIcon):c instanceof ht.Node?this.nodeIcon:c.s("editor.folder")?this.hasExpandedChild(c)?"editor.direxpanded":"editor.dircollapsed":null;},l.prototype.isDroppable=function(c,l){return l.view===this.editor.symbols.getFileListView()||l.view===this.editor.assets.getFileListView()||l.view===this.editor.displays.getFileListView();},l.prototype._endCrossDrag=function(c,l){var b=this;if(this._crossDragInfo){this.editor.beginTransaction();var f=[],n=l.view,U=this._crossDragInfo.type,$=this._crossDragInfo.parent,H=this._crossDragInfo.refData;n!==this.editor.symbols.getFileListView()&&n!==this.editor.assets.getFileListView()||n.toDraggingDatas("down"===U).forEach(function(c){var l=new ht.Node();l.setImage(c.url),l.setDisplayName(W(c.getName())),f.push(l),b.displayView.addData(l,!0),b.editor.gv.$64$([l]),b._dropData(l,U,$,H);}),n===this.editor.displays.getFileListView()&&n.toDraggingDatas("down"===U).forEach(function(c){if(c.url!==b.editor.url){var l=new ht.RefGraph();l.setRef(c.url),l.setDisplayName(W(c.getName())),f.push(l),b.displayView.addData(l,!0),b._dropData(l,U,$,H);}}),f.length&&this.sm().ss(f),this.editor.endTransaction();}},l.prototype._endDrag=function(c,l){var b=this;this.editor.beginTransaction();var f=l.type,n=l.parent,U=l.refData;if(this.isSelected(this.draggingData)){var $=this.getTopRowOrderSelection();"down"===f&&$.reverse(),$.each(function(c){b._dropData(c,f,n,U);});}else this._dropData(this.draggingData,f,n,U),this.sm().ss(this.draggingData);n&&this.expand(n),this.editor.endTransaction();},l.prototype._dropData=function(c,l,b,f){if(c.setParent(b),"down"===l||"up"===l){var n=b?b.getChildren():this.dm().getRoots(),U=n.indexOf(f);"down"===l&&U++,n.indexOf(c)<U&&U--,this.dm().moveTo(c,U);}else b||this.dm().moveToBottom(c);},l.prototype.rename=function(c,l){c.setDisplayName(l);},l.prototype.initMenu=function(){var c=this,l=function l(){for(var l=c.editor.selection,b=0;b<l.length;b++){if(l[b].s("editor.folder"))return!0;}return!1;};this.menu=new Bb();var b=[{id:"folder",label:n("editor.folder"),action:function action(){c.editor.folder();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"unfolder",label:n("editor.unfolder"),action:function action(){c.editor.unfolder();},visible:function visible(){return c.editable&&l();}},{separator:!0,visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"copy",label:n("editor.copy"),action:function action(){c.editor.copy();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"paste",label:n("editor.paste"),action:function action(){c.editor.paste();},visible:function visible(){return c.editable&&c.editor.hasCopyInfo();}},{id:"delete",label:n("editor.delete"),action:function action(){c.editor.delete();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{separator:!0,visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"bringToFront",label:n("editor.bringtofront"),action:function action(){c.editor.bringToFront();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"bringForward",label:n("editor.bringforward"),action:function action(){c.editor.bringForward();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"sendBackward",label:n("editor.sendbackward"),action:function action(){c.editor.sendBackward();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"sendToBack",label:n("editor.sendtoback"),action:function action(){c.editor.sendToBack();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{separator:!0,visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"expandAll",label:n("editor.expandall"),action:function action(){c.expandAll();}},{id:"collapseAll",label:n("editor.collapseall"),action:function action(){c.collapseAll();}}];this.menu.setItems(b),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu);},l.prototype.onClosed=function(){U(this.editor.menus,this.menu);},l;}(vb);S(Cb,{ms_ac:["filter"]});var tb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b.dataModel));return n.explorer=b,n.editable=f,n.editor=b.editor,n.getHScrollBar().style.display="none",n.setMaxFileSize(Gl.config.imageSize),n.enableToolTip(),n.setPannable(!1),n.setInteractors([new ht.graph.ScrollBarInteractor(n),new hb(n),new ht.graph.DefaultInteractor(n),new ht.graph.TouchInteractor(n,{editable:!1})]),n;}return wl(l,c),l.prototype.getToolTip=function(c){var l=this.getDataAt(c);return l?this.getLabel(l):null;},l.prototype.getLabel=function(c){return n("url:"+c.url,!0)||this.getEditingLabel(c);},l.prototype.isEditable=function(c){return this.editable;},l.prototype.getEditingLabel=function(c){return c.s("label")||c.getName();},l.prototype.rename=function(c,l){this.editor.renameFile(c,l)&&(c.s("label")?c.s("label",l):c.setName(l));},l.prototype.handleDelete=function(){this.editable&&Gl.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this);},l.prototype.beginEditing=function(c){var l=this,b={data:c,url:c.url};if(this.editor.fireEvent("fileRenaming",b),!b.preventDefault){this.cancelEditing(),this.makeVisible(c),this.validate();var f=this.getDataUI(c),n=!1,U=void 0;if(this.explorer.isAccordionMode()&&c.fileType===_l?(U=c.getRect(),n=!0):f&&f.labelInfo&&(U=f.labelInfo.rect),U){var $=void 0,H=void 0,L=void 0,e=void 0;if(n)$=U.x,H=U.y,L=U.width,e=U.height;else if(this._layoutType===Pl)$=this._rowHeight,H=c.p().y-this._rowHeight/2,L=this.getWidth()-$,e=this._rowHeight;else{var I=f.labelInfo.rect||c.getRect();$=c.p().x-c.getWidth()/2,H=I.y,L=c.getWidth(),e=I.height;}H+=this.ty(),this._currentEditor=new ht.widget.TextField(),this._currentEditor.data=c;var Y=this._currentEditor.getElement(),D=this.getEditingLabel(c);Y.value=null==D?"":D,Y.onblur=function(c){l.endEditing();},Y.onkeydown=function(c){Q(c)?l.endEditing():B(c)&&l.cancelEditing();},this.getView().appendChild(this._currentEditor.getView()),g(this._currentEditor,$,H,L,e),this._currentEditor.setFocus(),ht.Default.callLater(Y.select,Y);}}},l.prototype.endEditing=function(){var c=this._currentEditor;c&&(this.rename(c.data,c.getValue()),delete this._currentEditor,k(c.getView()),this.redraw());},l.prototype.cancelEditing=function(){var c=this._currentEditor;c&&(delete this._currentEditor,k(c.getView()),this.redraw());},l.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw());},l.prototype.handleDragAndDrop=function(c,l){if("prepare"===l)return void this._clearDragInfo();"begin"===l&&(this._dragInfo={tip:this.$2$(),view:this});var b=this._dragInfo;if(b){var f=this.editor.dnd;if("begin"===l||"between"===l){var n=this.getView().contains(u(c));return n?(b.inView=!0,this._dragging(c,b),f.clearDropView(c,b)):(b.inView&&this.redraw(),b.inView=!1,f.crossDrag(c,b)),void f.showTip(b.tip,c);}return"end"===l?(b.inView?this._endDrag(c,b):f.crossDrop(c,b),void this._clearDragInfo()):"cancel"===l?(b.inView||f.crossCancel(c,b),void this._clearDragInfo()):void 0;}},l.prototype._dragging=function(c,l){if(this.editable){var b=this.getDataAt(c);b&&b.fileType===_l?l.targetData=b:l.targetData=null,this.autoScroll(c),this.redraw();}},l.prototype.$2$=function(){var c="";if(this.draggingData&&(c=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var l=this.sm().size();c+=l>1?" (+"+l+") ":"";}return c;},l.prototype._endDrag=function(c,l){},l.prototype.handleSelectionChange=function(l){c.prototype.handleSelectionChange.call(this,l),this.redraw();},l.prototype.handleCrossDrag=function(c,l,b){if(this.editable)return"exit"===l||"cancel"===l?(this._crossDragInfo=null,void this.redraw()):"enter"===l||"over"===l?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(c,this._crossDragInfo)):"drop"===l?(this._endCrossDrag(c,b),this._crossDragInfo=null,void this.redraw()):void 0;},l.prototype._endCrossDrag=function(c,l){if(this.editable&&this._crossDragInfo){var b=this._crossDragInfo.targetData;if(b&&b.fileType===_l||(b=this.dm().sm().ld()),b){var f=l.view;"displays"===this.explorer.rootDir&&f instanceof Cb&&this.handleDisplayTreeDrop(f,b),f===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(c,b);}}},l;}(pb);S(tb,{ms_ac:["layoutType","fileSize","fileGap","rowHeight","maxFileSize"],_fileRect:{x:0,y:0,width:0,height:0},_layoutType:ql,_fileSize:50,_fileGap:6,_rowHeight:21,_maxFileSize:200});var Fb={layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,visibleFunc:!0},Wb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b,f));return n.nodes=[],n.doLayoutBind=n.doLayout.bind(n),n.dm().sm().ms(function(){n.sm().cs(),n.doLayoutLater();}),n.dm().mm(function(){n.doLayoutLater();}),n.addInteractorListener(n.handleInteraction.bind(n)),n.addBottomPainter(n.paintBottom.bind(n)),n.addTopPainter(n.paintTop.bind(n)),n;}return wl(l,c),l.prototype.getDataAt=function(l){if(this._layoutType===Pl){var b=Math.floor(this.lp(l).y/this._rowHeight);return this.nodes[b];}return c.prototype.getDataAt.call(this,l);},l.prototype.paintBottom=function(c){var l=this,b=this._rowHeight,f=this.getWidth();this.nodes.forEach(function(n){if(l.isSelected(n))if(l._layoutType===Pl)c.beginPath(),c.rect(0,n.p().y-b/2,f,b),c.fillStyle=Gl.config.color_select,c.fill();else{var U=n.getRect();r(c,Gl.config.color_select,U.x-2,U.y-2,U.width+4,U.height+4,1);}});},l.prototype.paintTop=function(c){c.texureImage2D=!0;var l=void 0;if(this._dragInfo&&this._dragInfo.inView?l=this._dragInfo:this._crossDragInfo&&(l=this._crossDragInfo),l){var b=Gl.config.color_select_dark,f=l.targetData;if(c.texureImage2D=!0,f){if(this._layoutType===Pl){var n=0,U=f.p().y-this._rowHeight/2,$=this.getWidth(),H=this._rowHeight;r(c,b,n,U,$,H,2);}else{var L=f.getRect();c.beginPath(),c.rect(L.x,L.y,L.width,L.height),c.lineWidth=2,c.strokeStyle=Gl.config.color_select_dark,c.stroke();}}else{var e=this.getViewRect();r(c,b,e.x,e.y,e.width,e.height,2);}}},l.prototype.toDraggingDatas=function(c){var l=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(c){c.fileType!==_l&&l.push(c);}),c&&l.reverse()):this.draggingData.fileType!==_l&&l.push(this.draggingData),l;},l.prototype.isDroppable=function(c,l){return"displays"===this.explorer.rootDir&&l.view instanceof Cb||l.view===this.editor.dndFromOutside;},l.prototype._endDrag=function(c,l){var b=this,f=l.targetData;f&&(this.isSelected(this.draggingData)?this.sm().toSelection().each(function(c){b.editor.moveFile(c,f);}):this.editor.moveFile(this.draggingData,f));},l.prototype.handleDisplayTreeDrop=function(c,l){var b=this,f=void 0;f=c.isSelected(c.draggingData)?c.getTopRowOrderSelection().toArray():[c.draggingData];var U={};f.forEach(function(c){E(c,U);});var $=new ht.JSONSerializer(c.getDataModel(),!0);$.isSerializable=function(c){return U[c._id];};var H=$.serialize(),L=n("editor.inputnewdisplayname")+" ["+l.url+"]";zc(L,c.getLabel(c.draggingData),{nullable:!1,trim:!0,maxLength:Gl.config.maxFileNameLength,checkFunc:Gl.config.checkFileName},function(c,f){"ok"===f&&!function(){Uc(c)||(c+=".json");var f=l.url+"/"+c,n={path:f,content:H};b.editor.request("upload",n,function(c){c===!0&&!function(){var c=b.editor.gv,l=c.isVisible;c.isVisible=function(b){return l.call(c,b)&&U[b._id];},b.editor.saveImage(c,f.substr(0,f.length-5)+".png"),c.isVisible=l,c.redraw();}(),b.editor.fireEvent("displayViewSaved",{url:f});});}();});},l.prototype.handleDataDoubleSelect=function(c,l){if(this.isEditable(l)){var b=this.lp(c);if(this._layoutType===Pl)b.x>this._rowHeight&&this.beginEditing(l);else{var f=this.getDataUI(l);f&&f.labelInfo&&f.labelInfo.rect&&ht.Default.containsPoint(f.labelInfo.rect,b)&&this.beginEditing(l);}}},l.prototype.getLabelColor=function(c){return c!==this.draggingData||this.isSelected(c)?this._layoutType===Pl?this.isSelected(c)?Gl.config.color_light:ht.Default.labelColor:this.isSelected(c)?Gl.config.color_select:ht.Default.labelColor:Gl.config.color_select;},l.prototype.handleInteraction=function(c){var l=c.kind,b=c.data,f=c.event;if("doubleClickData"===l)1===this.sm().size()&&(b.fileType===_l?this.dm().sm().ss(b):this.editor.open(b,x(f)));else if("doubleClickBackground"===c.kind){var n=this.dm().sm().ld();n&&n.getParent()&&this.dm().sm().ss(n.getParent());}},l.prototype.handleScroll=function(c,l){q(c),x(c)?l>0?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1)):(fb||c.wheelDelta!==c.wheelDeltaX)&&(l=fb?-c.detail:c.wheelDelta/40,this.translate(0,20*l));},l.prototype.handlePinch=function(c,l,b){b<l?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1));},l.prototype.onPropertyChanged=function(c){tb.prototype.onPropertyChanged.apply(this,arguments),Fb[c.property]&&this.doLayoutLater();},l.prototype.isVisible=function(c){if(this._visibleFunc&&this._visibleFunc(c)===!1)return!1;var l=this.dm().sm().ld();return!(!l||c.getParent()!==l)&&c.fileType!==sl;},l.prototype.isMovable=function(){return!1;},l.prototype.onValidated=function(){this._lastWidth===this.getWidth()&&this._lastHeight===this.getHeight()||this.doLayoutLater();},l.prototype.adjustTranslateX=function(){return 0;},l.prototype.adjustTranslateY=function(c){var l=this.getHeight()-this._fileRect.height;return c<l&&(c=l),c>0?0:Math.round(c);},l.prototype.getContentRect=function(){return this._fileRect;},l.prototype.doLayoutLater=function(){this._doLayoutLater||(this._doLayoutLater=!0,requestAnimationFrame(this.doLayoutBind));},l.prototype.doLayout=function(){var c=this;this._doLayoutLater=!1,this.redraw();var l=this.nodes=[];this.dm().getDatas().each(function(b){c.isVisible(b)&&l.push(b);});var b=this._lastWidth=this.getWidth();this._lastHeight=this.getHeight();var f=this._fileGap;if(this._layoutType===Pl){for(var n=this._rowHeight,U=Math.max(n-4,2),$=0;$<l.length;$++){var H=l[$];H.setPosition(f+U/2,n*$+2+U/2),H.setSize(U,U),H.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0});}this._fileRect={x:0,y:0,width:b,height:n*l.length};}else{for(var L=this._fileSize,e=L+f,I=L+f+16,Y=f,D=f,T=0,J=0;J<l.length;J++){var y=l[J];y.setPosition(Y+L/2,D+L/2),y.setSize(L,L),y.s({"label.position":31,"label.offset.x":0,"label.offset.y":2,"label.max":L}),(T+2)*e+f>b?(Y=f,J!==l.length-1&&(D+=I),T=0):(Y+=e,T++);}this._fileRect={x:0,y:0,width:b,height:D+I};}this.tx(this.tx()),this.ty(this.ty()),this.showScrollBar();},l;}(tb),Vb=function(c){function l(b,f,n,U){Vl(this,l);var $=kl(this,c.call(this));$.setSize(20,20),$._id=$.url=f?f+"/"+n:n,$.path=f,$.value=U,$.rootDir=b;var H=sl,L=void 0,e="editor.unknown";return $.s({"select.width":0,pixelPerfect:!1,"image.stretch":"centerUniform"}),""===f?(H=Ml,e="editor.root.state"):Dc(U)?Yc(U.fileType)?(H=U.fileType,L=U.fileIcon,e=U.fileImage||L,e||U.fileType!==_l||(e="editor.dir"),$.a(U.attrs),$.s(U.styles)):(H=_l,e="editor.dir"):nc(n)&&"assets"===b?(H=Rl,e=ec(n)?"editor.dxf.state":$c(n)?"editor.sound.state":Hc(n)?"editor.video.state":$.url):Uc(n)&&"displays"===b?(H=rl,e=Ic($.url),$.s("label",W(n))):Uc(n)&&"symbols"===b?(H=ol,e=Ic($.url),$.s("label",W(n))):Uc(n)&&"components"===b?(H=dl,e=Ic($.url),$.s("label",W(n))):Uc(n)&&"scenes"===b?(H=El,e=Ic($.url),$.s("label",W(n))):Uc(n)&&"models"===b&&(H=Sl,e=Ic($.url),$.s("label",W(n))),$.fileType=H,$.setIcon(L),$.setImage(e),$.setName(n),$;}return wl(l,c),l;}(ht.Node);ht.Default.setCompType("accordion-title-comp",function(c,l,b,f,n){var U=Gl.config.drawAccordionTitle;if(U)return void U(c,l,f,n,{isHover:f.__hover,isExpanded:f.expanded,hoverColor:Gl.config.color_hover,selectColor:Gl.config.color_select});var $=f.__hover,H=l.x,L=l.y,e=l.width,I=l.height,Y=n.getLabel(f),D=8,T=n.getFileGap();c.save(),($||n.isSelected(f))&&(c.fillStyle=Gl.config.color_hover,c.fillRect(H,L,e,I)),c.fillStyle=Gl.config.color_select,c.fillRect(H+T,L+(I-D)/2,D,D),Y&&ht.Default.drawText(c,Y,"bold 14px Arial","black",H+T+D+8,L,200,I,"left","middle"),c.restore();}),ht.Default.setImage("accordion-title",{width:160,height:24,fitSize:!0,pixelPerfect:!1,interactive:!0,boundExtend:2,onDown:function onDown(c,l,b,f,n,U){ht.Default.isLeftButton(c)&&(b.getMutex()&&!l.expanded&&b.dirs.forEach(function(c){c!==l&&(c.expanded=!1);}),l.expanded=!l.expanded,b.ivm());},onEnter:function onEnter(c,l,b,f,n,U){l.__hover=!0,l.iv();},onLeave:function onLeave(c,l,b,f,n,U){l.__hover=!1,l.iv();},comps:[{type:"accordion-title-comp",displayName:"clock-pointer",rect:[0,0,160,24]}]});var gb={layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,filePadding:!0,titleHeight:!0},wb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b,f));return n.setFileGap(10),n.setMutex(Gl.config.accordionMutex),n.nodes=[],n.dirs=[],n.bottomRects=[],n.addViewListener(function(c){"beginValidate"===c.kind&&n.doLayout();}),n.setSelectionModelShared(!1),n.dm().sm().ms(function(){n.sm().cs();}),n._layouted=!1,n.mi(n.handleInteraction.bind(n)),n.addBottomPainter(n.paintBottom.bind(n)),n.addTopPainter(n.paintTop.bind(n)),n;}return wl(l,c),l.prototype.paintBottom=function(c){var l=this,b=this._rowHeight,f=this.getWidth();this.nodes.forEach(function(n){if(l._layoutType===Pl)l.isSelected(n)&&(c.beginPath(),c.rect(0,n.p().y-b/2,f,b),c.fillStyle=Gl.config.color_select,c.fill());else{var U=l.isSelected(n)?Gl.config.color_select:Gl.config.color_mask,$=n.getRect(),H=$.x,L=$.y,e=$.width,I=$.height,Y=l._filePadding;r(c,U,H-Y,L-Y,e+2*Y,I+2*Y,1);}}),this.bottomRects.forEach(function(l){var b=l.x,f=l.y,n=l.width,U=l.height;c.beginPath(),c.lineWidth=2,c.strokeStyle=Gl.config.color_hover,c.moveTo(b+10,f+U/2),c.lineTo(b+n-10,f+U/2),c.stroke();});},l.prototype.isDroppable=function(c,l){return"displays"===this.explorer.rootDir&&l.view instanceof Cb||l.view===this.editor.dndFromOutside;},l.prototype.handleDragAndDrop=function(l,b){var f=this.draggingData;f&&f.fileType!==_l&&c.prototype.handleDragAndDrop.call(this,l,b);},l.prototype.isLabelVisible=function(c){return c.fileType!==_l;},l.prototype.paintTop=function(c){c.texureImage2D=!0;var l=void 0;if(this._dragInfo&&this._dragInfo.inView?l=this._dragInfo:this._crossDragInfo&&(l=this._crossDragInfo),l){var b=Gl.config.color_select_dark,f=l.targetData;if(c.texureImage2D=!0,f){var n=f.getRect();c.beginPath(),c.rect(n.x,n.y,n.width,n.height),c.lineWidth=2,c.strokeStyle=Gl.config.color_select_dark,c.stroke();}else{var U=this.getViewRect();r(c,b,U.x,U.y,U.width,U.height,2);}}},l.prototype.getDataAt=function(l){if(this._layoutType!==Pl)return c.prototype.getDataAt.call(this,l);var b=c.prototype.getDataAt.call(this,l);if(b)return b;for(var f=this.lp(l).y,n=0;n<this.nodes.length;n++){var U=this.nodes[n],$=U.getY(),H=this._rowHeight,L=$-H/2,e=$+H/2;if(f>=L&&f<e)return U;}},l.prototype.handleInteraction=function(c){var l=c.kind,b=c.data,f=c.event;"doubleClickData"===l&&1===this.sm().size()&&this.editor.open(b,x(f));},l.prototype.handleDataDoubleSelect=function(c,l){if(this.isEditable(l)){var b=this.lp(c);if(l.fileType!==_l)if(this._layoutType===Pl)b.x>this._rowHeight&&this.beginEditing(l);else{var f=this.getDataUI(l);f&&f.labelInfo&&f.labelInfo.rect&&ht.Default.containsPoint(f.labelInfo.rect,b)&&this.beginEditing(l);}}},l.prototype.getLabelColor=function(c){return c!==this.draggingData||this.isSelected(c)?this._layoutType===Pl?this.isSelected(c)?Gl.config.color_light:ht.Default.labelColor:this.isSelected(c)?Gl.config.color_select:ht.Default.labelColor:Gl.config.color_select;},l.prototype.isVisible=function(c){if(!this._layouted)return!1;if(this._visibleFunc&&this._visibleFunc(c)===!1)return!1;var l=this.explorer.rootDir,b=c.getParent();return!(c.fileType===sl||!b)&&!(this._visibleFunc&&!this._visibleFunc(c))&&(b.url===l&&c.fileType===_l||!(!b.getParent()||b.getParent().url!==l||c.fileType===_l)&&!!b.expanded);},l.prototype.adjustTranslateX=function(c){return 0;},l.prototype.adjustTranslateY=function(c){if(!this.contentHeight)return 0;var l=this.getViewRect(),b=l.height-this.contentHeight;return c>=0||b>=0?0:c>b?c:b;},l.prototype.getImage=function(c){if(c.getImage)return c.fileType===_l?"accordion-title":c.getImage();},l.prototype.doLayout=function(){var c=this;if(this._lastWidth!==this.getWidth()||this._lastHeight!==this.getHeight()||this._lastFileSize!==this.getFileSize()){this._doLayoutLater=!1,this.redraw();var l=this.dirs=[],b=this.nodes=[],f=this.bottomRects=[];this.dm().each(function(b){c.isVisible(b)&&b.fileType===_l&&l.push(b);});var n=this._lastWidth=this.getWidth(),U=this._titleHeight,$=0,H=0;this._lastHeight=this.getHeight(),this._lastFileSize=this._fileSize,this._expandIds&&(this.dirs.forEach(function(l){l.expanded=c._expandIds.indexOf(l.getId())>=0;}),delete this._expandIds),l.forEach(function(l){l.setAnchor(0,0),l.p($,H),l.setSize(n,U),l.s("label",null),H+=U;var L=[];l.getChildren().each(function(l){c.isVisible(l)&&(L.push(l),b.push(l));}),H=c.layoutChildren(L,H),l.expanded&&(f.push({x:0,y:H,width:n,height:16}),H+=16);}),this.contentHeight=H,this._layouted=!0;}},l.prototype.layoutChildren=function(c,l){var b=this;if(!c||0===c.length)return l;var f=this._fileGap;if(this._layoutType===Pl){var n=function(){var n=b._rowHeight,U=Math.max(n-4,15);return c.forEach(function(c,b){c.setPosition(f+U/2,l+2+U/2),c.setSize(U,U),c.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0}),l+=n;}),{v:l};}();if("object"==(typeof n==="undefined"?"undefined":_typeof(n)))return n.v;}else{var U=function(){var n=b.getWidth(),U=b._fileSize,$=b._filePadding,H=U+2*$,L=f,e=l+f,I=0,Y=U+f+2*$,D=U+f+16+2*$;return c.forEach(function(l,b){l.setPosition(L+H/2,e+H/2),l.setSize(U,U),l.s({"label.position":31,"label.offset.x":0,"label.offset.y":2+$,"label.max":H}),(I+2)*Y+f>n?(L=f,b!==c.length-1&&(e+=D),I=0):(L+=Y,I++);}),{v:e+D};}();if("object"==(typeof U==="undefined"?"undefined":_typeof(U)))return U.v;}},l.prototype.handleScroll=function(c){var l=fb?-c.detail:c.wheelDelta/10;(fb||c.wheelDelta!==c.wheelDeltaX)&&this.translate(0,l);},l.prototype.adjustZoom=function(){return 1;},l.prototype.onPropertyChanged=function(l){c.prototype.onPropertyChanged.call(this,l);var b=l.property;"dataModel"!==b&&"fileSize"!==b||this.doLayout();},l.prototype._endDrag=function(c,l){var b=this,f=l.targetData;f&&f.fileType===_l&&(this.isSelected(this.draggingData)?this.sm().toSelection().each(function(c){b.editor.moveFile(c,f);}):this.editor.moveFile(this.draggingData,f),this.doLayout(),this.redraw());},l.prototype.toDraggingDatas=function(c){var l=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(c){c.fileType!==_l&&l.push(c);}),c&&l.reverse()):this.draggingData.fileType!==_l&&l.push(this.draggingData),l;},l.prototype.invalidateModel=function(){this._lastWidth=null,this.iv();},l.prototype.ivm=function(){this.invalidateModel();},l.prototype.getContentRect=function(){return{x:0,y:0,width:this.getWidth(),height:this.contentHeight||0};},l.prototype.onPropertyChanged=function(l){c.prototype.onPropertyChanged.apply(this,arguments),gb[l.property]&&this.ivm();},gl(l,[{key:"expandIds",get:function get(){var c=[];return this.dirs.forEach(function(l){l.expanded&&c.push(l.getId());}),c;},set:function set(c){this._expandIds=c,this._lastWidth=null;}}]),l;}(tb);S(wb,{ms_ac:["filePadding","titleHeight","mutex"],_mutex:!1,_filePadding:6,_titleHeight:36});var kb=function(c){function l(b,f){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Vl(this,l);var U=kl(this,c.call(this));U.editor=b,U.rootDir=f,U.copyFileInfos=[],U.dataModel=new ht.DataModel(),U.dataModel.setAutoAdjustIndex(!1);var $=U.mode=Gl.config.explorerMode;$===Ol&&(U.accordion=new wb(U,n)),U.tree=new Nb(U,n),U.list=new Wb(U,n),U.controlPane=new xl(),U.controlPane.addRow([{id:"url",textField:{editable:!1}},{id:"slider",slider:{min:1,max:U.getFileListView().getMaxFileSize(),step:1,onValueChanged:function onValueChanged(c,l){U.getFileListView().setFileSize(l),U.getFileListView().setLayoutType(l>16?ql:Pl);}}}],[.1,ht.Default.isTouchable?70:50]);var H=U.controlPane.getItemById("slider").element;return H.getToolTip=function(){},U.getFileListView().mp(function(c){"fileSize"===c.property&&H.setValue(c.newValue);}),U.bottomPane=new Qb(),U.bottomPane.setCenterView(U.getFileListView()),U.bottomPane.setBottomView(U.controlPane),U.bottomPane.setBottomHeight(ht.Default.widgetRowHeight+8),U.setOrientation("vertical"),$===Ol?(U.setLeftView(U.bottomPane),U.setPosition(1),U.accordion.sm().ms(function(){U.$52$(U.accordion);}),U.accordion.setFileSize(Gl.config.fileSize),U.setDraggable(!1)):(U.setLeftView(U.tree),U.setRightView(U.bottomPane),U.setPosition(Gl.config.explorerSplitViewPosition),U.list.setSelectionModelShared(!1),U.list.sm().ms(function(){U.$52$(U.list);}),U.list.setFileSize(Gl.config.fileSize)),U.tree.menu=new Bb(),U.treeMenuItems=[],U.initTreeMenu(U.tree.menu,U.treeMenuItems),U.tree.menu.setItems(U.treeMenuItems),U.tree.menu.addTo(U.tree.getView()),U.editor.menus.push(U.tree.menu),U.list.menu=new Bb(),U.listMenuItems=[],U.initListMenu(U.list.menu,U.listMenuItems),U.list.menu.setItems(U.listMenuItems),U.list.menu.addTo(U.list.getView()),U.editor.menus.push(U.list.menu),U.isAccordionMode()&&(U.accordion.menu=new Bb(),U.accordionMenuItems=[],U.initAccordionMenu(U.accordion.menu,U.accordionMenuItems),U.accordion.menu.setItems(U.accordionMenuItems),U.accordion.menu.addTo(U.accordion.getView()),U.editor.menus.push(U.accordion.menu)),U;}return wl(l,c),l.prototype.$52$=function(c){var l=c.sm().ld();this.controlPane.v("url",l?l.url:"");},l.prototype.isAccordionMode=function(){return this.mode===Ol;},l.prototype.parse=function(c){var l=void 0,b=void 0,f=void 0,n=void 0;this.mode===Ol?(b=this.accordion.expandIds,l=this.accordion.ty()):(l=this.tree.ty(),b=this.tree.expandIds,f=this.tree.selectionIds,n=this.tree.dm().size()),this.dataModel.clear();var U=this.rootNode=new Vb(this.rootDir,"",this.rootDir);this.dataModel.add(U);var $=void 0;c.fileType===_l||c.fileType===Ml?(U.a(c.attrs),U.s(c.styles),c.fileIcon&&(U.setIcon(c.fileIcon),U.setImage(c.fileIcon)),$=c.children):$=c;for(var H in $){this.parseChild(U,H,$[H]);}var L=this.dataModel.getDatas(),e={};L.toArray().forEach(function(c,l){e[c._id]=l;}),L.sort(function(c,l){return c.fileType===Ml?-1:l.fileType===Ml?1:c.fileType===_l&&l.fileType!==_l?-1:c.fileType!==_l&&l.fileType===_l?1:e[c._id]-e[l._id];}),this.mode===Ol?(this.accordion.expandIds=b,this.accordion.ty(l)):(this.tree.expandIds=b,this.tree.selectionIds=f,this.tree.ty(l),0===n&&(this.tree.expand(this.rootNode),this.tree.sm().ss(this.rootNode)));var I={explorer:this};this.editor.fireEvent("explorerUpdated",I);},l.prototype.parseChild=function(c,l,b){var f=new Vb(this.rootDir,c.url,l,b);f.setParent(c),this.dataModel.add(f);var n=void 0;b.fileType===_l?n=b.children:f.fileType===_l&&(n=b);for(var U in n){this.parseChild(f,U,n[U]);}return f;},l.prototype.deleteSelection=function(c){var l=this,b=[];if(c.sm().getTopSelection().forEach(function(c){var f={data:c,url:c.url};l.editor.fireEvent("fileDeleting",f),f.preventDefault||b.push(c);}),b.length){var f=c.getLabel(b[0])||b[0].getName(),U=n("editor.delete")+" ["+f+"]";b.length>1&&(U+=" ("+b.length+")"),sc(U,n("editor.deleteselection"),function(){l.editor.removeFiles(b);},function(){});}},l.prototype.$53$=function(c){var l=this;c.push("separator"),c.push({id:"expandAll",label:n("editor.expandall"),action:function action(){l.tree.expandAll();}}),c.push({id:"collapseAll",label:n("editor.collapseall"),action:function action(){l.tree.collapseAll();}});},l.prototype.addDeleteItem=function(c,l){var b=this;c.push({id:"delete",label:n("editor.delete"),action:function action(){b.deleteSelection(l);},visible:function visible(){return l.sm().ld()&&l.isEditable(l.sm().ld());}});},l.prototype.addNewFolderItem=function(c,l){var b=this;c.push({id:"newFolder",label:n("editor.newfolder"),action:function action(){b.editor.newFolder(l);},visible:function visible(){return l.editable;}});},l.prototype.addLocateTreeFileItem=function(c){var l=this;Gl.config.locateFileEnabled&&c.push({id:"locateFile",label:n("editor.locatefile"),action:function action(){var c=l.tree.sm().ld()||l.rootNode;l.editor.locate(c);}});},l.prototype.addLocateListFileItem=function(c){var l=this;Gl.config.locateFileEnabled&&c.push({id:"locateFile",label:n("editor.locatefile"),action:function action(){var c=l.ld||l.tree.sm().ld()||l.rootNode;l.editor.locate(c);}});},l.prototype.$55$=function(c){var l=this;c.push({id:"open",label:n("editor.open"),action:function action(){l.editor.open(l.ld);},visible:function visible(){var c=l.ld;return!!c&&(c.fileType===rl||c.fileType===ol||c.fileType===dl||c.fileType===El);}});},l.prototype.addExportItem=function(c){var l=this;c.push({id:"export",label:n("editor.export"),action:function action(){var c=[],b=l.getFileListView().sm();b.size()>0&&(b.each(function(l){c.push(l.url);}),l.editor.request("export",c));},visible:function visible(){var c=l.getFileListView().sm().ld();return!!c&&(c.fileType===rl||c.fileType===ol||c.fileType===dl||c.fileType===El);}});},l.prototype.addRenameItem=function(c,l){var b=this;c.push({id:"rename",label:n("editor.rename"),action:function action(){var c=l.sm().ld();c&&c!==b.rootNode&&l.beginEditing(c);},visible:function visible(){var c=l.sm().ld();return c&&l.isEditable(c);}});},l.prototype.addInsertItem=function(c){var l=this;c.push({id:"insert",label:n("editor.insert"),action:function action(){l.editor.$100$(l.getFileListView().sm().ld());},visible:function visible(){var c=l.getFileListView().sm().ld();return!!c&&!!l.editor.gv&&l.editor.url!==c.url&&(c.fileType===dl?!!l.editor.symbolView:c.fileType===ol||c.fileType===Rl);}});},l.prototype.addCopyItem=function(c){var l=this;c.push({id:"copy",label:n("editor.copy"),action:function action(){l.copyFiles();},visible:function visible(){if(!l.getFileListView().editable)return!1;var c=l.getFileListView().sm().ld();return!(!c||c===l.rootNode);}});},l.prototype.addPasteItem=function(c){var l=this;c.push({id:"paste",label:n("editor.paste"),action:function action(){l.pasteFiles();},visible:function visible(){return!!l.getFileListView().editable&&(!l.isAccordionMode()||!!l.ld);}});},l.prototype.copyFiles=function(){var c=this;this.copyFileInfos.length=0,this.getFileListView().sm().each(function(l){if(l.fileType!==Ml&&l.fileType!==_l&&l.fileType!==sl){var b={url:l.url,name:l.getName()};c.copyFileInfos.push(b),c.editor.fireEvent("copyFile",{url:l.url}),c.loadFileInfo(b);}});},l.prototype.loadFileInfo=function(c){var l=c.url;if(this.editor.requestBase64(l,function(l){c.content=l;}),Uc(l)){var b=Ic(l);this.dataModel.getDataById(b)&&this.editor.requestBase64(b,function(l){c.image=l;});}},l.prototype.pasteFiles=function(){var c=this;this.copyFileInfos.forEach(function(l){if(l.content){var b=l.url,f=void 0,n=2,U=c.currentDir+"/"+W(l.name),$=b.substring(b.lastIndexOf("."),b.length);for(f=U+$;c.dataModel.getDataById(f);){f=U+" "+n++ +$;}var H={path:f,content:l.content};c.editor.request("upload",H),c.editor.fireEvent("pasteFile",{url:f}),l.image&&(H.path=Ic(f),H.content=l.image,c.editor.request("upload",H),c.editor.fireEvent("pasteFile",{url:H.path}));}});},l.prototype.enableDroppableToSymbolView=function(){var c=this.list;this.mode===Ol&&(c=this.accordion),c.isDroppableToSymbolView=!0;},l.prototype.enableDroppableToDisplayView=function(){var c=this.list;this.mode===Ol&&(c=this.accordion),c.isDroppableToDisplayView=!0;},l.prototype.getFileListView=function(){return this.mode===Ol?this.accordion:this.list;},l.prototype.initTreeMenu=function(c,l){},l.prototype.initListMenu=function(c,l){},l.prototype.initAccordionMenu=function(c,l){},gl(l,[{key:"currentDir",get:function get(){var c=void 0;return this.isAccordionMode()?(c=this.ld,c&&c.fileType!==_l&&(c=c.getParent()),c?c.url:this.accordion.dirs[this.accordion.dirs.length-1].url):(c=this.tree.sm().ld(),c?c.url:this.rootDir);}},{key:"ld",get:function get(){return this.getFileListView().sm().ld();}}]),l;}(ab);Gl.Explorer=kb;var Kb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b,"displays",f));return n.enableDroppableToDisplayView(),n;}return wl(l,c),l.prototype.initTreeMenu=function(c,l){this.addLocateTreeFileItem(l),this.addNewFolderItem(l,this.tree),this.addNewDisplayItem(l,this.tree),this.addRenameItem(l,this.tree),this.addDeleteItem(l,this.tree),this.$53$(l);},l.prototype.initListMenu=function(c,l){this.$55$(l),this.addLocateListFileItem(l),this.addNewFolderItem(l,this.list),this.addNewDisplayItem(l,this.list),this.addCopyItem(l),this.addPasteItem(l),this.addRenameItem(l,this.list),this.addDeleteItem(l,this.list),this.addExportItem(l);},l.prototype.initAccordionMenu=function(c,l){this.$55$(l),this.addLocateListFileItem(l),this.addNewFolderItem(l,this.accordion),this.addNewDisplayItem(l,this.accordion),this.addCopyItem(l),this.addPasteItem(l),this.addRenameItem(l,this.accordion),this.addDeleteItem(l,this.accordion),this.addExportItem(l);},l.prototype.addNewDisplayItem=function(c,l){var b=this;c.push({id:"newDisplayView",label:n("editor.newdisplayview"),action:function action(){b.editor.newDisplayView(),b.editor.save();},visible:function visible(){if(!l.editable)return!1;if(b.isAccordionMode()){var c=b.accordion.sm().ld();return c&&c.fileType===_l;}return!0;}});},l;}(kb),xb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b,"symbols",f));return n.enableDroppableToDisplayView(),n.enableDroppableToSymbolView(),n;}return wl(l,c),l.prototype.initTreeMenu=function(c,l){this.addLocateTreeFileItem(l),this.addNewFolderItem(l,this.tree),this.addNewSymbolItem(l,this.tree),this.addRenameItem(l,this.tree),this.addDeleteItem(l,this.tree),this.$53$(l);},l.prototype.initListMenu=function(c,l){this.$55$(l),this.addInsertItem(l),this.addLocateListFileItem(l),this.addNewFolderItem(l,this.list),this.addNewSymbolItem(l,this.list),this.addCopyItem(l),this.addPasteItem(l),this.addRenameItem(l,this.list),this.addDeleteItem(l,this.list),this.addExportItem(l);},l.prototype.initAccordionMenu=function(c,l){this.$55$(l),this.addInsertItem(l),this.addLocateListFileItem(l),this.addNewFolderItem(l,this.accordion),this.addNewSymbolItem(l,this.accordion),this.addCopyItem(l),this.addPasteItem(l),this.addRenameItem(l,this.accordion),this.addDeleteItem(l,this.accordion),this.addExportItem(l);},l.prototype.addNewSymbolItem=function(c,l){var b=this;c.push({id:"newSymbolView",label:n("editor.newsymbolview"),action:function action(){b.editor.newSymbolView(),b.editor.save();},visible:function visible(){return l.editable;}});},l;}(kb),Gb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b,"components",f));return n.enableDroppableToSymbolView(),n;}return wl(l,c),l.prototype.initTreeMenu=function(c,l){this.addLocateTreeFileItem(l),this.addNewFolderItem(l,this.tree),this.addNewComponentItem(l,this.tree),this.addRenameItem(l,this.tree),this.addDeleteItem(l,this.tree),this.$53$(l);},l.prototype.initListMenu=function(c,l){this.$55$(l),this.addInsertItem(l),this.addLocateListFileItem(l),this.addNewFolderItem(l,this.list),this.addNewComponentItem(l,this.list),this.addCopyItem(l),this.addPasteItem(l),this.addRenameItem(l,this.list),this.addDeleteItem(l,this.list),this.addExportItem(l);},l.prototype.initAccordionMenu=function(c,l){this.$55$(l),this.addInsertItem(l),this.addLocateListFileItem(l),this.addNewFolderItem(l,this.accordion),this.addNewComponentItem(l,this.accordion),this.addCopyItem(l),this.addPasteItem(l),this.addRenameItem(l,this.accordion),this.addDeleteItem(l,this.accordion),this.addExportItem(l);},l.prototype.addNewComponentItem=function(c,l){var b=this;c.push({id:"newComponent",label:n("editor.newcomponent"),action:function action(){b.editor.newComponent();},visible:function visible(){return l.editable;}});},l;}(kb),zb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b,"scenes",f));return n.enableDroppableToDisplayView(),n;}return wl(l,c),l.prototype.initTreeMenu=function(c,l){},l.prototype.initListMenu=function(c,l){},l.prototype.initAccordionMenu=function(c,l){},l;}(kb),sb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b,"models",f));return n.enableDroppableToDisplayView(),n;}return wl(l,c),l.prototype.initTreeMenu=function(c,l){},l.prototype.initListMenu=function(c,l){},l.prototype.initAccordionMenu=function(c,l){},l;}(kb),Mb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b,"assets",f));return n.enableDroppableToDisplayView(),n.enableDroppableToSymbolView(),n;}return wl(l,c),l.prototype.initTreeMenu=function(c,l){this.addLocateTreeFileItem(l),this.addNewFolderItem(l,this.tree),this.addRenameItem(l,this.tree),this.addDeleteItem(l,this.tree),this.$53$(l);},l.prototype.initListMenu=function(c,l){this.addInsertItem(l),this.addLocateListFileItem(l),this.addNewFolderItem(l,this.list),this.addCopyItem(l),this.addPasteItem(l),this.addRenameItem(l,this.list),this.addDeleteItem(l,this.list),this.$54$(l);},l.prototype.initAccordionMenu=function(c,l){this.addInsertItem(l),this.addLocateListFileItem(l),this.addNewFolderItem(l,this.accordion),this.addCopyItem(l),this.addPasteItem(l),this.addRenameItem(l,this.accordion),this.addDeleteItem(l,this.accordion),this.$54$(l);},l.prototype.$54$=function(c){var l=this;c.push("separator"),c.push({id:"convertToDisplay",label:n("editor.converttodisplay"),action:function action(){l.editor.open(l.getFileListView().sm().ld(),!1);},visible:function visible(){var c=l.getFileListView().sm().ld();return!!c&&(Lc(c.url)||ec(c.url));}}),c.push({id:"convertToSymbol",label:n("editor.converttosymbol"),action:function action(){l.editor.open(l.getFileListView().sm().ld(),!0);},visible:function visible(){var c=l.getFileListView().sm().ld();return!!c&&(Lc(c.url)||ec(c.url));}});},l;}(kb),_b=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f;}return wl(l,c),l.prototype.$6$=function(c){this.setGraphView(this.editor.gv);},l;}(Zb),Rb=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this));n.editView=b,n.editor=b.editor,n.editable=f,n._topCanvas=s(),n._topDiv=M(),n._view.insertBefore(n._topCanvas,n._scrollBarDiv),n._view.insertBefore(n._topDiv,n._scrollBarDiv);var U=[];return n.menu=new Bb(U),n.initMenuItems(U),n.menu.addTo(n.getView()),n.editor.menus.push(n.menu),n.addTopPainter(function(c){return c.texureImage2D=!0;}),n;}return wl(l,c),l.prototype.isEditable=function(l){return!!this.editable&&c.prototype.isEditable.call(this,l);},l.prototype.isMovable=function(l){return!!this.editable&&c.prototype.isMovable.call(this,l);},l.prototype.onGroupDoubleClicked=function(l,b,f){this.editable&&c.prototype.onGroupDoubleClicked.call(this,l,b,f);},l.prototype.onEdgeDoubleClicked=function(l,b,f){this.editable&&c.prototype.onEdgeDoubleClicked.call(this,l,b,f);},l.prototype.checkDoubleClickOnNote=function(l,b){return!!this.editable&&c.prototype.checkDoubleClickOnNote.call(this,l,b);},l.prototype.$57$=function(c){var l=this;c.push({id:"copy",label:n("editor.copy"),action:function action(){l.editor.copy();},visible:function visible(){return!!l.editor.ld;}}),c.push({id:"paste",label:n("editor.paste"),action:function action(){l.editor.paste();},visible:function visible(){return l.editor.hasCopyInfo();}});},l.prototype.$56$=function(c){var l=this;c.push({separator:!0,visible:function visible(){return!!l.editor.ld;}}),c.push({id:"bringToFront",label:n("editor.bringtofront"),action:function action(){l.editor.bringToFront();},visible:function visible(){return!!l.editor.ld;}}),c.push({id:"bringForward",label:n("editor.bringforward"),action:function action(){l.editor.bringForward();},visible:function visible(){return!!l.editor.ld;}}),c.push({id:"sendBackward",label:n("editor.sendbackward"),action:function action(){l.editor.sendBackward();},visible:function visible(){return!!l.editor.ld;}}),c.push({id:"sendToBack",label:n("editor.sendtoback"),action:function action(){l.editor.sendToBack();},visible:function visible(){return!!l.editor.ld;}});},l.prototype.initMenuItems=function(c){},l.prototype.onClosed=function(){U(this.editor.menus,this.menu);},l.prototype.$58$=function(c){return c&&this.copyMap[c._id]?c._id:c;},l.prototype.$50$=function(c,l){return c instanceof ht.Data?this.dm().contains(c)?c:void 0:l[c];},l.prototype.getSelectWidth=function(c){return!this.isEditable(c)||c instanceof ht.Edge?c.s("select.width"):0;},l.prototype.onSelectionChanged=function(c){if(1===this.sm().size()&&("set"===c.kind||"append"===c.kind)){var l=this.sm().ld();l&&document.activeElement===this.getView()&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(l);}},l.prototype.getContentRect=function(){var l=c.prototype.getContentRect.call(this);return l.width&&l.height||(l={x:0,y:0,width:this.dm().a("width")||100,height:this.dm().a("height")||100,empty:!0}),l;},l.prototype.isDroppable=function(c,l){return!1;},l.prototype.$59$=function(c){if(this.dragImage){var l=Gl.config.dragImageSize,b=X(c);this.dragImage.style.left=b.x-l/2+"px",this.dragImage.style.top=b.y-l/2+"px";}},l.prototype.removeDragImage=function(){this.dragImage&&(k(this.dragImage),this.dragImage=null);},l.prototype.handleCrossDrag=function(c,l,b){var f=this,n=b.view,U=n.draggingData;if("enter"===l){if(this._topDiv.style.border="solid "+Gl.config.color_select_dark+" 2px",!this.dragImage&&U){var $=void 0===U.a("dragImage")?U.getImage():U.a("dragImage");if(ht.Default.getImage($)!==ht.Default.getImage("editor.unknown")){var H=Gl.config.dragImageSize;this.dragImage=ht.Default.toCanvas($,H,H,"centerUniform",U,b.view,null,ht.Default.devicePixelRatio),this.$59$(c),this.dragImage.style.opacity=Gl.config.dragImageOpacity,this.dragImage.className="ht-editor-dnd-image",ht.Default.appendToScreen(this.dragImage);}}}else"exit"===l||"cancel"===l?(this._topDiv.style.border="",this.removeDragImage()):"over"===l?this.$59$(c):"drop"===l&&(this._topDiv.style.border="",U?!function(){f.removeDragImage();var l=f.lp(c);n.isSelected(U)?n.sm().toSelection().each(function(b){n.handleDropToEditView?n.handleDropToEditView(f.editView,b,l,c):f.editor.$100$(b,l);}):n.handleDropToEditView?n.handleDropToEditView(f.editView,U,l,c):f.editor.$100$(U,l);}():n===this.editor.dndFromOutside&&this.editor.dropLocalFileOnGraphView(c));},l;}(pb),ob=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l.prototype.handleDataModelChange=function(l){c.prototype.handleDataModelChange.call(this,l),this.editor&&this.editor.fireEvent("displayViewDataModelChanged",{displayView:this.editView,event:l});},l.prototype.handleDataModelPropertyChange=function(l){c.prototype.handleDataModelPropertyChange.call(this,l),this.editor&&this.editor.fireEvent("displayViewDataModelPropertyChanged",{displayView:this.editView,event:l});},l.prototype.handleDataPropertyChange=function(l){c.prototype.handleDataPropertyChange.call(this,l),this.editor&&this.editor.fireEvent("displayViewDataPropertyChanged",{displayView:this.editView,event:l});},l.prototype.initMenuItems=function(c){this.$57$(c),this.$56$(c),this.addBlockItems(c);},l.prototype.isDroppable=function(c,l){return!!l.view.isDroppableToDisplayView;},l.prototype.isSelectable=function(l,b){return!l._refGraph&&c.prototype.isSelectable.call(this,l,b);},l.prototype.addBlockItems=function(c){var l=this,b=function b(){return l.sm().size()>0;},f=function f(){for(var c=0;c<l.sm().size();c++){var b=l.sm().getSelection().get(c);if(b instanceof ht.Block&&!(b instanceof ht.RefGraph))return!0;}return!1;};c.push({separator:!0,visible:function visible(){return b()||f();}}),c.push({id:"block",label:n("editor.block"),action:function action(){l.editor.block();},visible:b}),c.push({id:"unblock",label:n("editor.unblock"),action:function action(){l.editor.unblock();},visible:f});},l;}(Rb),rb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.defaultValueMap={},U.parse(b,f,n),U;}return wl(l,c),l.prototype.toLabel=function(){return this.getDisplayName()||this.s("type")||n("editor.comptype.comp");},l.prototype.getClass=function(){return l;},l.prototype.getStyle=function(l,b){var f=c.prototype.getStyle.call(this,l,b);return void 0===f&&(f=this.defaultValueMap[l]),f;},l.prototype.$61$=function(c){var l=this;this.properties&&(this.properties=null),this.disableDirty=!0,this.defaultValueMap={};var b=this.s("type"),f=ht.Default.getCompType(b);f?!function(){l.$60$=null;var b={cache:f,width:{value:100,isSafeFunc:!0,func:function func(c){return c._width;}},height:{value:100,isSafeFunc:!0,func:function func(c){return c._height;}},comps:[{type:{func:function func(c){return c.compType;},isSafeFunc:!0}}]};if(!f.width||l._width>0||l.setWidth(f.width),!f.height||l._height>0||l.setHeight(f.height),f.properties){l.properties=f.properties;for(var n in l.properties){var U=l.properties[n];b.comps[0][n]={func:"style@"+n},c?Ac(l,n,c[n],U.defaultValue):void 0===l.s(n)&&Ac(l,n,void 0,U.defaultValue),l.defaultValueMap[n]=U.defaultValue;}}var $=Gl.config.customProperties.comp;$&&$.length&&$.forEach(function(c){var l=c.property;b.comps[0][l]={func:"style@"+l};}),l.setImage(b),l.ivLater();}():(this.$60$=c,"editor.comp"!==this.getImage()&&(this.setImage("editor.comp"),this.ivLater())),this.disableDirty=!1;},l.prototype.ivLater=function(){var c=this;ht.Default.callLater(function(){c.disableDirty=!0,c.iv(),c.disableDirty=!1;});},l.prototype.onStyleChanged=function(l,b,f){c.prototype.onStyleChanged.call(this,l,b,f),"type"===l&&this.$61$(this.parsingComp);},l.prototype.parse=function(c,l,b){c&&(this.parsingComp=c,Ac(this,"type",c.type),this.$61$(c),uc(this,c,l,b),this.parsingComp=null);},l.prototype.toJSON=function(){var c={};if(ic(this,c,"type","type",void 0),Xc(this,c),this.properties)for(var l in this.properties){var b=this.properties[l];ic(this,c,l,l,b.defaultValue);}return c;},gl(l,[{key:"compType",get:function get(){var c=this.s("type");return this.$60$?this.$61$(this.$60$):c&&ht.Default.getCompType(c)!==this.getImage().cache&&this.$61$(),c;}}]),l;}(ht.Node),db=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.s({border_color:Gl.config.color_dark,border_width:1}),U.setImage("border_image"),U.parse(b,f,n),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype.border");},l.prototype.parse=function(c,l,b){c&&(Ac(this,"type",c.type,"border"),Ac(this,"border_color",c.color,Gl.config.color_dark),Ac(this,"border_width",c.width,1),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return ic(this,c,"type","type",void 0),ic(this,c,"border_color","color",void 0),ic(this,c,"border_width","width",void 0),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return this.s("type");}}]),l;}(ht.Node),Sb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.setSize(100,100),U.setImage("pieChart_image"),U.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.hollw":!1,"chart.start.angle":0,"chart.values":[],"chart.colors":void 0}),U.parse(b,f,n),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype.piechart");},l.prototype.parse=function(c,l,b){c&&(Ac(this,"chart.type",c.type,"pieChart"),Ac(this,"chart.label",c.label,!1),Ac(this,"chart.label.color",c.labelColor,ht.Default.labelColor),Ac(this,"chart.label.font",c.labelFont,ht.Default.labelFont),Ac(this,"chart.hollow",c.hollow,!1),Ac(this,"chart.start.angle",c.startAngle,0),Ac(this,"chart.values",c.values,[]),Ac(this,"chart.colors",c.colors,void 0),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return ic(this,c,"chart.type","type",void 0),ic(this,c,"chart.label","label",!1),ic(this,c,"chart.label.color","labelColor",ht.Default.labelColor),ic(this,c,"chart.label.font","labelFont",ht.Default.labelFont),ic(this,c,"chart.hollow","hollow",!1),ic(this,c,"chart.start.angle","startAngle",0),ic(this,c,"chart.values","values",[]),ic(this,c,"chart.colors","colors",void 0),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return this.s("chart.type");}}]),l;}(ht.Node),Eb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.setSize(100,100),U.setImage("columnChart_image"),U.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0}),U.parse(b,f,n),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype.columnchart");},l.prototype.parse=function(c,l,b){c&&(Ac(this,"chart.type",c.type,void 0),Ac(this,"chart.label",c.label,!1),Ac(this,"chart.label.color",c.labelColor,ht.Default.labelColor),Ac(this,"chart.label.font",c.labelFont,ht.Default.labelFont),Ac(this,"chart.series",c.series,[]),Ac(this,"chart.min.value",c.minValue,0),Ac(this,"chart.max.value",c.maxValue,void 0),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return ic(this,c,"chart.type","type",void 0),ic(this,c,"chart.label","label",!1),ic(this,c,"chart.label.color","labelColor",ht.Default.labelColor),ic(this,c,"chart.label.font","labelFont",ht.Default.labelFont),ic(this,c,"chart.series","series",[]),ic(this,c,"chart.min.value","minValue",0),ic(this,c,"chart.max.value","maxValue",void 0),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return this.s("chart.type");}}]),l;}(ht.Node),qb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.setSize(100,100),U.setImage("lineChart_image"),U.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0,"chart.line.point":!1,"chart.line.width":2,"chart.line.3d":!1}),U.parse(b,f,n),U;}return wl(l,c),l.prototype.getClass=function(){return l;},l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype.linechart");},l.prototype.parse=function(c,l,b){c&&(Ac(this,"chart.type",c.type,void 0),Ac(this,"chart.label",c.label,!1),Ac(this,"chart.label.color",c.labelColor,ht.Default.labelColor),Ac(this,"chart.label.font",c.labelFont,ht.Default.labelFont),Ac(this,"chart.series",c.series,[]),Ac(this,"chart.min.value",c.minValue,0),Ac(this,"chart.max.value",c.maxValue,void 0),Ac(this,"chart.line.point",c.linePoint,!1),Ac(this,"chart.line.width",c.lineWidth,2),Ac(this,"chart.line.3d",c.line3d,!1),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return ic(this,c,"chart.type","type",void 0),ic(this,c,"chart.label","label",!1),ic(this,c,"chart.label.color","labelColor",ht.Default.labelColor),ic(this,c,"chart.label.font","labelFont",ht.Default.labelFont),ic(this,c,"chart.series","series",[]),ic(this,c,"chart.min.value","minValue",0),ic(this,c,"chart.max.value","maxValue",void 0),ic(this,c,"chart.line.point","linePoint",!1),ic(this,c,"chart.line.width","lineWidth",2),ic(this,c,"chart.line.3d","line3d",!1),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return this.s("chart.type");}}]),l;}(ht.Node),Pb=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this,b.getView().graphView));return U.tab=b,U.editView=b.getView(),U.editor=U.editView.editor,U.clazz=f,U.type=n,U;}return wl(l,c),l.prototype.beginTransaction=function(){this._isBeginTransaction||(this._isBeginTransaction=!0,this.dm.beginTransaction());},l.prototype.endTransaction=function(){this._isBeginTransaction&&(this._isBeginTransaction=!1,this.dm.endTransaction());},l.prototype.getDataAt=function(c){return this.gv.getDataAt(c);},l.prototype.getNodeAt=function(c){var l=this.getDataAt(c);return l instanceof ht.Node?l:null;},l.prototype.setUp=function(){c.prototype.setUp.call(this),this.sm.cs();},l.prototype.$0$=function(c){},l.prototype.drawDiamond=function(c,l,b,f){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;l=this.toPoint(l),f&&(c.fillStyle=f),b&&(c.strokeStyle=b);var U=l,$=U.x,H=U.y;c.lineWidth=1,c.beginPath(),c.moveTo($,H-n),c.lineTo($+n,H),c.lineTo($,H+n),c.lineTo($-n,H),c.closePath(),f&&c.fill(),b&&c.stroke();},l.prototype.drawRect=function(c,l,b,f){l=this.toRect(l),f&&(c.fillStyle=f),b&&(c.strokeStyle=b),c.lineWidth=1,c.beginPath(),c.rect(l.x,l.y,l.width,l.height),c.stroke(),f&&c.fill(),b&&c.stroke();},l.prototype.drawPoint=function(c,l,b,f,n){l=this.toPoint(l),n&&(c.fillStyle=n),f&&(c.strokeStyle=f),c.lineWidth=1,c.beginPath(),c.arc(l.x,l.y,b,0,2*Math.PI,!0),n&&c.fill(),f&&c.stroke();},l.prototype.drawPoints=function(c,l,b,f,n){for(var U=0;U<l.length;U++){this.drawPoint(c,l[U],b,f,n);}},l.prototype.drawLine=function(c,l,b,f){l=this.toPoint(l),b=this.toPoint(b),c.lineWidth=1,c.strokeStyle=f,c.beginPath(),c.moveTo(l.x,l.y),c.lineTo(b.x,b.y),c.stroke();},l.prototype.toRect=function(c){var l=this.zoom;return{x:c.x*l+this.tx,y:c.y*l+this.ty,width:c.width*l,height:c.height*l};},l.prototype.toPoint=function(c){return{x:c.x*this.zoom+this.tx,y:c.y*this.zoom+this.ty};},l.prototype.add=function(c){this.editView.addData(c);},l.prototype.remove=function(c){this.dm.remove(c);},l.prototype.lp=function(c){return this.gv.lp(c);},gl(l,[{key:"dm",get:function get(){return this.gv.dm();}},{key:"sm",get:function get(){return this.gv.dm().sm();}},{key:"zoom",get:function get(){return this.gv.getZoom();}},{key:"tx",get:function get(){return this.gv.tx();}},{key:"ty",get:function get(){return this.gv.ty();}}]),l;}(ht.graph.Interactor),Ob=function(c){function l(b,f,n){return Vl(this,l),kl(this,c.call(this,b,f,n));}return wl(l,c),l.prototype.tearDown=function(){c.prototype.tearDown.call(this),this.node=this.p1=this.p2=null;},l.prototype.$49$=function(c){this.node?this.remove(this.node):this.editView.$5$("edit");},l.prototype.handle_mousedown=function(c){this.handle_touchstart(c);},l.prototype.handle_touchstart=function(c){q(c),i(c)&&(this.gv.setFocus(c),this.p1=this.lp(c),this.startDragging(c));},l.prototype.handleWindowMouseMove=function(c){this.handleWindowTouchMove(c);},l.prototype.handleWindowMouseUp=function(c){this.handleWindowTouchEnd(c);},l.prototype.handleWindowTouchMove=function(c){if(q(c),this.p1){this.p2=this.lp(c);var l=N(this.p1,this.p2);if(this.node)this.node.setRect(l);else{if(!l.width||!l.height)return;this.beginTransaction(),this.createNode(l,!1);}}},l.prototype.handleWindowTouchEnd=function(c){if(q(c),this.endTransaction(),!this.node&&this.p1&&this.createNode({x:this.p1.x-25,y:this.p1.y-25,width:50,height:50},!0),this.node){var l="display"===this.editView.type?"dataCreated":"compCreated",b={data:this.node};b["display"===this.editView.type?"displayView":"symbolView"]=this.editView,this.editor.fireEvent(l,b);}Gl.config.continuousCreating?this.node=this.p1=this.p2=null:this.editView.$5$("edit");},l.prototype.createNode=function(c,l){Tc(this.type)?this.node=this.type(c,l):this.node=new this.clazz(),l?this.node.setPosition(c.x+c.width/2,c.y+c.height/2):this.node.setRect(c),this.node.setParent(this.editView.graphView.getCurrentSubGraph()),this.dm.add(this.node),this.dm.sm().ss(this.node),this.editView.graphView.setFocus();},l.prototype.$0$=function(c){this.node&&this.drawRect(c,this.node.getRect(),Gl.config.color_data_border);},l;}(Pb),cf=function(c){function l(b,f,n){return Vl(this,l),kl(this,c.call(this,b,f,n));}return wl(l,c),l.prototype.tearDown=function(){c.prototype.tearDown.call(this),this.draggingPoint=this.n1=this.n2=null;},l.prototype.$49$=function(c){this.n1?(this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()):this.editView.$5$("edit");},l.prototype.drawAttachPoints=function(c,l,b){var f=this,n=this.gv.getAttachPoints(l);n&&n.forEach(function(n,U){var $=n.x,H=n.y,L=n.offsetX,e=n.offsetY;U===b?f.drawDiamond(c,l.getAttachPosition($,H,L,e),Gl.config.color_select,Gl.config.color_select,6):f.drawDiamond(c,l.getAttachPosition($,H,L,e),Gl.config.color_select,Gl.config.color_light);});},l.prototype.$0$=function(c){if(this.n1&&(this.drawRect(c,this.gv.getNodeRect(this.n1),Gl.config.color_data_border),this.drawAttachPoints(c,this.n1,this.attachIndex1),this.draggingPoint)){var l=this.n1.p(),b=void 0;(this.attachIndex1||0===this.attachIndex1)&&(l=this.getAttachPosition(this.n1,this.attachIndex1)),this.n2&&(this.attachIndex2||0===this.attachIndex2)&&(b=this.getAttachPosition(this.n2,this.attachIndex2)),this.drawLine(c,l,b||this.draggingPoint,Gl.config.color_data_border);}if(this.n2){var f=this.gv.getNodeRect(this.n2);this.n1!==this.n2&&(this.drawRect(c,f,Gl.config.color_data_border),this.drawAttachPoints(c,this.n2,this.attachIndex2));var n=this.toPoint({x:f.x,y:f.y}),U=3;c.beginPath(),c.moveTo(n.x,n.y-15-U),c.lineTo(n.x+10,n.y-15-U),c.lineTo(n.x+10,n.y-U),c.lineTo(n.x+5,n.y-7-U),c.moveTo(n.x+10,n.y-U),c.lineTo(n.x+15,n.y-7-U),c.lineWidth=1,c.strokeStyle=Gl.config.color_data_border,c.stroke();}},l.prototype.handle_mousemove=function(c){if(q(c),!this.draggingPoint){var l=this.getNodeAt(c),b=this.attachIndex1;if(l){var f=this.gv.calculateAttachPoint(l,this.lp(c));this.attachIndex1=f?f.index:null;}else this.attachIndex1=null;l===this.n1&&b===this.attachIndex1||(this.n1=l,this.editView.validateCanvas());}},l.prototype.handle_mousedown=function(c){this.handle_touchstart(c);},l.prototype.handle_touchstart=function(c){q(c),i(c)&&(this.gv.setFocus(c),this.draggingPoint||(this.n1=this.getNodeAt(c),this.n1&&(this.draggingPoint=this.lp(c),this.startDragging(c))));},l.prototype.handleWindowMouseMove=function(c){this.handleWindowTouchMove(c);},l.prototype.handleWindowMouseUp=function(c){this.handleWindowTouchEnd(c);},l.prototype.handleWindowTouchMove=function(c){var l=this.getNodeAt(c);if(this.draggingPoint=this.lp(c),this.autoScroll(c),Gl.config.edgeLoop||this.n1!==l){if(this.n2=l,l){var b=this.gv.calculateAttachPoint(l,this.lp(c));this.attachIndex2=b?b.index:null;}}else this.attachIndex2=null;this.editView.validateCanvas();},l.prototype.handleWindowTouchEnd=function(c){if(this.n1&&this.n2){var l=void 0;Yc(this.type)?(l=new this.clazz(this.n1,this.n2),l.s("edge.type",this.type)):l=Tc(this.type)?this.type(this.n1,this.n2):new this.clazz(this.n1,this.n2);var b=this.getAttachPoint(this.n1,this.attachIndex1),f=this.getAttachPoint(this.n2,this.attachIndex2);if(b){var n=b.x,U=b.y,$=b.offsetX,H=b.offsetY;l.s(_defineProperty({"edge.source.anchor.x":n,"edge.source.anchor.y":U,"edge.source.offset.x":$},"edge.source.offset.x",H));}if(f){var L=f.x,e=f.y,I=f.offsetX,Y=f.offsetY;l.s(_defineProperty({"edge.target.anchor.x":L,"edge.target.anchor.y":e,"edge.target.offset.x":I},"edge.target.offset.x",Y));}(b||f)&&l.s("edge.offset",0),this.add(l),Gl.config.continuousCreating||this.editView.$5$("edit");}this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas();},l.prototype.getAttachPoint=function(c,l){if(null===l||void 0===l)return null;var b=this.gv.getAttachPoints(c);return b&&0!==b.length?b[l]:null;},l.prototype.getAttachPosition=function(c,l){var b=this.getAttachPoint(c,l),f=b.x,n=b.y,U=b.offsetX,$=b.offsetY;return c.getAttachPosition(f,n,U,$);},l;}(Pb),lf=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this,b,f,n));return U.points=[],U.segments=[],U.nextPoint=null,U.closePath=!1,U;}return wl(l,c),l.prototype.tearDown=function(){c.prototype.tearDown.call(this),this.points=[],this.segments=[],this.nextPoint=null,this.isBreak=!1;},l.prototype.$49$=function(c){this.isBreak?this.createShape():(this.preCtrl=null,this.isBreak=!0,this.editView.validateCanvas());},l.prototype.createShape=function(){if(this.points.length>1){var c=void 0;Tc(this.type)?c=this.type(this.points,this.segments):(c=new this.clazz(),c.setPoints(this.points),c.setSegments(this.segments)),this.closePath&&c.setClosePath&&c.setClosePath(!0),this.add(c);}this.editView.$5$("edit"),this.editor.pointsEditingMode=!0;},l.prototype.handle_mousedown=function(c){this.handle_touchstart(c);},l.prototype.isCloseStart=function(c){var l=this.points[0];if(!l)return!1;var b=this.lp(c),f=ht.Default.getDistance(l,b);return f<5;},l.prototype.handle_touchstart=function(c){if(q(c),i(c)){if(this.gv.setFocus(c),Z(c))this.createShape();else{if(this.isCloseStart(c))return this.closePath=!0,void this.createShape();var l=this.judgeNextPoint(c,!0);if(this.points.length){var b=this.points[this.points.length-1];if(Math.abs(b.x-l.x)<.01&&Math.abs(b.y-l.y)<.01)return;}this.preCtrl?(this.points.push(this.preCtrl),this.points.push(l),this.points.push(l),this.segments.push(4),this.preCtrl=null):(this.isBreak?(this.segments.push(1),this.isBreak=!1):this.segments.push(this.points.length>0?2:1),this.points.push(l)),this.nextPoint=this.lp(c),this.editView.validateCanvas();}this.downPoint=this.lp(c),this.startDragging(c),this._dragging=!0;}},l.prototype.judgeNextPoint=function(c,l){var b=this.lp(c);if(this._dragging||this.isBreak&&!l)return null;if(ht.Default.isShiftDown()&&this.points.length>0){var f=this.points[this.points.length-1],n=b.x-f.x,U=b.y-f.y,$=Math.atan2(U,n),H=ht.Default.getDistance(f,b),L=$%(Math.PI/4);return $-=L,Math.abs(L)>Math.PI/8&&(L>0?$+=Math.PI/4:$-=Math.PI/4),{x:f.x+Math.cos($)*H,y:f.y+Math.sin($)*H};}var e=this.gv.getEditInteractor(),I=e.gridGuide.findClosest(b);return I&&(I.x&&(b.x+=I.x),I.y&&(b.y+=I.y)),b;},l.prototype.handle_mousemove=function(c){this.nextPoint=this.judgeNextPoint(c),this.editView.validateCanvas();},l.prototype.handle_touchend=function(c){},l.prototype.handle_mouseup=function(c){this.handle_touchend(c);},l.prototype.handleWindowTouchMove=function(c){return this.handleWindowMouseMove(c);},l.prototype.updateCtrl=function(c){var l=this.points.length,b=this.points[l-1],f=this.downPoint,n=this.lp(c),U=this.gv.getZoom(),$=ht.Default.getDistance(f,n),H=this.segments[this.segments.length-1];if($*U>5){if(ht.Default.isShiftDown()){var L=Math.abs;L(b.x-n.x)>=L(b.y-n.y)?n.y=b.y:n.x=b.x;}else{var e=this.gv.getEditInteractor(),I=e.gridGuide.findClosest(n);I&&(I.x&&(n.x+=I.x),I.y&&(n.y+=I.y));}var Y={x:2*b.x-n.x,y:2*b.y-n.y};4===H?this.points[l-2]=Y:1!==H&&(this.segments.pop(),this.segments.push(4),this.points.splice(l-1,0,Y),this.points.push(this.points[l-1])),this.preCtrl=n;}else 4===H&&(this.points[l-2]=this.points[l-1],this.preCtrl=null);},l.prototype.handleWindowMouseMove=function(c){0!==this.points.length&&(this.updateCtrl(c),this.editView.validateCanvas());},l.prototype.handleWindowTouchEnd=function(c){return this.handleWindowMouseUp(c);},l.prototype.handleWindowMouseUp=function(c){0!==this.points.length&&(this._dragging=!1,this.updateCtrl(c),this.nextPoint=this.judgeNextPoint(c,!0));},l.prototype.$0$=function(c){var l=[];c.beginPath();for(var b=0,f=void 0,n=void 0,U=void 0,$=0;$<this.segments.length;$++){var H=this.segments[$];1===H?(f=this.toPoint(this.points[b++]),c.moveTo(f.x,f.y)):2===H?(f=this.toPoint(this.points[b++]),c.lineTo(f.x,f.y)):3===H?(f=this.toPoint(this.points[b++]),n=this.toPoint(this.points[b++]),c.quadraticCurveTo(f.x,f.y,n.x,n.y)):4===H?(f=this.toPoint(this.points[b++]),n=this.toPoint(this.points[b++]),U=this.toPoint(this.points[b++]),c.bezierCurveTo(f.x,f.y,n.x,n.y,U.x,U.y)):5===H&&c.closePath(),l.push(this.points[b-1]);}var L=this.preCtrl;if(this.nextPoint)if(L)f=this.toPoint(L),n=this.toPoint(this.nextPoint),U=this.toPoint(this.nextPoint),c.bezierCurveTo(f.x,f.y,n.x,n.y,U.x,U.y);else{var e=this.toPoint(this.nextPoint);c.lineTo(e.x,e.y);}if(c.strokeStyle=Gl.config.color_data_border,c.lineWidth=1,c.stroke(),this.drawPoints(c,l,4,Gl.config.color_data_border,Gl.config.color_data_background),L){var I=this.points[this.points.length-1],Y=this.gv.getZoom(),D=3/Y,T=6/Y,J={x:2*I.x-L.x,y:2*I.y-L.y};this.drawLine(c,L,J,Gl.config.color_data_border),this.drawRect(c,{x:J.x-D,y:J.y-D,width:T,height:T},Gl.config.color_data_border,Gl.config.color_data_background),this.drawRect(c,{x:L.x-D,y:L.y-D,width:T,height:T},Gl.config.color_data_border,Gl.config.color_data_background);}},l;}(Pb),bf={width:!0,height:!0,position:!0,rotation:!0,anchor:!0,scale:!0,expanded:!0},ff={border:db,rect:Yb,circle:Yb,oval:Yb,roundRect:Yb,star:Yb,triangle:Yb,hexagon:Yb,pentagon:Yb,diamond:Yb,rightTriangle:Yb,parallelogram:Yb,trapezoid:Yb,polygon:Yb,arc:Yb,image:Tb,shape:Db,text:Jb,pieChart:Sb,oneDimensionalColumnChart:Eb,columnChart:Eb,lineChart:qb,comp:rb},nf=function(){function c(l,b,f,n){var U=this;Vl(this,c),this.editor=l,this.tab=b,this.type=n,b.setView(this);var $=this.graphView=new f(this);this._view=z(!0,this),$.addViewListener(function(c){"validate"===c.kind&&U.validateCanvas();}),this._hRuler=s(),this._vRuler=s(),this._view.appendChild($.getView()),this.$5$("edit"),$.isInteractive=function(){return!1;},$.addPropertyChangeListener(function(){U.iv();}),$.addInteractorListener(function(c){U.handleInteractorEvent(c);}),this.dm.sm().addSelectionChangeListener(function(c){U.iv();}),this.dm.addDataModelChangeListener(function(c){U.handleDataModelChanged(c);}),this.dm.addDataPropertyChangeListener(function(c){U.handleDataPropertyChanged(c);}),this.dm.addPropertyChangeListener(function(c){U.handleDataModelPropertyChanged(c);}),this.dm.addHierarchyChangeListener(function(c){U.handleHierarchyChanged(c);}),this.dm.layout=function(c,l){U._autoLayout||(U._autoLayout=new ht.layout.AutoLayout($)),U._autoLayout.options=l||{};var b=U.graphView.getZoom(),f=U.graphView.tx(),n=U.graphView.ty();U.dm.beginTransaction(),U._autoLayout.setAnimate(Gl.config.animate);var H=function H(){var c=U.graphView.getZoom(),l=U.graphView.tx(),$=U.graphView.ty(),H={undo:function undo(){U.graphView.setZoom(b),U.graphView.tx(f),U.graphView.ty(n);},redo:function redo(){U.graphView.setZoom(c),U.graphView.tx(l),U.graphView.ty($);}};U.dm.addHistory(H),U.dm.endTransaction();};U._autoLayout.layout(c,function(){Gl.config.animate?$.fitContent({finishFunc:H}):($.fitContent(!1,Gl.config.fitPadding),H());});},this.graphView.setEditable(!0),this.graphView.getInteractors().each(function(c){c.keep=!0;}),this.setRulerEnabled(this.editor.isRulerEnabled()),this.init();}return c.prototype.handleInteractorEvent=function(c){"prepareMove"!==c.kind&&"prepareEdit"!==c.kind||!c.event.altKey||(this.editor.copy(),this.editor.paste(!0),this.editor.gv.validate());},c.prototype.handleDataModelChanged=function(c){this.dirty=!0;},c.prototype.handleDataPropertyChanged=function(c){c.data.disableDirty||this.graphView.fpImageLoaded||"*"!==c.property&&(bf[c.property]&&this.iv(),this.dirty=!0);},c.prototype.handleHierarchyChanged=function(c){this.dirty=!0;},c.prototype.handleDataModelPropertyChanged=function(c){var l=c.property,b=c.newValue;null!=b&&("a:gridBlockSize"===l?this.graphView.getEditInteractor().setStyle("gridBlockSize",b):"a:gridThickLinesEvery"===l?this.graphView.getEditInteractor().setStyle("gridThickLinesEvery",b):"a:gridThickColor"===l?this.graphView.getEditInteractor().setStyle("gridThickColor",b):"a:gridLightColor"===l?this.graphView.getEditInteractor().setStyle("gridLightColor",b):"a:gridAngle"===l?this.graphView.getEditInteractor().setStyle("gridAngle",b):"a:gridRotation"===l?this.graphView.getEditInteractor().setStyle("gridRotation",b):"a:gridZoomThreshold"===l&&this.graphView.getEditInteractor().setStyle("gridZoomThreshold",b)),"a:connectActionType"===l?this.graphView.setCurrentConnectActionType(b):"a:rotateAsClock"===l&&this.graphView.getEditInteractor().setStyle("rotateAsClock",b),this.dirty=!0,this.validateCanvas();},c.prototype.onPropertyChanged=function(c){"rulerEnabled"===c.property&&(this.graphView.getEditInteractor().alignmentGuideEnabled=c.newValue),this.iv();},c.prototype.parse=function(c,l){(c||l)&&(this.url=c,l?this.update(l):K(c,this.update.bind(this)));},c.prototype.update=function(c,l){var b=this;c&&(l?!function(){var f=t(b.content),n=c,U={undo:function undo(){b._updateImpl(f,!0);},redo:function redo(){b._updateImpl(n,!0);}};b.dm.disableHistoryManager(),b._updateImpl(c,l),b.dm.enableHistoryManager(),b.dm.addHistory(U);}():(this.dm.disableHistoryManager(),this._updateImpl(c,l),this.dm.enableHistoryManager(),this.dm.clearHistoryManager()));},c.prototype._saveNew=function(c,l,b,f){var U=this,$=function(_$){function $(_x,_x2){return _$.apply(this,arguments);}$.toString=function(){return _$.toString();};return $;}(function(b,$){if("ok"===$){var H=Uc(b)?W(b):b,L=f+"/"+H+".json",e=U.editor.getFileNode(L);if(e){if(e.fileType=="display"||e.fileType=="scene"){L=n("editor.filenameExisted")}};e?sc(n("editor.filenameconflict"),L,function(){c&&c();}):(U.tab.setName(H),U.url=L,U.tab.setTag(U.url),U.editor.dataView.updateUrl(),U._saveImpl(l));}else c&&c();}),H={name:void 0};return"display"===this.type?(H.displayView=this,this.editor.fireEvent("displayViewNewNameInputing",H)):"symbol"===this.type&&(H.symbolView=this,this.editor.fireEvent("symbolViewNewNameInputing",H)),!H.preventDefault&&void(H.name?$(H.name,"ok"):zc(b,this.tab.getName(),{nullable:!1,trim:!0,maxLength:Gl.config.maxFileNameLength,checkFunc:Gl.config.checkFileName},$));},c.prototype._saveAs=function(c,l){this.tab.setName(V(l)),this.url=l,this.tab.setTag(this.url),this.editor.dataView.updateUrl(),this._saveImpl(c);},c.prototype._saveImpl=function(c){var l=this,b=this.url,f={url:b};return"display"===this.type?(Gl.config.settingDefaultValueBeforeSaving&&this.dm.each(function(c){if(c instanceof ht.Node){var l=ht.Default.getImage(c.getImage());l&&l.dataBindings&&l.dataBindings.forEach(function(l){var b=c.getAttrObject(),f=l.defaultValue;if(void 0!==f){var n=l.attr;b&&void 0!==b[n]||c.a(n,f);}});}}),f.displayView=this,this.editor.fireEvent("displayViewSaving",f)):"symbol"===this.type&&(f.symbolView=this,this.editor.fireEvent("symbolViewSaving",f)),!f.preventDefault&&(f={path:f.url,content:t(this.content)},void this.editor.request("upload",f,function(f){f===!0&&l.editor.saveImage(l.dm.a("snapshotURL")||l.graphView,b.substr(0,b.length-5)+".png",function(){l.dirty=!1;}),c&&c(),l.editor.showMessage(n("editor.savedsuccessfully"),cb,1e3);}));},c.prototype.$65$=function(c,l){var b=this;this.tab.getTag()&&l.indexOf("?")===-1&&(l+="?tag="+encodeURI(this.tab.getTag()));var f={url:l};if("display"===this.type?(f.displayView=this,this.editor.fireEvent("displayViewPreviewing",f)):"symbol"===this.type&&(f.symbolView=this,this.editor.fireEvent("symbolViewPreviewing",f)),f.preventDefault)return!1;l=f.url,window.open(l,l);var n=this.content;n.title=this.tab.getName(),f={path:c,content:t(n)},this.editor.request("upload",f,function(c){"display"===b.type?b.editor.fireEvent("displayViewPreview",{displayView:b,url:l}):"symbol"===b.type&&b.editor.fireEvent("symbolViewPreview",{symbolView:b,url:l});});},c.prototype.$4$=function(){return this._interactionState;},c.prototype.$5$=function(c,l,b){var f=this,n=this._interactionState;if(n!==c){this._interactionState=c,this.editor.pointsEditingMode=!1;var U=[];if(this.graphView.getInteractors().each(function(l){l.keep?l.disabled="edit"!==c:U.push(l);}),U.forEach(function(c){c.tearDown(),f.graphView.getInteractors().remove(c);}),"edit"!==c){var $=Yc(l)?this.$63$(l,b):this.$62$(l,b);$.setUp(),this.graphView.getInteractors().add($);}this.graphView.invalidateSelection(),this.editor.mainToolbar.iv(),this.fp("interactionState",n,c),this.validateCanvas();}},c.prototype.$62$=function(c,l){var b=new c();return b instanceof ht.Shape?new lf(this.tab,null,function(b,f){var n=new c();return n.setPoints(b),n.setSegments(f),l&&l(n),n;}):b instanceof ht.Edge?new cf(this.tab,null,function(c,b){var f=new ht.Edge(c,b);return l&&l(f),f;}):b instanceof ht.Node?new Ob(this.tab,null,function(b,f){var n=new c();return l&&l(n,b,f),n;}):void 0;},c.prototype.$63$=function(c,l){var b=this,f=ff[c];return"shape"===c?new lf(this.tab,null,function(n,U){var $={type:"shape",background:null,borderColor:Gl.config.color_data_border,borderWidth:1};l&&l($,n,U);var H=new f($);return H.setPoints(n),H.setSegments(U),b.editor.fireEvent("compInited",{type:c,data:H,symbolView:b.editor.symbolView}),H;}):new Ob(this.tab,null,function(U,$){var H=void 0;H="arc"===c?{type:c,rect:[U.x,U.y,U.width,U.height],background:Gl.config.color_data_background,borderWidth:1,borderColor:Gl.config.color_data_border,arcFrom:0,arcTo:4.1888}:"border"===c?{type:c,rect:[U.x,U.y,U.width,U.height],border:1,color:Gl.config.color_data_border}:"text"===c?{type:c,rect:[U.x,U.y,U.width,U.height],text:n("editor.text")}:"comp"===c||"image"===c?$?{rect:[U.x+U.width/2,U.y+U.height/2,-1,-1]}:{rect:[U.x,U.y,U.width,U.height]}:"pieChart"===c?{type:"pieChart",values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}:"oneDimensionalColumnChart"===c?{type:"columnChart",series:[{values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}]}:"columnChart"===c?{type:"columnChart",series:[{values:[30,40,60,70,80],color:"#7EB6EA"},{values:[20,40,50,80,90],color:"#434348"}]}:"lineChart"===c?{type:"lineChart",series:[{values:[10,40,30,60,70],color:"#7EB6EA"}]}:{type:c,rect:[U.x,U.y,U.width,U.height],background:Gl.config.color_data_background,borderWidth:1,borderColor:Gl.config.color_data_border},l&&l(H,U,$);var L=new f(H);return b.editor.fireEvent("compInited",{type:c,data:L,symbolView:b.editor.symbolView}),L;});},c.prototype.init=function(){this.clear();},c.prototype.resetGrid=function(){},c.prototype.clear=function(){this.dm.setName(void 0),this.dm.setBackground(void 0),this.dm.setHierarchicalRendering(!1),this.dm.setLayers(void 0),this.dm.clear(),this.dm.setAttrObject(void 0),this.resetGrid();},c.prototype.onClosed=function(){this.graphView.onClosed();},c.prototype.addData=function(c){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1],b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],f=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n="display"===this.type?"dataCreated":"compCreated",U={data:c};return U["display"===this.type?"displayView":"symbolView"]=this,b?void this.editor.fireEvent(n,U):(this.dm.beginTransaction(),l||c.getParent()||c.setParent(this.graphView.getCurrentSubGraph()),this.dm.add(c),l||(f||this.dm.sm().ss(c),this.graphView.setFocus()),this.editor.fireEvent(n,U),void this.dm.endTransaction());},c.prototype.validateCanvas=function(){var c=this.graphView._topCanvas,l=d(c);l.clearRect(0,0,c.clientWidth,c.clientHeight),this.graphView.getInteractors().each(function(c){c.$0$&&c.$0$(l);}),this.$0$(l),l.restore();},c.prototype.redraw=function(){this._lastWidth=this._lastHeight=null,this.iv();},c.prototype.validateImpl=function(){var c=this._rulerSize,l=this._rulerEnabled,b=this.getWidth(),f=this.getHeight();if(b!==this._lastWidth||f!==this._lastHeight||c!==this._lastRulerSize||l!==this._lastRulerEnabled){if(this._lastWidth=b,this._lastHeight=f,this._lastRulerSize=c,this._lastRulerEnabled=l,l){this._hRuler.parentNode||(this._view.appendChild(this._hRuler),this._view.appendChild(this._vRuler));var n=Math.max(0,b-c),U=Math.max(0,f-c);g(this._hRuler,c,0,n,c),g(this._vRuler,0,c,c,U),g(this.graphView,c,c,n,U),g(this.graphView._topDiv,0,0,n,U),w(this.graphView._topCanvas,n,U),w(this._hRuler,n,c),w(this._vRuler,c,U);}else this._hRuler.parentNode&&(k(this._hRuler),k(this._vRuler)),g(this.graphView,0,0,b,f),g(this.graphView._topDiv,0,0,b,f),w(this.graphView._topCanvas,b,f);this.validateCanvas();}this._hRuler.style.background=this._rulerBackground,this._vRuler.style.background=this._rulerBackground,this.drawRuler();},c.prototype.$0$=function(c){var l=this.graphView.getZoom(),b=this.graphView.tx(),f=this.graphView.ty(),n=Math.round(this.dm.a("width")||0)*l,U=Math.round(this.dm.a("height")||0)*l,$=this.graphView.getWidth(),H=this.graphView.getHeight();n>0&&U>0&&$>0&&H>0&&(c.beginPath(),b&&c.rect(0,0,b,H),f&&$-b&&c.rect(b,0,$-b,f),$-b-n&&U&&c.rect(b+n,f,$-b-n,U),$-b&&H-f-U&&c.rect(b,f+U,$-b,H-f-U),c.fillStyle=Gl.config.color_mask,c.fill());},c.prototype.drawVerticalText=function(c,l,b){c.save(),c.translate(11,b+11),c.rotate(-Math.PI/2),R(c,l,this._rulerFont,this._rulerColor,11,-11,0,this._rulerSize,"right"),c.restore();},c.prototype.drawRuler=function(){if(this._rulerEnabled){var c,l,b,f,n,U,$=this._rulerFont,H=this._rulerSize,L=this._rulerColor,e=this.graphView,I=e.getUnionNodeRect(e.sm().getSelection()),Y=e.getZoom(),D=Math.log(Y)/Math.log(10),T=Math.floor(D),J=100,y=10,m=J/Math.pow(10,T)*Y,Q=m/y,B=T>1?40+10*(T-1):40,p=Math.round(e.tx()),i=Math.round(e.ty()),Z={x:-p,y:-i,width:e.getWidth(),height:e.getHeight()},a=Math.floor(Z.x/m),j=Math.ceil((Z.x+Z.width)/m),u=Math.floor(Z.y/m),X=Math.ceil((Z.y+Z.height)/m);for(d(this._hRuler,0,0,1,{x:0,y:0,width:Z.width,height:H}).restore(),f=d(this._hRuler,p,0,1),f.lineWidth=1,f.strokeStyle=L,I&&(f.beginPath(),f.rect(I.x*Y,0,I.width*Y,H),f.fillStyle=Gl.config.color_line,f.fill()),f.beginPath(),c=a;c<=j;c++){n=c*m,U=T>1?(n/Y).toFixed(T-1):Math.round(n/Y),n=Math.round(n),f.moveTo(n,H),f.lineTo(n,0),R(f,U,$,L,n,0,1,H,"left");}for(f.stroke(),f.beginPath(),c=a;c<=j;c++){for(b=1;b<y;b++){n=c*m+b*Q,U=T>1?(n/Y).toFixed(T-1):Math.round(n/Y),n=Math.round(n),f.moveTo(n,H),5===b?(f.lineTo(n,H-10),R(f,U,$,L,n,0,1,H,"left")):(f.lineTo(n,H-4),Q>B&&R(f,U,$,L,n,0,1,H,"left"));}}for(f.stroke(),f.restore(),d(this._vRuler,0,0,1,{x:0,y:0,width:H,height:Z.height}).restore(),f=d(this._vRuler,0,i,1),f.lineWidth=1,f.strokeStyle=L,I&&(f.beginPath(),f.rect(0,I.y*Y,H,I.height*Y),f.fillStyle=Gl.config.color_line,f.fill()),f.beginPath(),l=u;l<=X;l++){n=l*m,U=T>1?(n/Y).toFixed(T-1):Math.round(n/Y),n=Math.round(n),f.moveTo(H,n),f.lineTo(0,n),this.drawVerticalText(f,U,n);}for(f.stroke(),f.beginPath(),l=u;l<=X;l++){for(b=1;b<y;b++){n=l*m+b*Q,U=T>1?(n/Y).toFixed(T-1):Math.round(n/Y),n=Math.round(n),f.moveTo(H,n),5===b?(f.lineTo(H-10,n),this.drawVerticalText(f,U,n)):(f.lineTo(H-4,n),Q>B&&this.drawVerticalText(f,U,n));}}f.stroke(),f.restore();}},gl(c,[{key:"dm",get:function get(){return this.graphView.dm();}},{key:"dirty",get:function get(){return this.tab.a("dirty");},set:function set(c){ht.Default.loadingRefGraph||this.tab.a("dirty",c);}}]),c;}();S(nf,{ms_v:1,ms_fire:1,ms_ac:["rulerEnabled","rulerBackground","rulerFont","rulerColor","rulerSize","guideColor"],_rulerFont:Gl.config.smallFont,_rulerBackground:Gl.config.color_pane,_rulerColor:Gl.config.color_dark,_rulerSize:Gl.config.rulerSize,_guideColor:Gl.config.color_transparent,_interactionState:void 0}),Gl.EditView=nf;var Uf=function(c){function l(b,f,n,U){Vl(this,l);var $=kl(this,c.call(this,b,f,ob,"display"));$.displayTree=$.list=new Cb($);var H=$.graphView.getEditInteractor();return H.gridEnabled=$.editor.isGridEnabled(),$.dirty=!1,$.dm.enableHistoryManager(Gl.config.maxUndoRedoSteps),$.parse(n,U),n?U||$.editor.fireEvent("displayViewOpening",{displayView:$,url:n}):$.editor.fireEvent("displayViewCreated",{displayView:$,json:U}),$;}return wl(l,c),l.prototype.init=function(){c.prototype.init.call(this),this.dm.setHierarchicalRendering(!0);},l.prototype.onClosed=function(){c.prototype.onClosed.call(this),this.displayTree.onClosed();},l.prototype.handleDataModelChanged=function(c){"add"!==c.kind||this.isDeserializing||c.data.setLayer(this.editor.currentLayer),this.dirty=!0;},l.prototype.update=function(l,b){c.prototype.update.call(this,l,b),this.editor.fireEvent(b?"displayViewCommitted":"displayViewOpened",{displayView:this,url:this.url,json:l});},l.prototype._updateImpl=function(c,l){var f=this,n=F(c);this.clear(),this.isDeserializing=!0,this.dm.deserialize(n,void 0,{disableOnPreDeserialize:!0,disableOnPostDeserialize:!0}),this.isDeserializing=!1,this.dirty=!!l,!l&&Gl.config.fitContentForDisplayView&&(n.contentRect?!function(){var c=b(n.contentRect);ht.Default.grow(c,Gl.config.fitPadding),f.graphView.getWidth()&&f.graphView.getHeight()?f.graphView.fitRect(c,Gl.config.animate):setTimeout(function(){f.graphView.fitRect(c,Gl.config.animate);},500);}():this.graphView.fitContent(Gl.config.animate,Gl.config.fitPadding));},l.prototype.reload=function(){if(this.url){var c={displayView:this,url:this.url};return this.editor.fireEvent("displayViewReloading",c),!c.preventDefault&&void this.parse(this.url);}},l.prototype.save=function(c,l){var b=this,f=function f(){c&&c(),b.editor.fireEvent("displayViewSaved",{displayView:b,url:b.url});};if(l)this._saveAs(f,l);else if(this.url)this._saveImpl(f);else{var U=this.editor.displays.currentDir,$=n("editor.inputnewdisplayname");this._saveNew(c,f,$,U);}},l.prototype.clear=function(){c.prototype.clear.call(this),this.dm.a("connectActionType",Gl.config.displayConnectActionType),this.dm.a("rotateAsClock",Gl.config.rotateAsClock);},l.prototype.resetGrid=function(){this.dm.a("gridBlockSize",Gl.config.displayGridBlockSize),this.dm.a("gridThickLinesEvery",Gl.config.displayGridThickLinesEvery),this.dm.a("gridThickColor",Gl.config.displayGridThickColor),this.dm.a("gridLightColor",Gl.config.displayGridLightColor),this.dm.a("gridAngle",Gl.config.displayGridAngle),this.dm.a("gridRotation",Gl.config.displayGridRotation),this.dm.a("gridZoomThreshold",Gl.config.displayGridZoomThreshold);},l.prototype.preview=function(){this.$65$("previews/display.json",this.dm.a("previewURL")||Gl.config.displayPreviewURL);},gl(l,[{key:"content",get:function get(){var c=this.dm,l=c.toJSON();l.modified=new Date().toString(),c.a("connectActionType")===Gl.config.displayConnectActionType&&delete l.connectActionType,c.a("rotateAsClock")===Gl.config.rotateAsClock&&delete l.rotateAsClock,c.a("gridBlockSize")===Gl.config.displayGridBlockSize&&delete l.a.gridBlockSize,c.a("gridThickLinesEvery")===Gl.config.displayGridThickLinesEvery&&delete l.a.gridThickLinesEvery,c.a("gridThickColor")===Gl.config.displayGridThickColor&&delete l.a.gridThickColor,c.a("gridLightColor")===Gl.config.displayGridLightColor&&delete l.a.gridLightColor,c.a("gridAngle")===Gl.config.displayGridAngle&&delete l.a.gridAngle,c.a("gridRotation")===Gl.config.displayGridRotation&&delete l.a.gridRotation,c.a("gridZoomThreshold")===Gl.config.displayGridZoomThreshold&&delete l.a.gridZoomThreshold,c.a("xAlignmentGuides")&&!c.a("xAlignmentGuides").length&&delete l.a.xAlignmentGuides,c.a("yAlignmentGuides")&&!c.a("yAlignmentGuides").length&&delete l.a.yAlignmentGuides;var b=this.graphView.getContentRect();return c.a("width")>0&&c.a("height")>0&&(l.contentRect={x:0,y:0,width:c.a("width"),height:c.a("height")}),c.size()&&b&&b.width&&b.height&&(l.contentRect=b),l;}}]),l;}(nf),$f=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l.prototype.setDataModel=function(c){var l=this,b=l._dataModel,f=l._selectionModel;b!==c&&(b&&(b.umm(l.handleDataModelChange,l),b.umd(l.handleDataPropertyChange,l),b.removeIndexChangeListener(l.handleIndexChange,l),f||b.sm().ums(l.handleSelectionChange,l)),l._dataModel=c,c.mm(l.handleDataModelChange,l),c.md(l.handleDataPropertyChange,l),c.addIndexChangeListener(l.handleIndexChange,l),f?f._setDataModel(c):c.sm().ms(l.handleSelectionChange,l),l.fp("dataModel",b,c));},l.prototype.handleIndexChange=function(c){this.ivm();},l.prototype.handleDataPropertyChange=function(c){this.invalidateData(c.data);},l.prototype.validateModel=function(){var c=this;c._rows.clear(),c._rowMap={};var l=c._rows=c._dataModel.toDatas(c.isVisible,c),b=0,f=c.getCurrentSortFunc(),n=l.size();for(f&&l.sort(f);b<n;b++){c._rowMap[l.get(b)._id]=b;}},l;}(ib),Hf=function(c){function l(b,f){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Vl(this,l);var U=kl(this,c.call(this,f));return U.editor=b,U.editable=n,U.addTopPainter(U.$1$.bind(U)),U;}return wl(l,c),l.prototype.isEditable=function(c){return this.editable;},l.prototype.handleDelete=function(){this.editable&&this.removeSelection();},l.prototype.handleDataDoubleSelect=function(c,l){if(this.isEditable(l)){var b=this.getIcon(l)?this.getIndent():0;this.lp(c).x>b&&this.beginEditing(l);}},l.prototype.rename=function(c,l){c.setName(l);},l.prototype.isDroppable=function(c,l){return!1;},l.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw());},l.prototype._endDrag=function(c,l){},l.prototype._endCrossDrag=function(c,l){},l.prototype.$1$=function(c){c.texureImage2D=!0;var l=void 0;if(this._dragInfo&&this._dragInfo.inView?l=this._dragInfo:this._crossDragInfo&&(l=this._crossDragInfo),l){var b=this.getWidth(),f=(this.getRowHeight(),l.type,Gl.config.color_select_dark);if(l.refData){var n=l.y;c.beginPath(),c.arc(4,n,3,0,2*Math.PI,!0),c.moveTo(7,n),c.lineTo(b,n),c.lineWidth=2,c.strokeStyle=f,c.stroke();}else{var U=this.getViewRect();r(c,f,U.x,U.y,U.width,U.height,2);}}},l.prototype._dragging=function(c,l){var b=this.getRowHeight(),f=this.lp(c),n=f.y/b,U=Math.floor(n),$=this.getRowSize();U>$-1?(l.refData=null,l.type=null,l.parent=null):(l.refData=this.getRowDatas().get(U),f.y-U*b<.5*b?(l.type="up",l.y=U*b):(l.type="down",l.y=(U+1)*b)),this.autoScroll(c),this.redraw();},l.prototype.$2$=function(){var c="";if(this.draggingData&&(c=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var l=this.sm().size();c+=l>1?" (+"+l+") ":"";}return c;},l.prototype.handleDragAndDrop=function(c,l){if(this.editable){if("prepare"===l)return void this._clearDragInfo();"begin"===l&&(this._dragInfo={tip:this.$2$(),view:this});var b=this._dragInfo;if(b){var f=this.editor.dnd;if("begin"===l||"between"===l){var n=this.getView().contains(u(c));return n?(b.inView=!0,this._dragging(c,b),f.clearDropView(c,b)):(b.inView&&this.redraw(),b.inView=!1,f.crossDrag(c,b)),void f.showTip(b.tip,c);}return"end"===l?(b.inView?this._endDrag(c,b):f.crossDrop(c,b),void this._clearDragInfo()):"cancel"===l?(b.inView||f.crossCancel(c,b),void this._clearDragInfo()):void 0;}}},l.prototype.handleCrossDrag=function(c,l,b){if(this.editable)return"exit"===l||"cancel"===l?(this._crossDragInfo=null,void this.redraw()):"enter"===l||"over"===l?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(c,this._crossDragInfo)):"drop"===l?(this._endCrossDrag(c,b),this._crossDragInfo=null,void this.redraw()):void 0;},l.prototype.beginEditing=function(c){var l=this;this.cancelEditing(),this.makeVisible(c),this.validate();var b=this.getIcon(c)?this.getIndent():0,f=this.ty()+this.getRowIndex(c)*this.getRowHeight(),n=Math.max(1,this.getWidth()-b),U=this.getRowHeight();this._currentEditor=new ht.widget.TextField(),this._currentEditor.data=c;var $=this._currentEditor.getElement(),H=this.getLabel(c);$.value=null==H?"":H,$.onblur=function(c){l.endEditing();},$.onkeydown=function(c){Q(c)?l.endEditing():B(c)&&l.cancelEditing();},this.getView().appendChild(this._currentEditor.getView()),g(this._currentEditor,b,f,n,U),this._currentEditor.setFocus(),ht.Default.callLater($.select,$);},l.prototype.endEditing=function(){var c=this._currentEditor;c&&(this.rename(c.data,c.getValue()),delete this._currentEditor,k(c.getView()),this.redraw());},l.prototype.cancelEditing=function(){var c=this._currentEditor;c&&(delete this._currentEditor,k(c.getView()),this.redraw());},l;}($f);Gl.DNDIndexList=Hf;var Lf=function(c){function l(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Vl(this,l);var n=kl(this,c.call(this,b.editor,b.dm,f));return n.graphView=b.graphView,n.nodeIcon=kc(n),n.initMenu(),b.dm.addDataPropertyChangeListener(function(c){c.data.editorIcon=null;}),n;}return wl(l,c),l.prototype.onDataDoubleClicked=function(c,l){l.altKey?this.graphView.fitData(c,!0,Gl.config.fitPadding):this.graphView.makeCenter(c,!0);},l.prototype.onPropertyChanged=function(l){"filter"===l.property&&this.ivm(),c.prototype.onPropertyChanged.call(this,l);},l.prototype.handleDataPropertyChange=function(l){!this._filter||"displayName"!==l.property&&"s:text"!==l.property&&"s:type"!==l.property&&"s:image"!==l.property?c.prototype.handleDataPropertyChange.call(this,l):this.ivm();},l.prototype.isVisible=function(c){if(!this._filter)return!0;var l=this.getLabel(c);return null!=l&&(l=(l+"").toLowerCase(),l.indexOf(this._filter)>=0);},l.prototype.validate=function(){this.graphView.validate(),c.prototype.validate.call(this);},l.prototype.getIcon=function(c){return c instanceof mb?"editor.restore.state":c instanceof ht.Text?c.getIcon():c instanceof ht.Shape?(c.editorIcon||(c.editorIcon=xc(c)),c.editorIcon):c instanceof ht.Node?this.nodeIcon:null;},l.prototype.isDroppable=function(c,l){return!1;},l.prototype._endCrossDrag=function(c,l){},l.prototype._endDrag=function(c,l){var b=this;this.editor.beginTransaction();var f=l.type,n=l.refData;if(this.isSelected(this.draggingData)){var U=this.getRowOrderSelection();"down"===f&&U.reverse(),U.each(function(c){b._dropData(c,f,n);});}else this._dropData(this.draggingData,f,n),this.sm().ss(this.draggingData);this.editor.endTransaction();},l.prototype._dropData=function(c,l,b){if(b){var f=this.dm().getDatas(),n=f.indexOf(b);"down"===l&&n++,f.indexOf(c)<n&&n--,this.dm().moveToIndex(c,n);}else this.dm().bringToFront(c);},l.prototype.rename=function(c,l){c.setDisplayName(l);},l.prototype.initMenu=function(){var c=this;this.menu=new Bb();var l=[{id:"copy",label:n("editor.copy"),action:function action(){c.editor.copy();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"paste",label:n("editor.paste"),action:function action(){c.editor.paste();},visible:function visible(){return c.editable&&c.editor.hasCopyInfo();}},{id:"delete",label:n("editor.delete"),action:function action(){c.editor.delete();},visible:function visible(){return c.editable&&!!c.editor.ld;}},"separator",{id:"bringToFront",label:n("editor.bringtofront"),action:function action(){c.editor.bringToFront();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"bringForward",label:n("editor.bringforward"),action:function action(){c.editor.bringForward();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"sendBackward",label:n("editor.sendbackward"),action:function action(){c.editor.sendBackward();},visible:function visible(){return c.editable&&!!c.editor.ld;}},{id:"sendToBack",label:n("editor.sendtoback"),action:function action(){c.editor.sendToBack();},visible:function visible(){return c.editable&&!!c.editor.ld;}}];this.menu.setItems(l),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu);},l.prototype.onClosed=function(){U(this.editor.menus,this.menu);},l;}(Hf);S(Lf,{ms_ac:["filter"]});var ef=function(c){function l(b){return Vl(this,l),kl(this,c.call(this,b));}return wl(l,c),l.prototype.handleDataModelChange=function(l){c.prototype.handleDataModelChange.call(this,l),this.editor&&this.editor.fireEvent("symbolViewDataModelChanged",{symbolView:this.editView,event:l});},l.prototype.handleDataModelPropertyChange=function(l){c.prototype.handleDataModelPropertyChange.call(this,l),this.editor&&this.editor.fireEvent("symbolViewDataModelPropertyChanged",{symbolView:this.editView,event:l});},l.prototype.handleDataPropertyChange=function(l){c.prototype.handleDataPropertyChange.call(this,l),this.editor&&this.editor.fireEvent("symbolViewDataPropertyChanged",{symbolView:this.editView,event:l});},l.prototype.isDroppable=function(c,l){return!!l.view.isDroppableToSymbolView;},l.prototype.initMenuItems=function(c){this.$57$(c),this.$56$(c);},l;}(Rb),If=function(c){function l(b,f,n){Vl(this,l);var U=kl(this,c.call(this));return U.setIcon("editor.func"),U.setImage("editor.func"),U.parse(b,f,n),U;}return wl(l,c),l.prototype.toLabel=function(){return this.getDisplayName()||n("editor.comptype.func");},l.prototype.getClass=function(){return l;},l.prototype.parse=function(c,l,b){c&&(this.a("type",c.type),uc(this,c,l,b));},l.prototype.toJSON=function(){var c={};return c.type=this.a("type"),Xc(this,c),c;},gl(l,[{key:"compType",get:function get(){return"function";}}]),l;}(ht.Node),Yf={rect:Yb,circle:Yb,oval:Yb,roundRect:Yb,star:Yb,triangle:Yb,hexagon:Yb,pentagon:Yb,diamond:Yb,rightTriangle:Yb,parallelogram:Yb,trapezoid:Yb,polygon:Yb,arc:Yb,image:Tb,shape:Db,text:Jb,border:db,pieChart:Sb,columnChart:Eb,percentageColumnChart:Eb,stackedColumnChart:Eb,lineChart:qb,clip:yb,restore:mb,endClip:mb};Gl.toDatas=function(c,l){var b=[];return c.forEach(function(c){var f=pl(c);if(f){var n=Ql(f),U=Bl(n,l);U&&b.push(U);}}),b;};var Df=function(c){function l(b,f,n,U){Vl(this,l);var $=kl(this,c.call(this,b,f,ef,"symbol"));$.graphView.vectorDataBindingDisabled=!0,$.graphView.getLabel=function(){return null;},$.graphView.setVisibleFunc(function(c){return!(c instanceof mb);}),$.list=$.symbolList=new Lf($),$.dm.a({name:void 0,comps:[],width:100,height:100,boundExtend:0,fitSize:!1,scrollable:!1,interactive:!1,disableSelectedBorder:!1,pixelPerfect:!0,clip:!1,visible:!0,color:void 0,blendMode:"multiply",opacity:1});var H=Gl.config.customProperties.symbol;H&&H.length&&H.forEach(function(c){$.dm.a(c.property,c.defaultValue);});var L=$.graphView.getEditInteractor();return L.gridEnabled=$.editor.isGridEnabled(),$.dm.addIndexChangeListener(function(){$.dirty=!0;}),$.dirty=!1,$.dm.enableHistoryManager(Gl.config.maxUndoRedoSteps),$.parse(n,U),n?U||$.editor.fireEvent("symbolViewOpening",{symbolView:$,url:n}):$.editor.fireEvent("symbolViewCreated",{symbolView:$,json:U}),$;}return wl(l,c),l.prototype.clear=function(){c.prototype.clear.call(this),this.dm.a("connectActionType",Gl.config.symbolConnectActionType),this.dm.setAutoAdjustIndex(!1);},l.prototype.onClosed=function(){c.prototype.onClosed.call(this),this.list.onClosed();},l.prototype.update=function(l,b){c.prototype.update.call(this,l,b),this.editor.fireEvent(b?"symbolViewCommitted":"symbolViewOpened",{symbolView:this,url:this.url,json:l});},l.prototype._updateImpl=function(c,l){var b=this,f=this.dm,n=F(c);this.clear(),f.setBackground(n.background),f.a("previewURL",n.previewURL),f.a("snapshotURL",n.snapshotURL),f.dataBindings=n.dataBindings,null!=n.gridBlockSize&&this.dm.a("gridBlockSize",n.gridBlockSize),null!=n.gridThickLinesEvery&&this.dm.a("gridThickLinesEvery",n.gridThickLinesEvery),null!=n.gridThickColor&&this.dm.a("gridThickColor",n.gridThickColor),null!=n.gridLightColor&&this.dm.a("gridLightColor",n.gridLightColor),null!=n.gridAngle&&this.dm.a("gridAngle",n.gridAngle),null!=n.gridRotation&&this.dm.a("gridRotation",n.gridRotation),null!=n.gridZoomThreshold&&this.dm.a("gridZoomThreshold",n.gridZoomThreshold),n.hasOwnProperty("connectActionType")&&this.dm.a("connectActionType",n.connectActionType),n.hasOwnProperty("rotateAsClock")&&this.dm.a("rotateAsClock",n.rotateAsClock),zl.forEach(function(c){f.a(c,n[c]);}),f.a({name:n.name,renderHTML:n.renderHTML,comps:Wc(n.comps,[]),width:Wc(n.width,100),height:Wc(n.height,100),boundExtend:Wc(n.boundExtend,0),fitSize:Wc(n.fitSize,!1),scrollable:Wc(n.scrollable,!1),interactive:Wc(n.interactive,!1),disableSelectedBorder:Wc(n.disableSelectedBorder,!1),pixelPerfect:Wc(n.pixelPerfect,!0),clip:Wc(n.clip,!1),visible:Wc(n.visible,!0),color:Wc(n.color,void 0),blendMode:Wc(n.blendMode,"multiply"),opacity:Wc(n.opacity,1),attachPoints:Wc(n.attachPoints,void 0),attachStyle:Wc(n.attachStyle,"close"),cacheRule:Wc(n.cacheRule,!1),comps_func:Vc(n.comps),width_func:Vc(n.width),height_func:Vc(n.height),fitSize_func:Vc(n.fitSize),scrollable_func:Vc(n.scrollable),interactive_func:Vc(n.interactive),disableSelectedBorder_func:Vc(n.disableSelectedBorder),pixelPerfect_func:Vc(n.pixelPerfect),visible_func:Vc(n.visible),color_func:Vc(n.color),blendMode_func:Vc(n.blendMode),opacity_func:Vc(n.opacity),attachPoints_func:Vc(n.attachPoints),attachStyle_func:Vc(n.attachStyle),cacheRule_func:Vc(n.cacheRule)});var U=Gl.config.customProperties.symbol;U&&U.length&&U.forEach(function(c){f.a(c.property,Wc(n[c.property],c.defaultValue));}),f.a("comps").forEach(function(c){pl(c,b);}),this.dirty=!!l,!l&&Gl.config.fitContentForSymbolView&&this.graphView.fitContent(Gl.config.animate,Gl.config.fitPadding);},l.prototype.reload=function(){if(this.url){var c={symbolView:this,url:this.url};return this.editor.fireEvent("symbolViewReloading",c),!c.preventDefault&&void this.parse(this.url);}},l.prototype.save=function(c,l){var b=this,f=function f(){c&&c(),b.editor.fireEvent("symbolViewSaved",{symbolView:b,url:b.url}),b.editor.selectFileNode(b.url);};if(l)this._saveAs(f,l);else if(this.url)this._saveImpl(f);else{var U=this.editor.symbols.currentDir,$=n("editor.inputnewsymbolname");this._saveNew(c,f,$,U);}},l.prototype.addValue=function(c,l,b){var f=this.dm.a(l),n=this.dm.a(l+"_func");jc(c,l,n,f,b);},l.prototype.resetGrid=function(){this.dm.a("gridBlockSize",Gl.config.symbolGridBlockSize),this.dm.a("gridThickLinesEvery",Gl.config.symbolGridThickLinesEvery),this.dm.a("gridThickColor",Gl.config.symbolGridThickColor),this.dm.a("gridLightColor",Gl.config.symbolGridLightColor),this.dm.a("gridAngle",Gl.config.symbolGridAngle),this.dm.a("gridRotation",Gl.config.symbolGridRotation),this.dm.a("gridZoomThreshold",Gl.config.symbolGridZoomThreshold);},l.prototype.preview=function(){this.$65$("previews/symbol.json",this.dm.a("previewURL")||Gl.config.symbolPreviewURL);},gl(l,[{key:"content",get:function get(){var c=this,l=this.graphView.getEditInteractor(),b=(l.gridGuide,this.dm),f={modified:new Date().toString()};b.getBackground()&&(f.background=b.getBackground()),b.dataBindings&&(f.dataBindings=b.dataBindings),b.a("previewURL")&&(f.previewURL=b.a("previewURL")),b.a("snapshotURL")&&(f.snapshotURL=b.a("snapshotURL")),b.a("connectActionType")!==Gl.config.symbolConnectActionType&&(f.connectActionType=b.a("connectActionType")),b.a("rotateAsClock")!==Gl.config.rotateAsClock&&(f.rotateAsClock=b.a("rotateAsClock")),b.a("gridBlockSize")!==Gl.config.symbolGridBlockSize&&(f.gridBlockSize=b.a("gridBlockSize")),b.a("gridThickLinesEvery")!==Gl.config.symbolGridThickLinesEvery&&(f.gridThickLinesEvery=b.a("gridThickLinesEvery")),b.a("gridThickColor")!==Gl.config.symbolGridThickColor&&(f.gridThickColor=b.a("gridThickColor")),b.a("gridLightColor")!==Gl.config.symbolGridLightColor&&(f.gridLightColor=b.a("gridLightColor")),b.a("gridAngle")!==Gl.config.symbolGridAngle&&(f.gridAngle=b.a("gridAngle")),b.a("gridRotation")!==Gl.config.symbolGridRotation&&(f.gridRotation=b.a("gridRotation")),b.a("gridZoomThreshold")!==Gl.config.symbolGridZoomThreshold&&(f.gridZoomThreshold=b.a("gridZoomThreshold")),b.a("xAlignmentGuides")&&b.a("xAlignmentGuides").length&&(f.xAlignmentGuides=b.a("xAlignmentGuides")),b.a("yAlignmentGuides")&&b.a("yAlignmentGuides").length&&(f.yAlignmentGuides=b.a("yAlignmentGuides")),b.a("cacheRule")&&this.addValue(f,"cacheRule"),zl.forEach(function(c){b.a(c)&&(f[c]=b.a(c));}),b.a("renderHTML")&&(f.renderHTML=b.a("renderHTML")),this.addValue(f,"width"),this.addValue(f,"height"),this.addValue(f,"boundExtend",0),this.addValue(f,"fitSize",!1),this.addValue(f,"scrollable",!1),this.addValue(f,"interactive",!1),this.addValue(f,"disableSelectedBorder",!1),this.addValue(f,"pixelPerfect",!0),this.addValue(f,"name"),this.addValue(f,"clip",!1),this.addValue(f,"visible",!0),this.addValue(f,"color"),this.addValue(f,"blendMode","multiply"),this.addValue(f,"opacity",1),this.addValue(f,"attachPoints"),this.addValue(f,"attachStyle");var n=Gl.config.customProperties.symbol,U=!!Gl.config.saveSymbolCustomPropertyDefaultValue;n&&n.length&&n.forEach(function(l){U?c.addValue(f,l.property):c.addValue(f,l.property,l.defaultValue);});var $=[];return b.a("comps_func")?f.comps={values:$,func:b.a("comps_func")}:f.comps=$,b.each(function(c){$.push(c.toJSON());}),f;}}]),l;}(nf),Tf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f.getTabModel().sm().ms(function(){f.editor.$6$(f.currentTab);}),f.menu=new Bb([{id:"closeTab",label:n("editor.closetab"),action:function action(){f.closeTab();}},{id:"closeOtherTabs",label:n("editor.closeothertabs"),action:function action(){f.closeOtherTabs();}},{id:"closeTabsToTheRight",label:n("editor.closetabstotheright"),action:function action(){f.closeTabsToTheRight();}}]),f.menu.beforeShow=function(c){f._rightClickTab=f.getTabAt(c);},f.menu.addTo(f.getTitleDiv()),f.editor.menus.push(f.menu),f;}return wl(l,c),l.prototype.drawCloseIcon=function(l,b,f,n){l.a("dirty")?(b.fillStyle=f,b.beginPath(),b.arc(n.x+n.width/2,n.y+n.height/2,3,0,2*Math.PI,!0),b.fill()):c.prototype.drawCloseIcon.call(this,l,b,f,n);},l.prototype.open=function(c){if(c){var l=c.fileType,b=l===rl,f=l===ol;if(b||f){var n=c.url,U=this.getTabModel().getDataByTag(n);U||(U=new ht.Tab(),U.setTag(n),U.setIcon(b?"editor.display":"editor.symbol"),U.setClosable(!0),U.setName(W(c.getName())),b?new Uf(this.editor,U,n):new Df(this.editor,U,n),this.editor.addTab(U)),this.getTabModel().sm().ss(U);}}},l.prototype.newDisplayView=function(c){var l=new ht.Tab();l.setClosable(!0),l.setIcon("editor.display"),l.setName(c||n("editor.untitled"));var b=new Uf(this.editor,l);return this.editor.addTab(l,!0),b;},l.prototype.newSymbolView=function(c){var l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],b=new ht.Tab();b.setClosable(!0),b.setIcon("editor.symbol"),b.setName(c||n("editor.untitled"));var f=new Df(this.editor,b);return this.editor.addTab(b,!0),l&&this.editor.zoomToFit(),f;},l.prototype.$101$=function(){this.getTabModel().each(function(c){c.getView().graphView.invalidateAll();});},l.prototype.reload=function(){this.currentTab&&this.currentTab.getView().reload();},l.prototype.save=function(c,l){this.currentTab&&this.currentTab.getView().save(c,l);},l.prototype.saveAll=function(c){var l=this.tabs,b=-1,f=function f(){b++,b<l.length?l[b].getView().save(f):c();};f();},l.prototype.preview=function(){this.currentTab&&this.currentTab.getView().preview();},l.prototype.selectTab=function(c){c&&this.getTabModel().sm().ss(c);},l.prototype.onTabClosing=function(c,l){return this.closeTab(c),!1;},l.prototype.closeTab=function(c,l,b){c=c||this._rightClickTab||this.currentTab,c&&this.closeTabs([c],l,b);},l.prototype.closeOtherTabs=function(c,l){var b=this._rightClickTab||this.currentTab;this.closeTabs(this.tabs.filter(function(c){return c!==b;}),c,l);},l.prototype.closeTabsToTheRight=function(c,l){var b=this._rightClickTab||this.currentTab;if(b){var f=this.tabs.indexOf(b);this.closeTabs(this.tabs.slice(f+1),c,l);}},l.prototype.closeAllTabs=function(c,l){this.closeTabs(this.tabs,c,l);},l.prototype.closeTabs=function(c,l,b){var f=this,n=void 0,U=function U($){if("cancel"!==$&&c.length){var H=c.shift(0);void 0===n&&(n=f.tabs.indexOf(H)-1),f.$66$(H,U,b);}else{l&&l();var L=f.tabs.length;!f.currentTab&&L&&((void 0===n||n<0)&&(n=0),n>L-1&&(n=L-1),f.selectTab(f.tabs[n]));}};U(),this._rightClickTab=null;},l.prototype.removeTab=function(c){var l=c.getView(),b={url:l.url};"display"===l.type?(b.displayView=l,this.editor.fireEvent("displayViewClosing",b)):"symbol"===l.type&&(b.symbolView=l,this.editor.fireEvent("symbolViewClosing",b)),b.preventDefault||(l.onClosed(),this.getTabModel().remove(c),this.editor.fireEvent("tabClosed",{tab:c}),"display"===l.type?this.editor.fireEvent("displayViewClosed",b):"symbol"===l.type&&this.editor.fireEvent("symbolViewClosed",b));},l.prototype.$66$=function(c,l,b){var f=this,U=c.getView();!b&&U.dirty?!function(){var b=[{label:n("editor.notsave"),action:function action(){$.hide(),f.removeTab(c),l&&l("notSave");}},{label:n("editor.save"),action:function action(){U.save(function(){$.hide(),f.removeTab(c),l&&l("save");});}},{label:n("editor.cancel"),action:function action(){$.hide(),l&&l("cancel");}}],$=new Kl({title:c.getName(),contentPadding:20,width:260,draggable:!0,content:"<p>"+n("editor.savechange")+"</p>",buttons:b});$.$49$=b[2].action,$.$48$=b[1].action,$.show();}():(this.removeTab(c),l&&l());},gl(l,[{key:"currentTab",get:function get(){return this.getTabModel().sm().ld();}},{key:"tabs",get:function get(){return this.getTabModel().getRoots().toArray();}}]),l;}(ub),Jf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b,f.buttons={};var n=[];n.push(f.createItem("distributeHorizontal")),n.push(f.createItem("distributeVertical")),n.push(f.createItem("alignLeft")),n.push(f.createItem("alignHorizontal")),n.push(f.createItem("alignRight")),n.push(f.createItem("alignTop")),n.push(f.createItem("alignVertical")),n.push(f.createItem("alignBottom")),f.addSearchItem(n);var U=22,$=[U,U,U,U,U,U,U,U,.1];return H(Gl.config.compactFilter)||(f.addCompactItem(n),$.push(U)),f.addRow(n,$),f.updateItems(),f;}return wl(l,c),l.prototype.createItem=function(c){var l=this,b="editor.align."+c.toLocaleLowerCase();return this.buttons[c]=Rc(null,n(b),b,function(){l[c]();});},l.prototype.updateItems=function(){var c=this,l=this.buttons;this.dataModel?!function(){var b=[];c.dataModel.sm().each(function(c){c instanceof ht.Node&&b.push(c);}),b.length>2?(l.distributeHorizontal.setDisabled(!1),l.distributeVertical.setDisabled(!1),l.alignLeft.setDisabled(!1),l.alignHorizontal.setDisabled(!1),l.alignRight.setDisabled(!1),l.alignTop.setDisabled(!1),l.alignVertical.setDisabled(!1),l.alignBottom.setDisabled(!1)):b.length>1?(l.distributeHorizontal.setDisabled(!0),l.distributeVertical.setDisabled(!0),l.alignLeft.setDisabled(!1),l.alignHorizontal.setDisabled(!1),l.alignRight.setDisabled(!1),l.alignTop.setDisabled(!1),l.alignVertical.setDisabled(!1),l.alignBottom.setDisabled(!1)):(l.distributeHorizontal.setDisabled(!0),l.distributeVertical.setDisabled(!0),l.alignLeft.setDisabled(!0),l.alignHorizontal.setDisabled(!0),l.alignRight.setDisabled(!0),l.alignTop.setDisabled(!0),l.alignVertical.setDisabled(!0),l.alignBottom.setDisabled(!0));}():(l.distributeHorizontal.setDisabled(!0),l.distributeVertical.setDisabled(!0),l.alignLeft.setDisabled(!0),l.alignHorizontal.setDisabled(!0),l.alignRight.setDisabled(!0),l.alignTop.setDisabled(!0),l.alignVertical.setDisabled(!0),l.alignBottom.setDisabled(!0));},l.prototype.$6$=function(c){this.dataModel&&this.dataModel.sm().ums(this.updateItems,this),c?(this.dataModel=c.getView().dm,this.dataModel.sm().ms(this.updateItems,this)):this.dataModel=null,this.updateItems();},l.prototype.getUnionRect=function(c){return this.editor.gv?this.editor.gv.getUnionNodeRect(c):null;},l.prototype.isSelected=function(c){return this.dataModel&&this.dataModel.sm().contains(c);},l.prototype.hasSelectedGroupParent=function(c){return c instanceof ht.Group&&(!!this.isSelected(c)||this.hasSelectedGroupParent(c.getParent()));},l.prototype.hasSelectedHost=function(c){var l=this,b=function b(f){return f!==c&&f instanceof ht.Node&&(!!l.isSelected(f)||b(f.getHost()));};return b(c.getHost());},l.prototype.distributeHorizontal=function(){this.editor.beginTransaction();var c=this.editor.gv,l=this.selection,b=this.getUnionRect(l);c&&b&&!function(){l.sort(function(l,b){return c.getNodeRect(l).x-c.getNodeRect(b).x;});var f={},n=0;l.forEach(function(l){var b=c.getNodeRect(l);f[l._id]=b,n+=b.width;});var U=(b.width-n)/(l.length-1),$=b.x;l.forEach(function(l){var b=c.getNodeRect(l);l.translate($-b.x,0),$+=b.width+U;});}(),this.editor.endTransaction();},l.prototype.distributeVertical=function(){this.editor.beginTransaction();var c=this.editor.gv,l=this.selection,b=this.getUnionRect(l);c&&b&&!function(){l.sort(function(l,b){return c.getNodeRect(l).y-c.getNodeRect(b).y;});var f={},n=0;l.forEach(function(l){var b=c.getNodeRect(l);f[l._id]=b,n+=b.height;});var U=(b.height-n)/(l.length-1),$=b.y;l.forEach(function(l){var b=c.getNodeRect(l);l.translate(0,$-b.y),$+=b.height+U;});}(),this.editor.endTransaction();},l.prototype.alignLeft=function(){this.editor.beginTransaction();var c=this.editor.gv,l=this.selection,b=this.getUnionRect(l);c&&b&&l.forEach(function(l){var f=c.getNodeRect(l);l.translate(b.x-f.x,0);}),this.editor.endTransaction();},l.prototype.alignHorizontal=function(){this.editor.beginTransaction();var c=this.editor.gv,l=this.selection,b=this.getUnionRect(l);c&&b&&l.forEach(function(l){var f=c.getNodeRect(l);l.translate(b.x+b.width/2-f.x-f.width/2,0);}),this.editor.endTransaction();},l.prototype.alignRight=function(){this.editor.beginTransaction();var c=this.editor.gv,l=this.selection,b=this.getUnionRect(l);c&&b&&l.forEach(function(l){var f=c.getNodeRect(l);l.translate(b.x+b.width-f.x-f.width,0);}),this.editor.endTransaction();},l.prototype.alignTop=function(){this.editor.beginTransaction();var c=this.editor.gv,l=this.selection,b=this.getUnionRect(l);c&&b&&l.forEach(function(l){var f=c.getNodeRect(l);l.translate(0,b.y-f.y);}),this.editor.endTransaction();},l.prototype.alignVertical=function(){this.editor.beginTransaction();var c=this.editor.gv,l=this.selection,b=this.getUnionRect(l);c&&b&&l.forEach(function(l){var f=c.getNodeRect(l);l.translate(0,b.y+b.height/2-f.y-f.height/2);}),this.editor.endTransaction();},l.prototype.alignBottom=function(){this.editor.beginTransaction();var c=this.editor.gv,l=this.selection,b=this.getUnionRect(l);c&&b&&l.forEach(function(l){var f=c.getNodeRect(l);l.translate(0,b.y+b.height-f.y-f.height);}),this.editor.endTransaction();},l.prototype.addSearchItem=function(c){var l=this;this.searchField=new ht.widget.TextField();var b=this.searchField.getElement();b.onkeyup=function(c){B(c)&&(b.value=""),l.editor.filterProperties();},c.push(this.searchField);},l.prototype.addCompactItem=function(c){var l=this,b=oc("editor.filter",function(){return l.editor.inspectorCompact;}),f=function f(){l.editor.inspectorCompact=!l.editor.inspectorCompact;};c.push(Rc(null,n("editor.inspectorcompact"),b,f));},gl(l,[{key:"selection",get:function get(){var c=this,l=[];return this.dataModel&&this.dataModel.sm().each(function(b){b instanceof ht.Node&&(c.hasSelectedGroupParent(b.getParent())||c.hasSelectedHost(b)||l.push(b));}),l;}},{key:"filter",get:function get(){return this.searchField.getElement().value;}}]),l;}(xl);Gl.InspectorTool=Jf;var yf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f.initForm(),f.visible=!1,f.$6$(),f.oopsImageJSON=ht.Default.getImage("editor.oops"),f.oopsImage=ht.Default.toCanvas(f.oopsImageJSON,f.oopsImageJSON.width,f.oopsImageJSON.height,"fill",null,null,null,ht.Default.devicePixelRatio).toDataURL(),f;}return wl(l,c),l.prototype.initForm=function(){var c=this;this.addRow([{id:"content",textArea:{}}],[.1],.1),this.addRow([{id:"url",textField:{editable:!1}},{id:"edit",button:{onClicked:function onClicked(){c.editing=!c.editing;}}},{id:"commit",button:{label:n("editor.commit"),onClicked:function onClicked(){c.currentView.update(c.content,!0),c.editing=!1;}}}],[.1,50,50]),this.getView().style.background=Gl.config.color_pane,this.textArea=this.getViewById("content").getElement(),this.editing=!1;},l.prototype.$67$=function(){var c=this;this.visible&&!this.editing&&(this._updateContentLater||(this._updateContentLater=!0,setTimeout(function(){c.updateContent();},100)));},l.prototype.updateContent=function(){this.visible&&!this.editing&&(this._updateContentLater=!1,this.content=this.currentView?t(this.currentView.content):"");},l.prototype.updateUrl=function(){this.v("url",this.tab&&this.tab.getTag()||"");},l.prototype.$6$=function(c){this.editing=!1,this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.$67$,this),this.dataModel.removeDataPropertyChangeListener(this.$67$,this),this.dataModel.removePropertyChangeListener(this.$67$,this)),c?(this.currentView=c.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.$67$,this),this.dataModel.addDataPropertyChangeListener(this.$67$,this),this.dataModel.addPropertyChangeListener(this.$67$,this),this.setDisabled(!1)):(this.currentView=null,this.dataModel=null,this.setDisabled(!0)),this.tab=c,this.updateUrl(),this.$67$();},gl(l,[{key:"editing",get:function get(){return this._editing;},set:function set(c){this._editing!==c&&(this._editing=c,this.getViewById("edit").setLabel(n(c?"editor.cancel":"editor.edit")),this.getViewById("commit").setDisabled(!c),this.getViewById("content").setEditable(c),c||this.$67$());}},{key:"visible",get:function get(){return this._visible;},set:function set(c){this._visible!==c&&(this._visible=c,c?this.updateContent():this.editing||(this.content=""));}},{key:"content",get:function get(){return this.v("content");},set:function set(c){if(c&&c.length>Gl.config.maxStringLength){c="Oops, tooooo long!",this.setDisabled(!0,this.oopsImage);var l=this.oopsImageJSON.width,b=this.oopsImageJSON.height;this.getDisabledDiv().style.backgroundSize=l+"px "+b+"px";}else this.setDisabled(!1);this.v("content",c);}}]),l;}(xl),mf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f.centerPane=new Qb(),f.setCenterView(f.centerPane),f.controlPane=new xl(),f.controlPane.addRow([{id:"filter",textField:{}}],[.1,ht.Default.isTouchable?32:18]),f.setBottomView(f.controlPane),f.setBottomHeight(ht.Default.widgetRowHeight+8),f.input=f.controlPane.getViewById("filter").getElement(),f.input.onkeyup=function(c){f.list&&(B(c)&&(f.input.value=""),f.list.setFilter(f.input.value));},f;}return wl(l,c),l.prototype.$6$=function(c){this.tab=c,this.list=c?c.getView().list:null,this.controlPane.v("filter",this.list?this.list.getFilter()||"":"");},gl(l,[{key:"list",get:function get(){return this.centerPane.getCenterView();},set:function set(c){this.centerPane.setCenterView(c);}}]),l;}(Qb),Qf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f._layerNames=[],f.setDisabled(!0),f.tableModel=new ht.DataModel(),f.tablePane=new jb(f.tableModel),f.tableView=f.tablePane.getTableView(),f.tableView.setEditable(!0),f.tablePane.getView().style.border=Gl.config.color_line+" solid 1px",f.tablePane.addColumns([f.$74$("name",n("editor.name"),100),f.$74$("visible",n("editor.visible"),50),f.$74$("selectable",n("editor.selectable"),50),f.$74$("movable",n("editor.movable"),50),f.$74$("editable",n("editor.editable"),50)]),f.addRow([f.tablePane],[.1],.1),f.addRow([{button:{icon:"editor.add",toolTip:n("editor.add"),onClicked:function onClicked(){f.addLayer(ht.Data.prototype._layer,!0,!0,!0,!0),f.updateLayers();}}},{button:{icon:"editor.delete",toolTip:n("editor.delete"),onClicked:function onClicked(){f.tableView.sm().size()&&(f.tableView.removeSelection(),f.updateLayers());}}},null,{button:{icon:"editor.top",toolTip:n("editor.bringtofront"),onClicked:function onClicked(){f.tableView.sm().size()&&(f.tableModel.moveSelectionToTop(),f.updateLayers());}}},{button:{icon:"editor.up",toolTip:n("editor.bringforward"),onClicked:function onClicked(){f.tableView.sm().size()&&(f.tableModel.moveSelectionUp(),f.updateLayers());}}},{button:{icon:"editor.down",toolTip:n("editor.sendbackward"),onClicked:function onClicked(){f.tableView.sm().size()&&(f.tableModel.moveSelectionDown(),f.updateLayers());}}},{button:{icon:"editor.bottom",toolTip:n("editor.sendtoback"),onClicked:function onClicked(){f.tableView.sm().size()&&(f.tableModel.moveSelectionToBottom(),f.updateLayers());}}}],[20,20,.1,20,20,20,20]),f;}return wl(l,c),l.prototype.addLayer=function(c,l,b,f,n){l!==!1&&(l=!0),b!==!1&&(b=!0),f!==!1&&(f=!0),n!==!1&&(n=!0);var U=new ht.Data();U.a({name:c,visible:l,selectable:b,movable:f,editable:n}),this.tableModel.add(U);},l.prototype.$74$=function(c,l,b){var f=this;return{name:c,tag:c,accessType:"attr",width:b,displayName:l,align:"center",editable:!0,setValue:function setValue(l,b,n){n!==l.a(c)&&(l.a(c,n),f.updateLayers());}};},l.prototype.$6$=function(c){this.dataModel&&this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this);var l=this.editor.displayView;l?(this.dataModel=l.dm,this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.setDisabled(!1)):(this.dataModel=null,this.setDisabled(!0)),this.updateTable();},l.prototype.handleDataModelPropertyChange=function(c){var l=this;if("layers"===c.property){this.updateTable(),this._layerNames=[];var b=this.dataModel.getLayers();b&&b.forEach(function(c){l._layerNames.push(Dc(c)?c.name:c);}),this.editor.inspector&&this.editor.inspector.$35$();}},l.prototype.updateLayers=function(){if(this.dataModel){var c=this.tableModel.size()?[]:null;c&&this.tableModel.getRoots().forEach(function(l){c.push({name:l.a("name"),visible:l.a("visible"),selectable:l.a("selectable"),movable:l.a("movable"),editable:l.a("editable")});}),this.isSettingLayers=!0,this.dataModel.setLayers(c),this.isSettingLayers=!1;}},l.prototype.updateTable=function(){var c=this;if(!this.isSettingLayers&&(this.tableModel.clear(),this.dataModel)){var l=this.dataModel.getLayers();l&&l.forEach(function(l){Dc(l)?c.addLayer(l.name,l.visible,l.selectable,l.movable,l.editable):c.addLayer(l,!0,!0,!0,!0);});}},gl(l,[{key:"currentLayer",get:function get(){var c=this.tableModel.sm().ld();if(c)return c.a("name");var l=this.tableModel.getRoots();return l.size()?(c=l.get(l.size()-1),c.a("name")):ht.Data.prototype._layer;}},{key:"layerNames",get:function get(){return this._layerNames;}}]),l;}(xl),Bf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f.editor.menus.push(f),f.setItems([{id:"file",label:n("editor.file"),items:[f.createItem("newDisplayView",n("editor.newdisplayview"),"newDisplayView",Gl.config.displaysVisible),f.createItem("newSymbolView",n("editor.newsymbolview"),"newSymbolView",Gl.config.symbolsVisible),f.createItem("newComponent",n("editor.newcomponent"),"newComponent",Gl.config.componentsVisible)]},{id:"edit",label:n("editor.edit"),items:[f.createItem("undo",n("editor.undo"),"undo"),f.createItem("redo",n("editor.redo"),"redo"),{id:"afterRedo",separator:!0},f.createItem("copy",n("editor.copy"),"copy"),f.createItem("paste",n("editor.paste"),"paste")]}]),f;}return wl(l,c),l.prototype.createItem=function(c,l,b){var f=this,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],U={id:c,label:l,visible:n};return b&&(U.action=function(){f.editor[b]();}),U;},l;}(Bb),pf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f.initMenu(),f.$69$(),f.enableToolTip(),f;}return wl(l,c),l.prototype.$6$=function(){this.iv();},l.prototype.initMenu=function(){var c=this;this.editor.mainMenu=new Bf(this.editor);var l=function l(_l2){var b=c.editor.mainMenu;b.isShowing()&&!b.getView().contains(_l2.target)&&b.hide();};window.addEventListener("touchstart",l,!1),window.addEventListener("mousedown",l,!1);},l.prototype.$69$=function(){var c=this,l=function l(_l3){return function(b){"node"===_l3||"subgraph"===_l3||("edge"===_l3?b.s({"edge.width":1,"edge.color":Gl.config.color_data_border}):"group"===_l3?b.setExpanded(!0):"arc"===_l3?b.s({shape:_l3,"shape.background":Gl.config.color_data_background,"shape.border.width":1,"shape.border.color":Gl.config.color_data_border,"shape.arc.from":0,"shape.arc.to":4.1888}):"shape"===_l3?b.s({"shape.background":null,"shape.border.color":Gl.config.color_data_border,"shape.border.width":1}):"text"===_l3?b.s("text",n("editor.text")):b.s({shape:_l3,"shape.background":Gl.config.color_data_background,"shape.border.width":1,"shape.border.color":Gl.config.color_data_border})),c.editor.fireEvent("dataInited",{type:_l3,data:b,displayView:c.editor.displayView});};},b=[];b.push(this.$68$()),b.push(this.createEditItem()),b.push(this.editor.createDisplayItem("Shape",n("editor.shape"),"editor.display.shape",ht.Shape,l("shape"))),b.push(this.editor.createDisplayItem("Oval",n("editor.oval"),"editor.display.oval",ht.Node,l("oval"))),b.push(this.editor.createDisplayItem("RoundRect",n("editor.roundrect"),"editor.display.roundrect",ht.Node,l("roundRect"))),b.push(this.editor.createDisplayItem("Rect",n("editor.rect"),"editor.display.rect",ht.Node,l("rect"))),b.push(this.editor.createDisplayItem("Polygon",n("editor.polygon"),"editor.display.polygon",ht.Node,l("polygon"))),b.push(this.editor.createDisplayItem("Triangle",n("editor.triangle"),"editor.display.triangle",ht.Node,l("triangle"))),b.push(this.editor.createDisplayItem("Star",n("editor.star"),"editor.display.star",ht.Node,l("star"))),b.push(this.editor.createDisplayItem("Arc",n("editor.arc"),"editor.display.arc",ht.Node,l("arc"))),b.push(this.editor.createDisplayItem("Text",n("editor.text"),"editor.display.text",ht.Text,l("text"))),b.push(this.editor.createDisplayItem("Node",n("editor.node"),"editor.display.node",ht.Node,l("node"))),b.push(this.editor.createDisplayItem("Group",n("editor.group"),"editor.display.group",ht.Group,l("group"))),b.push(this.editor.createDisplayItem("SubGraph",n("editor.subgraph"),"editor.display.subgraph",ht.SubGraph,l("subgraph"))),b.push(this.editor.createDisplayItem("Edge",n("editor.edge"),"editor.display.edge",ht.Edge,l("edge"))),b.push(this.editor.createSymbolItem("shape",n("editor.shape"),"editor.symbol.shape","shape")),b.push(this.editor.createSymbolItem("oval",n("editor.oval"),"editor.symbol.oval","oval")),b.push(this.editor.createSymbolItem("roundRect",n("editor.roundrect"),"editor.symbol.roundrect","roundRect")),b.push(this.editor.createSymbolItem("rect",n("editor.rect"),"editor.symbol.rect","rect")),b.push(this.editor.createSymbolItem("polygon",n("editor.polygon"),"editor.symbol.polygon","polygon")),b.push(this.editor.createSymbolItem("triangle",n("editor.triangle"),"editor.symbol.triangle","triangle")),b.push(this.editor.createSymbolItem("star",n("editor.star"),"editor.symbol.star","star")),b.push(this.editor.createSymbolItem("arc",n("editor.arc"),"editor.symbol.arc","arc")),b.push(this.editor.createSymbolItem("text",n("editor.text"),"editor.symbol.text","text")),b.push(this.editor.createSymbolItem("border",n("editor.border"),"editor.symbol.border","border")),b.push(this.editor.createSymbolItem("piechart",n("editor.piechart"),"editor.symbol.piechart","pieChart")),b.push(this.editor.createSymbolItem("onedimensionalcolumnchart",n("editor.onedimensionalcolumnchart"),"editor.symbol.onedimensionalcolumnchart","oneDimensionalColumnChart")),b.push(this.editor.createSymbolItem("columnchart",n("editor.columnchart"),"editor.symbol.columnchart","columnChart")),b.push(this.editor.createSymbolItem("linechart",n("editor.linechart"),"editor.symbol.linechart","lineChart")),this.setItems(b);},l.prototype.$68$=function(){var c=this,l=Mc("menu",n("editor.menu"),"editor.menu");return l.action=function(l,b,f){c.editor.mainMenu.isShowing()||(c.editor.mainMenu.showOnView(c,4,20),f.preventDefault(),f.stopPropagation());},l;},l.prototype.createEditItem=function(){var c=this,l=function l(){return c.editor.currentView&&"edit"===c.editor.currentView.$4$();},b=Mc("edit",n("editor.edit"),"editor.edit",l);return b.visible=function(){return!!c.editor.currentView;},b.action=function(){var l=c.editor.currentView;l&&l.$5$("edit");},b;},l;}(Xb),Zf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f.$69$(),f.enableToolTip(),f.setStickToRight(!0),f;}return wl(l,c),l.prototype.handlePropertyChange=function(c){"zoom"===c.property&&this.$70$();},l.prototype.$70$=function(){this.label.innerHTML=this.graphView?parseInt(100*this.graphView.getZoom())+"%":"";},l.prototype.$6$=function(c){this.graphView&&this.graphView.removePropertyChangeListener(this.handlePropertyChange,this),c?(this.graphView=c.getView().graphView,this.graphView.addPropertyChangeListener(this.handlePropertyChange,this)):this.graphView=null,this.iv(),this.$70$();},l.prototype.$69$=function(){var c=this,l=void 0,b=function b(){return!!c.graphView;},f=[];l=Mc("undo",n("editor.undo"),"editor.undo"),l.action=function(){c.editor.undo();},l.visible=b,f.push(l),l=Mc("redo",n("editor.redo"),"editor.redo"),l.action=function(){c.editor.redo();},l.visible=b,f.push(l),f.push({separator:!0,visible:b}),l=Mc("rulers",n("editor.showrulers"),"editor.rulers",function(){return c.editor.isRulerEnabled();}),l.action=function(){c.editor.toggleRulerEnabled();},l.visible=b,f.push(l),l=Mc("grid",n("editor.showgrid"),"editor.grid",function(){return c.editor.isGridEnabled();}),l.action=function(){c.editor.toggleGridEnabled();},l.visible=b,f.push(l),f.push({separator:!0,visible:b}),l=Mc("save",n("editor.save"),"editor.save"),l.action=function(){c.editor.save();},l.visible=b,f.push(l),l=Mc("preview",n("editor.preview"),"editor.preview"),l.action=function(){c.editor.preview();},l.visible=b,f.push(l),l=Mc("reload",n("editor.reload"),"editor.reload"),l.action=function(){c.editor.reload();},l.visible=b,f.push(l),f.push({separator:!0,visible:b}),l=Mc("zoomOut",n("editor.zoomout"),"editor.zoomout"),l.action=function(){c.editor.zoomOut();},l.visible=b,f.push(l),f.push(this.createZoomItem(b)),l=Mc("zoomIn",n("editor.zoomin"),"editor.zoomin"),l.action=function(){c.editor.zoomIn();},l.visible=b,f.push(l),l=Mc("zoomToFit",n("editor.zoomtofit"),"editor.zoomtofit"),l.action=function(){c.editor.zoomToFit();},l.visible=b,f.push(l),f.push({separator:!0,visible:b}),l=Mc("toggleLeft",n("editor.toggleleft"),"editor.toggleleft"),l.action=function(){c.editor.toggleLeft();},f.push(l),l=Mc("toggleBoth",n("editor.toggleboth"),"editor.toggleboth"),l.action=function(){c.editor.toggleBoth();},f.push(l),l=Mc("toggleRight",n("editor.toggleright"),"editor.toggleright"),l.action=function(){c.editor.toggleRight();},f.push(l),this.setItems(f);},l.prototype.createZoomItem=function(c){var l=this,b=this.label=ht.Default.createDiv(!0);b.style.font=this.getLabelFont(),b.style.color=this.getLabelColor(),b.style.cursor="ew-resize",b.style.width="40px",b.style.height=ht.Default.widgetRowHeight+"px",b.style.lineHeight=ht.Default.widgetRowHeight+"px",b.style.whiteSpace="nowrap",b.style.textAlign="center";var f=function f(c){c.preventDefault();var b=l.editor.gv;if(b){Z(c)&&l.editor.zoomReset();var f=b.getZoom(),n=j(c).x,U=function U(c){c.preventDefault();var l=j(c).x-n;b.setZoom(f*(1+.005*l));};window.addEventListener("mousemove",U,!1),window.addEventListener("touchmove",U,!1);var $=function $(c){c.preventDefault(),window.removeEventListener("mousemove",U,!1),window.removeEventListener("touchmove",U,!1),window.removeEventListener("mouseup",$,!1),window.removeEventListener("touchend",$,!1);};window.addEventListener("mouseup",$,!1),window.addEventListener("touchend",$,!1);}};return b.addEventListener("mousedown",f,!1),b.addEventListener("touchstart",f,!1),{id:"zoom",unfocusable:!0,element:b,visible:c};},l;}(Xb),af=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b,f._errorMsg=null,f.$72$(),f.$71$(),f.$73$(),f.splitView=new ab(f.inspectorPane,f.graphView,"v",-200),f.mainSplitView=new ab(f.funcPane,f.splitView,"h",-360);var U=[];return U.push({label:n("editor.refresh"),action:function action(){f.refresh();}}),U.push({label:n("editor.ok"),action:function action(){f.ok();}}),U.push({label:n("editor.cancel"),action:function action(){f.hide();}}),f.setConfig({closable:!0,draggable:!0,width:Gl.config.componentViewSize.width,height:Gl.config.componentViewSize.height,contentPadding:0,resizeMode:"wh",maximizable:!0,content:f.mainSplitView,buttons:U,buttonsAlign:"right"}),f;}return wl(l,c),l.prototype.$49$=function(){this.hide();},l.prototype.$48$=function(){this.ok();},l.prototype.$72$=function(){var c=this;ht.Default.setCompType("_editingCompType_",{func:function func(){}}),this.node=new ht.Node(),this.node.setImage({width:100,height:100,fitSize:!0,comps:[{type:"_editingCompType_"}]}),this.graphView=new pb(),this.graphView.dm().add(this.node),this.graphView.sm().ss(this.node),this.graphView.mi(function(l){"doubleClickData"!==l.kind&&"doubleClickBackground"!==l.kind||c.graphView.fitContent(Gl.config.animate,Gl.config.fitPadding);});var l=this;ht.Default.drawCompType=function(c,b,f,U,$,H){var L="_editingCompType_"===U.type;try{L&&l.beforeDrawCompType(b),c(b,f,U,$,H),L&&l.afterDrawCompType(b);}catch(c){L&&(l.afterDrawCompType(b),l._errorMsg=n("editor.compfunctionerror")),console.error(c.stack||c);}};},l.prototype.beforeDrawCompType=function(c){var l=this._restoreFlag;l||(l=this._restoreFlag=c.createLinearGradient(0,0,10,10),l.addColorStop(0,"black"),l.addColorStop(0,"black")),c.fillStyle=l,c.save(),c.fillStyle="#000000";},l.prototype.afterDrawCompType=function(c){if(c.restore(),c.fillStyle!==this._restoreFlag){for(var l=0,b=20;c.fillStyle!==this._restoreFlag&&(c.restore(),l++,!(l>=b));){}c.fillStyle="black",this._errorMsg=n("editor.complosssaveorrestore");}else this._errorMsg=null;},l.prototype.$73$=function(){this.funcPane=new xl(),this.funcPane.addRow([{id:"head",element:"function(g, rect, comp, data, view) {"}],[.1]);var c=ht.Default.getClass(Gl.config.codeEditorClass);this.funcPane.addRow([{id:"func",element:new c()}],[.1],.1),this.funcPane.addRow(["}"],[.1]);},l.prototype.$71$=function(){var c=Gl.config.indent;this.inspectorPane=new xl(),this.inspectorPane.addRow([n("editor.name"),{id:"name",textField:{}}],[c,.1]),this.inspectorPane.addRow([n("editor.path"),{id:"path",textField:{editable:!1}}],[c,.1]),this.inspectorPane.addRow([n("editor.snapshoturl"),{id:"snapshotURL",textField:{}}],[c,.1]),this.inspectorPane.addRow([n("editor.width"),{id:"width",textField:{}},n("editor.height"),{id:"height",textField:{}}],[c,.1,Gl.config.indent2,.1]),this.inspectorPane.addLine(),this.createTable();},l.prototype.$74$=function(c,l,b,f){return{name:c,tag:c,accessType:"attr",width:b,displayName:l,align:"center",enum:f,editable:!0};},l.prototype.createTable=function(){var c=this;this.tableModel=new ht.DataModel(),this.tablePane=new jb(this.tableModel),this.tableView=this.tablePane.getTableView(),this.tableView.setEditable(!0),this.tablePane.getView().style.border=Gl.config.color_line+" solid 1px",this.tablePane.addColumns([this.$74$("property",n("editor.property"),90),this.$74$("valueType",n("editor.valuetype"),80,{values:Gl.consts.valueTypes,labels:Gl.consts.valueTypeLabels}),this.$74$("defaultValue",n("editor.defaultvalue"),90),this.$74$("name",n("editor.name"),90),this.$74$("description",n("editor.description"),120)]),this.$75$(),this.inspectorPane.addRow([this.tablePane],[.1],.1),this.inspectorPane.addRow([{button:{label:n("editor.add"),onClicked:function onClicked(){var l=new ht.Data();l.a({property:"property",valueType:"String"}),c.tableModel.add(l);}}},{button:{label:n("editor.delete"),onClicked:function onClicked(){c.tableView.removeSelection();}}},null],[50,50,.1]);},l.prototype.$75$=function(){var c=this,l=this.tableView.getColumnModel().getDataByTag("defaultValue");l.getEnumValues=function(c){var l=c?Gl.config.valueTypes[c.a("valueType")]:null;return l&&"enum"===l.type?l.values:null;},l.getEnumLabels=function(c){var l=c?Gl.config.valueTypes[c.a("valueType")]:null;return l&&"enum"===l.type?l.labels:null;},l.getEnumIcons=function(c){var l=c?Gl.config.valueTypes[c.a("valueType")]:null;return l&&"enum"===l.type?l.icons:null;},l.getEnumDropDownWidth=function(c){var l=c?Gl.config.valueTypes[c.a("valueType")]:null;return l&&"enum"===l.type?l.dropDownWidth:null;},l.getValueType=function(c){var l=c?Gl.config.valueTypes[c.a("valueType")]:null;return l?l.type:null;},l.isCellEditable=function(l,b,f,U){var $=l?Gl.config.valueTypes[l.a("valueType")]:null,H=$?$.type:null;if("function"===H){var L=n("editor.function")+" "+(l.a("property")||"");return c.editor.functionView.open(l.a("defaultValue"),function(c){l.a("defaultValue",c);},L),!1;}if("multiline"===H)return c.editor.textView.open(l.a("defaultValue"),function(c){l.a("defaultValue",c);},l.a("property")||"&nbsp;"),!1;if("font"===H)return c.editor.fontView.open(l.a("defaultValue"),function(c){l.a("defaultValue",c);},l.a("property")||"&nbsp;"),!1;if("object"===H||"custom"===H||"stringArray"===H||"objectArray"===H||"numberArray"===H||"colorArray"===H){var e=n("editor.object")+" "+(l.a("property")||"");return c.editor.objectView.open(l.a("defaultValue"),function(c){l.a("defaultValue",c);},e),!1;}return!0;};},l.prototype.open=function(c){var l=this;this.fileNode=c,c?K(c.url,function(b){l.update(c.url,c.path,W(c.getName()),b);}):this.update(void 0,this.editor.components.currentDir,n("editor.untitled"));},l.prototype.update=function(c,l,b,f){if(f){if(f=F(f),this.setTitle(n("editor.editcomponent")),this.node.setWidth(f.width||100),this.node.setHeight(f.height||100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",f.snapshotURL||""),this.inspectorPane.getViewById("name").setEditable(!1),this.inspectorPane.v("name",b||""),this.inspectorPane.v("path",l||""),this.funcPane.v("func",e(f.func)),this.tableModel.clear(),f.properties)for(var U in f.properties){var $=f.properties[U],H=new ht.Data();H.a({property:U,valueType:$.valueType,defaultValue:$.defaultValue,name:$.name,description:$.description}),this.tableModel.add(H);}this.refresh(),this.show(),this.url=c,this.editor.fireEvent("componentViewOpened",{componentView:this,url:c,json:f});}else this.setTitle(n("editor.newcomponent")),this.node.setWidth(100),this.node.setHeight(100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",""),this.inspectorPane.getViewById("name").setEditable(!0),this.inspectorPane.v("name",b),this.inspectorPane.v("path",l),this.funcPane.v("func",""),this.tableModel.clear(),this.refresh(),this.show(),this.url=c,this.editor.fireEvent("componentViewCreated",{componentView:this});},l.prototype.$76$=function(){var c=this.funcPane.v("head"),l=this.funcPane.v("func").trim();return I(c+"\n"+l+"\n}");},l.prototype.$77$=function(){var c={};return this.tableModel.each(function(l){c[l.a("property")]={valueType:l.a("valueType"),defaultValue:l.a("defaultValue"),name:l.a("name"),description:l.a("description")};}),c;},l.prototype.refresh=function(c){ht.Default.setCompType("_editingCompType_",{func:this.$76$(),properties:this.$77$()}),this.node.setWidth(parseFloat(this.inspectorPane.v("width"))),this.node.setHeight(parseFloat(this.inspectorPane.v("height"))),this.node.iv(),this.graphView.fitContent(Gl.config.animate,Gl.config.fitPadding);var l=function l(b){"validate"===b.kind&&(c&&c(!this._errorMsg),this._errorMsg&&this.editor.showMessage(this._errorMsg,lb),this.graphView.removeViewListener(l,this));};this.graphView.addViewListener(l,this);},l.prototype.ok=function(){var c=this,l=this.inspectorPane.v("name").trim();if(!l)return void sc(null,n("editor.inputempty"),function(){});if(l.length>Gl.config.maxFileNameLength)return void sc(null,n("editor.inputmax"),function(){});if(Gl.config.checkFileName&&!(l=Gl.config.checkFileName(l)))return void sc(null,n("editor.invalidinput"),function(){});Uc(l)&&(l=W(l));var b=this.inspectorPane.v("path"),f=this.content,U={componentView:this,url:this.url||b+"/"+l+".json",json:t(f)};this.editor.fireEvent("componentViewSaving",U),U.preventDefault||(U={path:U.url,content:U.json},this.refresh(function(n){n&&c.editor.request("upload",U,function(n){n===!0&&(c.refresh(),c.graphView.sm().cs(),c.graphView.validate(),c.editor.saveImage(f.snapshotURL||c.graphView,b+"/"+l+".png"),c.hide(),c.editor.selectFileNode(U.path),U={componentView:c,url:U.path,json:U.content},c.editor.fireEvent("componentViewSaved",U));});}));},gl(l,[{key:"content",get:function get(){var c={modified:new Date().toString(),width:parseFloat(this.inspectorPane.v("width")),height:parseFloat(this.inspectorPane.v("height")),snapshotURL:this.inspectorPane.v("snapshotURL"),func:this.$76$()};return this.tableModel.size()&&(c.properties=this.$77$()),c;}}]),l;}(Kl),jf=460,uf=230,Xf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b;var U=[];U.push(n("editor.binding")),U.push({id:"compProperty",textField:{editable:!1}}),U.push({element:n("editor.type"),align:"right"}),U.push({id:"type",comboBox:{values:["attr","func"],onValueChanged:function onValueChanged(c,l){var b="func"===l,n=b?ht.Default.labelColor:Gl.config.color_disabled;f.getViewById("func").setEditable(b),f.getItemById("head").color=n,f.getItemById("end").color=n,f.getViewById("property").setDisabled(b),b&&f.getViewById("property").setValue(""),f.iv();}}}),U.push({element:n("editor.property"),align:"right"});var $={id:"property"};Gl.config.dataBindingsForSymbol.getComboBoxValues?$.comboBox={editable:!!Gl.config.dataBindingsForSymbol.comboBoxEditable}:$.textField={},U.push($);var H=[50,90,40,60,60,.1];if(Gl.config.dataBindingsForSymbol.onButtonClicked){var L=Rc("...",void 0,void 0,function(){f.smartClose=!1,Gl.config.dataBindingsForSymbol.onButtonClicked(f,f.v("compProperty"));});U.push(L),H.push(20);}f.addRow(U,H),f.addLine(),f.addRow([{id:"head",element:""}],[.1]);var e=ht.Default.getClass(Gl.config.codeEditorClass);f.addRow([{id:"func",element:new e()}],[.1],.1),f.addRow([{id:"end",element:"}"},{button:{label:n("editor.ok"),onClicked:function onClicked(){f.hide(!0);}}},{button:{label:n("editor.cancel"),onClicked:function onClicked(){f.hide();}}}],[.1,50,50]),f.setWidth(jf),f.setHeight(uf),f.getView().className="ht-editor-databinding",f.getView().style.background=Gl.config.color_pane,f.getView().style.border=Gl.config.color_pane_dark+" solid 1px",f.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,f.getView().style.overflow="visible";var I=f.handleWindowClick.bind(f);return window.addEventListener("mousedown",I,!1),window.addEventListener("touchstart",I,!1),f;}return wl(l,c),l.prototype.handleWindowClick=function(c){if(this.smartClose&&this.getView().parentNode&&!this.button.getView().contains(c.target)){var l=this.getViewById("type");if(!l.getListView().getView().contains(c.target)){if(l=this.getViewById("property"),l instanceof ht.widget.ComboBox){if(l.getListView().getView().contains(c.target))return;if(l.getInput()&&l.getInput().contains(c.target))return;}this.getView().contains(c.target)||this.hide();}}},l.prototype.toggle=function(c,l,b,f,n,U){this.getView().parentNode?this.hide():this.show(c,l,b,f,n,U);},l.prototype.show=function(c,l,b,f,n,U){var $=this;Gl.config.dataBindingsForSymbol.getComboBoxValues?Gl.config.dataBindingsForSymbol.getComboBoxValues(function(H){var L=$.getViewById("property");L.setValues(H),$.showImpl(c,l,b,f,n,U);}):this.showImpl(c,l,b,f,n,U);},l.prototype.showImpl=function(c,l,b,f,n,U){if(!this.getView().parentNode){this.smartClose=!0;var $=c.getView().getBoundingClientRect(),H=(this.getView().style,A());ht.Default.appendToScreen(this),$.bottom+uf+1>H.height?this.getView().style.top=H.top+$.top-uf-1+"px":this.getView().style.top=H.top+$.bottom+1+"px",this.getView().style.left=H.left+$.right-jf+"px",this.iv(),this.button=c,this.name=l,this.inspector=f,this.setter=U,this.v("compProperty",b||l);var L=void 0,I=!1;this.inspector.global?"clip"===l?(L=n?n():this.inspector.dataModel.a("clip"),this.v("head","function(g, width, height, data, view, image) {"),I=!0):(L=n?n():this.inspector.dataModel.a(l+"_func"),this.v("head","function(data, view) {")):(L=n?n():this.inspector.data.a(l),this.inspector.data instanceof If&&"type"===l?(this.v("head","function(g, rect, comp, data, view) {"),I=!0):this.v("head","function(data, view) {"));Yc(L)?(bb.test(L)?(this.v("type","attr"),this.v("property",L.slice(5))):(this.v("type","attr"),this.v("property",L)),this.v("func","")):Tc(L)?(this.v("type","func"),this.v("property",""),this.v("func",e(L))):(this.v("type","attr"),this.v("property",""),this.v("func","")),I?(this.v("type","func"),this.v("property",""),this.getViewById("type").setDisabled(!0)):this.getViewById("type").setDisabled(!1);}},l.prototype.hide=function(){var c=this,l=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(k(this.getView()),l)){var b=this.v("type"),f=this.v("property"),n=void 0;if("func"===b){var U=this.v("func").trim();(U||this.inspector.data instanceof If&&"type"===this.name)&&(n=I(this.v("head")+"\n"+U+"\n}"));}else f&&"attr"===b&&(n="attr@"+f);this.setter?this.setter(n):this.inspector.global?"clip"===this.name?this.inspector.dataModel.a("clip",n):this.inspector.dataModel.a(this.name+"_func",n):this.inspector.setValue(function(l,b){l.a(c.name,b);},n);}},l;}(xl),Af=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b,f.createTabView();var U=[];return U.push({label:n("editor.ok"),action:function action(){f.ok();}}),U.push({label:n("editor.cancel"),action:function action(){f.hide();}}),f.setConfig({title:n("editor.eventhandlers"),closable:!0,draggable:!0,width:Gl.config.eventViewSize.width,height:Gl.config.eventViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:f.tabView,buttons:U,buttonsAlign:"right"}),f;}return wl(l,c),l.prototype.$49$=function(){this.hide();},l.prototype.$48$=function(){this.ok();},l.prototype.ok=function(){var c=this;this.target&&zl.forEach(function(l){var b=c[l+"FormPane"],f=b.v("body").trim();"data"===c.inspectorType?!function(){var b=f?I("function(event, data, view) {\n"+f+"\n}"):void 0;c.target.forEach(function(c){c.s(l,b);});}():!function(){var b=f?I("function(event, data, view, point, width, height) {\n"+f+"\n}"):void 0;c.target.forEach(function(c){c.a(l,b);});}();}),this.hide();},l.prototype.createTabView=function(){var c=this,l=this.tabView=new ub(),b=ht.Default.getClass(Gl.config.codeEditorClass);zl.forEach(function(f){var U=c[f+"FormPane"]=new xl();U.addRow([{id:"head",element:""}],[.1]),U.addRow([{id:"body",element:new b()}],[.1],.1),U.addRow(["}"],[.1]),c[f+"Tab"]=l.add(n("editor.event."+f.toLowerCase()),U);}),l.getTabModel().sm().ss(l.getTabModel().getDatas().get(0));},l.prototype.open=function(c,l){var b=this;c&&c.length&&(this.target=c,this.inspectorType=l,zl.forEach(function(f){var n=b[f+"FormPane"];"data"===l?(n.v("head",f+": function(event, data, view) {"),n.v("body",e(c[c.length-1].s(f)))):(n.v("head",f+": function(event, data, view, point, width, height) {"),n.v("body",e(c[c.length-1].a(f))));}),this.show());},l;}(Kl),vf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b,f.formPane=new xl();var U=ht.Default.getClass(Gl.config.codeEditorClass),$=f.raws=[],H=f.formPane.addRow([{id:"head",element:"function() {"}],[.1]);$.push(H),H=f.formPane.addRow([{id:"function",element:new U()}],[.1],.1),$.push(H),H=f.formPane.addRow(["}"],[.1]),$.push(H);var L=[];return L.push({label:n("editor.ok"),action:function action(){f.ok();}}),L.push({label:n("editor.cancel"),action:function action(){f.hide();}}),f.setConfig({title:n("editor.function"),closable:!0,draggable:!0,width:Gl.config.functionViewSize.width,height:Gl.config.functionViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:f.formPane,buttons:L,buttonsAlign:"right"}),f;}return wl(l,c),l.prototype.$49$=function(){this.hide();},l.prototype.$48$=function(){this.ok();},l.prototype.parse=function(c){if(c){var l=this.getFunctionHead();return c=c.trim(),l?c=""+l+c+"}":c.startsWith("function")||(c="function() {\n"+c+"\n}"),I(c);}},l.prototype.ok=function(){this.setValue&&this.setValue(this.parse(this.formPane.v("function"))),this.hide();},l.prototype.setFormRows=function(){var c=this.formPane,l=this.raws,b=this._argList;this._argList?c._rows=l:c._rows=[l[1]],c.iv(),b&&c.v("head",this.getFunctionHead());},l.prototype.getFunctionHead=function(){var c=this._argList;if(c)return"function("+(ht.Default.isArray(c)?c.join(", "):c)+") {";},l.prototype.stringifyFunction=function(c){var l=L(c);if(this._argList){var b=l.indexOf("{"),f=l.lastIndexOf("}");l=l.substring(b+1,f);}return l;},l.prototype.open=function(c,l,b,f){this.setValue=l,this._argList=f,this.setTitle(b),this.setFormRows(),this.formPane.v("function",this.stringifyFunction(c)),this.show();},l;}(Kl);Gl.FunctionView=vf;var Nf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b;var U=ht.Default.getClass(Gl.config.codeEditorClass);f.formPane=new xl(),f.formPane.addRow([{id:"object",element:new U()}],[.1],.1);var $=[];return $.push({label:n("editor.ok"),action:function action(){f.ok();}}),$.push({label:n("editor.cancel"),action:function action(){f.hide();}}),f.setConfig({title:n("editor.object"),closable:!0,draggable:!0,width:Gl.config.objectViewSize.width,height:Gl.config.objectViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:f.formPane,buttons:$,buttonsAlign:"right"}),f;}return wl(l,c),l.prototype.$49$=function(){this.hide();},l.prototype.$48$=function(){this.ok();},l.prototype.ok=function(){if(this.setValue){var c=this.formPane.v("object").trim(),l=new Function("return "+c);c=l(),this.setValue(c);}this.hide();},l.prototype.open=function(c,l,b){if(this.setValue=l,this.setTitle(b),c=this.stringify(c,4)){this._funcMap;for(var f in this._funcMap){c=c.replace('"'+f+'"',L(this._funcMap[f]));}}this.formPane.v("object",c),this.show();},l.prototype.stringify=function(c,l){var b=this,f=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime();},this._funcMap={};var n=JSON.stringify(c,function(c,l){if("function"==typeof l){var f=Math.random().toString().substring(3,16)+Date.now();return b._funcMap[f]=l,f;}return l;},null==l?2:l);return Date.prototype.toJSON=f,n;},l;}(Kl);Gl.ObjectView=Nf;var hf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b,f.formPane=new xl(),f.formPane.addRow([{id:"text",textArea:{}}],[.1],.1);var U=[];return U.push({label:n("editor.ok"),action:function action(){f.ok();}}),U.push({label:n("editor.cancel"),action:function action(){f.hide();}}),f.setConfig({closable:!0,draggable:!0,width:Gl.config.textViewSize.width,height:Gl.config.textViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:f.formPane,buttons:U,buttonsAlign:"right"}),f;}return wl(l,c),l.prototype.$49$=function(){this.hide();},l.prototype.$48$=function(){this.ok();},l.prototype.ok=function(){this.setValue&&this.setValue(this.formPane.v("text")),this.hide();},l.prototype.open=function(c,l,b){this.setValue=l,this.setTitle(b),this.formPane.v("text",c),this.show();},l;}(Kl),Cf=function(){function c(){Vl(this,c);}return c.prototype.init=function(){var c=this.baseFonts=["monospace","sans-serif","serif"],l=this.testString="mmmmmmmmmmlli",b=this.testSize="72px",f=this.h=document.getElementsByTagName("body")[0],n=this.s=document.createElement("span");n.style.fontSize=b,n.innerHTML=l;var U=this.defaultWidth={},$=this.defaultHeight={};for(var H in c){n.style.fontFamily=c[H],f.appendChild(n),U[c[H]]=n.offsetWidth,$[c[H]]=n.offsetHeight,f.removeChild(n);}this.initialized=!0;},c.prototype.detect=function(c){this.initialized||this.init();var l=!1,b=this.baseFonts,f=this.s,n=this.h,U=this.defaultWidth,$=this.defaultHeight;for(var H in b){f.style.fontFamily=c+","+b[H],n.appendChild(f);var L=f.offsetWidth!=U[b[H]]||f.offsetHeight!=$[b[H]];n.removeChild(f),l=l||L;}return l;},c;}(),tf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f;}return wl(l,c),l.prototype.init=function(){var c=this;this._detector=new Cf();var l=this.borderPane=new Qb(),b=this.rightBorder=new Qb(),f=this.previewGraph=new ht.graph.GraphView(),U=this.listView=new ib(),$=this.formPane=new xl();U.getView().style.borderRight="2px solid #f7f7f7",l.setLeftView(U),l.setCenterView(b),l.setLeftWidth(180),b.setBottomView(f),b.setBottomHeight(120),b.setCenterView($),f.adjustTranslateX=function(){return 0;},f.adjustTranslateY=function(){return 0;},f.handleScroll=function(){return!1;},f.setScrollBarVisible(!1);var H=this.textNode=new ht.Text();H.s({"2d.selectable":!1,text:Gl.config.fontPreview}),H.setAnchor(0,0),H.setSize(2e3,120),H.p(4,4),f.dm().add(H);var L=60;$.setVPadding(32),$.setVGap(32),$.setHGap(0),$.addRow([{element:n("editor.font.style"),align:"right"},"",{id:"normal",button:this.createStyleButton(n("editor.font.normal"))},{id:"bold",button:this.createStyleButton(n("editor.font.bold"))},{id:"oblique",button:this.createStyleButton(n("editor.font.oblique"))},{id:"obliqueBold",button:this.createStyleButton(n("editor.font.obliqueBold"))}],[L,8,.1,.1,.1,.1],32),$.addRow([{element:n("editor.font.size"),align:"right"},"",{id:"fontSize",slider:{max:72,min:12,step:1,onValueChanged:function onValueChanged(l,b){$.getItemById("fontSizeLabel").element=b+"",$.iv(),c._handleFontChange();}}},{id:"fontSizeLabel",element:"12"}],[L,8,.1,20],32);var e=[];e.push({label:n("editor.ok"),action:function action(){c.ok();}}),e.push({label:n("editor.cancel"),action:function action(){c.hide();}}),this.initFontList(),this.setConfig({closable:!0,draggable:!0,width:Gl.config.fontViewSize.width,height:Gl.config.fontViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:l,buttons:e,buttonsAlign:"right"}),this._init=!0;},l.prototype.createStyleButton=function(c){var l=this;return{label:c,groupId:"fontStyle",labelSelectColor:Gl.config.color_select,labelColor:"#2c2c2c",borderSelectColor:"red",background:"rgb(247,247,247)",selectBackground:"rgb(247,247,247)",togglable:!0,borderColor:null,onClicked:function onClicked(c){l._handleFontChange();}};},l.prototype.initFontList=function(){var c=this,l=this.listView,b=l.getView().style,f=l.dm(),n=this._detector,U=Gl.config.fontList;return l.sm().ms(function(l){c._handleFontChange(l);}),U.forEach(function(c){if(n.detect(c)){var l=new ht.Node();l.setIcon(null),l.setName(c),f.add(l);}}),f.sm().setSelectionMode("single"),b.background="white",l;},l.prototype.$49$=function(){this.hide();},l.prototype.$48$=function(){this.ok();},l.prototype._handleFontChange=function(){this.textNode.s("text.font",this.getFontString());},l.prototype.getFontString=function(){var c=this.listView,l=this.formPane,b=c.sm().ld(),f="";if(b){var n=c.sm().ld().getName();return["bold","oblique","obliqueBold"].forEach(function(c,b){var n=l.getItemById(c);n.element.isSelected()&&(0===b?f="bold ":1===b?f="italic ":2===b&&(f="italic bold "));}),""+f+l.getValue("fontSize")+"px "+n;}},l.prototype.ok=function(){this.setValue&&this.setValue(this.getFontString()),this.hide();},l.prototype.analysisFontString=function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht.Default.labelFont,l=c.split(/px\s+/),b=l[0].split(/\s+/),f=l[1].split(",").map(function(c){return c.trim();}),n=/\d+/,U=void 0,$=void 0,H=void 0;b.forEach(function(c){"bold"===c?U=!0:"oblique"===c||"italic"===c?$=!0:n.test(c)&&(H=parseInt(c));}),this.setFormValue(H,f,U,$);},l.prototype.setFormValue=function(c,l,b,f){var n=this.listView,U=this.formPane;n.sm().cs(),n.dm().each(function(c){c.getName().toLowerCase()===l[0].toLowerCase()&&n.sm().ss(c);});var $=0;b&&f?$=3:b?$=1:f&&($=2),["normal","bold","oblique","obliqueBold"].forEach(function(c,l){var b=U.getItemById(c);b.element.setSelected($===l);}),U.getItemById("fontSizeLabel").element=c+"",U.setValue("fontSize",c);},l.prototype.open=function(c,l,b){this._init||this.init(),this.setValue=l,this.setTitle(b),this.analysisFontString(c),this.show();},l;}(Kl);Gl.FontView=tf;var Ff=300,Wf=230,Vf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b,f.addRow([{id:"content",textArea:{}}],[.1],.1),f.addRow([null,{button:{label:n("editor.ok"),onClicked:function onClicked(){f.hide(!0);}}},{button:{label:n("editor.cancel"),onClicked:function onClicked(){f.hide();}}}],[.1,50,50]),f.setWidth(Ff),f.setHeight(Wf),f.getView().className="ht-editor-styleicons",f.getView().style.background=Gl.config.color_pane,f.getView().style.border=Gl.config.color_pane_dark+" solid 1px",f.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,f.getView().style.overflow="visible";var U=function U(c){!f.getView().parentNode||f.button.getView().contains(c.target)||f.getView().contains(c.target)||f.hide();};return window.addEventListener("mousedown",U,!1),window.addEventListener("touchstart",U,!1),f;}return wl(l,c),l.prototype.toggle=function(c,l){this.getView().parentNode?this.hide():this.show(c,l);},l.prototype.show=function(c,l){if(!this.getView().parentNode){var b=c.getView().getBoundingClientRect(),f=(this.getView().style,A());ht.Default.appendToScreen(this),this.getView().style.top=f.top+b.top+"px",this.getView().style.left=f.left+b.left-Ff-4+"px",this.iv(),this.button=c,this.data=l;var n=l.s("icons");this.v("content",n?t(n):"");}},l.prototype.hide=function(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(k(this.getView()),c)){var l=this.v("content").trim();this.data.s("icons",l?F(l):void 0);}},l;}(xl),gf=function(){function c(l){var b=this;Vl(this,c),this.editor=l;var f=this.container=ht.Default.createDiv(),n=this.wrap=ht.Default.createDiv(),U=f.style;U.pointerEvents="none",U.position="absolute",U.left=0,U.right=0,U.top=0,U.bottom=0,f.appendChild(n),U=n.style,U.width="600px",U.position="absolute",U.left="50%",U.bottom="20px",U.marginLeft="-300px",U.pointerEvents="none",this._cache=[],this._visibleCount=0,this.layoutContainer(),window.addEventListener("resize",function(){b.layoutContainer();});}return c.prototype.layoutContainer=function(){var c=this.container,l=ht.Default.getWindowInfo(),b=c.style;b.width=l.width+"px",b.height=l.height+"px";},c.prototype.createMessage=function(c){var l=this._cache.pop();if(!l){l=document.createElement("div");var b=l.style;b.boxSizing="border-box",b.padding=0,b.backgroundColor="rgba(61,61,61,0.15)",b.color="rgb(247,247,247)",b.margin="5px auto",b.textAlign="center",b.borderRadius="19px",b.height=0,b.overflow="hidden",b.pointerEvents="none",b.webkitTransition="0.3s all",b.mozTransition="0.3s all",b.msTransition="0.3s all",b.oTransition="0.3s all",b.transition="0.3s all";}return l.innerText=c,l;},c.prototype.show=function(c){var l=this,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cb,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,n=this.createMessage(c);this.wrap.appendChild(n),this._visibleCount||document.body.appendChild(this.container),this._visibleCount++,n.style.backgroundColor=b===cb?"rgba(61,61,61,0.15)":"#FF7C7C",setTimeout(function(){n.style.height="38px",n.style.padding="8px 20px",l.hideLater(n,f);},10);},c.prototype.hideLater=function(c,l){var b=this;setTimeout(function(){c.style.height=0,c.style.padding=0,setTimeout(function(){b.wrap.removeChild(c),b._cache.push(c),b._visibleCount--,b._visibleCount||document.body.removeChild(b.container);},500);},l);},c;}(),wf=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));f.editor=b;var U=f.dm=new ht.DataModel(),$=f.gv=new ht.graph.GraphView(U),H=f.rightFormPane=new xl(),L=f.splitView=new ab($,H,"h",.6),e=f.targetNode=new ht.Node();e.setAnchor(0,0),e.p(0,0),e.s("2d.selectable",!1),$.dm().add(e),$.setEditable(!0),$.addBottomPainter(function(c){var l=this.getViewRect();c.fillStyle="#cbd3d8",c.fillRect(l.x,l.y,l.width,l.height);var b=e.getRect();c.fillStyle="#fff",c.fillRect(b.x,b.y,b.width,b.height);});var I=[{label:n("editor.ok"),action:function action(){f.editor.dm.a("attachPoints",f.toPointsData()),f.hide();}},{label:n("editor.cancel"),action:function action(){f.hide();}}];return f.setConfig({title:"\u5438\u9644\u70B9",content:L,closable:!0,draggable:!0,maximizable:!0,resizeMode:"wh",buttons:I,width:800,height:600}),f.$81$(),U.md(function(c){if("position"===c.property&&c.data!==e){var l=c.data,b=l.a("offsetX"),f=l.a("offsetY"),n=c.newValue.x-b,U=c.newValue.y-f;l.a({x:parseFloat((n/e.getWidth()).toFixed(2)),y:parseFloat((U/e.getHeight()).toFixed(2))});}}),$.mp(function(c){if("zoom"===c.property){var l=1/$.getZoom();U.each(function(c){c!==e&&c.setScale(l,l);});}}),f;}return wl(l,c),l.prototype.$81$=function(){var c=this,l=new jb(this.dm),b=this.tableView=window.tv=l.getTableView();b.isVisible=function(l){return l!==c.targetNode;},b.setEditable(!0),l.getView().style.border=Gl.config.color_line+" solid 1px",l.addColumns([this.$74$("x","X",70,function(l,b,f,n){var U=c.targetNode.getWidth();l.setX(U*f+(l.a("offsetX")||0));}),this.$74$("y","Y",70,function(l,b,f,n){var U=c.targetNode.getHeight();l.setY(U*f+(l.a("offsetY")||0));}),this.$74$("offsetX","Offset X",70,function(l,b,f,n){l.a("offsetX",f);var U=c.targetNode.getWidth();l.setX(U*l.a("x")+f);}),this.$74$("offsetY","Offset Y",70,function(l,b,f,n){l.a("offsetY",f);var U=c.targetNode.getHeight();l.setY(U*l.a("y")+f);})]),this.rightFormPane.addRow([l],[.1],200),this.rightFormPane.addRow([{button:{icon:"editor.add",toolTip:n("editor.add"),onClicked:function onClicked(){c.add();}}},{button:{icon:"editor.delete",toolTip:n("editor.delete"),onClicked:function onClicked(){c.remove();}}}],[20,20],20);},l.prototype.add=function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=new ht.Node(),U=1/this.gv.getZoom();n.setImage("editor.attachPoint"),n.setScale(U,U),n.a({x:c,y:l,offsetX:b,offsetY:f}),n.s({"2d.editable":!1});var $=this.targetNode.getWidth(),H=this.targetNode.getHeight();n.p(c*$+b,l*H+f),this.gv.dm().add(n);},l.prototype.remove=function(){for(var c=this.dm.sm().getSelection().toArray(),l=c.length-1;l>=0;l--){this.dm.remove(c[l]);}},l.prototype.$74$=function(c,l,b,f){return{name:c,tag:c,width:b,displayName:l,align:"center",editable:!0,valueType:"number",getValue:function getValue(l){return l.a(c);},setValue:f};},l.prototype.toPointsData=function(){var c=this,l=this.dm.toDatas(function(l){return l!==c.targetNode;}).toArray();return l.map(function(c){var l={x:c.a("x"),y:c.a("y")};return c.a("offsetX")&&(l.offsetX=c.a("offsetX")),c.a("offsetY")&&(l.offsetY=c.a("offsetY")),l;});},l.prototype.$49$=function(){this.hide();},l.prototype.createNodeByPointData=function(){var c=this,l=this.editor.dm.a("attachPoints");l&&l.forEach(function(l){c.add(l.x,l.y,l.offsetX,l.offsetY);});},l.prototype.show=function(l){this.dm.clear(),this.dm.add(this.targetNode),this.targetNode.setImage(l),this.createNodeByPointData(),c.prototype.show.call(this),this.gv.fitContent(!0);},l;}(Kl),kf=function c(l,b){var f=this;Vl(this,c),this.editor=l,this.inspector=b,["isDataTitleVisible","isDataPropertyVisible","isCompTitleVisible","isCompPropertyVisible","isDisplayTitleVisible","isDisplayPropertyVisible","isSymbolTitleVisible","isSymbolPropertyVisible"].forEach(function(c){f[c]=function(){return!(Gl.config.detailFilter[c]&&!Gl.config.detailFilter[c].apply(b,arguments))&&!(l.inspectorCompact&&Gl.config.compactFilter[c]&&!Gl.config.compactFilter[c].apply(b,arguments));};});},Kf=function(c){function l(b,f,n){var U=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Vl(this,l);var $=kl(this,c.call(this));return $.setHPadding(8),$.global=U,$.editor=b,$.name=f,$.type=n,$.setVPadding(0),$.inspectorFilter=new kf(b,$),$.updateHandlers=[],$.propertyChangeHandlers=[],$.editor.fireEvent("inspectorInitializing",{inspector:$}),$.initForm(),$.editor.fireEvent("inspectorInitialized",{inspector:$}),$.$104$(),$.editor.fireEvent("inspectorCreated",{inspector:$}),$.$47$=$._rows,$;}return wl(l,c),l.prototype.initForm=function(){},l.prototype.beginTransaction=function(){this.dataModel&&this.dataModel.beginTransaction();},l.prototype.endTransaction=function(){this.dataModel&&this.dataModel.endTransaction();},l.prototype.addUpdateHandler=function(c){this.updateHandlers.push(c);},l.prototype.removeUpdateHandler=function(c){U(this.updateHandlers,c);},l.prototype.addPropertyChangeHandler=function(c){this.propertyChangeHandlers.push(c);},l.prototype.removePropertyChangeHandler=function(c){U(this.propertyChangeHandlers,c);},l.prototype.$104$=function(){for(var c=this._rows,l=!0,b=c.length-1;b>=0;b--){c[b].title?l?this.removeRow(c[b]):l=!0:l=!1;}},l.prototype.isTitleVisible=function(c){return c.visible!==!1&&(!Tc(c.visible)||c.visible(this)!==!1);},l.prototype.isPropertyVisible=function(c){var l=this.editor.inspectorInputFilter;if(l){if(!c.keys)return!1;l=l.toLowerCase();var b=c.keys.name;if(b&&b.toLowerCase().indexOf(l)>=0)return!0;var f=c.keys.displayName;return!!(f&&f.toLowerCase().indexOf(l)>=0);}return c.visible!==!1&&!(Tc(c.visible)&&!c.visible(this));},l.prototype.makeItemsHidden=function(c){var l=this;c.hidden=!0,c.forEach(function(c){var b=l.getItemView(c);b&&(b.style.display="none");});},l.prototype.makeItemsVisible=function(c){var l=this;c.hidden=!1,c.forEach(function(c){var b=l.getItemView(c);b&&(b.style.display="block");});},l.prototype.filterPropertiesLater=function(){var c=this;this._filterPropertiesLater||(this._filterPropertiesLater=!0,requestAnimationFrame(function(){c.filterProperties();}));},l.prototype.isTitleExpanded=function(c){return!(c&&!this.editor.inspectorInputFilter)||Gl.config.expandedTitles[c];},l.prototype.filterProperties=function(){var c=this;this._filterPropertiesLater=!1;var l=[],b=void 0,f=!1;this.$47$.forEach(function(n){var U=n.items;n.title?(c.isTitleVisible(n)?(b=n.title,n.button.setIcon(c.isTitleExpanded(b)?"expandIcon":"collapseIcon"),!f&&l.length&&l[l.length-1].title&&c.makeItemsHidden(l.pop().items),l.push(n),c.makeItemsVisible(U)):(b="HTISFUCKINGAWESOME",c.makeItemsHidden(U)),f=!1):(c.isTitleExpanded(b)&&c.isPropertyVisible(n)?(l.push(n),c.makeItemsVisible(U)):c.makeItemsHidden(U),!f&&c.isPropertyVisible(n)&&(f=!0));}),!f&&l.length&&l[l.length-1].title&&this.makeItemsHidden(l.pop().items),this._rows=l,this.updateProperties(),this.iv();},l.prototype.addTitle=function(c,l){var b=this,f=this._oldTitle;this.editor.fireEvent("titleCreating",{oldTitle:f,title:c,inspector:this});var U=function U(){Gl.config.expandedTitles[c]=!Gl.config.expandedTitles[c],b.filterProperties();},$=[],H=this.addButton($,null,null,null,U,!0);H.setBorderColor(null);var L=n("editor."+c.toLowerCase(),!0)||n(c);$.push({element:L,font:Gl.config.boldFont}),l=l||{},l.title=c,l.background=Gl.config.color_pane_dark,l.button=H;var e=this.addRow($,[20,.1],Gl.config.inspectorTitleHeight||null,l);return this._oldTitle=c,this.editor.fireEvent("titleCreated",{oldTitle:f,title:c,inspector:this}),e;},l.prototype.$35$=function(c){var l=this;c&&(this.propertyChangeHandlers.forEach(function(b){b(c,l);}),this.$47$.forEach(function(b){b.onPropertyChanged&&b.onPropertyChanged(c,l);})),this._updatePropertiesLater||(this._updatePropertiesLater=!0,requestAnimationFrame(function(){l.updateProperties();}));},l.prototype.updateProperties=function(){this._updating=!0,this.updateHandlers.forEach(function(c){c();}),this.editor.fireEvent("propertiesUpdated",{inspector:this}),this._updating=!1,this._updatePropertiesLater=!1;},l.prototype.eachSelection=function(c){this.dataModel&&(this.beginTransaction(),this.dataModel.sm().each(function(l){c(l);}),this.endTransaction());},l.prototype.getPropertyValue=function(c,l){var b=this.global?this.dataModel:this.data;if(b){if(l=this.fixAccessType(l),"s"===l)return b.s(c);if("a"===l)return b.a(c);if("p"===l){var f=ht.Default.getter(c);if(b[f])return b[f]();}}},l.prototype.setPropertyValue=function(c,l,b,f){if(!this._updating&&this.dataModel){b=this.fixAccessType(b);var n=void 0;this.global?n=[this.dataModel]:f?this.data&&(n=[this.data]):n=this.dataModel.sm().toSelection().toArray(),n&&n.forEach(function(f){if("s"===b&&f.s(c,l),"a"===b&&f.a(c,l),"p"===b){var n=ht.Default.setter(c);f[n]&&f[n](l);}});}},l.prototype.getValue=function(c){if(this.dataModel)return this.global?c(this.dataModel):this.data?c(this.data):void 0;},l.prototype.setValue=function(c,l,b){!this._updating&&this.dataModel&&(this.beginTransaction(),this.global?c(this.dataModel,b?b():l):c.once?this.data&&c(this.data):this.dataModel.sm().each(function(f){c(f,b?b():l);}),this.endTransaction());},l.prototype.addLabelArray=function(c,l,b,f,n){return this.addLabel(c,l,b,f),this.addArray(c,b,f,n);},l.prototype.addLabelTextArea=function(c,l,b,f){return this.addLabel(c,l,b,f),this.addTextArea(c,b,f);},l.prototype.addLabelMultiline=function(c,l,b,f){var n=this;this.addLabelInput(c,l,b,f),this.addButton(c,"...",null,null,function(c){var U=function U(c){n.setValue(f,c);};n.editor.textView.open(n.getValue(b),U,l);},!0);},l.prototype.addLabelInput=function(c,l,b,f,n,U,$){return this.addLabel(c,l,b,f,U),this.addInput(c,b,f,n,$);},l.prototype.addLabelRange=function(c,l,b,f,n,U,$,H){return this.addLabelInput(c,l,function(c){var l=b(c);return null==l?U:l;},f?function(c,l){void 0!==U&&l>U&&(l=U),void 0!==n&&l<n&&(l=n),f(c,l);}:null,H,$);},l.prototype.addLabelColor=function(c,l,b,f){return this.addLabel(c,l,b,f),this.addColor(c,b,f);},l.prototype.addLabelCheckBox=function(c,l,b,f){return this.addLabel(c,l,b,f),this.addCheckBox(c,b,f);},l.prototype.addLabelFunction=function(c,l,b,f,n,U){return this.addLabel(c,l,b,f),this.addFunction(c,b,f,n,U);},l.prototype.addLabelObject=function(c,l,b,f,n){return this.addLabel(c,l,b,f),this.addObject(c,b,f,n);},l.prototype.addLabelComboBox=function(c,l,b,f,n,U,$){return this.addLabel(c,l,b,f),this.addComboBox(c,b,f,n,U,$);},l.prototype.addLabelURL=function(c,l,b,f,n){var U=this.addLabelInput(c,l,b,f,null,null,!1);return f&&!function(){var c=U.getElement();U.isDroppable=n||function(c,l){return!!l.view.draggingData;},U.handleCrossDrag=function(l,b,f){"enter"===b?c.style.border="solid "+Gl.config.color_select_dark+" 2px":"exit"===b||"cancel"===b?c.style.border="":"over"===b||"drop"===b&&(c.style.border="",c.value=f.view.draggingData.url,U.setFocus(),U.handleChange());};}(),U;},l.prototype.addLabelImage=function(c,l,b,f){var n=function n(c,l){if(!l.view.draggingData)return!1;var b=l.view.draggingData.fileType;return b===Rl||b===ol;};return this.addLabelURL(c,l,b,f,n),this.addImage(c,b,f);},l.prototype.addLabelGradient=function(c,l,b,f,n){var U=this,$=[],H=function H(){return U.data&&U.data.s(n)||Gl.config.color_light;},L=function L(){return U.data&&U.data.s(f)||Gl.config.color_select;};Gl.consts.gradients.forEach(function(c){c?$.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:c,gradientColor:{func:H},background:{func:L}}]}):$.push({width:20,height:14,comps:[]});});var e=this.addLabelComboBox(c,l,function(c){return c.s(b);},function(c,l){c.s(b,l);},Gl.consts.gradients,null,$);this.updateHandlers.push(function(){if(!c.hidden){var l=H(),b=L();e._lastGradientColor===l&&e._lastBackground===b||(e._lastGradientColor=l,e._lastBackground=b,e.iv());}});},l.prototype.addLabelFont=function(c,l,b,f){var n=this;this.addLabelInput(c,l,function(c){return b(c)||ht.Default.labelFont;},f?function(c,l){f(c,l||void 0);}:null),this.addButton(c,"...",null,null,function(c){var U=function U(c){n.setValue(f,c);};n.editor.fontView.open(n.getValue(b),U,l);},!0);},l.prototype.addLabelRotation=function(c,l,b,f,n,U,$){return this.addLabelInput(c,l,function(c){var l=b(c);return null==l?U:180/Math.PI*b(c);},f?function(c,l){l=l*Math.PI/180,void 0!==U&&l>U&&(l=U),void 0!==n&&l<n&&(l=n),f(c,l);}:null,"number",$||1);},l.prototype.addLabelAlign=function(c,l,b,f){return this.addLabelComboBox(c,l,function(c){return b(c)||"center";},f,Gl.consts.aligns,Gl.consts.alignLabels);},l.prototype.addLabelVAlign=function(c,l,b,f){return this.addLabelComboBox(c,l,function(c){return b(c)||"bottom";},f,Gl.consts.vAligns,Gl.consts.vAlignLabels);},l.prototype.addLabelStretch=function(c,l,b,f){this.addLabelComboBox(c,l,function(c){return b(c)||"fill";},f,Gl.consts.stretchs,Gl.consts.stretchLabels);},l.prototype.addOrientation=function(c,l,b,f){return this.addLabelComboBox(c,l,function(c){return b(c)||"top";},f,Gl.consts.orientations,Gl.consts.orientationLabels);},l.prototype.addLabelLabel=function(c,l,b,f){this.addLabelInput(c,l,function(c){var l=b(c);return l&&l.replace&&(l=l.replace(/\n/g,"\\n")),l;},f?function(c,l){l&&l.replace&&(l=l.replace(/\\n/g,"\n")),f(c,l);}:null);},l.prototype.toDisplayName=function(c){var l=c[0];if(l){if(Yc(l))return l;if(Yc(l.element))return l.element;if(l.element)return l.element.innerHTML;}},l.prototype.addLabel=function(c,l,b,f,n){var U=this;if(n&&f){var $=_c(l,c.length?"right":"left");c.push($),$.style.cursor="ew-resize";var H=function H(c){c.preventDefault(),U.beginTransaction();var l=U.getValue(b)||0,$=j(c).x,H=function H(c){c.preventDefault();var b=l+(j(c).x-$)*n;U.setValue(f,b);};window.addEventListener("mousemove",H,!1),window.addEventListener("touchmove",H,!1);var L=function L(c){U.endTransaction(),c.preventDefault(),window.removeEventListener("mousemove",H,!1),window.removeEventListener("touchmove",H,!1),window.removeEventListener("mouseup",L,!1),window.removeEventListener("touchend",L,!1);};window.addEventListener("mouseup",L,!1),window.addEventListener("touchend",L,!1);};return $.addEventListener("mousedown",H,!1),$.addEventListener("touchstart",H,!1),$;}var L={element:l,align:c.length?"right":"left"};return c.push(L),L;},l.prototype.createHandleChange=function(c,l,b){var f=this;return function(){var n=c.value;if("pattern"===b){if(n=n.trim()){if(n.indexOf("[")<0||n.indexOf("]")<0)return;if(n=n.replace("[","").replace("]","").split(","),n.length){for(var U=[],$=0;$<n.length;$++){var H=parseFloat(n[$]);if(isNaN(H))return;U.push(H);}n=U;}else n=void 0;}else n=void 0;}else if("number"===b){if(n=parseFloat(n),isNaN(n))return;}else if("int"===b){if(n=parseInt(n),isNaN(n))return;}else n||(n=void 0);f.setValue(l,n);};},l.prototype.createArrayIndexColumn=function(c,l,f,U){var $=this,H=c[l],L="object"===U?t(H):H;return{name:l,width:50,align:"center",editable:!!f,sortable:!1,clickable:!1,getValueType:function getValueType(c){return U;},getValue:function getValue(c){return L;},setValue:function setValue(n,U,H,L){$.setValue(f,void 0,function(){var f=c.slice();return f[l]=b(H),f;});},isCellEditable:function isCellEditable(c,b,f,L){if("object"===U){var e=n("editor.object")+" ["+l+"]";return $.editor.objectView.open(H,function(l){b.setValue(c,b,l,L);},e),!1;}return!0;}};},l.prototype.addArray=function(c,l,b,f){var U=this,$=new jb();$.getTableHeader().setMovable(!1),$.getView().style.border=Gl.config.color_line+" solid 1px";var H=$.getTableView();return H.getDataModel().add(new ht.Data()),this.updateHandlers.push(function(){if(!c.hidden){var L=U.getValue(l);if(H.getColumnModel().clear(),$.addColumns([{name:n("editor.length"),width:50,align:"center",editable:!!b,sortable:!1,clickable:!1,valueType:"int",getValue:function getValue(c){return L?L.length:0;},setValue:function setValue(c,l,n,$){U.setValue(b,void 0,function(){if(n>=0){var c=qc(L,n);return"number"===f||"int"===f?Sc(c):"color"===f&&Ec(c),c;}});}}]),L){for(var e=[],I=0;I<L.length;I++){e.push(U.createArrayIndexColumn(L,I,b,f));}$.addColumns(e);}}}),c.push($),$;},l.prototype.addTextArea=function(c,l,b){var f=this,n=new ht.widget.TextArea(),U=n.getElement();return b?(U.onblur=function(){f.setValue(b,U.value);},U.forceOnblur=U.onblur):n.setEditable(!1),this.updateHandlers.push(function(){if(!c.hidden){var b=f.getValue(l);null==b&&(b=""),U.value!==b&&(U.value=b);}}),c.push(n),n;},l.prototype.addInput=function(c,l,b,n,U){var $=this,H=new ht.widget.TextField();"number"!==n&&"int"!==n||H.setType("number");var L=H.getElement();return b?!function(){var c=$.createHandleChange(L,b,n);H.handleChange=c,U?(L.onkeyup=c,L.onchange=c):(L.onblur=c,L.forceOnblur=L.onblur,L.onkeydown=function(l){Q(l)&&c();});}():H.setEditable(!1),this.updateHandlers.push(function(){if(!c.hidden){var b=$.getValue(l);"pattern"===n?b=b?"["+b.join()+"]":"":"number"===n?b=f(parseFloat(b||0)):"int"===n?b=parseInt(b||0):null==b&&(b=""),L.value!==b&&(Yc(b)&&b.length>1e3&&b.startsWith("data:image")&&(b=b.substr(0,10)+"[...]"),L.value=b);}}),c.push(H),H;},l.prototype.addColor=function(c,l,b){var f=this,n=new ht.widget.ColorPicker();return b?(n.setInstant(!0),n.onValueChanged=function(){f.setValue(b,n.getValue());},n.addViewListener(function(c){"open"===c.kind?f.beginTransaction():"close"===c.kind&&f.endTransaction();})):n.setDisabled(!0),this.updateHandlers.push(function(){if(!c.hidden){var b=f.getValue(l);void 0===b&&(b=null),n.getValue()!=b&&n.setValue(b);}}),c.push(n),n;},l.prototype.addImage=function(c,l,b){var f=this,n=new ht.widget.Image();n.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!c.hidden){var b=f.getValue(l);n.rawIcon=b,b=ht.Default.getImage(b),b&&b.snapshotURL?n.setIcon(b.snapshotURL):n.setIcon(n.rawIcon);}});var U=n.getView();U.style.cursor="pointer";var $=function $(c){c.preventDefault(),Z(c)?f.editor.open(n.rawIcon):f.editor.selectFileNode(n.rawIcon);};return U.addEventListener("mousedown",$,!1),U.addEventListener("touchstart",$,!1),c.push(n),n;},l.prototype.addCheckBox=function(c,l,b){var f=this,n=new ht.widget.CheckBox();return b?n.onValueChanged=function(){f.setValue(b,n.getValue());}:n.setDisabled(!0),this.updateHandlers.push(function(){if(!c.hidden){var b=!!f.getValue(l);n.getValue()!==b&&n.setValue(b);}}),c.push(n),n;},l.prototype.addFunction=function(c,l,b,f,U){var $=this,H=function H(){var c=n("editor.function")+" "+(f||""),H=function H(c){$.setValue(b,c);};$.editor.functionView.open($.getValue(l),H,c,U);},e=f||n("editor.function"),I=Rc(e,null,null,H);return c.push(I),this.updateHandlers.push(function(){if(!c.hidden){var b=$.getValue(l);I.setLabel(L(b)),I.setLabelColor(b?Gl.config.color_select:ht.Default.labelColor);}}),I;},l.prototype.addObject=function(c,l,b,f){var U=this,$=function $(){var c=n("editor.object")+" "+(f||""),$=function $(c){U.setValue(b,c);};U.editor.objectView.open(U.getValue(l),$,c);},H=Rc("",null,null,$);return c.push(H),this.updateHandlers.push(function(){if(!c.hidden){var b=U.getValue(l);H.setLabel(t(b)),H.setLabelColor(void 0!==b?Gl.config.color_select:ht.Default.labelColor);}}),H;},l.prototype.addComboBox=function(c,l,b,f,n,U){var $=this,H=new ht.widget.ComboBox();return H.setValues(f),H.setLabels(n),H.setIcons(U),H.setDisabled(!b),b&&(H.onValueChanged=function(){$.setValue(b,H.getValue());}),this.updateHandlers.push(function(){if(!c.hidden){var b=$.getValue(l);H.getValue()!==b&&H.setValue(b);}}),U&&U[0].width&&H.setIndent(U[0].width+4),c.push(H),H;},l.prototype.addButton=function(c,l,b,f,n,U){var $=this,H=function H(){$.global||U?n():$.eachSelection(n);},L=Rc(l,b,f,H);return c.push(L),L;},l.prototype.addFuncRow=function(c,l,b,f){var n=this,U=f?this.getRowHeight()*f:null,$=function $(){n.dataModel&&n.editor.funcView.toggle(L,l,b,n);},H=(b||l)+": { func: ... }",L=this.addButton(c,null,H,null,$,!0);this.updateHandlers.push(function(){if(!c.hidden){var b=!1;n.global?n.dataModel&&(b="clip"===l?Tc(n.dataModel.a(l)):!!n.dataModel.a(l+"_func")):n.data&&(b=!!n.data.a(l)),L.setIcon(b?"editor.bind.state":"editor.unbind.state");}});var e=c.length,I=void 0;return 3===e?I=this.addRow(c,[Gl.config.indent,.1,20],U):4===e?I=this.addRow(c,[Gl.config.indent,.1,20,20],U):5===e?I=this.addRow(c,[Gl.config.indent,.1,20,20,20],U):6===e&&(I=this.addRow(c,[Gl.config.indent,.1,20,20,20,20],U)),I.keys={name:b||l,displayName:this.toDisplayName(c)},!this.addingCustomProperties&&$b[this.type][b||l]&&this.removeRows([I]),I;},l.prototype.addNameRow=function(c,l,b,f){var n=f?this.getRowHeight()*f:null,U=c.length,$=void 0;return 2===U?$=this.addRow(c,[Gl.config.indent,.1],n):3===U?$=this.addRow(c,[Gl.config.indent,.1,20],n):4===U?$=this.addRow(c,[Gl.config.indent,.1,20,20],n):5===U&&($=this.addRow(c,[Gl.config.indent,.1,20,20,20],n)),$.keys={name:l,displayName:this.toDisplayName(c),accessType:b},l=(b?b+":":"")+l,!this.addingCustomProperties&&$b[this.type][l]&&this.removeRows([$]),$;},l.prototype.$78$=function(){var c=this;this.addTitle("TitleGridsGuides");var l=[];this.addLabelInput(l,n("editor.gridblocksize"),function(c){return c.a("gridBlockSize");},function(c,l){l>0&&c.a("gridBlockSize",l);},"int",1),this.addNameRow(l,"gridBlockSize","a"),l=[],this.addLabelInput(l,n("editor.gridthicklinesevery"),function(c){return c.a("gridThickLinesEvery");},function(c,l){l>0&&c.a("gridThickLinesEvery",l);},"int",1),this.addNameRow(l,"gridThickLinesEvery","a"),l=[],this.addLabelColor(l,n("editor.gridthickcolor"),function(c){return c.a("gridThickColor");},function(c,l){c.a("gridThickColor",l);}),this.addNameRow(l,"gridThickColor","a"),l=[],this.addLabelColor(l,n("editor.gridlightcolor"),function(c){return c.a("gridLightColor");},function(c,l){c.a("gridLightColor",l);}),this.addNameRow(l,"gridLightColor","a"),l=[],this.addLabelInput(l,n("editor.gridangle"),function(c){return 180/Math.PI*c.a("gridAngle");},function(c,l){c.a("gridAngle",l*Math.PI/180);},"number",1),this.addNameRow(l,"gridAngle","a"),l=[],this.addLabelInput(l,n("editor.gridrotation"),function(c){return 180/Math.PI*c.a("gridRotation");},function(c,l){c.a("gridRotation",l*Math.PI/180);},"number",1),this.addNameRow(l,"gridRotation","a"),l=[],this.addLabelInput(l,n("editor.gridzoomthreshold"),function(c){return c.a("gridZoomThreshold");},function(c,l){l>0&&c.a("gridZoomThreshold",l);},"number",.01),this.addNameRow(l,"gridZoomThreshold","a"),l=[null];this.addButton(l,n("editor.reset"),null,null,function(){c.editor.currentView&&c.editor.currentView.resetGrid&&c.editor.currentView.resetGrid();});this.addNameRow(l,"gridReset");},l.prototype.$27$=function(){var c=this;this.addTitle("TitleEditingPoint");var l={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3};this.editingPointButtons=[];var b=function b(_b4,f){var U=n("editor.editingpoint."+f.toLowerCase()),$="editor.point."+f.toLowerCase(),H=Rc(U,null,$,function(){c.editor.editInteractor.getSubModule("Curve").setCurrentSelectionStatus(H.statusValue);});H.setOrientation("v"),H.setTogglable(!0),H.setGroupId("editingPoint"),H.statusValue=l[f],c.editingPointButtons.push(H),_b4.push(H);},f=[];b(f,"Straight"),b(f,"Mirrored"),this.addRow(f,[.1,.1],60),f=[],b(f,"Disconnected"),b(f,"Asymmetric"),this.addRow(f,[.1,.1],60);},l.prototype.addCustomProperties=function(){var c=this,l=Gl.config.customProperties[this.type];l&&l.length&&(this.addTitle("TitleCustom"),l.forEach(function(l){c.addCustomProperty(l);}));},l.prototype.fixAccessType=function(c){return c=c||"a","symbol"===this.type?c="a":"comp"===this.type&&(c="s"),c;},l.prototype.addEventProperties=function(){var c=this,l=[],b=function b(){var l=c.global?c.dataModel:c.data;l&&(l=c.global?[c.dataModel]:c.dataModel.sm().getSelection().toArray()),c.editor.eventView.open(l,c.type);};this.addLabel(l,n("editor.events"));var f=this.addButton(l,n("editor.eventhandlers"),null,null,b,!0);"data"===this.type?(this.addCheckBox(l,function(c){return!!c&&c.s("interactive");},function(c,l){c&&c.s("interactive",l);}),this.addRow(l,[Gl.config.indent,.1,20]).keys={name:"eventHandlers"}):this.addRow(l,[Gl.config.indent,.1]).keys={name:"eventHandlers"},this.updateHandlers.push(function(){if(!l.hidden){var b=!1,n=c.global?c.dataModel:c.data;zl.forEach(function(l){b||(b="data"===c.type?n.s(l):n.a(l));}),f.setLabelColor(b?Gl.config.color_select:ht.Default.labelColor);}});},l.prototype.addCustomProperty=function(c){var l=c.name,b=c.valueType,f=c.editable!==!1,U=c.defaultValue,$=this.fixAccessType(c.accessType),H=c.dataBinding,L=c.property;if(b=Gl.config.valueTypes[b],!b)return!1;this.addingCustomProperties=!0;var e=[],I=n(l)||L,T=Y($,L),J=D($,L),y=function y(c){var l=T(c);return void 0===l&&(l=U),l;},m=f?J:null;"int"===b.type||"number"===b.type?b.angle?this.addLabelRotation(e,I,y,m,b.min,b.max,b.step):this.addLabelRange(e,I,y,m,b.min,b.max,b.step,b.type):"color"===b.type?this.addLabelColor(e,I,y,m):"boolean"===b.type?this.addLabelCheckBox(e,I,y,m):"enum"===b.type?this.addLabelComboBox(e,I,y,m,b.values,b.labels,b.icons):"image"===b.type?this.addLabelImage(e,I,y,m):"url"===b.type?this.addLabelURL(e,I,y,m):"multiline"===b.type?this.addLabelMultiline(e,I,y,m):"colorArray"===b.type?this.addLabelArray(e,I,y,m,"color"):"numberArray"===b.type?this.addLabelArray(e,I,y,m,"number"):"stringArray"===b.type?this.addLabelArray(e,I,y,m,"string"):"objectArray"===b.type?this.addLabelArray(e,I,y,m,"object"):"function"===b.type?this.addLabelFunction(e,I,y,m,L):"object"===b.type?this.addLabelObject(e,I,y,m,L):"font"===b.type?this.addLabelFont(e,I,y,m):"custom"===b.type?b.buildUI(this,e,I,y,m):this.addLabelInput(e,I,y,m);var Q=void 0;"display"!==this.type&&H?"data"===this.type?Q=this.addDBRow(e,$,L,null,b.rows):"symbol"!==this.type&&"comp"!==this.type||(Q=this.addFuncRow(e,L,null,b.rows)):Q=this.addNameRow(e,$+":"+L,$,b.rows),Q&&(Q.visible=c.visible,Q.onPropertyChanged=c.onPropertyChanged),this.addingCustomProperties=!1;},l;}(xl);Gl.Inspector=Kf;var xf=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f,"display",!0));}return wl(l,c),l.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.$78$(),this.$79$();},l.prototype.isTitleVisible=function(l){return!!this.inspectorFilter.isDisplayTitleVisible(this.editor,l.title)&&c.prototype.isTitleVisible.call(this,l);},l.prototype.isPropertyVisible=function(l){return!!this.inspectorFilter.isDisplayPropertyVisible(this.editor,l.keys&&l.keys.name)&&c.prototype.isPropertyVisible.call(this,l);},l.prototype.$12$=function(){this.addTitle("TitleBasic");var c=[];this.addLabelInput(c,n("editor.previewurl"),function(c){return c.a("previewURL");},function(c,l){c.a("previewURL",l);}),this.addNameRow(c,"previewURL","a"),c=[],this.addLabelImage(c,n("editor.snapshoturl"),function(c){return c.a("snapshotURL");},function(c,l){c.a("snapshotURL",l);}),this.addNameRow(c,"snapshotURL","a"),c=[],this.addLabelColor(c,n("editor.background"),function(c){return c.getBackground();},function(c,l){c.setBackground(l);}),this.addNameRow(c,"background","p"),c=[],this.addLabelInput(c,n("editor.width"),function(c){return c.a("width");},function(c,l){c.a("width",l);},"number",1),this.addNameRow(c,"width","a"),c=[],this.addLabelInput(c,n("editor.height"),function(c){return c.a("height");},function(c,l){c.a("height",l);},"number",1),this.addNameRow(c,"height","a"),c=[],this.addLabelInput(c,n("editor.datacount"),function(c){return c.size();}),this.addNameRow(c,"count"),c=[];var l=["json","dm","gv"];this.addLabelFunction(c,n("editor.onpredeserialize"),function(c){return c.a("onPreDeserialize");},function(c,l){c.a("onPreDeserialize",l);},"onPreDeserialize",l),this.addNameRow(c,"onPreDeserialize","a"),c=[],l=["json","dm","gv","datas"],this.addLabelFunction(c,n("editor.onpostdeserialize"),function(c){return c.a("onPostDeserialize");},function(c,l){c.a("onPostDeserialize",l);},"onPostDeserialize",l),this.addNameRow(c,"onPostDeserialize","a"),c=[],this.addLabelComboBox(c,n("editor.connectactiontype"),function(c){return c.a("connectActionType");},function(c,l){c.a("connectActionType",l);},Gl.consts.displayConnectActionTypes,Gl.consts.displayConnectActionTypeLabels),this.addNameRow(c,"connectActionType","a"),c=[],this.addLabelCheckBox(c,n("editor.rotateasclock"),function(c){return c.a("rotateAsClock");},function(c,l){c.a("rotateAsClock",l);}),this.addNameRow(c,"rotateAsClock","a"),c=[],this.addLabelCheckBox(c,n("editor.hierarchicalrendering"),function(c){return c.isHierarchicalRendering();},function(c,l){c.setHierarchicalRendering(l);}),this.addNameRow(c,"hierarchicalRendering","p");},l.prototype.$79$=function(){this.addTitle("TitleLayout");var c=[];this.$80$(c,"circular"),this.$80$(c,"symmetric"),this.$80$(c,"hierarchical"),this.$80$(c,"towardnorth"),this.$80$(c,"towardsouth"),this.$80$(c,"towardeast"),this.$80$(c,"towardwest"),this.addRow(c,[.1,.1,.1,.1,.1,.1,.1]).keys={name:"layouts"};},l.prototype.$80$=function(c,l){var b=this,f=function f(){b.dataModel&&b.dataModel.layout(l);};return this.addButton(c,null,n("editor.layout."+l),"editor.layout."+l+".state",f);},l;}(Kf),Gf={visible:"Boolean",selectable:"Boolean",movable:"Boolean",editable:"Boolean",opacity:"Opacity",clipPercentage:"Percentage",clipDirection:"ClipDirection",shadow:"Boolean",shadowColor:"Color",shadowBlur:"PositiveNumber",shadowOffsetX:"PositiveNumber",shadowOffsetY:"PositiveNumber",type:"String",background:"Color",repeatImage:"String",borderWidth:"PositiveNumber",borderColor:"Color",border3d:"Boolean",border3dColor:"Color",border3dAccuracy:"PositiveNumber",borderCap:"CapStyle",borderJoin:"JoinStyle",gradient:"Gradient",gradientColor:"Color",dash:"Boolean",dashOffset:"Number",dashColor:"Color",dashWidth:"PositiveNumber",dash3d:"Boolean",dash3dColor:"Color",dash3dAccuracy:"PositiveNumber",borderWidthAbsolute:"Boolean",fillClipPercentage:"Percentage",fillClipDirection:"ClipDirection",depth:"Number",cornerRadius:"PositiveNumber",polygonSide:"Int",arcFrom:"Number",arcTo:"Number",arcClose:"Boolean",arcOval:"Boolean",displayName:"String",scaleX:"Number",scaleY:"Number",anchorX:"Number",anchorY:"Number",rotation:"Number",color:"Color",width:"PositiveNumber",label:"Boolean",labelColor:"Color",labelFont:"String",minValue:"Number",maxValue:"Number",linePoint:"Boolean",lineWidth:"PositiveNumber",line3d:"Boolean",text:"String",align:"Align",vAlign:"VAlign",closePath:"Boolean",fillRule:"FillRule",name:"String",stretch:"Stretch",values:"NumberArray",colors:"ColorArray",hollow:"Boolean",layoutV:"String",layoutH:"String"},zf=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f,"symbol",!0));}return wl(l,c),l.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.addDataBindingProperties(),this.$78$();},l.prototype.isTitleVisible=function(l){return!!this.inspectorFilter.isSymbolTitleVisible(this.editor,l.title)&&c.prototype.isTitleVisible.call(this,l);},l.prototype.isPropertyVisible=function(l){return!!this.inspectorFilter.isSymbolPropertyVisible(this.editor,l.keys&&l.keys.name)&&c.prototype.isPropertyVisible.call(this,l);},l.prototype.$12$=function(){var c=this,l=void 0;this.addTitle("TitleBasic"),this.addEventProperties(),this.addHTMLProperties(),l=[],this.addLabelInput(l,n("editor.previewurl"),function(c){return c.a("previewURL");},function(c,l){c.a("previewURL",l);}),this.addRow(l,[Gl.config.indent,.1]).keys={name:"previewURL"},l=[],this.addLabelImage(l,n("editor.snapshoturl"),function(c){return c.a("snapshotURL");},function(c,l){c.a("snapshotURL",l);}),this.addRow(l,[Gl.config.indent,.1,20]).keys={name:"snapshotURL"},l=[],this.addLabelColor(l,n("editor.background"),function(c){return c.getBackground();},function(c,l){c.setBackground(l);}),this.addRow(l,[Gl.config.indent,.1]).keys={name:"background"},l=[],this.addLabelInput(l,n("editor.width"),function(c){return c.a("width");},function(c,l){c.a("width",l);},"number",1),this.addFuncRow(l,"width"),l=[],this.addLabelInput(l,n("editor.height"),function(c){return c.a("height");},function(c,l){c.a("height",l);},"number",1),this.addFuncRow(l,"height"),l=[],this.addLabelInput(l,n("editor.boundextend"),function(c){return c.a("boundExtend");},function(c,l){c.a("boundExtend",l);},"number",1),this.addFuncRow(l,"boundExtend"),l=[],this.addLabelComboBox(l,n("editor.connectactiontype"),function(c){return c.a("connectActionType");},function(c,l){c.a("connectActionType",l);},Gl.consts.symbolConnectActionTypes,Gl.consts.symbolConnectActionTypeLabels),this.addRow(l,[Gl.config.indent,.1]).keys={name:"connectActionType"},l=[],this.addLabelCheckBox(l,n("editor.rotateasclock"),function(c){return c.a("rotateAsClock");},function(c,l){c.a("rotateAsClock",l);}),this.addFuncRow(l,"rotateAsClock"),l=[],this.addLabelCheckBox(l,n("editor.fitsize"),function(c){return c.a("fitSize");},function(c,l){c.a("fitSize",l);}),this.addFuncRow(l,"fitSize"),l=[],this.addLabelCheckBox(l,n("editor.scrollable"),function(c){return c.a("scrollable");},function(c,l){c.a("scrollable",l);}),this.addFuncRow(l,"scrollable"),l=[],this.addLabelCheckBox(l,n("editor.interactive"),function(c){return c.a("interactive");},function(c,l){c.a("interactive",l);}),this.addFuncRow(l,"interactive"),l=[],this.addLabelCheckBox(l,n("editor.disableselectedborder"),function(c){return c.a("disableSelectedBorder");},function(c,l){c.a("disableSelectedBorder",l);}),this.addFuncRow(l,"disableSelectedBorder"),l=[],this.addLabelCheckBox(l,n("editor.pixelperfect"),function(c){return c.a("pixelPerfect");},function(c,l){c.a("pixelPerfect",l);}),this.addFuncRow(l,"pixelPerfect"),l=[],this.addLabelCheckBox(l,n("editor.visible"),function(c){return c.a("visible");},function(c,l){c.a("visible",l);}),this.addFuncRow(l,"visible"),l=[],this.addLabelCheckBox(l,n("editor.clip"),function(c){return c.a("clip");},function(c,l){c.a("clip",l);}).onValueChanged=function(l,b){c.dataModel&&(b?c.dataModel.a("clip")||c.dataModel.a("clip",!0):c.dataModel.a("clip",!1));},this.addFuncRow(l,"clip"),l=[],this.addLabelCheckBox(l,n("editor.cacherule"),function(c){return c.a("cacheRule");},function(c,l){c.a("cacheRule",l);}),this.addFuncRow(l,"cacheRule"),l=[],this.addLabelComboBox(l,n("editor.blendmode"),function(c){return c.a("blendMode");},function(c,l){c.a("blendMode",l);},["multiply","override","override_rgb","override_a"],[n("editor.blendmode.multiply"),n("editor.blendmode.override"),n("editor.blendmode.override_rgb"),n("editor.blendmode.override_a")]),this.addFuncRow(l,"blendMode"),this.addAttachPointsProperties(),l=[],this.addLabelInput(l,n("editor.compcount"),function(c){return c.size();}),this.addNameRow(l,"count");},l.prototype.addHTMLProperties=function(){var c=this,l=[],b=function b(){c.editor.functionView.open(c.dataModel.a("renderHTML"),function(l){c.dataModel.a("renderHTML",l);},n("editor.renderhtml"),["data","gv","cache"]);};this.addLabel(l,n("editor.html"));var f=this.addButton(l,n("editor.renderhtml"),null,null,b,!0);this.addRow(l,[Gl.config.indent,.1]).keys={name:"renderHTML"},this.updateHandlers.push(function(){if(!l.hidden){var b=c.dataModel.a("renderHTML");f.setLabelColor(b?Gl.config.color_select:ht.Default.labelColor);}});},l.prototype.addDataBindingProperties=function(){this.addTitle("TitleDataBinding"),this.$81$(),this.$82$();},l.prototype.$74$=function(c,l,b,f){var n=this;return{name:c,tag:c,width:b,displayName:l,align:"center",enum:f,editable:!0,getValue:function getValue(l){return l.dataBinding[c];},setValue:function setValue(l,b,f,U){l.dataBinding[c]!==f&&n.modifyDataBindings(function(){l.dataBinding[c]=f;});}};},l.prototype.$75$=function(){var c=this,l=this.tableView.getColumnModel().getDataByTag("defaultValue");l.getEnumValues=function(c){var l=c?Gl.config.valueTypes[c.dataBinding.valueType]:null;return l&&"enum"===l.type?l.values:null;},l.getEnumLabels=function(c){var l=c?Gl.config.valueTypes[c.dataBinding.valueType]:null;return l&&"enum"===l.type?l.labels:null;},l.getEnumIcons=function(c){var l=c?Gl.config.valueTypes[c.dataBinding.valueType]:null;return l&&"enum"===l.type?l.icons:null;},l.getEnumDropDownWidth=function(c){var l=c?Gl.config.valueTypes[c.dataBinding.valueType]:null;return l&&"enum"===l.type?l.dropDownWidth:null;},l.getValueType=function(c){var l=c?Gl.config.valueTypes[c.dataBinding.valueType]:null;return l?l.type:null;},l.isCellEditable=function(l,b,f,U){var $=Gl.config.valueTypes[l.dataBinding.valueType],H=$?$.type:null;if("function"===H){var L=n("editor.function")+" "+(l.dataBinding.attr||"");return c.editor.functionView.open(l.dataBinding.defaultValue,function(b){l.dataBinding.defaultValue=b,c.tableView.redraw();},L),!1;}if("multiline"===H)return c.editor.textView.open(l.dataBinding.defaultValue,function(b){l.dataBinding.defaultValue=b,c.tableView.redraw();},l.dataBinding.attr||"&nbsp;"),!1;if("font"===H)return c.editor.fontView.open(l.dataBinding.defaultValue,function(b){l.dataBinding.defaultValue=b,c.tableView.redraw();},l.dataBinding.attr||"&nbsp;"),!1;if("object"===H||"stringArray"===H||"custom"===H||"objectArray"===H||"numberArray"===H||"colorArray"===H){var e=n("editor.object")+" "+(l.dataBinding.attr||"");return c.editor.objectView.open(l.dataBinding.defaultValue,function(b){l.dataBinding.defaultValue=b,c.tableView.redraw();},e),!1;}return!0;};},l.prototype.$81$=function(){var c=this,l=this.tableModel=new ht.DataModel(),b=new jb(l),f=this.tableView=b.getTableView();f.setEditable(!0),b.getView().style.border=Gl.config.color_line+" solid 1px",b.addColumns([this.$74$("attr","Attr",90),this.$74$("valueType",n("editor.valuetype"),80,{values:Gl.consts.valueTypes,labels:Gl.consts.valueTypeLabels}),this.$74$("defaultValue",n("editor.defaultvalue"),90),this.$74$("name",n("editor.name"),80),this.$74$("description",n("editor.description"),120)]),this.$75$();var $=[b];this.addRow($,[.1],"120+0.1");var H=null;this.updateHandlers.push(function(){if(!$.hidden&&c.dataModel&&(!H||c.dataModel.dataBindings!==H)){H=c.dataModel.dataBindings;var b=l.sm().toSelection().toArray();l.clear(),c.dataModel.dataBindings&&c.dataModel.dataBindings.forEach(function(c){var f=new ht.Data();f.dataBinding=c,l.add(f);for(var n=0;n<b.length;n++){if(ac(b[n].dataBinding,c)){U(b,b[n]),l.sm().as(f);break;}}});}});},l.prototype.modifyDataBindings=function(c){var l=b(this.dataModel.dataBindings);c();var f=b(this.dataModel.dataBindings);this.dataModel.dataBindings=f,this.dataModel.fp("f:dataBindings",l,f);},l.prototype.$83$=function(c,l,b,f,n){var U=new ht.Data();U.dataBinding={attr:c||"",valueType:l||"String",defaultValue:b,name:f,description:n};var $={symbolView:this.editor.symbolView,dataBinding:U.dataBinding};return this.editor.fireEvent("dataBindingAdding",$),!$.preventDefault&&(U.dataBinding=$.dataBinding,this.dataModel.dataBindings||(this.dataModel.dataBindings=[]),void this.dataModel.dataBindings.push(U.dataBinding));},l.prototype.add=function(){var c=this;this.modifyDataBindings(function(){c.$83$();});},l.prototype.delete=function(){var c=this;this.tableView.sm().ld()&&this.modifyDataBindings(function(){c.tableView.sm().each(function(l){U(c.dataModel.dataBindings,l.dataBinding);});});},l.prototype.reorder=function(){var c=this;this.dataModel.dataBindings=[],this.tableModel.getRoots().each(function(l){c.dataModel.dataBindings.push(l.dataBinding);});},l.prototype.import=function(){var c=this;this.modifyDataBindings(function(){Gl.config.clearDataBindingsBeforeImporting&&(c.dataModel.dataBindings=[]);var l=c.editor.symbolView.content,b={};l.dataBindings&&l.dataBindings.forEach(function(c){b[c.attr]=!0;}),l.comps.forEach(function(l){for(var f in l){var n=l[f];if(Dc(n))if(Yc(n.func)&&bb.test(n.func)){var U=n.func.slice(5);if(!b[U]){var $=void 0,H=void 0,L=void 0,e=void 0;if(Uc(l.type)){var I=ht.Default.getCompType(l.type);if(I){var Y=I.properties[f];Y?($=Y.valueType,L=Y.name,e=Y.description):$=Gf[f];}}else $=Gf[f];c.$83$(U,$,H,L,e),b[U]=!0;}}else{var D={};Oc(n,D);for(var T in D){b[T]||c.$83$(T,Gf[D[T]]);}}}});});},l.prototype.$82$=function(){var c=this,l=Gl.config.importDataBindingsButtonVisible?{button:{icon:"editor.import",toolTip:n("editor.import"),onClicked:function onClicked(){c.import();}}}:null;this.addRow([{button:{icon:"editor.add",toolTip:n("editor.add"),onClicked:function onClicked(){c.add();}}},{button:{icon:"editor.delete",toolTip:n("editor.delete"),onClicked:function onClicked(){c.delete();}}},l,null,{button:{icon:"editor.top",toolTip:n("editor.bringtofront"),onClicked:function onClicked(){c.tableView.sm().size()&&c.modifyDataBindings(function(){c.tableModel.moveSelectionToTop(),c.reorder();});}}},{button:{icon:"editor.up",toolTip:n("editor.bringforward"),onClicked:function onClicked(){c.tableView.sm().size()&&c.modifyDataBindings(function(){c.tableModel.moveSelectionUp(),c.reorder();});}}},{button:{icon:"editor.down",toolTip:n("editor.sendbackward"),onClicked:function onClicked(){c.tableView.sm().size()&&c.modifyDataBindings(function(){c.tableModel.moveSelectionDown(),c.reorder();});}}},{button:{icon:"editor.bottom",toolTip:n("editor.sendtoback"),onClicked:function onClicked(){c.tableView.sm().size()&&c.modifyDataBindings(function(){c.tableModel.moveSelectionToBottom(),c.reorder();});}}}],[20,20,20,.1,20,20,20,20]);},l.prototype.addAttachPointsProperties=function(){var c=this,l=[],b=function b(){c.editor.attachPointsView.show(c.editor.symbolView.content);};this.addLabel(l,n("editor.attach.points"));this.addButton(l,n("editor.attach.edit"),null,null,b,!0);this.addFuncRow(l,"attachPoints"),l=[],this.addLabelComboBox(l,n("editor.attach.style"),function(c){return c.a("attachStyle")||"close";},function(c,l){c.a("attachStyle",l);},["close","strict"],[n("editor.attach.close"),n("editor.attach.strict")]),this.addFuncRow(l,"attachStyle");},l;}(Kf),sf=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f,"data"));}return wl(l,c),l.prototype.initForm=function(){this.addCustomProperties(),this.$28$();},l.prototype.isTitleVisible=function(l){return!!this.inspectorFilter.isDataTitleVisible(this.editor,this.data,l.title)&&c.prototype.isTitleVisible.call(this,l);},l.prototype.isPropertyVisible=function(l){return!!this.inspectorFilter.isDataPropertyVisible(this.editor,this.data,l.keys&&l.keys.accessType,l.keys&&l.keys.name)&&c.prototype.isPropertyVisible.call(this,l);},l.prototype.addDBRow=function(c,l,b,f,n){var U=this,$=n?this.getRowHeight()*n:null,H=c.length,L=void 0;return!Gl.config.dataBindings.onButtonClicked||Gl.config.dataBindings.filter&&!Gl.config.dataBindings.filter(l,b)?2===H?L=this.addRow(c,[Gl.config.indent,.1],$,f):3===H?L=this.addRow(c,[Gl.config.indent,.1,20],$,f):4===H?L=this.addRow(c,[Gl.config.indent,.1,20,20],$,f):5===H&&(L=this.addRow(c,[Gl.config.indent,.1,20,20,20],$,f)):!function(){var n=function n(){Gl.config.dataBindings.onButtonClicked(U.data,l,b);},e=l+":"+b,I=U.addButton(c,null,e,null,n,!0);U.updateHandlers.push(function(){if(!c.hidden&&U.data){var f=Gl.config.isDataBound(U.data,l,b);I.setIcon(f?"editor.bind.state":"editor.unbind.state");}}),2===H?L=U.addRow(c,[Gl.config.indent,.1,20],$,f):3===H?L=U.addRow(c,[Gl.config.indent,.1,20,20],$,f):4===H?L=U.addRow(c,[Gl.config.indent,.1,20,20,20],$,f):5===H&&(L=U.addRow(c,[Gl.config.indent,.1,20,20,20,20],$,f));}(),L.keys={name:b,displayName:this.toDisplayName(c),accessType:l},!this.addingCustomProperties&&$b[this.type][l+":"+b]&&this.removeRows([L]),L;},l.prototype.addDBInput=function(c,l,b,f,n){var U=[];return this.addLabelInput(U,l,Y(c,b),D(c,b),f,n),this.addDBRow(U,c,b);},l.prototype.addDBLabel=function(c,l,b){var f=[];return this.addLabelLabel(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBCheckBox=function(c,l,b){var f=[];return this.addLabelCheckBox(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBImage=function(c,l,b){var f=[];return this.addLabelImage(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBColor=function(c,l,b){var f=[];return this.addLabelColor(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBFont=function(c,l,b){var f=[];return this.addLabelFont(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBPattern=function(c,l,b){var f=[];return this.addLabelInput(f,l,Y(c,b),D(c,b),"pattern"),this.addDBRow(f,c,b);},l.prototype.addDBRotation=function(c,l,b){var f=[];return this.addLabelRotation(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBAlign=function(c,l,b){var f=[];return this.addLabelAlign(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBVAlign=function(c,l,b){var f=[];return this.addLabelVAlign(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBOrientation=function(c,l,b){var f=[];return this.addOrientation(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBComboBox=function(c,l,b,f,n,U){var $=[];return this.addLabelComboBox($,l,Y(c,b),D(c,b),f,n,U),this.addDBRow($,c,b);},l.prototype.addDBStretch=function(c,l,b){var f=[];return this.addLabelStretch(f,l,Y(c,b),D(c,b)),this.addDBRow(f,c,b);},l.prototype.addDBZeroToOne=function(c,l,b){var f=[];return this.addLabelRange(f,l,Y(c,b),D(c,b),0,1,.01,"number"),this.addDBRow(f,c,b);},l.prototype.addDBPosition=function(c,l,b){var f=[];return this.addLabelRange(f,l,Y(c,b),D(c,b),1,55,1,"int"),this.addDBRow(f,c,b);},l.prototype.addDBRange=function(c,l,b,f,n,U,$){var H=[];return this.addLabelRange(H,l,Y(c,b),D(c,b),f,n,U,$),this.addDBRow(H,c,b);},l.prototype.addDBGradient=function(c,l,b,f){var n=[];return this.addLabelGradient(n,c,l,b,f),this.addDBRow(n,"s",l);},l.prototype.addDBBodyColorProperty=function(){this.addDBColor("s",n("editor.bodycolor"),"body.color");},l.prototype.addDBOpacityProperty=function(){this.addDBZeroToOne("s",n("editor.opacity"),"opacity");},l.prototype.$84$=function(){var c=this,l=[];this.addLabel(l,n("editor.icons"));var b=function b(){c.data&&c.editor.iconsView.toggle(f,c.data);},f=this.addButton(l,"Icons","s:icons",null,b,!0);return this.updateHandlers.push(function(){l.hidden||f.setLabelColor(c.data.s("icons")?Gl.config.color_select:ht.Default.labelColor);}),this.addDBRow(l,"s","icons");},l.prototype.addDBData=function(c,l,b,f){var n=this;f=f||D(c,b);var U=Y(c,b),$=[],H=this.addLabelInput($,l,function(c){var l=U(c);return l?l.toLabel()||l.getClassName():"";}),L=H.getElement();H.isDroppable=function(c,l){return l.view.draggingData&&n.dataModel===l.view.draggingData.getDataModel();},H.handleCrossDrag=function(c,l,b){"enter"===l?L.style.border="solid "+Gl.config.color_select_dark+" 2px":"exit"===l||"cancel"===l?L.style.border="":"over"===l||"drop"===l&&(L.style.border="",n.setValue(f,b.view.draggingData),H.setFocus());},L.onkeydown=function(c){p(c)&&n.setValue(f,null);};var e=new ht.widget.Image();return e.drawImage=function(c,l,b,f,U,$){var H=e.data,L=n.editor.list;H&&L&&L.dm().contains(H)&&(l=L.getIcon(H),l&&o(c,ht.Default.getImage(l),"centerUniform",b,f,U,$,H,L));},this.updateHandlers.push(function(){if(!$.hidden){var c=e.data;e.data=n.getValue(U),e.fp("data",c,e.data);}}),$.push(e),this.addDBRow($,c,b);},l.prototype.$28$=function(){this.addTitle("TitleBasic"),this.addEventProperties();var c=[];this.addLabelInput(c,n("editor.class"),function(c){return c.getClassName();}),this.addRow(c,[Gl.config.indent,.1]).keys={accessType:"p",name:"className"},this.addDBInput("p",n("editor.name"),"displayName"),this.addDBInput("p",n("editor.tag"),"tag"),this.addDBImage("p",n("editor.icon"),"icon"),this.addDBData("p",n("editor.parent"),"parent");},l.prototype.$30$=function(){this.addTitle("TitleLabel"),this.addDBLabel("s",n("editor.content"),"label"),this.addDBFont("s",n("editor.font"),"label.font"),this.addDBColor("s",n("editor.color"),"label.color"),this.addDBColor("s",n("editor.background"),"label.background"),this.addDBPosition("s",n("editor.position"),"label.position"),this.addDBInput("s",n("editor.offsetx"),"label.offset.x","number",1),this.addDBInput("s",n("editor.offsety"),"label.offset.y","number",1),this.addDBInput("s",n("editor.maxlength"),"label.max","number",1),this.addDBRotation("s",n("editor.rotation"),"label.rotation"),this.addDBZeroToOne("s",n("editor.opacity"),"label.opacity"),this.addDBRange("s",n("editor.scale"),"label.scale",.01,100,.1,"number"),this.addDBAlign("s",n("editor.align"),"label.align"),this.addDBCheckBox("s",n("editor.fixed"),"label.position.fixed");},l.prototype.$31$=function(){this.addTitle("TitleNote"),this.addDBLabel("s",n("editor.content"),"note"),this.addDBFont("s",n("editor.font"),"note.font"),this.addDBColor("s",n("editor.color"),"note.color"),this.addDBColor("s",n("editor.background"),"note.background"),this.addDBInput("s",n("editor.borderwidth"),"note.border.width","number",1),this.addDBColor("s",n("editor.bordercolor"),"note.border.color"),this.addDBPosition("s",n("editor.position"),"note.position"),this.addDBInput("s",n("editor.offsetx"),"note.offset.x","number",1),this.addDBInput("s",n("editor.offsety"),"note.offset.y","number",1),this.addDBZeroToOne("s",n("editor.opacity"),"note.opacity"),this.addDBRange("s",n("editor.scale"),"note.scale",.01,100,.1,"number"),this.addDBInput("s",n("editor.maxlength"),"note.max","number",1),this.addDBAlign("s",n("editor.align"),"note.align"),this.addDBCheckBox("s",n("editor.toggleable"),"note.toggleable"),this.addDBCheckBox("s",n("editor.expanded"),"note.expanded");},l.prototype.addDBLayer=function(){var c=this,l=[],b=Y("p","layer"),f=D("p","layer");this.addLabel(l,n("editor.layer"),b,f);var U=new ht.widget.ComboBox();U.onValueChanged=function(){c.setValue(f,U.getValue());},this.updateHandlers.push(function(){if(!l.hidden){U.setValues(c.editor.layerPane.layerNames);var f=c.getValue(b);U.getValue()!==f&&U.setValue(f);}}),l.push(U);var $=this.addDBRow(l,"p","layer");return $.items.tag="layer",$;},l.prototype.addDBGray=function(){this.addDBCheckBox("s",n("editor.gray"),"2d.gray");},l;}(Kf),Mf={TitleShapeBackground:!0,TitleShapeBorder:!0,TitleShapeDash:!0},_f=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.$92$(),this.addLayoutProperties(),this.$23$(),this.$29$(),this.$30$(),this.$31$(),this.$26$();},l.prototype.$28$=function(){c.prototype.$28$.call(this),this.addDBGray(),this.addDBLayer(),this.addDBInput("p",n("editor.tooltip"),"toolTip"),this.addDBBodyColorProperty(),this.addDBOpacityProperty(),this.$84$();},l.prototype.$92$=function(){var c=this;this.addDBStretch("s",n("editor.stretch"),"image.stretch").items.tag="imageRelative",this.addDBComboBox("s",n("editor.shape"),"shape",Gl.consts.shapes,Gl.consts.shapeLabels,Gl.consts.shapeIcons);var l=[];this.addLabelImage(l,n("editor.image"),function(l){var b=l.getImage(),f=ht.Default.getImage(b);return c.$86$(Dc(f)?f.dataBindings:null,f),b;},function(c,l){c.setImage&&(Yc(l)&&l.endsWith("[...]")||c.setImage(l));}),this.addButton(l,null,n("editor.resetsize"),"editor.resetsize.state",function(c){c instanceof ht.Node&&c.setSize(-1,-1);}),this.imageRow=this.addDBRow(l,"p","image"),this.imageRow.items.tag="imageRelative";},l.prototype.addLayoutProperties=function(){var c=this;this.addTitle("TitleNodeLayout");var l=this.layoutGv=new ht.graph.GraphView(),b=this.layoutNode=new ht.Node(),f=!1;b.setImage("editor.layout.helper"),b.a("selectColor",Gl.config.color_select),l.dm().add(b),l.tx(50),l.ty(50),l.handleScroll=function(){},l.handlePinck=function(){},l.setScrollBarVisible(!1),l.setRectSelectable(!1),l.setPannable(!1),l.setMovableFunc(function(){return!1;}),l.dm().md(function(l){f||(c.beginTransaction(),c.dataModel.sm().getSelection().each(function(c){"a:layout.v"===l.property?c.s("layout.v",l.newValue):"a:layout.h"===l.property&&c.s("layout.h",l.newValue);}),c.endTransaction());}),this.addRow(["",{element:l},""],[.1,100,.1],100),this.addUpdateHandler(function(){var l=c.data;f=!0,b.a({"layout.v":l.s("layout.v"),"layout.h":l.s("layout.h")}),f=!1;}),this.addDBComboBox("s",n("editor.nodeLayout.h"),"layout.h",Gl.consts.hLayoutValues,Gl.consts.hLayoutLabels),this.addDBComboBox("s",n("editor.nodeLayout.v"),"layout.v",Gl.consts.vLayoutValues,Gl.consts.vLayoutLabels);},l.prototype.$23$=function(){this.addTitle("TitleNode"),this.addDBInput("p",n("editor.posx"),"x","number",1),this.addDBInput("p",n("editor.posy"),"y","number",1),this.addDBInput("p",n("editor.width"),"width","number",1),this.addDBInput("p",n("editor.height"),"height","number",1),this.addDBRotation("p",n("editor.rotation"),"rotation");var c=[];this.addLabelInput(c,n("editor.scalex"),Y("p","scaleX"),D("p","scaleX"),"number",.01),this.addButton(c,null,n("editor.flipx"),"editor.flipx",function(c){c instanceof ht.Node&&c.setScaleX(-c.getScaleX());}),this.addDBRow(c,"p","scaleX"),c=[],this.addLabelInput(c,n("editor.scaley"),Y("p","scaleY"),D("p","scaleY"),"number",.01),this.addButton(c,null,n("editor.flipy"),"editor.flipy",function(c){c instanceof ht.Node&&c.setScaleY(-c.getScaleY());}),this.addDBRow(c,"p","scaleY"),c=[],this.addLabelInput(c,n("editor.anchorx"),function(c){return c.getAnchor().x;},function(c,l){c instanceof ht.Node&&c.setAnchor(l,c.getAnchor().y,!0);},"number",.01),this.addDBRow(c,"p","anchorX"),c=[],this.addLabelInput(c,n("editor.anchory"),function(c){return c.getAnchor().y;},function(c,l){c instanceof ht.Node&&c.setAnchor(c.getAnchor().x,l,!0);},"number",.01),this.addDBRow(c,"p","anchorY"),this.$85$(),this.addDBData("p",n("editor.host"),"host",function(c,l){c instanceof ht.Node&&(null==l||l instanceof ht.Node)&&c.setHost(l);}),this.addDBComboBox("s",n("editor.fullscreen"),"fullscreen",Gl.consts.fullscreenValues,Gl.consts.fullscreenLabels);var l=this.addDBComboBox("s",n("editor.fullscreen.lock"),"fullscreen.lock",Gl.consts.fullscreenLockValues,Gl.consts.fullscreenLockLabels);l.items.tag="fullscreen",l=this.addDBInput("s",n("editor.fullscreen.gap"),"fullscreen.gap","number",1),l.items.tag="fullscreen",this.addDBComboBox("s",n("editor.movemode"),"2d.move.mode",[void 0,"x","y"],["",n("editor.horizontal"),n("editor.vertical")]),this.addDBCheckBox("s",n("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",n("editor.visible"),"2d.visible"),this.addDBCheckBox("s",n("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",n("editor.movable"),"2d.movable"),this.addDBCheckBox("s",n("editor.editable"),"2d.editable"),this.addDBCheckBox("s",n("editor.pixelperfect"),"pixelPerfect");},l.prototype.$85$=function(){this.addDBZeroToOne("s",n("editor.clippercentage"),"clip.percentage"),this.addDBComboBox("s",n("editor.clipdirection"),"clip.direction",Gl.consts.clipDirections,Gl.consts.clipDirectionLabels);},l.prototype.$29$=function(){this.$25$(),this.addShapeForegroundProperties(),this.$33$(),this.addShapeDashProperties();},l.prototype.$25$=function(){this.addTitle("TitleShapeBackground"),this.addDBColor("s",n("editor.background"),"shape.background"),this.addDBGradient(n("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color"),this.addDBColor("s",n("editor.gradientcolor"),"shape.gradient.color"),this.addDBImage("s",n("editor.repeatimage"),"shape.repeat.image"),this.addDBZeroToOne("s",n("editor.clippercentage"),"shape.fill.clip.percentage"),this.addDBComboBox("s",n("editor.clipdirection"),"shape.fill.clip.direction",Gl.consts.clipDirections,Gl.consts.clipDirectionLabels);},l.prototype.addShapeForegroundProperties=function(){this.addTitle("TitleShapeForeground"),this.addDBColor("s",n("editor.foreground"),"shape.foreground"),this.addDBGradient(n("editor.gradient"),"shape.foreground.gradient","shape.foreground","shape.foreground.gradient.color"),this.addDBColor("s",n("editor.gradientcolor"),"shape.foreground.gradient.color"),this.addDBZeroToOne("s",n("editor.clippercentage"),"shape.foreground.clip.percentage"),this.addDBComboBox("s",n("editor.clipdirection"),"shape.foreground.clip.direction",Gl.consts.clipDirections,Gl.consts.clipDirectionLabels);},l.prototype.$33$=function(){this.addTitle("TitleShapeBorder"),this.addDBInput("s",n("editor.width"),"shape.border.width","number",1),this.addDBCheckBox("s",n("editor.widthabsolute"),"shape.border.width.absolute"),this.addDBPattern("s",n("editor.pattern"),"shape.border.pattern"),this.addDBColor("s",n("editor.color"),"shape.border.color"),this.addDBCheckBox("s",n("editor.threed"),"shape.border.3d"),this.addDBColor("s",n("editor.threedcolor"),"shape.border.3d.color"),this.addDBComboBox("s",n("editor.join"),"shape.border.join",Gl.consts.joins,Gl.consts.joinLabels),this.addDBComboBox("s",n("editor.cap"),"shape.border.cap",Gl.consts.caps,Gl.consts.capLabels),this.$24$();},l.prototype.$24$=function(){this.addDBInput("s",n("editor.depth"),"shape.depth","int",1).items.tag="shapeDepth",this.addDBInput("s",n("editor.sides"),"shape.polygon.side","int",1).items.tag="shapeSide",this.addDBInput("s",n("editor.radius"),"shape.corner.radius","number",1).items.tag="shapeRadius",this.addDBCheckBox("s",n("editor.arcoval"),"shape.arc.oval").items.tag="shapeArc",this.addDBCheckBox("s",n("editor.closed"),"shape.arc.close").items.tag="shapeArc",this.addDBRotation("s",n("editor.arcfrom"),"shape.arc.from").items.tag="shapeArc",this.addDBRotation("s",n("editor.arcto"),"shape.arc.to").items.tag="shapeArc";},l.prototype.addShapeDashProperties=function(){this.addTitle("TitleShapeDash"),this.addDBPattern("s",n("editor.pattern"),"shape.dash.pattern"),this.addDBCheckBox("s",n("editor.dash"),"shape.dash"),this.addDBColor("s",n("editor.color"),"shape.dash.color"),this.addDBInput("s",n("editor.offset"),"shape.dash.offset","number",1),this.addDBInput("s",n("editor.width"),"shape.dash.width","number",1),this.addDBCheckBox("s",n("editor.threed"),"shape.dash.3d"),this.addDBColor("s",n("editor.threedcolor"),"shape.dash.3d.color");},l.prototype.$35$=function(l){if(l){if("s:shape"===l.property||"host"===l.property||"s:fullscreen"===l.property)return void this.filterPropertiesLater();if("s:select.type"===l.property&&("shadow"===l.oldValue||"shadow"===l.newValue))return void this.filterPropertiesLater();}c.prototype.$35$.call(this,l);},l.prototype.isTitleVisible=function(l){if(this.data){if(!(this.data instanceof ht.Shape)&&!this.data.s("shape")&&Mf[l.title])return!1;if("TitleNodeLayout"===l.title&&!this.data.getHost())return!1;}return c.prototype.isTitleVisible.call(this,l);},l.prototype.isPropertyVisible=function(l){if(this.data){var b=l.items.tag;if(b)if("selectShadow"===b){if("shadow"!==this.data.s("select.type"))return!1;}else if("shapeDepth"===b){if("rect"!==this.data.s("shape"))return!1;}else if("shapeSide"===b){if("polygon"!==this.data.s("shape"))return!1;}else if("shapeRadius"===b){if("roundRect"!==this.data.s("shape"))return!1;}else if("shapeArc"===b){if("arc"!==this.data.s("shape"))return!1;}else if("imageRelative"===b){if(this.data.s("shape"))return!1;}else if("layer"===b){if(!this.editor.layerPane.layerNames.length)return!1;}else if("fullscreen"===b&&!this.data.s("fullscreen"))return!1;}return c.prototype.isPropertyVisible.call(this,l);},l.prototype.$86$=function(c,l){var b=this;this.dataBindings!==c&&(this.$46$=c,this.pendingImage=l,this._updateDataBindingsLater||(this._updateDataBindingsLater=!0,requestAnimationFrame(function(){b.$87$();})));},l.prototype.$87$=function(){var c=this;return this._updateDataBindingsLater=!1,this.dataBindings===this.$46$?(this.$46$=null,void(this.pendingImage=null)):(this._rows=this.$47$,this.removeRows(this.$45$),this.$45$=[],this.dataBindings=this.$46$,this.dataBindings&&!function(){var l={},b={},f={};c.pendingImage.comps.forEach(function(c){if(Uc(c.type)){var n=ht.Default.getCompType(c.type);if(n)for(var U in n.properties){l[U]=n.properties[U].defaultValue;}}Oc(c,b,f);});for(var n in b){void 0===f[n]&&(f[n]=l[b[n]]);}var U=c._rows.indexOf(c.imageRow)+1;c.dataBindings.forEach(function(l){c.$88$(l,U,f)&&U++;});}(),this.$47$=this._rows,void this.filterProperties());},l.prototype.$88$=function(c,l,b){var f=[],U=c.attr,$=Gl.config.valueTypes[c.valueType];if(!$)return this.editor.fireEvent("error",{message:"Wrong value type:"+c.valueType}),!1;var H=n(c.name)||U,L=function L(c){var l=c.a(U);return void 0===l&&(l=b[U]),l;},e=function e(c,l){c.a(U,l);};return"int"===$.type||"number"===$.type?$.angle?this.addLabelRotation(f,H,L,e,$.min,$.max,$.step):this.addLabelRange(f,H,L,e,$.min,$.max,$.step,$.type):"color"===$.type?this.addLabelColor(f,H,L,e):"boolean"===$.type?this.addLabelCheckBox(f,H,L,e):"enum"===$.type?this.addLabelComboBox(f,H,L,e,$.values,$.labels,$.icons):"multiline"===$.type?this.addLabelMultiline(f,H,L,e):"font"===$.type?this.addLabelFont(f,H,L,e):"image"===$.type?this.addLabelImage(f,H,L,e):"url"===$.type?this.addLabelURL(f,H,L,e):"colorArray"===$.type?this.addLabelArray(f,H,L,e,"color"):"numberArray"===$.type?this.addLabelArray(f,H,L,e,"number"):"stringArray"===$.type?this.addLabelArray(f,H,L,e,"string"):"objectArray"===$.type?this.addLabelArray(f,H,L,e,"object"):"function"===$.type?this.addLabelFunction(f,H,L,e,U):"object"===$.type?this.addLabelObject(f,H,L,e,U):"custom"===$.type?$.buildUI(this,f,H,L,e):this.addLabelInput(f,H,L,e),this.$45$.push(this.addDBRow(f,"a",U,{index:l},$.rows)),f.tag="imageRelative",!0;},l.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",n("editor.color"),"select.color"),this.addDBInput("s",n("editor.width"),"select.width","number",1),this.addDBInput("s",n("editor.padding"),"select.padding","number",1),this.addDBComboBox("s",n("editor.selecttype"),"select.type",Gl.consts.selectTypes,Gl.consts.selectTypeLabels,Gl.consts.selectTypeIcons),this.addDBInput("s",n("editor.shadowblur"),"shadow.blur","number",1).items.tag="selectShadow",this.addDBInput("s",n("editor.shadowoffsetx"),"shadow.offset.x","number",1).items.tag="selectShadow",this.addDBInput("s",n("editor.shadowoffsety"),"shadow.offset.y","number",1).items.tag="selectShadow";},l;}(sf),Rf={"h.v":!0,"v.h":!0,ortho:!0,flex:!0,"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,ortho2:!0,flex2:!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0,"v.h2":!0,"h.v2":!0},of={"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0},rf=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){this.$27$(),c.prototype.initForm.call(this),this.addDBGray(),this.$89$(),this.$90$(),this.$91$(),this.$30$(),this.$31$(),this.$26$();},l.prototype.isTitleVisible=function(l){return!("TitleEditingPoint"===l.title&&!this.editor.pointsEditingMode)&&c.prototype.isTitleVisible.call(this,l);},l.prototype.$35$=function(l){return l&&"s:edge.type"===l.property?void this.filterPropertiesLater():void c.prototype.$35$.call(this,l);},l.prototype.isPropertyVisible=function(l){if(this.data){var b=l.items.tag;if(b){var f=this.data.s("edge.type");if("edgeRipple"===b){if("ripple"!==f)return!1;}else if("edgeRadius"===b){if(!Rf[f])return!1;}else if("edgeOrtho"===b){if("ortho"!==f&&"ortho2"!==f)return!1;}else if("edgeFlex"===b){if("flex"!==f&&"flex2"!==f)return!1;}else if("edgeExtend"===b){if(!of[f])return!1;}else if("layer"===b&&!this.editor.layerPane.layerNames.length)return!1;}}return c.prototype.isPropertyVisible.call(this,l);},l.prototype.$28$=function(){c.prototype.$28$.call(this),this.addDBLayer(),this.addDBInput("p",n("editor.tooltip"),"toolTip"),this.addDBOpacityProperty(),this.$84$();},l.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",n("editor.color"),"select.color"),this.addDBInput("s",n("editor.width"),"select.width","number",1);var c=[];this.addLabelCheckBox(c,n("editor.shadow"),function(c){return"shadow"===c.s("select.type");},function(c,l){c.s("select.type",l?"shadow":null);}),this.addDBRow(c,"s","select.type"),this.addDBInput("s",n("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",n("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",n("editor.shadowoffsety"),"shadow.offset.y","number",1);},l.prototype.$89$=function(){this.addTitle("TitleEdgeBasic"),this.addDBInput("s",n("editor.width"),"edge.width","number",1),this.addDBCheckBox("s",n("editor.widthabsolute"),"edge.width.absolute"),this.addDBPattern("s",n("editor.pattern"),"edge.pattern"),this.addDBColor("s",n("editor.color"),"edge.color"),this.addDBCheckBox("s",n("editor.threed"),"edge.3d"),this.addDBColor("s",n("editor.threedcolor"),"edge.3d.color"),this.addDBComboBox("s",n("editor.join"),"edge.join",Gl.consts.joins,Gl.consts.joinLabels),this.addDBComboBox("s",n("editor.cap"),"edge.cap",Gl.consts.caps,Gl.consts.capLabels),this.addDBInput("s",n("editor.group"),"edge.group"),this.addDBInput("s",n("editor.offset"),"edge.offset","number",1),this.addDBInput("s",n("editor.gap"),"edge.gap","number",1),this.addDBComboBox("s",n("editor.type"),"edge.type",Gl.consts.edgeTypes),this.addDBInput("s",n("editor.radius"),"edge.corner.radius","number",1).items.tag="edgeRadius",this.addDBZeroToOne("s",n("editor.ortho"),"edge.ortho").items.tag="edgeOrtho",this.addDBInput("s",n("editor.flex"),"edge.flex","number",1).items.tag="edgeFlex",this.addDBInput("s",n("editor.extend"),"edge.extend","number",1).items.tag="edgeExtend",this.addDBInput("s",n("editor.ripplesize"),"edge.ripple.size","int",1).items.tag="edgeRipple",this.addDBInput("s",n("editor.ripplelength"),"edge.ripple.length","number",1).items.tag="edgeRipple",this.addDBInput("s",n("editor.rippleelevation"),"edge.ripple.elevation","number",1).items.tag="edgeRipple",this.addDBCheckBox("s",n("editor.rippleboth"),"edge.ripple.both").items.tag="edgeRipple",this.addDBCheckBox("s",n("editor.ripplestraight"),"edge.ripple.straight").items.tag="edgeRipple",this.addDBCheckBox("s",n("editor.center"),"edge.center"),this.addDBCheckBox("s",n("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",n("editor.visible"),"2d.visible"),this.addDBCheckBox("s",n("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",n("editor.editable"),"2d.editable"),this.addDBCheckBox("s",n("editor.independent"),"edge.independent"),this.addDBCheckBox("s",n("editor.toggleable"),"edge.toggleable");var c=[],l=function l(c,_l4){c instanceof ht.Edge&&c.toggle();};l.once=!0,this.addLabelCheckBox(c,n("editor.expanded"),function(c){return c.s("edge.expanded");},l),this.addDBRow(c,"s","edge.expanded");},l.prototype.$91$=function(){this.addTitle("TitleEdgeDash"),this.addDBCheckBox("s",n("editor.dash"),"edge.dash"),this.addDBPattern("s",n("editor.pattern"),"edge.dash.pattern"),this.addDBColor("s",n("editor.color"),"edge.dash.color"),this.addDBInput("s",n("editor.offset"),"edge.dash.offset","number",1),this.addDBInput("s",n("editor.width"),"edge.dash.width","number",1),this.addDBCheckBox("s",n("editor.threed"),"edge.dash.3d"),this.addDBColor("s",n("editor.threedcolor"),"edge.dash.3d.color");},l.prototype.$90$=function(){this.addTitle("TitleEdgeEndpoint"),this.addDBData("p",n("editor.sourcenode"),"source",function(c,l){c instanceof ht.Edge&&(null==l||l instanceof ht.Node)&&c.setSource(l);}),this.addDBData("p",n("editor.targetnode"),"target",function(c,l){c instanceof ht.Edge&&(null==l||l instanceof ht.Node)&&c.setTarget(l);}),this.addDBPosition("s",n("editor.sourceposition"),"edge.source.position"),this.addDBInput("s",n("editor.sourceoffsetx"),"edge.source.offset.x","number",1),this.addDBInput("s",n("editor.sourceoffsety"),"edge.source.offset.y","number",1),this.addDBInput("s",n("editor.sourceanchorx"),"edge.source.anchor.x","number",.01),this.addDBInput("s",n("editor.sourceanchory"),"edge.source.anchor.y","number",.01),this.addDBPosition("s",n("editor.targetposition"),"edge.target.position"),this.addDBInput("s",n("editor.targetoffsetx"),"edge.target.offset.x","number",1),this.addDBInput("s",n("editor.targetoffsety"),"edge.target.offset.y","number",1),this.addDBInput("s",n("editor.targetanchorx"),"edge.target.anchor.x","number",.01),this.addDBInput("s",n("editor.targetanchory"),"edge.target.anchor.y","number",.01);},l;}(sf),df=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.$92$(),this.addLayoutProperties(),this.$23$(),this.$32$(),this.$94$(),this.$93$(),this.$29$(),this.$30$(),this.$31$(),this.$26$();},l.prototype.$35$=function(l){return l&&"s:group.type"===l.property?void this.filterPropertiesLater():void c.prototype.$35$.call(this,l);},l.prototype.isTitleVisible=function(l){return(!this.data||!this.data.s("group.type")||"TitleGroupTitle"!==l.title)&&c.prototype.isTitleVisible.call(this,l);},l.prototype.isPropertyVisible=function(l){if(this.data){var b=l.items.tag;if(b&&"groupDepth"===b){var f=this.data.s("group.type");if(f&&"rect"!==f)return!1;}}return c.prototype.isPropertyVisible.call(this,l);},l.prototype.$32$=function(){this.addTitle("TitleGroupBasic"),this.addDBComboBox("s",n("editor.type"),"group.type",[void 0,"rect","oval","circle","roundRect"],["",n("editor.grouptype.rect"),n("editor.grouptype.oval"),n("editor.grouptype.circle"),n("editor.grouptype.roundrect")]),this.addDBPosition("s",n("editor.position"),"group.position"),this.addDBColor("s",n("editor.background"),"group.background"),this.addDBGradient(n("editor.gradient"),"group.gradient","group.background","group.gradient.color"),this.addDBColor("s",n("editor.gradientcolor"),"group.gradient.color"),this.addDBImage("s",n("editor.image"),"group.image"),this.addDBStretch("s",n("editor.stretch"),"group.image.stretch"),this.addDBImage("s",n("editor.repeatimage"),"group.repeat.image"),this.addDBCheckBox("s",n("editor.toggleable"),"group.toggleable"),this.addDBCheckBox("p",n("editor.expanded"),"expanded"),this.addDBInput("s",n("editor.depth"),"group.depth","number",1).items.tag="groupDepth";},l.prototype.$94$=function(){this.addTitle("TitleGroupTitle"),this.addDBLabel("s",n("editor.content"),"label"),this.addDBFont("s",n("editor.font"),"group.title.font"),this.addDBColor("s",n("editor.color"),"group.title.color"),this.addDBColor("s",n("editor.background"),"group.title.background"),this.addDBAlign("s",n("editor.align"),"group.title.align"),this.addDBOrientation("s",n("editor.valuetype.orientation"),"group.title.orientation"),this.addDBCheckBox("s","\u5206\u5272\u7EBF","group.splitLine");},l.prototype.$93$=function(){this.addTitle("TitleGroupBorder"),this.addDBInput("s",n("editor.width"),"group.border.width","number",1),this.addDBPattern("s",n("editor.pattern"),"group.border.pattern"),this.addDBColor("s",n("editor.color"),"group.border.color"),this.addDBComboBox("s",n("editor.join"),"group.border.join",Gl.consts.joins,Gl.consts.joinLabels),this.addDBComboBox("s",n("editor.cap"),"group.border.cap",Gl.consts.caps,Gl.consts.capLabels),this.addDBInput("s",n("editor.radius"),"group.border.radius","number",1),this.addDBInput("s",n("editor.padding"),"group.padding","number",1),this.addDBInput("s",n("editor.paddingleft"),"group.padding.left","number",1),this.addDBInput("s",n("editor.paddingright"),"group.padding.right","number",1),this.addDBInput("s",n("editor.paddingtop"),"group.padding.top","number",1),this.addDBInput("s",n("editor.paddingbottom"),"group.padding.bottom","number",1);},l;}(_f),Sf=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){this.$27$(),this.addCustomProperties(),this.$28$(),this.addLayoutProperties(),this.$23$(),this.$29$(),this.$30$(),this.$31$(),this.$26$();},l.prototype.isTitleVisible=function(l){return!("TitleEditingPoint"===l.title&&!this.editor.pointsEditingMode)&&c.prototype.isTitleVisible.call(this,l);},l.prototype.$24$=function(){this.addDBCheckBox("p",n("editor.closed"),"closePath"),this.addDBColor("s",n("editor.outlinecolor"),"border.color"),this.addDBInput("s",n("editor.outlinewidth"),"border.width","number",1);},l.prototype.$25$=function(){c.prototype.$25$.call(this),this.addDBComboBox("s",n("editor.fillrule"),"shape.fill.rule",Gl.consts.fillRules,Gl.consts.fillRuleLabels);},l.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",n("editor.color"),"select.color"),this.addDBInput("s",n("editor.width"),"select.width","number",1);var c=[];this.addLabelCheckBox(c,n("editor.shadow"),function(c){return"shadow"===c.s("select.type");},function(c,l){c.s("select.type",l?"shadow":null);}),this.addDBRow(c,"s","select.type"),this.addDBInput("s",n("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",n("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",n("editor.shadowoffsety"),"shadow.offset.y","number",1);},l;}(_f),Ef=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.$23$=function(){c.prototype.$23$.call(this),this.addDBCheckBox("p",n("editor.clickthroughenabled"),"clickThroughEnabled");var l=[];this.addLabelCheckBox(l,n("editor.syncsize"),function(c){return c.isSyncSize();},function(c,l){c instanceof ht.Block&&(c.setSyncSize(l),c instanceof ht.RefGraph&&(c.p(0,0),c.setRotation(0),c.setAnchor(.5,.5),c.setScale(1,1),c.setSize(20,20),c.setRef(c.getRef())));}),this.addDBRow(l,"p","syncSize");},l.prototype.addDBGray=function(){},l.prototype.addDBBodyColorProperty=function(){},l.prototype.addDBOpacityProperty=function(){},l.prototype.$92$=function(){},l.prototype.$29$=function(){},l.prototype.$85$=function(){},l;}(_f),qf=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.$28$=function(){c.prototype.$28$.call(this),this.addDBRef();},l.prototype.addDBRef=function(){var c=this,l=[],b=function b(c){return c.getRef();},f=function f(c,l){c instanceof ht.RefGraph&&(c.p(0,0),c.setRotation(0),c.setAnchor(.5,.5),c.setScale(1,1),c.setSize(20,20),c.setRef(l));},U=function U(l,b){var f=b.view.draggingData;return!!f&&c.editor.url!==f.url&&f.fileType===rl;};return this.addLabelURL(l,n("editor.ref"),b,f,U),this.addDBRow(l,"p","ref");},l.prototype.addDBGray=function(){},l;}(Ef),Pf=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.addLayoutProperties(),this.$22$(),this.$23$(),this.$26$();},l.prototype.$22$=function(){this.addTitle("TitleText"),this.addDBInput("s",n("editor.content"),"text"),this.addDBAlign("s",n("editor.align"),"text.align"),this.addDBVAlign("s",n("editor.valign"),"text.vAlign"),this.addDBColor("s",n("editor.color"),"text.color"),this.addDBFont("s",n("editor.font"),"text.font"),this.addDBCheckBox("s",n("editor.shadow"),"text.shadow"),this.addDBColor("s",n("editor.shadowcolor"),"text.shadow.color"),this.addDBInput("s",n("editor.shadowblur"),"text.shadow.blur","number",1),this.addDBInput("s",n("editor.shadowoffsetx"),"text.shadow.offset.x","number",1),this.addDBInput("s",n("editor.shadowoffsety"),"text.shadow.offset.y","number",1);},l;}(_f),Of=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f,"comp"));}return wl(l,c),l.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.addLayoutProperties(),this.$20$();},l.prototype.isTitleVisible=function(l){return!!this.inspectorFilter.isCompTitleVisible(this.editor,this.data?this.data.compType:null,l.title)&&c.prototype.isTitleVisible.call(this,l);},l.prototype.isPropertyVisible=function(l){return!!this.inspectorFilter.isCompPropertyVisible(this.editor,this.data?this.data.compType:null,l.keys&&l.keys.name)&&c.prototype.isPropertyVisible.call(this,l);},l.prototype.$12$=function(){this.addTitle("TitleBasic"),this.addEventProperties(),this.$14$(),this.$15$(),this.$13$(),this.$21$(),this.$16$(),this.$17$(),this.$18$(),this.$19$(),this.addStyleCheckBox(n("editor.visible"),"2d.visible","visible"),this.addStyleCheckBox(n("editor.selectable"),"2d.selectable","selectable"),this.addStyleCheckBox(n("editor.movable"),"2d.movable","movable"),this.addStyleCheckBox(n("editor.editable"),"2d.editable","editable"),this.addStyleCheckBox(n("editor.pixelperfect"),"comp.pixelPerfect","pixelPerfect"),this.addStyleZeroToOne(n("editor.opacity"),"opacity","opacity");},l.prototype.$13$=function(){var c=[];this.addLabelInput(c,n("editor.area"),function(c){return"["+f(c.p().x-c.getWidth()*c.getAnchor().x)+","+f(c.p().y-c.getHeight()*c.getAnchor().y)+","+f(c.getWidth())+","+f(c.getHeight())+"]";}),this.addFuncRow(c,"rect");},l.prototype.$14$=function(){var c=[];this.addLabelInput(c,n("editor.type"),function(c){return c.compType;}),this.addRow(c,[Gl.config.indent,.1]).keys={name:"type"};},l.prototype.$15$=function(){var c=[];this.addLabelInput(c,n("editor.name"),function(c){return c.getDisplayName();},function(c,l){c.setDisplayName(l);}),this.addFuncRow(c,"displayName");},l.prototype.$16$=function(){var c=[];this.addLabelInput(c,n("editor.rotation"),function(c){return 180/Math.PI*c.getRotation();},function(c,l){c instanceof ht.Node&&c.setRotation(l*Math.PI/180);},"number",1),this.addFuncRow(c,"rotation");},l.prototype.$17$=function(){var c=[];this.addLabelInput(c,n("editor.anchorx"),function(c){return c.getAnchor().x;},function(c,l){c instanceof ht.Node&&c.setAnchor(l,c.getAnchor().y,!0);},"number",.01),this.addFuncRow(c,"anchorX"),c=[],this.addLabelInput(c,n("editor.anchory"),function(c){return c.getAnchor().y;},function(c,l){c instanceof ht.Node&&c.setAnchor(c.getAnchor().x,l,!0);},"number",.01),this.addFuncRow(c,"anchorY");},l.prototype.$18$=function(){var c=[];this.addLabelInput(c,n("editor.scalex"),function(c){return c.getScale().x;},function(c,l){c instanceof ht.Node&&c.setScale(l,c.getScale().y);},"number",.01),this.addFuncRow(c,"scaleX"),c=[],this.addLabelInput(c,n("editor.scaley"),function(c){return c.getScale().y;},function(c,l){c instanceof ht.Node&&c.setScale(c.getScale().x,l);},"number",.01),this.addFuncRow(c,"scaleY");},l.prototype.$19$=function(){this.addStyleZeroToOne(n("editor.clippercentage"),"clip.percentage","clipPercentage"),this.addStyleComboBox(n("editor.clipdirection"),"clip.direction",Gl.consts.clipDirections,Gl.consts.clipDirectionLabels,null,"clipDirection");},l.prototype.$20$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(n("editor.shadow"),"shadow","shadow"),this.addStyleColor(n("editor.shadowcolor"),"select.color","shadowColor"),this.addStyleInput(n("editor.shadowblur"),"shadow.blur","number",1,"shadowblur"),this.addStyleInput(n("editor.shadowoffsetx"),"shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(n("editor.shadowoffsety"),"shadow.offset.y","number",1,"shadowOffsetYs");},l.prototype.$21$=function(){var c=[];return this.addLabelInput(c,n("editor.posx"),function(c){return c.p().x;},function(c,l){c instanceof ht.Node&&c.p(l,c.p().y);},"number",1),this.addLabelInput(c,n("editor.posy"),function(c){return c.p().y;},function(c,l){c instanceof ht.Node&&c.p(c.p().x,l);},"number",1),this.addRow(c,[Gl.config.indent,.1,Gl.config.indent2,.1]).keys={name:"position"},c=[],this.addLabelInput(c,n("editor.width"),function(c){return c.getWidth();},function(c,l){c instanceof ht.Node&&c.setWidth(l);},"number",1),this.addLabelInput(c,n("editor.height"),function(c){return c.getHeight();},function(c,l){c instanceof ht.Node&&c.setHeight(l);},"number",1),this.addRow(c,[Gl.config.indent,.1,Gl.config.indent2,.1]).keys={name:"size"},c;},l.prototype.addStyleColor=function(c,l,b){var f=[];return this.addLabelColor(f,c,function(c){return c.s(l);},function(c,b){c.s(l,b);}),this.addFuncRow(f,l,b);},l.prototype.addStyleFunction=function(c,l,b){var f=[];return this.addLabelFunction(f,c,function(c){return c.s(l);},function(c,b){c.s(l,b);},b),this.addFuncRow(f,l,b);},l.prototype.addStyleObject=function(c,l,b){var f=[];return this.addLabelObject(f,c,function(c){return c.s(l);},function(c,b){c.s(l,b);},b),this.addFuncRow(f,l,b);},l.prototype.addStyleLabel=function(c,l,b){var f=[];return this.addLabelInput(f,c,function(c){var b=c.s(l);return b&&b.replace&&(b=b.replace(/\n/g,"\\n")),b;},function(c,b){b&&b.replace&&(b=b.replace(/\\n/g,"\n")),c.s(l,b);}),this.addFuncRow(f,l,b);},l.prototype.addStyleArray=function(c,l,b,f,n){var U=[];return this.addLabelArray(U,c,function(c){return c.s(l);},function(c,b){c.s(l,b);},f),this.addFuncRow(U,l,b,n);},l.prototype.addStyleMultiline=function(c,l,b,f){var n=[];return this.addLabelMultiline(n,c,function(c){return c.s(l);},function(c,b){c.s(l,b);}),this.addFuncRow(n,l,b,f);},l.prototype.addStyleFont=function(c,l,b,f){var n=[];return this.addLabelFont(n,c,function(c){return c.s(l);},function(c,b){c.s(l,b);}),this.addFuncRow(n,l,b,f);},l.prototype.addStyleTextArea=function(c,l,b,f){var n=[];return this.addLabelTextArea(n,c,function(c){return c.s(l);},function(c,b){c.s(l,b);}),this.addFuncRow(n,l,f,b);},l.prototype.addStyleInput=function(c,l,b,f,n){var U=[];return this.addLabelInput(U,c,function(c){return c.s(l);},function(c,b){c.s(l,b);},b,f),this.addFuncRow(U,l,n);},l.prototype.addStyleCheckBox=function(c,l,b){var f=[];return this.addLabelCheckBox(f,c,function(c){return c.s(l);},function(c,b){c.s(l,b);}),this.addFuncRow(f,l,b);},l.prototype.addStyleAlign=function(c,l,b){var f=[];return this.addLabelComboBox(f,c,function(c){return c.s(l)||"center";},function(c,b){c.s(l,b);},["left","center","right"],[n("editor.align.left"),n("editor.align.center"),n("editor.align.right")]),this.addFuncRow(f,l,b);},l.prototype.addStyleVAlign=function(c,l,b){var f=[];return this.addLabelComboBox(f,c,function(c){return c.s(l)||"bottom";},function(c,b){c.s(l,b);},["top","middle","bottom"],[n("editor.valign.top"),n("editor.valign.middle"),n("editor.valign.bottom")]),this.addFuncRow(f,l,b);},l.prototype.addStyleStretch=function(c,l,b){var f=[];return this.addLabelComboBox(f,c,function(c){return c.s(l)||"fill";},function(c,b){c.s(l,b);},["fill","uniform","centerUniform"],[n("editor.stretch.fill"),n("editor.stretch.uniform"),n("editor.stretch.centeruniform")]),this.addFuncRow(f,l,b);},l.prototype.addStyleComboBox=function(c,l,b,f,n,U){var $=[];return this.addLabelComboBox($,c,function(c){return c.s(l);},function(c,b){c.s(l,b);},b,f,n),this.addFuncRow($,l,U);},l.prototype.addStyleImage=function(c,l,b){var f=[];return this.addLabelImage(f,c,function(c){return c.s(l);},function(c,b){c.s(l,b);}),this.addFuncRow(f,l,b);},l.prototype.addStyleURL=function(c,l,b){var f=[];return this.addLabelURL(f,c,function(c){return c.s(l);},function(c,b){c.s(l,b);}),this.addFuncRow(f,l,b);},l.prototype.addStylePattern=function(c,l,b){var f=[];return this.addLabelInput(f,c,function(c){return c.s(l);},function(c,b){c.s(l,b);},"pattern"),this.addFuncRow(f,l,b);},l.prototype.addStyleZeroToOne=function(c,l,b){return this.addStyleRange(c,l,0,1,.01,b);},l.prototype.addStylePosition=function(c,l,b){return this.addStyleRange(c,l,1,55,1,b);},l.prototype.addStyleRange=function(c,l,b,f,n,U){var $=[];return this.addLabelInput($,c,function(c){var b=c.s(l);return null==b?f:b;},function(c,n){void 0!==f&&n>f&&(n=f),void 0!==b&&n<b&&(n=b),c.s(l,n);},"number",n),this.addFuncRow($,l,U);},l.prototype.addStyleRotation=function(c,l,b,f,n,U){var $=[];return this.addLabelInput($,c,function(c){var b=c.s(l);return null==b?n:180/Math.PI*b;},function(c,b){b=b*Math.PI/180,void 0!==n&&b>n&&(b=n),void 0!==f&&b<f&&(b=f),c.s(l,b);},"number",U||1),this.addFuncRow($,l,b);},l.prototype.addStyleGradient=function(c,l,b,f,n){var U=[];return this.addLabelGradient(U,c,l,b,f),this.addFuncRow(U,l,n);},l.prototype.addLayoutProperties=function(){var c=this,l=this.addTitle("TitleNodeLayout");l.visible=function(c){return!!c.dataModel.a("fitSize");};var b=this.layoutGv=new ht.graph.GraphView(),f=this.layoutNode=new ht.Node(),U=!1;f.setImage("editor.layout.helper"),f.a("selectColor",Gl.config.color_select),b.dm().add(f),b.tx(50),b.ty(50),b.handleScroll=function(){},b.handlePinck=function(){},b.setScrollBarVisible(!1),b.setRectSelectable(!1),b.setPannable(!1),b.setMovableFunc(function(){return!1;}),b.dm().md(function(l){U||(c.beginTransaction(),c.dataModel.sm().getSelection().each(function(c){"a:layout.v"===l.property?c.s("layout.v",l.newValue):"a:layout.h"===l.property&&c.s("layout.h",l.newValue);}),c.endTransaction());}),this.addRow(["",{element:b},""],[.1,100,.1],100),this.addUpdateHandler(function(l,b){var n=c.data;U=!0,f.a({"layout.v":n.s("layout.v"),"layout.h":n.s("layout.h")}),U=!1;});var $=[];this.addLabelComboBox($,n("editor.nodeLayout.h"),function(c){return c.s("layout.h");},function(c,l){c.s("layout.h",l);},Gl.consts.hLayoutValues,Gl.consts.hLayoutLabels),this.addFuncRow($,"layout.h"),$=[],this.addLabelComboBox($,n("editor.nodeLayout.v"),function(c){return c.s("layout.v");},function(c,l){c.s("layout.v",l);},Gl.consts.vLayoutValues,Gl.consts.vLayoutLabels),this.addFuncRow($,"layout.v");},l;}(Kf),cn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.$35$=function(l){return l&&"s:shape"===l.property?void this.filterPropertiesLater():void c.prototype.$35$.call(this,l);},l.prototype.isTitleVisible=function(l){if(this.data){var b=this.data.s("shape");if("TitleArc"===l.title&&"arc"!==b)return!1;}return c.prototype.isTitleVisible.call(this,l);},l.prototype.isPropertyVisible=function(l){if(this.data){var b=l.items.tag;if(b){var f=this.data.s("shape");if("shapeDepth"===b&&"rect"!==f)return!1;if("shapeCornerRadius"===b&&"roundRect"!==f)return!1;if("shapePolygonSide"===b&&"polygon"!==f)return!1;}}return c.prototype.isPropertyVisible.call(this,l);},l.prototype.initForm=function(){c.prototype.initForm.call(this),this.$37$(),this.$38$(),this.addDashProperties(),this.addArcProperties();},l.prototype.$14$=function(){this.addStyleComboBox(n("editor.type"),"shape",Gl.consts.shapes.slice(1),Gl.consts.shapeLabels.slice(1),Gl.consts.shapeIcons.slice(1),"type");},l.prototype.$37$=function(){this.addTitle("TitleBackground"),this.addStyleColor(n("editor.background"),"shape.background","background"),this.addStyleImage(n("editor.repeatimage"),"shape.repeat.image","repeatImage"),this.addStyleGradient(n("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color","gradient"),this.addStyleColor(n("editor.gradientcolor"),"shape.gradient.color","gradientColor"),this.addStyleZeroToOne(n("editor.clippercentage"),"shape.fill.clip.percentage","fillClipPercentage"),this.addStyleComboBox(n("editor.clipdirection"),"shape.fill.clip.direction",Gl.consts.clipDirections,Gl.consts.clipDirectionLabels,null,"fillClipDirection");},l.prototype.$38$=function(){this.addTitle("TitleBorder"),this.addStyleInput(n("editor.width"),"shape.border.width","number",1,"borderWidth"),this.addStyleCheckBox(n("editor.widthabsolute"),"shape.border.width.absolute","borderWidthAbsolute"),this.addStyleColor(n("editor.color"),"shape.border.color","borderColor"),this.addStylePattern(n("editor.pattern"),"shape.border.pattern","borderPattern"),this.addStyleCheckBox(n("editor.threed"),"shape.border.3d","border3d"),this.addStyleColor(n("editor.threedcolor"),"shape.border.3d.color","border3dColor"),this.addStyleComboBox(n("editor.cap"),"shape.border.cap",Gl.consts.caps,Gl.consts.capLabels,null,"borderCap"),this.addStyleComboBox(n("editor.join"),"shape.border.join",Gl.consts.joins,Gl.consts.joinLabels,null,"borderJoin"),this.addStyleInput(n("editor.depth"),"shape.depth","int",1,"depth").items.tag="shapeDepth",this.addStyleInput(n("editor.radius"),"shape.corner.radius","number",1,"cornerRadius").items.tag="shapeCornerRadius",this.addStyleInput(n("editor.sides"),"shape.polygon.side","int",1,"polygonSide").items.tag="shapePolygonSide";},l.prototype.addDashProperties=function(){this.addTitle("TitleDash"),this.addStyleCheckBox(n("editor.dash"),"shape.dash","dash"),this.addStylePattern(n("editor.pattern"),"shape.dash.pattern","dashPattern"),this.addStyleColor(n("editor.color"),"shape.dash.color","dashColor"),this.addStyleInput(n("editor.offset"),"shape.dash.offset","number",1,"dashOffset"),this.addStyleInput(n("editor.width"),"shape.dash.width","number",1,"dashWidth"),this.addStyleCheckBox(n("editor.threed"),"shape.dash.3d","dash3d"),this.addStyleColor(n("editor.threedcolor"),"shape.dash.3d.color","dash3dColor");},l.prototype.addArcProperties=function(){this.addTitle("TitleArc"),this.addStyleCheckBox(n("editor.arcoval"),"shape.arc.oval","arcOval"),this.addStyleCheckBox(n("editor.closed"),"shape.arc.close","arcClose"),this.addStyleRotation(n("editor.arcfrom"),"shape.arc.from","arcFrom"),this.addStyleRotation(n("editor.arcto"),"shape.arc.to","arcTo");},l;}(Of),ln=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this),this.addTitle("TitleImage");var l=[];this.addLabelImage(l,n("editor.name"),function(c){return c.s("image");},function(c,l){Yc(l)&&l.endsWith("[...]")||c.s("image",l);}),this.addButton(l,null,n("editor.resetsize"),"editor.resetsize.state",function(c){c instanceof ht.Node&&c.setSize(-1,-1);}),this.addFuncRow(l,"image","name"),this.addStyleColor(n("editor.color"),"body.color","color"),this.addStyleStretch(n("editor.stretch"),"image.stretch","stretch");},l;}(Of),bn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this),this.$44$();},l.prototype.$44$=function(){this.addTitle("TitleBorder"),this.addStyleInput(n("editor.width"),"border_width","number",1,"border"),this.addStyleColor(n("editor.color"),"border_color","color");},l;}(Of),fn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this),this.addBasicChartProperties();},l.prototype.addBasicChartProperties=function(){this.addTitle("TitleChart"),this.addStyleCheckBox(n("editor.text"),"chart.label","label"),this.addStyleColor(n("editor.color"),"chart.label.color","labelColor"),this.addStyleFont(n("editor.font"),"chart.label.font","labelFont");},l;}(Of),nn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this),this.addPieChartProperties();},l.prototype.addBasicChartProperties=function(){c.prototype.addBasicChartProperties.call(this),this.addStyleRotation(n("editor.rotation"),"chart.start.angle","startAngle"),this.addStyleCheckBox(n("editor.hollow"),"chart.hollow","hollow");},l.prototype.createChartIndexColumn=function(c){var l=this;return{name:c,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function getValueType(c){return"chart.values"===c.getTag()?"number":"color";},getValue:function getValue(b){if(l.data){var f=l.data.s(b.getTag());return f?f[c]:void 0;}},setValue:function setValue(b,f,n,U){var $=b.getTag(),H=function H(l,b){var f=qc(l.s($));f[c]=b,"chart.values"===$?Sc(f):Ec(f),l.s($,f);};l.setValue(H,n);}};},l.prototype.addPieChartProperties=function(){var c=this,l=this.tableModel=new ht.DataModel(),b=this.tablePane=new jb(l),f=this.tableView=b.getTableView();b.getTableHeader().setMovable(!1),f.setEditable(!0),b.getView().style.border=Gl.config.color_line+" solid 1px";var U=[b];this.addRow(U,[.1],ht.Default.widgetRowHeight+4*f.getRowHeight()).keys={name:"chartTable"};var $=new ht.Data(),H=new ht.Data();$.setTag("chart.values"),H.setTag("chart.colors"),l.add($),l.add(H),this.updateHandlers.push(function(){if(!U.hidden&&c.data){f.getColumnModel().clear(),b.addColumns([{name:n("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function getValue(l){if(!c.data)return 0;var b=c.data.s("chart.values");return b?b.length:0;},setValue:function setValue(l,b,f,n){var U=function U(c,l){if(l>=0){var b=qc(c.s("chart.values"),l);Sc(b),c.s("chart.values",b),b=qc(c.s("chart.colors"),l),Ec(b),c.s("chart.colors",b);}};c.setValue(U,f);}},{tag:"binding",name:n("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function isCellEditable(l,f,n,U){var $="chart.values"===l.getTag()?"values":"colors";return c.editor.funcView.toggle(b,l.getTag(),$,c),!1;},drawCell:function drawCell(l,b,f,n,U,$,H,L,e){var I=!!c.data.a(b.getTag()),Y=ht.Default.getImage(I?"editor.bind":"editor.unbind"),D=I&&!f?Gl.config.color_select:Gl.config.color_dark;o(l,Y,"centerUniform",U,$,H,L,b,e,D);}}]);for(var l=c.data.s("chart.values"),$=l?l.length:0,H=0;H<$;H++){b.addColumns([c.createChartIndexColumn(H)]);}}});},l;}(fn),Un=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this),this.addOneDimensionalProperties();},l.prototype.createChartIndexColumn=function(c){var l=this;return{name:c,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function getValueType(c){return"values"===c.getTag()?"number":"color";},getValue:function getValue(b){if(l.data){var f=Wc(l.data.s("chart.series"));if(f&&f[0]){var n=Wc(f[0][b.getTag()]);return n?n[c]:void 0;}}},setValue:function setValue(f,n,U,$){var H=f.getTag(),L=function L(l,f){var n=l.s("chart.series");if(n){var U=b(n),$=Wc(U);if($[0]){var L=Wc($[0][H]);L&&L[c]!==f&&(L[c]=f,"values"===H?Sc(L):Ec(L),l.s("chart.series",U));}}};l.setValue(L,U);}};},l.prototype.addOneDimensionalProperties=function(){var c=this,l=this.tableModel=new ht.DataModel(),f=this.tablePane=new jb(l),U=this.tableView=f.getTableView();f.getTableHeader().setMovable(!1),U.setEditable(!0),f.getView().style.border=Gl.config.color_line+" solid 1px";var $=[f];this.addRow($,[.1],ht.Default.widgetRowHeight+4*U.getRowHeight()).keys={name:"chartTable"};var H=new ht.Data(),L=new ht.Data();H.setTag("values"),L.setTag("colors"),l.add(H),l.add(L),this.updateHandlers.push(function(){if(!$.hidden&&c.data){U.getColumnModel().clear(),f.addColumns([{name:n("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function getValue(l){if(!c.data)return 0;var b=Wc(c.data.s("chart.series"));if(!b)return 0;if(!b[0])return 0;var f=Wc(b[0].values);return f?f.length:0;},setValue:function setValue(l,f,n,U){var $=function $(c,l){if(l>=0){var f=c.s("chart.series"),n=f?b(f):[],U=Wc(n);U[0]||(U[0]={});var $=U[0];$.values||($.values=[]),$.colors||($.colors=[]);var H=Wc($.values),L=Wc($.colors);l===H.length&&l===L.length||(H.length=l,L.length=l,Sc(H),Ec(L),c.s("chart.series",n));}};c.setValue($,n);}},{tag:"binding",name:n("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function isCellEditable(l,n,U,$){var H=l.getTag(),L=function L(){return al(c.data,H);},e=function e(l){c.setValue(function(c,f){var n=c.s("chart.series");if(n){var U=b(n),$=Wc(U);if($[0]){var L=Wc($[0][H]);$[0][H]=l?{value:L,func:l}:L,c.s("chart.series",U);}}},l);};return c.editor.funcView.toggle(f,H,H,c,L,e),!1;},drawCell:function drawCell(l,b,f,n,U,$,H,L,e){var I=!!al(c.data,b.getTag()),Y=ht.Default.getImage(I?"editor.bind":"editor.unbind"),D=I&&!f?Gl.config.color_select:Gl.config.color_dark;o(l,Y,"centerUniform",U,$,H,L,b,e,D);}}]);for(var l=Zl(c.data,"values"),H=l?l.length:0,L=0;L<H;L++){f.addColumns([c.createChartIndexColumn(L)]);}}});},l;}(fn),$n=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this),this.addSeriesChartProperties();},l.prototype.addSeriesChartProperties=function(){var c=this,l=[],f=function f(c){var l=c.s("chart.series");return l?l.length:0;},U=function U(c,l){if(l>=0){var f=c.s("chart.series"),n=f?b(f):[],U=Wc(n);if(U.length!==l){U.length=l;for(var $=void 0,H=0;H<l;H++){U[H]||(U[H]={});var L=U[H];L.values||(L.values=[]),L.color||(L.color=ht.Color.chart[H%ht.Color.chart.length]);var e=Wc(L.values);Wc(L.colors);0===H?$=e.length:e.length=$,Sc(e);}c.s("chart.series",n);}}};this.addLabelInput(l,n("editor.series"),f,U,"int",1),f=function f(c){var l=c.s("chart.series");if(l){var b=l[0];if(b){var f=Wc(b.values);return f?f.length:0;}}return 0;},U=function U(c,l){if(l>=0){var f=c.s("chart.series"),n=f?b(f):[],U=Wc(n);if(U.length){for(var $=0;$<U.length;$++){U[$]||(U[$]={});var H=U[$];H.values||(H.values=[]);var L=Wc(H.values);if(L.length===l)return;H.color||(H.color=ht.Color.chart[$%ht.Color.chart.length]);Wc(H.colors);L.length=l,Sc(L);}c.s("chart.series",n);}}},this.addLabelInput(l,n("editor.length"),f,U,"int",1),this.addRow(l,[Gl.config.indent,.1,Gl.config.indent2,.1]).keys={name:"chartSeries"};var $=this.tableModel=new ht.DataModel(),H=this.tablePane=new jb($),L=this.tableView=H.getTableView();H.getTableHeader().setMovable(!1),L.setEditable(!0),H.getView().style.border=Gl.config.color_line+" solid 1px";var e=[H];this.addRow(e,[.1],160).keys={name:"chartTable"},this.updateHandlers.push(function(){if(!e.hidden&&c.data){$.clear(),L.getColumnModel().clear();var l=c.data.s("chart.series");if(l)for(var f=0;f<l.length;f++){var U=new ht.Data();U.serie=l[f],U.index=f,$.add(U);}if(H.addColumns([{name:n("editor.index"),width:50,align:"center",sortable:!1,clickable:!1,valueType:"int",getValue:function getValue(c){return c.index;}},{tag:"binding",name:n("editor.colorbinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function isCellEditable(l,f,n,U){var $=l.index,L=function L(){return Vc(l.serie.color);},e=function e(l){c.setValue(function(c,f){var n=c.s("chart.series");if(n){var U=b(n),H=Wc(U),L=H[$];if(L){var e=Wc(L.color);L.color=l?{value:e,func:l}:e,c.s("chart.series",U);}}},l);};return c.editor.funcView.toggle(H,"values","values",c,L,e),!1;},drawCell:function drawCell(c,l,b,f,n,U,$,H,L){var e=!!Vc(l.serie.color),I=ht.Default.getImage(e?"editor.bind":"editor.unbind"),Y=e&&!b?Gl.config.color_select:Gl.config.color_dark;o(c,I,"centerUniform",n,U,$,H,l,L,Y);}},{name:n("editor.color"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"color",getValue:function getValue(c){return Wc(c.serie.color);},setValue:function setValue(l,f,n,U){var $=l.index,H=Wc(l.serie.color);if(n&&H!==n){var L=function L(c,l){var f=c.s("chart.series");if(f){var n=b(f),U=Wc(n),H=U[$];if(H){var L=Vc(H.color);H.color=L?{value:l,func:L}:l,c.s("chart.series",n);}}};c.setValue(L,n);}}},{tag:"binding",name:n("editor.valuebinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function isCellEditable(l,f,n,U){var $=l.index,L=function L(){return Vc(l.serie.values);},e=function e(l){c.setValue(function(c,f){var n=c.s("chart.series");if(n){var U=b(n),H=Wc(U),L=H[$];if(L){var e=Wc(L.values);L.values=l?{value:e,func:l}:e,c.s("chart.series",U);}}},l);};return c.editor.funcView.toggle(H,"values","values",c,L,e),!1;},drawCell:function drawCell(c,l,b,f,n,U,$,H,L){var e=!!Vc(l.serie.values),I=ht.Default.getImage(e?"editor.bind":"editor.unbind"),Y=e&&!b?Gl.config.color_select:Gl.config.color_dark;o(c,I,"centerUniform",n,U,$,H,l,L,Y);}}]),l){var I=l[0];if(I){var Y=Wc(I.values);if(Y)for(var D=0;D<Y.length;D++){H.addColumns([c.createChartIndexColumn(D)]);}}}}});},l.prototype.createChartIndexColumn=function(c){var l=this;return{name:c,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"number",getValue:function getValue(l){var b=Wc(l.serie.values);return b?b[c]:void 0;},setValue:function setValue(f,n,U,$){var H=f.index,L=function L(l,f){var n=l.s("chart.series");if(n){var U=b(n),$=Wc(U);if($[H]){var L=Wc($[H].values);L&&L[c]!==f&&(L[c]=f,l.s("chart.series",U));}}};l.setValue(L,U);}};},l;}(fn),Hn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.addBasicChartProperties=function(){c.prototype.addBasicChartProperties.call(this),this.addStyleComboBox(n("editor.type"),"chart.type",Gl.consts.columnChartTypes,Gl.consts.columnChartTypeLabels,null,"type");},l.prototype.$14$=function(){},l;}($n),Ln=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this);},l;}($n),en=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){this.$27$(),c.prototype.initForm.call(this);},l.prototype.isTitleVisible=function(l){return!("TitleEditingPoint"===l.title&&!this.editor.pointsEditingMode)&&c.prototype.isTitleVisible.call(this,l);},l.prototype.$14$=function(){var c=[];this.addLabelInput(c,n("editor.type"),function(c){return c.compType;}),this.addRow(c,[Gl.config.indent,.1]).keys={name:"type"};},l.prototype.$37$=function(){c.prototype.$37$.call(this),this.addStyleComboBox(n("editor.fillrule"),"shape.fill.rule",Gl.consts.fillRules,Gl.consts.fillRuleLabels,null,"fillRule");},l.prototype.$38$=function(){c.prototype.$38$.call(this);var l=[];this.addLabelCheckBox(l,n("editor.closed"),function(c){return c.isClosePath();},function(c,l){c instanceof ht.Shape&&c.setClosePath(l);}),this.addFuncRow(l,"name");},l;}(cn),In=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this),this.addTitle("TitleText"),this.addStyleLabel(n("editor.text"),"text","text"),this.addStyleAlign(n("editor.align"),"text.align","align"),this.addStyleVAlign(n("editor.valign"),"text.vAlign","vAlign"),this.addStyleColor(n("editor.color"),"text.color","color"),this.addStyleFont(n("editor.font"),"text.font","font");},l.prototype.$20$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(n("editor.shadow"),"text.shadow","shadow"),this.addStyleColor(n("editor.shadowcolor"),"text.shadow.color","shadowColor"),this.addStyleInput(n("editor.shadowblur"),"text.shadow.blur","number",1,"shadowblur"),this.addStyleInput(n("editor.shadowoffsetx"),"text.shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(n("editor.shadowoffsety"),"text.shadow.offset.y","number",1,"shadowOffsetYs");},l;}(Of),Yn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.$14$=function(){var c=[];this.addLabelInput(c,n("editor.type"),function(c){return"function";}),this.addFuncRow(c,"type");},l;}(Of),Dn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){c.prototype.initForm.call(this),this.addComponent();},l.prototype.$14$=function(){},l.prototype.addComponent=function(){var c=this;this.addTitle("TitleComponent");var l=[];this.addLabelInput(l,n("editor.type"),function(l){var b=l.s("type");return c.$43$(l.properties),b;},function(c,l){c.s("type",l);},null,null,!1);var b=new ht.widget.Image();b.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!l.hidden){var f=c.data?c.data.s("type"):null;c.$43$(c.data.properties),b.setIcon(f?Ic(f):null),b.compType=f;}});var f=b.getView();f.style.cursor="pointer";var U=function U(l){l.preventDefault(),Z(l)?c.editor.open(b.compType):c.editor.selectFileNode(b.compType);};f.addEventListener("mousedown",U,!1),f.addEventListener("touchstart",U,!1),l.push(b),this.addFuncRow(l,"type");},l.prototype.$43$=function(c){var l=this;this.properties!==c&&(this.pendingProperties=c,this._updateComponentLater||(this._updateComponentLater=!0,requestAnimationFrame(function(){l.$61$();})));},l.prototype.$61$=function(){if(this._updateComponentLater=!1,this.properties===this.pendingProperties)return void(this.pendingProperties=null);if(this._rows=this.$47$,this.removeRows(this.$36$),this.$36$=[],this.properties=this.pendingProperties,this.properties)for(var c in this.properties){this.addProperty(c,this.properties[c]);}this.$47$=this._rows,this.filterProperties();},l.prototype.addProperty=function(c,l){var b=Gl.config.valueTypes[l.valueType];if(!b)return this.editor.fireEvent("error",{message:"Wrong value type:"+l.valueType}),!1;var f=n(l.name)||c;if("int"===b.type||"number"===b.type){var U=(b.max,b.min,function(l){return l.s(c);}),$=function $(l,b){l.s(c,b);},H=[];b.angle?this.addLabelRotation(H,f,U,$,b.min,b.max,b.step):this.addLabelRange(H,f,U,$,b.min,b.max,b.step,b.type),this.addFuncRow(H,c,c);}else if("color"===b.type)this.addStyleColor(f,c,c);else if("boolean"===b.type)this.addStyleCheckBox(f,c,c);else if("enum"===b.type)this.addStyleComboBox(f,c,b.values,b.labels,b.icons,c);else if("multiline"===b.type)this.addStyleMultiline(f,c,c,b.rows);else if("font"===b.type)this.addStyleFont(f,c,c,b.rows);else if("image"===b.type)this.addStyleImage(f,c,c);else if("url"===b.type)this.addStyleURL(f,c,c);else if("colorArray"===b.type)this.addStyleArray(f,c,c,"color",b.rows);else if("numberArray"===b.type)this.addStyleArray(f,c,c,"number",b.rows);else if("stringArray"===b.type)this.addStyleArray(f,c,c,"string",b.rows);else if("objectArray"===b.type)this.addStyleArray(f,c,c,"object",b.rows);else if("function"===b.type)this.addStyleFunction(f,c,c);else if("custom"===b.type){var L=function L(l){return l.s(c);},e=function e(l,b){l.s(c,b);},I=[];b.buildUI(this,I,f,L,e),this.addFuncRow(I,c,c);}else"object"===b.type?this.addStyleObject(f,c,c):this.addStyleInput(f,c,null,null,c);return this.$36$.push(this._rows[this._rows.length-1]),!0;},l;}(Of),Tn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){this.$27$(),this.addTitle("TitleBasic"),this.$14$(),this.$15$();},l.prototype.isTitleVisible=function(l){return!("TitleEditingPoint"===l.title&&!this.editor.pointsEditingMode)&&c.prototype.isTitleVisible.call(this,l);},l;}(Of),Jn=function(c){function l(b,f){return Vl(this,l),kl(this,c.call(this,b,f));}return wl(l,c),l.prototype.initForm=function(){this.addTitle("TitleBasic"),this.$14$(),this.$15$();},l;}(Of),yn=function(c){function l(b){Vl(this,l);var f=kl(this,c.call(this));return f.editor=b,f.getView().style.background=Gl.config.color_pane,f;}return wl(l,c),l.prototype.handleDataModelPropertyChange=function(c){var l=this.inspector;l&&l.global&&l.$35$(c);},l.prototype.handleDataModelChange=function(c){var l=this.inspector;l&&l.global&&l.$35$();},l.prototype.handleDataPropertyChange=function(c){var l=this.inspector;l&&!l.global&&l.data===c.data&&l.$35$(c);},l.prototype.handleSelectionChange=function(c){this.updateInspector(),this.inspector&&this.inspector.updateProperties();},l.prototype.$42$=function(c){var l=this.inspector;l&&("pointsEditingMode"===c.property?l.filterPropertiesLater():"shapePointStatus"===c.property&&l.editingPointButtons&&l.editingPointButtons.forEach(function(l){l.setSelected(l.statusValue===c.newValue),l.setBorderColor(l.isSelected()?Gl.config.color_line:null);}));},l.prototype.$6$=function(c){this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.removeDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ums(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().ump(this.$42$,this)),c?(this.currentView=c.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.addDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ms(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().mp(this.$42$,this)):(this.currentView=null,this.dataModel=null),this.$95$();},l.prototype.$95$=function(){var c=this;this._updateInspectorLater||(this._updateInspectorLater=!0,requestAnimationFrame(function(){c.updateInspector();}));},l.prototype.updateInspector=function(){if(this._updateInspectorLater=!1,this.dataModel){var c=this.dataModel.sm().ld();if(c){if(this.currentView instanceof Df){if(c instanceof yb)this.inspector=this.clipInspector;else if(c instanceof mb)this.inspector=this.restoreInspector;else if(c instanceof Yb)this.inspector=this.basicInspector;else if(c instanceof db)this.inspector=this.borderInspector;else if(c instanceof Tb)this.inspector=this.imageInspector;else if(c instanceof Sb)this.inspector=this.pieChartInspector;else if(c instanceof Eb){var l=Wc(c.s("chart.series"));l&&l.length<=1&&l[0].colors?this.inspector=this.oneDimensionalColumnChartInspector:this.inspector=this.columnChartInspector;}else c instanceof qb?this.inspector=this.lineChartInspector:c instanceof Db?this.inspector=this.shapeInspector:c instanceof Jb?this.inspector=this.textInspector:c instanceof If?this.inspector=this.funcTypeInspector:c instanceof rb&&(this.inspector=this.compTypeInspector);}else c instanceof ht.Shape?this.inspector=this.htShapeInspector:c instanceof ht.Edge?this.inspector=this.htEdgeInspector:c instanceof ht.Group?this.inspector=this.htGroupInspector:c instanceof ht.Text?this.inspector=this.htTextInspector:c instanceof ht.RefGraph?this.inspector=this.htRefGraphInspector:c instanceof ht.Block?this.inspector=this.htBlockInspector:c instanceof ht.Node?this.inspector=this.htNodeInspector:this.inspector=this.htDataInspector;}else this.currentView instanceof Df?this.inspector=this.symbolInspector:this.inspector=this.displayInspector;}else this.inspector=null;},gl(l,[{key:"basicInspector",get:function get(){return this._basicInspector||(this._basicInspector=new cn(this.editor,"basic")),this._basicInspector;}},{key:"borderInspector",get:function get(){return this._borderInspector||(this._borderInspector=new bn(this.editor,"border")),this._borderInspector;}},{key:"clipInspector",get:function get(){return this._clipInspector||(this._clipInspector=new Tn(this.editor,"clip")),this._clipInspector;}},{key:"restoreInspector",get:function get(){return this._restoreInspector||(this._restoreInspector=new Jn(this.editor,"restore")),this._restoreInspector;}},{key:"imageInspector",get:function get(){return this._imageInspector||(this._imageInspector=new ln(this.editor,"image")),this._imageInspector;}},{key:"pieChartInspector",get:function get(){return this._pieChartInspector||(this._pieChartInspector=new nn(this.editor,"pieChart")),this._pieChartInspector;}},{key:"oneDimensionalColumnChartInspector",get:function get(){return this._oneDimensionalColumnChartInspector||(this._oneDimensionalColumnChartInspector=new Un(this.editor,"oneDimensionalColumnChartInspector")),this._oneDimensionalColumnChartInspector;}},{key:"columnChartInspector",get:function get(){return this._columnChartInspector||(this._columnChartInspector=new Hn(this.editor,"columnChart")),this._columnChartInspector;}},{key:"lineChartInspector",get:function get(){return this._lineChartInspector||(this._lineChartInspector=new Ln(this.editor,"lineChart")),this._lineChartInspector;}},{key:"shapeInspector",get:function get(){return this._shapeInspector||(this._shapeInspector=new en(this.editor,"shape")),this._shapeInspector;}},{key:"textInspector",get:function get(){return this._textInspector||(this._textInspector=new In(this.editor,"text")),this._textInspector;}},{key:"funcTypeInspector",get:function get(){return this._funcTypeInspector||(this._funcTypeInspector=new Yn(this.editor,"func")),this._funcTypeInspector;}},{key:"compTypeInspector",get:function get(){return this._compTypeInspector||(this._compTypeInspector=new Dn(this.editor,"comp")),this._compTypeInspector;}},{key:"htShapeInspector",get:function get(){return this._htShapeInspector||(this._htShapeInspector=new Sf(this.editor,"Shape")),this._htShapeInspector;}},{key:"htBlockInspector",get:function get(){return this._htBlockInspector||(this._htBlockInspector=new Ef(this.editor,"Block")),this._htBlockInspector;}},{key:"htRefGraphInspector",get:function get(){return this._htRefGraphInspector||(this._htRefGraphInspector=new qf(this.editor,"RefGraph")),this._htRefGraphInspector;}},{key:"htGroupInspector",get:function get(){return this._htGroupInspector||(this._htGroupInspector=new df(this.editor,"Group")),this._htGroupInspector;}},{key:"htEdgeInspector",get:function get(){return this._htEdgeInspector||(this._htEdgeInspector=new rf(this.editor,"Edge")),this._htEdgeInspector;}},{key:"htNodeInspector",get:function get(){return this._htNodeInspector||(this._htNodeInspector=new _f(this.editor,"Node")),this._htNodeInspector;}},{key:"htTextInspector",get:function get(){return this._htTextInspector||(this._htTextInspector=new Pf(this.editor,"Text")),this._htTextInspector;}},{key:"htDataInspector",get:function get(){return this._htDataInspector||(this._htDataInspector=new sf(this.editor,"Data")),this._htDataInspector;}},{key:"displayInspector",get:function get(){return this._displayInspector||(this._displayInspector=new xf(this.editor,"display")),this._displayInspector;}},{key:"symbolInspector",get:function get(){return this._symbolInspector||(this._symbolInspector=new zf(this.editor,"symbol")),this._symbolInspector;}},{key:"inspector",get:function get(){return this.getCenterView();},set:function set(c){var l=this.getCenterView();c?(c.dataModel=this.dataModel,this.dataModel&&(c.data=this.dataModel.sm().ld()),this.getCenterView()!==c&&this.setCenterView(c),c.filterPropertiesLater()):this.setCenterView(null),c===l||null==c&&null==l||this.editor.fireEvent("inspectorUpdated",{inspector:c,oldInspector:l});}}]),l;}(Qb),mn=function(){function c(l){Vl(this,c),this.editor=l;}return c.prototype.showTip=function(c,l){this.tip.innerHTML=c,this.tip.parentNode!==document.body&&ht.Default.appendToScreen(this.tip);var b=X(l);this.tip.style.left=b.x+15+"px",this.tip.style.top=b.y+"px";},c.prototype.hideTip=function(){k(this.tip);},c.prototype.clearDropView=function(c,l){this._dropView&&(this._dropView.handleCrossDrag(c,"exit",l),this._dropView=null);},c.prototype.crossDrag=function(c,l){var b=this._dropView,f=this.$96$(c,l);b!==f?(b&&b.handleCrossDrag(c,"exit",l),f&&f.handleCrossDrag(c,"enter",l)):f&&f.handleCrossDrag(c,"over",l),this._dropView=f;},c.prototype.crossDrop=function(c,l){this._dropView&&(this._dropView.handleCrossDrag(c,"drop",l),this._dropView=null);},c.prototype.crossCancel=function(c,l){this._dropView&&(this._dropView.handleCrossDrag(c,"cancel",l),this._dropView=null);},c.prototype.$96$=function(c,l){for(var b=u(c);b&&!(b._ht&&b._ht.isDroppable&&b._ht.isDroppable(c,l));){b=b.parentNode;}return b?b._ht:null;},gl(c,[{key:"tip",get:function get(){if(!this._tip){this._tip=M(),this._tip.className="ht-editor-dnd-tip";var c=this._tip.style;c.whiteSpace="nowrap",c.color=Gl.config.color_light,c.background=Gl.config.color_transparent,c.font=ht.Default.labelFont,c.padding="4px",c.borderRadius="4px",c.position="absolute",c.zIndex=1e4;}return this._tip;}}]),c;}();Gl.DND=mn;var Qn=function(){function c(l,b){Vl(this,c),this.editor=l,this.dnd=l.dnd,this._dragInfo={view:this},b&&(b.addEventListener("dragenter",this.handle_dragenter.bind(this),!1),b.addEventListener("dragover",this.handle_dragover.bind(this),!1),b.addEventListener("dragleave",this.handle_dragleave.bind(this),!1),b.addEventListener("drop",this.handle_drop.bind(this),!1),b.addEventListener("dragexit",this.handle_dragexit.bind(this),!1),b.addEventListener("dragend",this.handle_dragend.bind(this),!1)),this.isDroppableToDisplayView=!0,this.isDroppableToSymbolView=!0;}return c.prototype.handle_dragenter=function(c){q(c),c.stopPropagation(),this.dnd.crossDrag(c,this._dragInfo);},c.prototype.handle_dragover=function(c){q(c),c.stopPropagation(),this.dnd.crossDrag(c,this._dragInfo);},c.prototype.handle_dragleave=function(c){q(c),c.stopPropagation(),this.dnd.crossCancel(c,this._dragInfo);},c.prototype.handle_dragexit=function(c){q(c),c.stopPropagation(),this.dnd.crossCancel(c,this._dragInfo);},c.prototype.handle_dragend=function(c){q(c),c.stopPropagation(),this.dnd.crossCancel(c,this._dragInfo);},c.prototype.handle_drop=function(c){q(c),c.stopPropagation(),this.dnd.crossDrop(c,this._dragInfo);},c;}();Gl.DNDFromOutside=Qn;var Bn=function(){function c(l){Vl(this,c),this.params=l||{},this.$39$=this.params.$39$,this._eventNotifier=new ht.Notifier();var b=ht.Default.getClass(Gl.config.serviceClass);this.$40$=new b(this.handleServiceEvent.bind(this),this),this.emptyFunc=function(){};}return c.prototype.addEventListener=function(c,l,b){this._eventNotifier.add(c,l,b);},c.prototype.removeEventListener=function(c,l){this._eventNotifier.remove(c,l);},c.prototype.fireEvent=function(c,l){l=l||{},Gl.config.handleEvent&&Gl.config.handleEvent(this,c,l);var b="on"+c.charAt(0).toUpperCase()+c.slice(1);Gl.config[b]&&Gl.config[b](this,l),this.params&&this.params[b]&&this.params[b](this,l),this._eventNotifier.fire({editor:this,type:c,params:l});},c.prototype.handleServiceEvent=function(c){if("connected"===c.type)this.init&&(this.init(),this.init=null);else if("fileChanged"===c.type){var l=c.path;h(l)&&this.$101$(),P(l)?this.requestDisplays():O(l)?this.requestSymbols():cc(l)?this.requestComponents():lc(l)?this.requestScenes():bc(l)?this.requestModels():fc(l)&&this.requestAssets();}else"download"===c.type?this.downloadFile(c.path):"confirm"===c.type&&this.requestImport(c.path);this.fireEvent(c.type,c);},c.prototype.onPropertyChanged=function(c){"rulerEnabled"!==c.property&&"gridEnabled"!==c.property||this.rightToolbar.iv();},c.prototype.init=function(){this._inspectorCompact=!H(Gl.config.compactFilter),this.menus=[],this.cloneInfo={type:null,funcArray:[],jsonArray:[]},this.initSID(),this.$7$(),this.requestDisplays(),this.requestSymbols(),this.requestComponents(),this.requestScenes(),this.requestModels(),this.requestAssets(),this.$39$&&this.$39$.addEventListener("keydown",this.$105$.bind(this),!1),this.dnd=new mn(this),this.dndFromOutside=new Qn(this,this.$39$),this.fireEvent("editorCreated"),this.fireEvent("mainMenuCreated"),this.fireEvent("mainToolbarCreated"),this.fireEvent("rightToolbarCreated");var c=this.params.open||l("hteditor");c&&(Uc(c)?this._pendingOpenJSON=c:"newdisplay"===c?this.newDisplayView():"newsymbol"===c?this.newSymbolView():"newcomponent"===c&&this.newComponent());},c.prototype.$7$=function(){this.mainTabView=new Tf(this),this.funcView=new Xf(this),this.eventView=new Af(this),this.functionView=new vf(this),this.objectView=new Nf(this),this.textView=new hf(this),this.fontView=new tf(this),this.iconsView=new Vf(this),this.componentView=new af(this),this.messageView=new gf(this),this.attachPointsView=new wf(this),this.$8$(),this.$9$(),this.$11$(),this.$10$(),this.leftSplitView=new ab(this.leftTopTabView,this.mainTabView,"h",Gl.config.leftSplitViewPosition),this.rightSplitView=new ab(this.rightTopBorderPane,this.rightBottomTabView,"v",Gl.config.rightSplitViewPosition),this.mainSplitView=new ab(this.leftSplitView,this.rightSplitView,"h",Gl.config.mainSplitViewPosition),this.mainPane=new Qb(),this.mainPane.setTopView(this.topBorderPane),this.mainPane.setCenterView(this.mainSplitView),dc(this.mainPane,this.$39$),this.mainPane.validateImpl();},c.prototype.initSID=function(){var c=window.location.href.match("sid=([0-9a-z-]*)");c&&(this.sid=c[1]);},c.prototype.$8$=function(){var c=this;this.mainToolbar=new pf(this),this.rightToolbar=new Zf(this),this.topBorderPane=new Qb(),this.topBorderPane.setCenterView(this.mainToolbar),this.topBorderPane.setRightView(this.rightToolbar),this.topBorderPane.setHeight(28),this.rightToolbar.onSumWidthChanged=function(){c.topBorderPane.setRightWidth(c.rightToolbar.getSumWidth());};},c.prototype.$9$=function(){this.displays=new Kb(this,Gl.config.displaysEditable),this.symbols=new xb(this,Gl.config.symbolsEditable),this.components=new Gb(this,Gl.config.componentsEditable),this.scenes=new zb(this,Gl.config.scenesEditable),this.models=new sb(this,Gl.config.modelsEditable),this.assets=new Mb(this,Gl.config.assetsEditable),this.leftTopTabView=new ub(),this.displaysTab=this.leftTopTabView.add(n("editor.displays"),this.displays,!1,Gl.config.displaysVisible),this.symbolsTab=this.leftTopTabView.add(n("editor.symbols"),this.symbols,!1,Gl.config.symbolsVisible),this.componentsTab=this.leftTopTabView.add(n("editor.components"),this.components,!1,Gl.config.componentsVisible),this.scenesTab=this.leftTopTabView.add(n("editor.scenes"),this.scenes,!1,Gl.config.scenesVisible),this.modelsTab=this.leftTopTabView.add(n("editor.models"),this.models,!1,Gl.config.modelsVisible),this.assetsTab=this.leftTopTabView.add(n("editor.assets"),this.assets,!1,Gl.config.assetsVisible),this.leftTopTabView.selectByIndex(0);},c.prototype.$10$=function(){this.inspectorTool=new Jf(this),this.inspectorPane=new yn(this),this.rightTopBorderPane=new Qb(),this.rightTopBorderPane.setTopView(this.inspectorTool),this.rightTopBorderPane.setCenterView(this.inspectorPane),this.rightTopBorderPane.setTopHeight(ht.Default.widgetHeaderHeight+6);},c.prototype.$11$=function(){var c=this;this.listPane=new mf(this),this.layerPane=new Qf(this),this.overview=new _b(this),this.dataView=new yf(this),this.rightBottomTabView=new ub(),this.listPaneTab=this.rightBottomTabView.add(n("editor.list"),this.listPane,!0),this.layerTab=this.rightBottomTabView.add(n("editor.layer"),this.layerPane),this.overviewTab=this.rightBottomTabView.add(n("editor.overview"),this.overview),this.dataViewTab=this.rightBottomTabView.add(n("editor.data"),this.dataView);var l=this.rightBottomTabView.getTabModel().sm();l.ms(function(){var b=l.ld();c.dataView.visible=b.getView()===c.dataView,c.overview.setAutoUpdate(b.getView()===c.overview);});},c.prototype.newFolder=function(c){var l=this,b=this.explorer;b&&!function(){var f=c.sm().ld();c!==c.explorer.list||f&&f.fileType===_l||(f=c.explorer.tree.sm().ld()),f&&!b.isAccordionMode()||(f=c.explorer.rootNode);var U=n("editor.inputnewfoldername");zc(U,"",{nullable:!1,trim:!0,maxLength:Gl.config.maxFileNameLength,checkFunc:Gl.config.checkFileName},function(c,b){if("ok"===b){var U=f.url+"/"+c;if(l.getFileNode(U))return void sc(n("editor.filenameconflict"),U,function(){});l.request("mkdir",U,function(c){});}});}();},c.prototype.getFileNode=function(c){for(var l=this.leftTopTabView.getTabModel().getDatas(),b=0;b<l.size();b++){var f=l.get(b);if(f.getView()instanceof kb){var n=f.getView().dataModel.getDataById(c);if(n)return n;}}return null;},c.prototype.selectFileNode=function(c){for(var l=this,b=this.leftTopTabView.getTabModel().getDatas(),f=0;f<b.size();f++){var n=b.get(f);if(n.getView()instanceof kb){var U=function(){var b=n.getView(),f=b.dataModel.getDataById(c);if(f)return l.leftTopTabView.getTabModel().sm().ss(n),b.isAccordionMode()?(f.fileType===_l?b.accordion.sm().ss(f):(f.getParent().expanded=!0,b.accordion.sm().ss(f)),b.accordion.ivm()):f.fileType===_l?(b.tree.sm().ss(f),setTimeout(function(){b.tree.makeVisible(f);},500)):(b.tree.sm().ss(f.getParent()),b.list.sm().ss(f),setTimeout(function(){b.tree.makeVisible(f.getParent()),b.list.makeVisible(f);},500)),delete l._pendingSelectURL,{v:void 0};}();if("object"==(typeof U==="undefined"?"undefined":_typeof(U)))return U.v;}}this._pendingSelectURL=c;},c.prototype.renameFile=function(c,l){if(!c||c.$34$||!l)return!1;var b=l;if(l=Gl.config.checkFileName(l),!l)return sc(n("editor.invalidinput"),b,function(){}),!1;if(l.length>Gl.config.maxFileNameLength)return sc(n("editor.inputmax"),l,function(){}),!1;if(Uc(c.getName())&&!Uc(l)&&(l+=".json"),c.getName()===l)return!1;var f=c.path+"/"+l;if(this.getFileNode(f)){if(c.fileType=="display"||c.fileType=="scene"){f=n("editor.filenameExisted")}return sc(n("editor.filenameconflict"),f,function(){}),!1;}c.$34$=f;var U={old:c.url,new:c.$34$,fileType:c.fileType};return Uc(U.old)&&this.request("rename",{old:Ic(U.old),new:Ic(U.new),fileType:Rl},function(c){}),this.request("rename",U,function(c){}),this.fireEvent('rename',U),this.mainTabView.getTabModel().each(function(b){b.getTag()===c.url&&(b.setTag(c.$34$),b.getView().url=c.$34$,b.setName(W(l)));}),!0;},c.prototype.moveFile=function(c,l){if(c&&l&&!c.$34$&&!l.$34$){var b={data:c,url:c.url,parent:l};if(this.fireEvent("fileMoving",b),!b.preventDefault){var f=c.getParent();if(c.setParent(l),f!==c.getParent()){c.$34$=l.url+"/"+c.getName();var n={old:c.url,new:c.$34$};Uc(n.old)&&this.request("rename",{old:Ic(n.old),new:Ic(n.new)},function(c){}),this.request("rename",n,function(c){});}}}},c.prototype.removeFiles=function(c){var l=this;c.forEach(function(c){if(!c.$34$){var b=c.url||c;Uc(b)&&l.request("remove",Ic(b),function(c){}),l.request("remove",b,function(c){});}});},c.prototype.requestBase64=function(c,l){this.request("source",{url:c,encoding:"base64",prefix:"data:;base64,"},l);},c.prototype.request=function(c,l,b,f){var n=this;b=b||this.emptyFunc,f?setTimeout(function(){n.$40$.request(c,l,b);},f):this.$40$.request(c,l,b);},c.prototype.requestDisplays=function(){var c=this;this._requestingDisplays||(this.request("explore","/displays",function(l){c._requestingDisplays=!1,c.displays.parse(l),c._pendingOpenJSON&&P(c._pendingOpenJSON)&&(c.displays.dataModel.getDataById(c._pendingOpenJSON)?(c.open(c._pendingOpenJSON),c.selectFileNode(c._pendingOpenJSON)):Gl.config.newIfFailToOpen&&(c.newDisplayView(),c.save(null,c._pendingOpenJSON)),delete c._pendingOpenJSON),c._pendingSelectURL&&P(c._pendingSelectURL)&&c.selectFileNode(c._pendingSelectURL);},Gl.config.requestDelay),this._requestingDisplays=!0);},c.prototype.requestSymbols=function(){var c=this;this._requestingSymbols||(this.request("explore","/symbols",function(l){c._requestingSymbols=!1,c.symbols.parse(l),c._pendingOpenJSON&&O(c._pendingOpenJSON)&&(c.symbols.dataModel.getDataById(c._pendingOpenJSON)?(c.open(c._pendingOpenJSON),c.selectFileNode(c._pendingOpenJSON)):Gl.config.newIfFailToOpen&&(c.newSymbolView(),c.save(null,c._pendingOpenJSON)),delete c._pendingOpenJSON),c._pendingSelectURL&&O(c._pendingSelectURL)&&c.selectFileNode(c._pendingSelectURL);},Gl.config.requestDelay),this._requestingSymbols=!0);},c.prototype.requestComponents=function(){var c=this;this._requestingComponents||(this.request("explore","/components",function(l){c._requestingComponents=!1,c.components.parse(l),c._pendingOpenJSON&&cc(c._pendingOpenJSON)&&(c.components.dataModel.getDataById(c._pendingOpenJSON)?c.open(c._pendingOpenJSON):Gl.config.newIfFailToOpen&&c.newComponent(),delete c._pendingOpenJSON),c._pendingSelectURL&&cc(c._pendingSelectURL)&&c.selectFileNode(c._pendingSelectURL);},Gl.config.requestDelay),this._requestingComponents=!0);},c.prototype.requestScenes=function(){var c=this;this._requestingScenes||(this.request("explore","/scenes",function(l){c._requestingScenes=!1,c.scenes.parse(l),c._pendingOpenJSON&&lc(c._pendingOpenJSON)&&(c.open(c._pendingOpenJSON),delete c._pendingOpenJSON),c._pendingSelectURL&&isScenes(c._pendingSelectURL)&&c.selectFileNode(c._pendingSelectURL);},Gl.config.requestDelay),this._requestingScenes=!0);},c.prototype.requestModels=function(){var c=this;this._requestingModels||(this.request("explore","/models",function(l){c._requestingModels=!1,c.models.parse(l),c._pendingOpenJSON&&bc(c._pendingOpenJSON)&&(c.open(c._pendingOpenJSON),delete c._pendingOpenJSON),c._pendingSelectURL&&bc(c._pendingSelectURL)&&c.selectFileNode(c._pendingSelectURL);},Gl.config.requestDelay),this._requestingModels=!0);},c.prototype.requestAssets=function(){var c=this;this._requestingAssets||(this.request("explore","/assets",function(l){c._requestingAssets=!1,c.assets.parse(l),c._pendingOpenJSON&&fc(c._pendingOpenJSON)&&(c.open(c._pendingOpenJSON),delete c._pendingOpenJSON),c._pendingSelectURL&&fc(c._pendingSelectURL)&&c.selectFileNode(c._pendingSelectURL);},Gl.config.requestDelay),this._requestingAssets=!0);},c.prototype.requestImport=function(c){var l=this;Gl.config.importConfirm?sc("",n("editor.importconfirm"),function(){l.request("import",{path:c,move:!0});},function(){l.request("import",{path:c,move:!1});}):this.request("import",{path:c,move:!0});},c.prototype.downloadFile=function(c){try{var l=document.createElement("iframe");l.src=htconfig.Default.protocol+"//"+htconfig.Default.host+":"+htconfig.Default.port+c,l.style.display="none",document.body.appendChild(l);}catch(c){}},c.prototype.$6$=function(c){var l=this._currentTab;this._currentTab=c,this.inspectorPane.$6$(c),this.listPane.$6$(c),this.overview.$6$(c),this.dataView.$6$(c),this.layerPane.$6$(c),this.mainToolbar.$6$(c),this.rightToolbar.$6$(c),this.inspectorTool.$6$(c),this.fireEvent("tabUpdated",{tab:c,oldTab:l});},c.prototype.beginTransaction=function(){this.dm&&this.dm.beginTransaction();},c.prototype.endTransaction=function(){this.dm&&this.dm.endTransaction();},c.prototype.$101$=function(){this.mainTabView.$101$();},c.prototype.dropLocalFileOnGraphView=function(c){var l={event:c};if(this.displayView?(l.displayView=this.displayView,this.fireEvent("displayViewOutsideDropping",l)):this.symbolView&&(l.symbolView=this.symbolView,this.fireEvent("symbolViewOutsideDropping",l)),!l.preventDefault)for(var b=c.dataTransfer.files,f=0;f<b.length;f++){var n=b[f],U=n.name;nc(U)&&!ec(U)?this.insertLocalImageFile(c,n):Uc(U)&&this.insertLocalJSONFile(c,n);}},c.prototype.insertLocalImageFile=function(c,l){var b=this,f=this.gv.lp(c);rc(l,function(c){if(b.displayView){var n=new ht.Node();n.setImage(c),n.p(f),n.setDisplayName(V(l.name)),b.displayView.addData(n);}else if(b.symbolView){var U=new Tb({type:"image",name:c,rect:[f.x,f.y,-1,-1]});U.setDisplayName(V(l.name)),b.symbolView.addData(U);}},!0);},c.prototype.insertLocalJSONFile=function(c,l){var b=this;rc(l,function(l){b.$99$(l,b.currentView.graphView.lp(c));});},c.prototype.dropLocalFileOnDir=function(c,l){for(var b=c.dataTransfer.files,f=0;f<b.length;f++){this.uploadLocalFile(b[f],l.url);}},c.prototype.uploadLocalFile=function(c,l){var b=this,f=c.name;rc(c,function(c){var n={path:l+"/"+f,content:c};b.request("upload",n);},!0);},c.prototype.addTab=function(c,l){this.mainTabView.add(c),this.fireEvent("tabCreated",{tab:c}),l&&this.mainTabView.getTabModel().sm().ss(c),this.mainTabView.validate();},c.prototype.openByJSON=function(c,l,b,f,n){this.mainTabView.getTabModel();if(c===rl){var U=this.mainTabView.getTabModel().getDataByTag(l);U||(U=new ht.Tab(),U.setTag(l),U.setIcon("editor.display"),U.setClosable(!0),U.setName(b),new Uf(this,U,l,f),this.addTab(U)),this.mainTabView.getTabModel().sm().ss(U);}else if(c===ol){var $=this.mainTabView.getTabModel().getDataByTag(l);$||($=new ht.Tab(),$.setTag(l),$.setIcon("editor.symbol"),$.setClosable(!0),$.setName(b),new Df(this,$,l,f),this.addTab($)),this.mainTabView.getTabModel().sm().ss($);}else c===dl&&this.componentView.update(l,n,b,f);},c.prototype.isOpenable=function(c){return!Gl.config.isOpenable||Gl.config.isOpenable(c);},c.prototype.open=function(c,l){var b=this;Yc(c)&&(c=this.getFileNode(c)),c&&!c.$34$&&this.isOpenable(c)&&(c.fileType===rl?this.mainTabView.open(c):c.fileType===ol?this.mainTabView.open(c):c.fileType===dl?this.componentView.open(c):c.fileType===Rl&&(Lc(c.url)?K(c.url,function(f){var n=ht.Default.svgToShape(f,{segments:Gl.config.svgSegments});setTimeout(function(){var f=W(c.getName());l?b.newSymbolView(f,!1):b.newDisplayView(f),n.output.comps.forEach(function(c){delete c.repeatImage;}),b.beginTransaction();var U=Gl.toDatas(n.output.comps,l);U.forEach(function(c){b.currentView.addData(c,!0);}),l&&(n.output.width&&b.dm.a("width",n.output.width),n.output.height&&b.dm.a("height",n.output.height)),b.zoomToFit(),b.endTransaction();},600);}):ec(c.url)&&K(c.url,function(f){var n=W(c.getName()),U=ht.Default.cadToShape(f),$={},H=Object.keys(U.blockDef).length,L=function L(){l?b.newSymbolView(n,!1):b.newDisplayView(n),b.beginTransaction(),U.comps.forEach(function(c){"image"===c.type&&$[c.name]&&(c.name=$[c.name]);});var c=Gl.toDatas(U.comps,l);c.forEach(function(c){b.currentView.addData(c,!0);}),l&&(U.width&&b.dm.a("width",U.width),U.height&&b.dm.a("height",U.height)),b.zoomToFit(),b.endTransaction();};H?!function(){var l=function l(){H--,0===H&&L();},f="symbols/"+c.path.substr("assets/".length)+"/"+n+"/";for(var e in U.blockDef){U.blockDef[e].comps.forEach(function(c){"image"===c.type&&(c.name=f+c.name+".json");});var I={path:$[e]=f+e+".json",content:t(U.blockDef[e])};b.request("upload",I,l);}}():L();})));},c.prototype.$99$=function(c,l){var b=this;if(c){if(this.beginTransaction(),c=F(c),this.displayView&&Jc(c.d)){var f=this.displayView.graphView,n=f.dm().deserialize(c,f.getCurrentSubGraph(),{justDatas:!0,disableOnPreDeserialize:!0,disableOnPostDeserialize:!0});if(f.sm().ss(n.toList(f.isSelectable,f)),n.each(function(c){b.displayView.addData(c,!0,!0);}),l){var U=f.getUnionNodeRect(n.toArray());f.moveDatas(n,l.x-U.x-U.width/2,l.y-U.y-U.height/2);}}else this.symbolView&&Jc(c.comps)&&c.comps.forEach(function(c){pl(c,b.symbolView);});this.gv.setFocus(),this.endTransaction();}},c.prototype.$100$=function(c,l){var b=this;if(c){if(!this.tab)return void this.open(c);if(!ec(c.url)){if(c.fileType===rl)return void(this.displayView&&(Gl.config.insertDisplayViewAsRefGraph?!function(){var f=new ht.RefGraph();f.setRef(c.url),f.onPendingUpdated=function(){f.onPendingUpdated=null,f.p(l);},f.setDisplayName(V(c.url)),b.displayView.addData(f);}():K(c.url,function(c){b.$99$(c,l);})));if(this.url!==c.url)if(c.fileType!==dl){if(c.fileType!==ol&&c.fileType!==Rl)return c.fileType===El?void(this.displayView&&Gl.config.handleInsertSceneFileToGraphView&&Gl.config.handleInsertSceneFileToGraphView(this.displayView,c,l)):void(c.fileType===Sl&&this.displayView&&Gl.config.handleInsertModelFileToGraphView&&Gl.config.handleInsertModelFileToGraphView(this.displayView,c,l));if(this.displayView){var f=new ht.Node();if(f.setImage(c.url),l)f.p(l.x,l.y);else{var n=this.gv.getViewRect();n&&f.p(n.x+n.width/2,n.y+n.height/2);}f.setDisplayName(V(c.url)),this.displayView.addData(f);}else if(this.symbolView){var U=ht.Default.getImage(c.url),$=U?U.width:-1,H=U?U.height:-1,L=l?l.x:(this.dm.a("width")||0)/2,e=l?l.y:(this.dm.a("height")||0)/2,I=new Tb({type:"image",name:c.url,rect:[L-($>0?$/2:0),e-(H>0?H/2:0),$,H]});I.setDisplayName(V(c.url)),this.symbolView.addData(I);}}else if(this.symbolView){var Y=new rb({type:c.url,rect:[l?l.x:(this.dm.a("width")||0)/2,l?l.y:(this.dm.a("height")||0)/2,-1,-1]});Y.setDisplayName(V(c.url)),this.symbolView.addData(Y);}}}},c.prototype.newDisplayView=function(c){return this.mainTabView.newDisplayView(c);},c.prototype.newSymbolView=function(c,l){return this.mainTabView.newSymbolView(c,l);},c.prototype.newComponent=function(){this.componentView.open();},c.prototype.save=function(c,l){this.mainTabView.save(c,l);},c.prototype.saveAll=function(c){this.mainTabView.saveAll(c);},c.prototype.reload=function(){this.mainTabView.reload();},c.prototype.preview=function(){this.mainTabView.preview();},c.prototype.closeTab=function(c,l,b){this.mainTabView.closeTab(c,l,b);},c.prototype.closeOtherTabs=function(c,l){this.mainTabView.closeOtherTabs(c,l);},c.prototype.closeTabsToTheRight=function(c,l){this.mainTabView.closeTabsToTheRight(c,l);},c.prototype.closeAllTabs=function(c,l){this.mainTabView.closeAllTabs(c,l);},c.prototype.filterProperties=function(){this.inspector&&this.inspector.filterPropertiesLater();},c.prototype.isRulerEnabled=function(){return this._rulerEnabled;},c.prototype.setRulerEnabled=function(c){var l=this._rulerEnabled;l!==c&&(this._rulerEnabled=c,this.tabs.forEach(function(l){l.getView().setRulerEnabled(c);}),this.fp("rulerEnabled",l,c));},c.prototype.toggleRulerEnabled=function(){this.setRulerEnabled(!this.isRulerEnabled());},c.prototype.isGridEnabled=function(){return this._gridEnabled;},c.prototype.setGridEnabled=function(c){var l=this._gridEnabled;l!==c&&(this._gridEnabled=c,this.tabs.forEach(function(l){l.getView().graphView.getEditInteractor().gridEnabled=c;}),this.fp("gridEnabled",l,c));},c.prototype.toggleGridEnabled=function(){this.setGridEnabled(!this.isGridEnabled());},c.prototype.toggleLeft=function(){"normal"===this.leftSplitView.getStatus()?this.leftSplitView.setStatus("cl"):this.leftSplitView.setStatus("normal");},c.prototype.toggleRight=function(){"normal"===this.mainSplitView.getStatus()?this.mainSplitView.setStatus("cr"):this.mainSplitView.setStatus("normal");},c.prototype.toggleBoth=function(){"normal"===this.mainSplitView.getStatus()||"normal"===this.leftSplitView.getStatus()?(this.mainSplitView.setStatus("cr"),this.leftSplitView.setStatus("cl")):(this.mainSplitView.setStatus("normal"),this.leftSplitView.setStatus("normal"));},c.prototype.zoomIn=function(){this.gv&&this.gv.zoomIn(Gl.config.animate);},c.prototype.zoomOut=function(){this.gv&&this.gv.zoomOut(Gl.config.animate);},c.prototype.zoomReset=function(){this.gv&&this.gv.zoomReset(Gl.config.animate);},c.prototype.zoomToFit=function(){this.gv&&this.gv.fitContent(Gl.config.animate,Gl.config.fitPadding);},c.prototype.delete=function(){this.gv&&this.gv.removeSelection();},c.prototype.copyFiles=function(){this.explorer.copyFiles();},c.prototype.pasteFiles=function(){this.explorer.pasteFiles();},c.prototype.copy=function(){var c=this;if(this.ld){var l=this.cloneInfo;if(l.funcArray.length=0,l.jsonArray.length=0,l.offset={x:0,y:0},l.lastCheck=null,l.lastView=this.gv,this.displayView)l.type="display";else{if(!this.symbolView)return void(l.type=null);l.type="symbol";}var b={};this.selection.forEach(function(c){c._refGraph||(b[c._id]=c,c instanceof ht.Block&&!(c instanceof ht.RefGraph)&&E(c,b));});var f=[];this.gv.each(function(c){b[c._id]&&f.push(c);}),this.gv.copyMap=b,f.forEach(function(b){var f=c.gv.isSelected(b),n=b.$51$(c.gv);if(0!==n.length){l.funcArray.push([b._id,f].concat(n));var U=Ql(b);U&&l.jsonArray.push([f,U]);}}),this.fireEvent("copy",{datas:f,info:l}),this.gv.copyMap=null;}},c.prototype.hasCopyInfo=function(){return this.cloneInfo.funcArray.length>0;},c.prototype.paste=function(c){var l=this,b=this.gv,f=this.cloneInfo;if(f.funcArray.length&&b){var n=[],U=[];if(this.beginTransaction(),ht.Default.setIsolating(!0),"display"===f.type&&this.displayView||"symbol"===f.type&&this.symbolView?!function(){var c={},$=[];f.funcArray.forEach(function(f){var H=f[0],L=f[1],e=f[2],I=f[3],Y=I(e,b);l.currentView.addData(Y,!0),c[H]=Y,n.push(Y),$.push(e),L&&U.push(Y);});for(var H=0;H<n.length;H++){n[H].$50$($[H],b,c);}}():f.jsonArray.length&&f.jsonArray.forEach(function(c){var f=c[0],$=c[1],H=Bl($,!!l.symbolView);H&&(H.setParent(b.getCurrentSubGraph()),l.currentView.addData(H,!0),n.push(H),f&&U.push(H));}),ht.Default.setIsolating(!1),U.length&&this.sm.ss(U),f.lastView!==b&&(f.offset.x=-Gl.config.pasteOffset,f.offset.y=-Gl.config.pasteOffset),!c&&n.length){f.offset.x+=Gl.config.pasteOffset,f.offset.y+=Gl.config.pasteOffset,b.moveDatas(n,f.offset.x,f.offset.y);var $=b.$64$(n);$&&(f.offset.x+=$.x,f.offset.y+=$.y,f.lastCheck||(b.moveDatas(n,-Gl.config.pasteOffset,-Gl.config.pasteOffset),f.offset.x-=Gl.config.pasteOffset,f.offset.y-=Gl.config.pasteOffset)),f.lastCheck=$;}f.lastView=b,this.fireEvent("paste",{datas:n,info:f}),b.setFocus(),this.endTransaction();}},c.prototype.block=function(){var c=this;if(this.displayView){var l=this.selection;l.length&&!function(){c.beginTransaction();var b=new ht.Block();l.forEach(function(c){c.setParent(b);}),c.displayView.addData(b),c.endTransaction();}();}},c.prototype.unblock=function(){var c=this;if(this.displayView){this.beginTransaction();var l=[];this.selection.forEach(function(b){b instanceof ht.Block&&!(b instanceof ht.RefGraph)&&!function(){var f=b.getParent();b.getChildren().toArray().forEach(function(c){c.setParent(f),l.push(c);}),c.dm.remove(b);}();}),l.length&&(this.sm.ss(l),this.gv.setFocus()),this.endTransaction();}},c.prototype.bringForward=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionDown():this.dm.bringSelectionForward());},c.prototype.bringToFront=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToBottom():this.dm.bringSelectionToFront());},c.prototype.sendBackward=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionUp():this.dm.sendSelectionBackward());},c.prototype.sendToBack=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToTop():this.dm.sendSelectionToBack());},c.prototype.undo=function(){this.dm&&this.dm.getHistoryManager()&&this.dm.getHistoryManager().canUndo()&&(this.dm.undo(),this.fireEvent("undo",{}));},c.prototype.redo=function(){this.dm&&this.dm.getHistoryManager()&&this.dm.getHistoryManager().canRedo()&&(this.dm.redo(),this.fireEvent("redo",{}));},c.prototype.distributeHorizontal=function(){this.inspectorTool.distributeHorizontal();},c.prototype.distributeVertical=function(){this.inspectorTool.distributeVertical();},c.prototype.alignLeft=function(){this.inspectorTool.alignLeft();},c.prototype.alignHorizontal=function(){this.inspectorTool.alignHorizontal();},c.prototype.alignRight=function(){this.inspectorTool.alignRight();},c.prototype.alignTop=function(){this.inspectorTool.alignTop();},c.prototype.alignVertical=function(){this.inspectorTool.alignVertical();},c.prototype.alignBottom=function(){this.inspectorTool.alignBottom();},c.prototype.folder=function c(){if(this.displayView){this.beginTransaction();var c=new ht.Data();c.s("editor.folder",!0),this.dm.add(c);var l=this.list.getTopRowOrderSelection();l.each(function(l){c.addChild(l);}),this.sm.ss(c),this.endTransaction();}},c.prototype.unfolder=function(){var c=this;if(this.displayView){this.beginTransaction();var l=this.sm.toSelection(function(c){return c.s("editor.folder");});l.forEach(function(c){c.toChildren().forEach(function(l){l.setParent(c.getParent());});}),l.forEach(function(l){c.dm.remove(l);}),this.endTransaction();}},c.prototype.locate=function(c){c&&this.request("locate",c.url||c);},c.prototype.saveImage=function(c,l,b){var f=this,n=function n(){var n={path:l,content:Pc(c)};f.request("upload",n,b);};Yc(c)&&!ht.Default.getImage(c)?/.json$/.test(c)?ht.Default.xhrLoad(c,function(l){l&&(ht.Default.setImage(c,ht.Default.parse(l)),n());}):!function(){var l=new window.Image();l.onload=function(){ht.Default.setImage(c,l),n();},l.src=c;}():n();},c.prototype.$105$=function(c){var l=c.keyCode;if(G(c)&&83===l&&c.preventDefault(),nb.length){if((c.target._ignore||!Gc(c.target))&&!ht.Default.popup){var b=nb[nb.length-1];B(c)&&b.$49$?b.$49$():Q(c)&&b.$48$&&b.$48$();}}else{if(G(c)&&83===l)return void this.save();if(!Gc(c.target)){if(c.preventDefault(),B(c)){for(var f=0;f<this.menus.length;f++){if(this.menus[f].isShowing())return void this.menus[f].hide();}if(this.funcView.smartClose&&this.funcView.getView().parentNode)return void this.funcView.hide();if(this.iconsView.getView().parentNode)return void this.iconsView.hide();if(this.tab){var n=this.tab.getView().graphView.getInteractors();n&&n.each(function(l){l.$49$&&l.$49$(c);});}}80===l?this.preview():187===l?this.zoomIn():189===l?this.zoomOut():48===l?this.zoomToFit():57===l?this.zoomReset():G(c)&&67===l?this.copy():G(c)&&86===l?this.paste():G(c)&&x(c)&&90===l?this.redo():G(c)&&90===l?this.undo():c.altKey&&G(c)&&221===l?this.bringToFront():c.altKey&&G(c)&&219===l?this.sendToBack():G(c)&&221===l?this.bringForward():G(c)&&219===l&&this.sendBackward();}}},c.prototype.createDisplayItem=function(c,l,b,f,n){var U=this,$=function $(){return U.displayView&&U.displayView.$4$()===c;},H=Mc(c,l,b,$);return H.visible=function(){return!!U.displayView;},H.action=function(){U.displayView&&U.displayView.$5$(c,f,n);},H;},c.prototype.createSymbolItem=function(c,l,b,f,n){var U=this,$=function $(){return U.symbolView&&U.symbolView.$4$()===c;},H=Mc(c,l,b,$);return H.visible=function(){return!!U.symbolView;},H.action=function(){U.symbolView&&U.symbolView.$5$(c,f,n);},H;},c.prototype.showMessage=function(c,l,b){this.messageView.show(c,l,b);},gl(c,[{key:"dm",get:function get(){return this.gv?this.gv.dm():null;}},{key:"gv",get:function get(){var c=this.mainTabView.getTabModel().sm().ld();return c?c.getView().graphView:null;}},{key:"editInteractor",get:function get(){return this.gv?this.gv.getEditInteractor():null;}},{key:"pointsEditingMode",get:function get(){return!!this.editInteractor&&this.editInteractor.pointsEditingMode;},set:function set(c){this.editInteractor&&(this.editInteractor.pointsEditingMode=c);}},{key:"anchorVisible",get:function get(){return!!this.editInteractor&&this.editInteractor.getStyle("anchorVisible");},set:function set(c){this.editInteractor&&this.editInteractor.setStyle("anchorVisible",c);}},{key:"sm",get:function get(){return this.gv?this.gv.sm():null;}},{key:"ld",get:function get(){return this.sm?this.sm.ld():null;}},{key:"selection",get:function get(){var c=this,l=[];return this.gv&&this.gv.each(function(b){c.gv.isSelected(b)&&l.push(b);}),l;}},{key:"tabs",get:function get(){return this.mainTabView.tabs;}},{key:"inspector",get:function get(){return this.inspectorPane.inspector;}},{key:"list",get:function get(){return this.listPane.list;}},{key:"tab",get:function get(){return this.mainTabView.currentTab;}},{key:"url",get:function get(){return this.tab?this.tab.getTag():null;}},{key:"explorer",get:function get(){return this.leftTopTabView.getCurrentTab().getView();}},{key:"dir",get:function get(){return this.explorer?this.explorer.tree.getSelectionModel().getLastData():null;}},{key:"file",get:function get(){return this.explorer?this.explorer.getFileListView().getSelectionModel().getLastData():null;}},{key:"currentLayer",get:function get(){return this.layerPane.currentLayer;}},{key:"currentView",get:function get(){var c=this.tab;return c?c.getView():null;}},{key:"displayTree",get:function get(){return this.displayView?this.displayView.displayTree:null;}},{key:"displayView",get:function get(){var c=this.currentView;return c instanceof Uf?c:null;}},{key:"symbolList",get:function get(){return this.symbolView?this.symbolView.symbolList:null;}},{key:"symbolView",get:function get(){var c=this.currentView;return c instanceof Df?c:null;}},{key:"inspectorCompact",get:function get(){return this._inspectorCompact;},set:function set(c){this._inspectorCompact=c,this.filterProperties(),this.inspectorTool.iv();}},{key:"inspectorInputFilter",get:function get(){return this.inspectorTool.searchField.getValue();},set:function set(c){this.inspectorTool.searchField.setValue(c),this.filterProperties();}}]),c;}();S(Bn,{ms_fire:1,_rulerEnabled:Gl.config.rulerEnabled,_gridEnabled:Gl.config.gridEnabled}),Gl.Editor=Bn;var pn=function(){function c(l){Vl(this,c);var b=this._view=document.createElement("div"),f=this._editableLayer=document.createElement("div"),n=f.style;this.config=l,this._editable=!0,n.backgroundColor="rgba( 255, 255, 255, 0.3)",n.position="absolute",n.top=0,n.right=0,n.bottom=0,n.left=0,Gl.config.useCodeEditor||(this._monacoEditor=new ht.widget.TextArea(),this._view=this._monacoEditor.getView(),l&&l.value&&this._monacoEditor.setValue(l.value)),b.style.position="absolute";}return c.prototype.getView=function(){return this._view;},c.prototype.setValue=function(c){void 0!==c&&null!==c||(c=""),this.monacoEditor&&this.monacoEditor.setValue(c);},c.prototype.getValue=function(){return this.monacoEditor&&this.monacoEditor.getValue();},c.prototype.layout=function(){this.monacoEditor&&this.monacoEditor.layout();},c.prototype.invalidate=function(){this.layoutLater();},c.prototype.iv=function(){this.invalidate();},c.prototype.layoutLater=function(c){var l=this;setTimeout(function(){l.layout();},c||300);},c.prototype.setEditable=function(c){var l=this;if(this._monacoEditor instanceof ht.widget.TextArea)return void this._monacoEditor.setEditable(c);if(this._editable!==c){var b=this._editableLayer;c?b.parentNode&&b.parentNode.removeChild(b):setTimeout(function(){l.getView().appendChild(b);},10),this._editable=c;}},c.prototype.isEditable=function(){return this._monacoEditor instanceof ht.widget.TextArea?this._monacoEditor.isEditable():this._editable;},gl(c,[{key:"monacoEditor",get:function get(){return!this._monacoEditor&&window.monaco&&(this._monacoEditor=monaco.editor.create(this._view,this.config||{value:"",language:"javascript",minimap:{enabled:!1}})),this._monacoEditor;}}]),c;}(),Zn=function(){function c(l,b){var f=this;Vl(this,c),this.editor=b,this.handler=l,this.cookie=0,this.callbacks={},this.cmds={};var n=Gl.config.host||window.location.hostname,U=Gl.config.port||window.location.port,$=window.location.protocol+"//"+n+":"+U;this.socket=io.connect($),this.socket.on("connect",function(){f.handler({type:"connected",message:$});}),this.socket.on("disconnect",function(){f.handler({type:"disconnected",message:$});}),this.socket.on("fileChanged",function(c){f.handler({type:"fileChanged",path:c.path,event:c.event});}),this.socket.on("operationDone",function(c,l){f.handleRespone(c,l);}),this.socket.on("download",function(c){f.handler({type:"download",path:c});}),this.socket.on("confirm",function(c,l){f.handler({type:"confirm",path:c,datas:l});});}return c.prototype.request=function(c,l,b){var f=++this.cookie;this.callbacks[f]=b,this.cmds[f]=c;var n=this.editor.sid;this.socket.emit(c,f,l,n?{sid:n}:null);var U=c;l&&(Yc(l)?U=c+": "+l:l.path&&(U=c+": "+l.path)),this.handler({type:"request",message:U,cmd:c,data:l});},c.prototype.handleRespone=function(c,l){var b=this.callbacks[c],f=this.cmds[c];delete this.callbacks[c],delete this.cmds[c],b&&b(l),this.handler({type:"response",message:f,cmd:f,data:l});},c;}(),an=function(){function c(l,b){var f=this;Vl(this,c),this.editor=b,this.handler=l,this.cookie=0,this.callbacks={},this.cmds={},this.fileChangeVersion=String(new Date().getTime());var n=Gl.config.host||window.location.hostname,U=Gl.config.port||window.location.port,$=this.url=window.location.protocol+"//"+n+":"+U;setTimeout(function(){f.handler({type:"connected",message:$});},1),Gl.config.checkForFileChanges&&Gl.config.checkForFileChangesInterval&&this.fileChangedEvent();}return c.prototype.request=function(c,l,b){var f=++this.cookie;this.callbacks[f]=b,this.cmds[f]=c;var n=this.editor.sid;this[c](f,l,n?n:null,b);var U=c;l&&(Yc(l)?U=c+": "+l:l.path&&(U=c+": "+l.path)),this.handler({type:"request",message:U,cmd:c,data:l});},c.prototype.fileChangedEvent=function(){var c=this,l=this.url+"/fileVersion";l+="/"+c.fileChangeVersion,l+="?sid="+this.editor.sid,c.send("GET",l,null,function(l){c.fileChangeVersion=String(new Date().getTime());var b=l.target.response;if(b){b=JSON.parse(b);var f=Object.keys(b);f.forEach(function(l){c.handler({type:"fileChanged",path:l});});}}),setTimeout(function(){c.fileChangedEvent();},Gl.config.checkForFileChangesInterval);},c.prototype.export=function(c,l,b){var f=this,n=new ht.Request(),U={},$=new FormData(),H=this.url+"/export";H+="?sid="+b,$.append("dir",l),U.url=encodeURI(H),U.method="POST",U.data=$,n.setResponseType("blob"),n.onload=function(l){var b=l.target;if(200==b.status||0===b.status){var n=b.response,U=b.getResponseHeader("Content-Disposition").split(";"),$=U[1].split("=")[1],H=new Blob([n],{type:"application/zip"}),L=document.createElement("a");L.href=window.URL.createObjectURL(H),L.download=decodeURI($),L.click(),f.handleRespone(c,!0);}},n.send(U);},c.prototype.mkdir=function(c,l,b){var f=this,n=new ht.Request(),U={},$=new FormData(),H=this.url+"/mkdir";H+="?sid="+b,$.append("path",l),U.url=encodeURI(H),U.method="POST",U.data=$,n.onload=function(b){var n=b.target;if(200==n.status||0===n.status){var U=n.response||n.responseText;f.handleRespone(c,"true"===U),f.handler({type:"fileChanged",path:l});}},n.send(U);},c.prototype.explore=function(c,l,b){var f=this,n=new ht.Request(),U={},$=this.url+"/explore";$+="/"+l,$+="?sid="+b,U.url=encodeURI($),n.onload=function(l){var b=l.target;if(200==b.status||0===b.status){var n=b.response||b.responseText;f.handleRespone(c,JSON.parse(n));}},n.send(U);},c.prototype.upload=function(c,l,b){var f=this,n=new FormData(),U=this.url+"/upload",$=l.path;U+="?sid="+b,n.append("path",l.path),n.append("content",l.content),f.send("POST",U,n,function(l){var b=l.target;if(200==b.status||0===b.status){var n=b.response;if(f.handleRespone(c,!0),n){var U=JSON.parse(n);f.handler({type:"confirm",path:U.tempName,datas:U.paths});}else f.handler({type:"fileChanged",path:$});}});},c.prototype.rename=function(c,l,b){var f=this,n=new FormData(),U=l.new,$=l.old,H=this.url+"/rename";H+="?sid="+b,n.append("newPath",U),n.append("oldPath",$),f.send("POST",H,n,function(l){var b=l.target;if(200==b.status||0===b.status){var n=b.response||b.responseText;f.handleRespone(c,"true"===n),"true"===n&&(f.handler({type:"fileChanged",path:U}),f.handler({type:"fileChanged",path:$}));}});},c.prototype.remove=function(c,l,b){var f=this,n=new FormData(),U=this.url+"/remove";U+="?sid="+b,n.append("path",l),f.send("POST",U,n,function(b){var n=b.target;if(200==n.status||0===n.status){var U=n.response||n.responseText;f.handleRespone(c,"true"===U),"true"===U&&f.handler({type:"fileChanged",path:l});}});},c.prototype.locate=function(c,l,b){var f=this,n=this.url+"/locate";n+="?dir="+l,n+="&sid="+b,f.send("GET",n,null,function(l){var b=l.target;200!=b.status&&0!=b.status||f.handleRespone(c,!0);});},c.prototype.open=function(c,l,b){var f=this,n=this.url+"/open";n+="?url="+l,n+="&sid="+b,f.send("GET",n,null,function(l){var b=l.target;200!=b.status&&0!=b.status||f.handleRespone(c,!0);});},c.prototype.source=function(c,l,b){var f=this,n=new FormData(),U=this.url+"/source";U+="?sid="+b,n.append("url",l.url),n.append("encoding",l.encoding),n.append("prefix",l.prefix),f.send("POST",U,n,function(l){var b=l.target;if(200==b.status||0===b.status){var n=b.response||b.responseText;f.handleRespone(c,n);}});},c.prototype.import=function(c,l,b){var f=this,n=new FormData(),U=this.url+"/import";U+="?sid="+b,n.append("path",l.path),n.append("move",l.move),f.send("POST",U,n,function(l){var b=l.target;200!=b.status&&0!==b.status||f.handleRespone(c,!0);});},c.prototype.send=function(c,l,b,f){var n=new ht.Request(),U={};U.url=encodeURI(l),U.method=c,U.data=b,f&&(n.onload=f),n.send(U);},c.prototype.handleRespone=function(c,l){var b=this.callbacks[c],f=this.cmds[c];delete this.callbacks[c],delete this.cmds[c],b&&b(l),this.handler({type:"response",message:f,cmd:f,data:l});},c;}();return console.log("HT Editor v"+eb+" powered by HT for Web v"+ht.Default.getVersion()+" from www.hightopo.com"),!window.onbeforeunload&&Gl.config.promptBeforeClosing&&(window.onbeforeunload=function(c){return c.returnValue=n("editor.closetip"),c.returnValue;}),Gl.version=eb,Gl.getString=n,Gl.stringifyFunction=L,Gl.parseFunction=I,Gl.createButton=Rc,Gl.createItem=Mc,Gl.layoutMainView=dc,Gl.msClass=S,Gl.initContext=d,Gl.getInput=zc,Gl.trimExtension=W,Gl.fileNameToDisplayName=V,Gl.isJSON=Uc,Gl.getter=Y,Gl.setter=D,Gl.snapshot=Pc,Gl.CodeEditor=pn,Gl.WebSocketService=Zn,Gl.HTTPService=an,Gl.createEditor=function(c){if(window.location.host.indexOf("hightopo")>=0){var l="https:"==document.location.protocol?"https://":"http://";document.write(unescape("%3Cdiv style='display:none'%3E%3Cspan id='cnzz_stat_icon_1000279011'%3E%3C/span%3E%3Cscript src='"+l+"s23.cnzz.com/z_stat.php%3Fid%3D1000279011%26show%3Dpic' type='text/javascript'%3E%3C/script%3E%3C/div%3E")),document.body.style.margin="0px",document.body.style.padding="0px";}c&&(ht.Default.isString(c)?c={container:c}:c.tagName&&c.appendChild&&(c={container:c})),c=c||{};var b=void 0,f=void 0===c.container?Gl.config.container:c.container;return null===f?b=null:f?ht.Default.isString(f)?b=document.getElementById(f):f.length?(b=ht.Default.createDiv(),b.style.left=f[0]+"px",b.style.top=f[1]+"px",b.style.width=f[2]+"px",b.style.height=f[3]+"px",document.body.appendChild(b)):b=f:b=document.body,c.$39$=b,new Bn(c);},Gl.init=function(){Gl.consts||(Xl(),ul(),jl());},Gl;}();